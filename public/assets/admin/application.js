// Underscore.js 1.1.4
// (c) 2011 Jeremy Ashkenas, DocumentCloud Inc.
// Underscore is freely distributable under the MIT license.
// Portions of Underscore are inspired or borrowed from Prototype,
// Oliver Steele's Functional, and John Resig's Micro-Templating.
// For all details and documentation:
// http://documentcloud.github.com/underscore
(function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=d.slice,g=d.unshift,h=e.toString,i=e.hasOwnProperty,j=d.forEach,k=d.map,l=d.reduce,m=d.reduceRight,n=d.filter,o=d.every,p=d.some,q=d.indexOf,r=d.lastIndexOf;e=Array.isArray;var s=Object.keys,t=function(a){return new y(a)};typeof module!="undefined"&&module.exports?(module.exports=t,t._=t):a._=t,t.VERSION="1.1.4";var u=t.each=t.forEach=function(a,b,d){if(a!=null)if(j&&a.forEach===j)a.forEach(b,d);else if(t.isNumber(a.length)){for(var e=0,f=a.length;e<f;e++)if(b.call(d,a[e],e,a)===c)break}else for(e in a)if(i.call(a,e)&&b.call(d,a[e],e,a)===c)break};t.map=function(a,b,c){var d=[];return a==null?d:k&&a.map===k?a.map(b,c):(u(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)},t.reduce=t.foldl=t.inject=function(a,b,c,d){var e=c!==void 0;a==null&&(a=[]);if(l&&a.reduce===l)return d&&(b=t.bind(b,d)),e?a.reduce(b,c):a.reduce(b);u(a,function(a,f,g){!e&&f===0?(c=a,e=!0):c=b.call(d,c,a,f,g)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},t.reduceRight=t.foldr=function(a,b,c,d){return a==null&&(a=[]),m&&a.reduceRight===m?(d&&(b=t.bind(b,d)),c!==void 0?a.reduceRight(b,c):a.reduceRight(b)):(a=(t.isArray(a)?a.slice():t.toArray(a)).reverse(),t.reduce(a,b,c,d))},t.find=t.detect=function(a,b,c){var d;return v(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},t.filter=t.select=function(a,b,c){var d=[];return a==null?d:n&&a.filter===n?a.filter(b,c):(u(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},t.reject=function(a,b,c){var d=[];return a==null?d:(u(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},t.every=t.all=function(a,b,d){b=b||t.identity;var e=!0;return a==null?e:o&&a.every===o?a.every(b,d):(u(a,function(a,f,g){if(!(e=e&&b.call(d,a,f,g)))return c}),e)};var v=t.some=t.any=function(a,b,d){b=b||t.identity;var e=!1;return a==null?e:p&&a.some===p?a.some(b,d):(u(a,function(a,f,g){if(e=b.call(d,a,f,g))return c}),e)};t.include=t.contains=function(a,b){var c=!1;return a==null?c:q&&a.indexOf===q?a.indexOf(b)!=-1:(v(a,function(a){if(c=a===b)return!0}),c)},t.invoke=function(a,b){var c=f.call(arguments,2);return t.map(a,function(a){return(b?a[b]:a).apply(a,c)})},t.pluck=function(a,b){return t.map(a,function(a){return a[b]})},t.max=function(a,b,c){if(!b&&t.isArray(a))return Math.max.apply(Math,a);var d={computed:-Infinity};return u(a,function(a,e,f){e=b?b.call(c,a,e,f):a,e>=d.computed&&(d={value:a,computed:e})}),d.value},t.min=function(a,b,c){if(!b&&t.isArray(a))return Math.min.apply(Math,a);var d={computed:Infinity};return u(a,function(a,e,f){e=b?b.call(c,a,e,f):a,e<d.computed&&(d={value:a,computed:e})}),d.value},t.sortBy=function(a,b,c){return t.pluck(t.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},t.sortedIndex=function(a,b,c){c=c||t.identity;for(var d=0,e=a.length;d<e;){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},t.toArray=function(a){return a?a.toArray?a.toArray():t.isArray(a)?a:t.isArguments(a)?f.call(a):t.values(a):[]},t.size=function(a){return t.toArray(a).length},t.first=t.head=function(a,b,c){return b&&!c?f.call(a,0,b):a[0]},t.rest=t.tail=function(a,b,c){return f.call(a,t.isUndefined(b)||c?1:b)},t.last=function(a){return a[a.length-1]},t.compact=function(a){return t.filter(a,function(a){return!!a})},t.flatten=function(a){return t.reduce(a,function(a,b){return t.isArray(b)?a.concat(t.flatten(b)):(a[a.length]=b,a)},[])},t.without=function(a){var b=f.call(arguments,1);return t.filter(a,function(a){return!t.include(b,a)})},t.uniq=t.unique=function(a,b){return t.reduce(a,function(a,c,d){if(0==d||(b===!0?t.last(a)!=c:!t.include(a,c)))a[a.length]=c;return a},[])},t.intersect=function(a){var b=f.call(arguments,1);return t.filter(t.uniq(a),function(a){return t.every(b,function(b){return t.indexOf(b,a)>=0})})},t.zip=function(){for(var a=f.call(arguments),b=t.max(t.pluck(a,"length")),c=Array(b),d=0;d<b;d++)c[d]=t.pluck(a,""+d);return c},t.indexOf=function(a,b,c){if(a==null)return-1;if(c)return c=t.sortedIndex(a,b),a[c]===b?c:-1;if(q&&a.indexOf===q)return a.indexOf(b);c=0;for(var d=a.length;c<d;c++)if(a[c]===b)return c;return-1},t.lastIndexOf=function(a,b){if(a==null)return-1;if(r&&a.lastIndexOf===r)return a.lastIndexOf(b);for(var c=a.length;c--;)if(a[c]===b)return c;return-1},t.range=function(a,b,c){var d=f.call(arguments),e=d.length<=1;a=e?0:d[0],b=e?d[0]:d[1],c=d[2]||1,d=Math.max(Math.ceil((b-a)/c),0),e=0;for(var g=Array(d);e<d;)g[e++]=a,a+=c;return g},t.bind=function(a,b){var c=f.call(arguments,2);return function(){return a.apply(b||{},c.concat(f.call(arguments)))}},t.bindAll=function(a){var b=f.call(arguments,1);return b.length==0&&(b=t.functions(a)),u(b,function(b){a[b]=t.bind(a[b],a)}),a},t.memoize=function(a,b){var c={};return b=b||t.identity,function(){var d=b.apply(this,arguments);return d in c?c[d]:c[d]=a.apply(this,arguments)}},t.delay=function(a,b){var c=f.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},t.defer=function(a){return t.delay.apply(t,[a,1].concat(f.call(arguments,1)))};var w=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,a.apply(e,f)};c&&clearTimeout(d);if(c||!d)d=setTimeout(g,b)}};t.throttle=function(a,b){return w(a,b,!1)},t.debounce=function(a,b){return w(a,b,!0)},t.wrap=function(a,b){return function(){var c=[a].concat(f.call(arguments));return b.apply(this,c)}},t.compose=function(){var a=f.call(arguments);return function(){for(var b=f.call(arguments),c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},t.keys=s||function(a){if(t.isArray(a))return t.range(0,a.length);var b=[],c;for(c in a)i.call(a,c)&&(b[b.length]=c);return b},t.values=function(a){return t.map(a,t.identity)},t.functions=t.methods=function(a){return t.filter(t.keys(a),function(b){return t.isFunction(a[b])}).sort()},t.extend=function(a){return u(f.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},t.clone=function(a){return t.isArray(a)?a.slice():t.extend({},a)},t.tap=function(a,b){return b(a),a},t.isEqual=function(a,b){if(a===b)return!0;var c=typeof a;if(c!=typeof b)return!1;if(a==b)return!0;if(!a&&b||a&&!b)return!1;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual)return a.isEqual(b);if(t.isDate(a)&&t.isDate(b))return a.getTime()===b.getTime();if(t.isNaN(a)&&t.isNaN(b))return!1;if(t.isRegExp(a)&&t.isRegExp(b))return a.source===b.source&&a.global===b.global&&a.ignoreCase===b.ignoreCase&&a.multiline===b.multiline;if(c!=="object")return!1;if(a.length&&a.length!==b.length)return!1;c=t.keys(a);var d=t.keys(b);if(c.length!=d.length)return!1;for(var e in a)if(!(e in b)||!t.isEqual(a[e],b[e]))return!1;return!0},t.isEmpty=function(a){if(t.isArray(a)||t.isString(a))return a.length===0;for(var b in a)if(i.call(a,b))return!1;return!0},t.isElement=function(a){return!!a&&a.nodeType==1},t.isArray=e||function(a){return h.call(a)==="[object Array]"},t.isArguments=function(a){return!!a&&!!i.call(a,"callee")},t.isFunction=function(a){return!!(a&&a.constructor&&a.call&&a.apply)},t.isString=function(a){return!!(a===""||a&&a.charCodeAt&&a.substr)},t.isNumber=function(a){return!!(a===0||a&&a.toExponential&&a.toFixed)},t.isNaN=function(a){return a!==a},t.isBoolean=function(a){return a===!0||a===!1},t.isDate=function(a){return!!(a&&a.getTimezoneOffset&&a.setUTCFullYear)},t.isRegExp=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},t.isNull=function(a){return a===null},t.isUndefined=function(a){return a===void 0},t.noConflict=function(){return a._=b,this},t.identity=function(a){return a},t.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},t.mixin=function(a){u(t.functions(a),function(b){A(b,t[b]=a[b])})};var x=0;t.uniqueId=function(a){var b=x++;return a?a+b:b},t.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},t.template=function(a,b){var c=t.templateSettings;return c="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",c=new Function("obj",c),b?c(b):c};var y=function(a){this._wrapped=a};t.prototype=y.prototype;var z=function(a,b){return b?t(a).chain():a},A=function(a,b){y.prototype[a]=function(){var a=f.call(arguments);return g.call(a,this._wrapped),z(b.apply(t,a),this._chain)}};t.mixin(t),u(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];y.prototype[a]=function(){return b.apply(this._wrapped,arguments),z(this._wrapped,this._chain)}}),u(["concat","join","slice"],function(a){var b=d[a];y.prototype[a]=function(){return z(b.apply(this._wrapped,arguments),this._chain)}}),y.prototype.chain=function(){return this._chain=!0,this},y.prototype.value=function(){return this._wrapped}})(),window.undefined=window.undefined,Ext={version:"3.3.1",versionDetail:{major:3,minor:3,patch:1}},Ext.apply=function(a,b,c){c&&Ext.apply(a,c);if(a&&b&&typeof b=="object")for(var d in b)a[d]=b[d];return a},function(){var a=0,b=Object.prototype.toString,c=navigator.userAgent.toLowerCase(),d=function(a){return a.test(c)},e=document,f=e.documentMode,g=e.compatMode=="CSS1Compat",h=d(/opera/),i=d(/\bchrome\b/),j=d(/webkit/),k=!i&&d(/safari/),l=k&&d(/applewebkit\/4/),m=k&&d(/version\/3/),n=k&&d(/version\/4/),o=!h&&d(/msie/),p=o&&(d(/msie 7/)||f==7),q=o&&d(/msie 8/)&&f!=7,r=o&&!p&&!q,s=!j&&d(/gecko/),t=s&&d(/rv:1\.8/),u=s&&d(/rv:1\.9/),v=o&&!g,w=d(/windows|win32/),x=d(/macintosh|mac os x/),y=d(/adobeair/),z=d(/linux/),A=/^https/i.test(window.location.protocol);if(r)try{e.execCommand("BackgroundImageCache",!1,!0)}catch(B){}Ext.apply(Ext,{SSL_SECURE_URL:A&&o?'javascript:""':"about:blank",isStrict:g,isSecure:A,isReady:!1,enableForcedBoxModel:!1,enableGarbageCollector:!0,enableListenerCollection:!1,enableNestedListenerRemoval:!1,USE_NATIVE_JSON:!1,applyIf:function(a,b){if(a)for(var c in b)Ext.isDefined(a[c])||(a[c]=b[c]);return a},id:function(b,c){return b=Ext.getDom(b,!0)||{},b.id||(b.id=(c||"ext-gen")+ ++a),b.id},extend:function(){var a=function(a){for(var b in a)this[b]=a[b]},b=Object.prototype.constructor;return function(c,d,e){typeof d=="object"&&(e=d,d=c,c=e.constructor!=b?e.constructor:function(){d.apply(this,arguments)});var f=function(){},g,h=d.prototype;return f.prototype=h,g=c.prototype=new f,g.constructor=c,c.superclass=h,h.constructor==b&&(h.constructor=d),c.override=function(a){Ext.override(c,a)},g.superclass=g.supr=function(){return h},g.override=a,Ext.override(c,e),c.extend=function(a){return Ext.extend(c,a)},c}}(),override:function(a,b){if(b){var c=a.prototype;Ext.apply(c,b),Ext.isIE&&b.hasOwnProperty("toString")&&(c.toString=b.toString)}},namespace:function(){var a,b;return Ext.each(arguments,function(c){b=c.split("."),a=window[b[0]]=window[b[0]]||{},Ext.each(b.slice(1),function(b){a=a[b]=a[b]||{}})}),a},urlEncode:function(a,b){var c,d=[],e=encodeURIComponent;return Ext.iterate(a,function(a,b){c=Ext.isEmpty(b),Ext.each(c?a:b,function(b){d.push("&",e(a),"=",!Ext.isEmpty(b)&&(b!=a||!c)?Ext.isDate(b)?Ext.encode(b).replace(/"/g,""):e(b):"")})}),b||(d.shift(),b=""),b+d.join("")},urlDecode:function(a,b){if(Ext.isEmpty(a))return{};var c={},d=a.split("&"),e=decodeURIComponent,f,g;return Ext.each(d,function(a){a=a.split("="),f=e(a[0]),g=e(a[1]),c[f]=b||!c[f]?g:[].concat(c[f]).concat(g)}),c},urlAppend:function(a,b){return Ext.isEmpty(b)?a:a+(a.indexOf("?")===-1?"?":"&")+b},toArray:function(){return o?function(a,b,c,d){d=[];for(var e=0,f=a.length;e<f;e++)d.push(a[e]);return d.slice(b||0,c||d.length)}:function(a,b,c){return Array.prototype.slice.call(a,b||0,c||a.length)}}(),isIterable:function(a){return Ext.isArray(a)||a.callee?!0:/NodeList|HTMLCollection/.test(b.call(a))?!0:(typeof a.nextNode!="undefined"||a.item)&&Ext.isNumber(a.length)},each:function(a,b,c){if(Ext.isEmpty(a,!0))return;if(!Ext.isIterable(a)||Ext.isPrimitive(a))a=[a];for(var d=0,e=a.length;d<e;d++)if(b.call(c||a[d],a[d],d,a)===!1)return d},iterate:function(a,b,c){if(Ext.isEmpty(a))return;if(Ext.isIterable(a)){Ext.each(a,b,c);return}if(typeof a=="object")for(var d in a)if(a.hasOwnProperty(d)&&b.call(c||a,d,a[d],a)===!1)return},getDom:function(a,b){if(!a||!e)return null;if(a.dom)return a.dom;if(typeof a=="string"){var c=e.getElementById(a);return c&&o&&b?a==c.getAttribute("id")?c:null:c}return a},getBody:function(){return Ext.get(e.body||e.documentElement)},getHead:function(){var a;return function(){return a==undefined&&(a=Ext.get(e.getElementsByTagName("head")[0])),a}}(),removeNode:o&&!q?function(){var a;return function(b){b&&b.tagName!="BODY"&&(Ext.enableNestedListenerRemoval?Ext.EventManager.purgeElement(b,!0):Ext.EventManager.removeAll(b),a=a||e.createElement("div"),a.appendChild(b),a.innerHTML="",delete Ext.elCache[b.id])}}():function(a){a&&a.parentNode&&a.tagName!="BODY"&&(Ext.enableNestedListenerRemoval?Ext.EventManager.purgeElement(a,!0):Ext.EventManager.removeAll(a),a.parentNode.removeChild(a),delete Ext.elCache[a.id])},isEmpty:function(a,b){return a===null||a===undefined||Ext.isArray(a)&&!a.length||(b?!1:a==="")},isArray:function(a){return b.apply(a)==="[object Array]"},isDate:function(a){return b.apply(a)==="[object Date]"},isObject:function(a){return!!a&&Object.prototype.toString.call(a)==="[object Object]"},isPrimitive:function(a){return Ext.isString(a)||Ext.isNumber(a)||Ext.isBoolean(a)},isFunction:function(a){return b.apply(a)==="[object Function]"},isNumber:function(a){return typeof a=="number"&&isFinite(a)},isString:function(a){return typeof a=="string"},isBoolean:function(a){return typeof a=="boolean"},isElement:function(a){return a?!!a.tagName:!1},isDefined:function(a){return typeof a!="undefined"},isOpera:h,isWebKit:j,isChrome:i,isSafari:k,isSafari3:m,isSafari4:n,isSafari2:l,isIE:o,isIE6:r,isIE7:p,isIE8:q,isGecko:s,isGecko2:t,isGecko3:u,isBorderBox:v,isLinux:z,isWindows:w,isMac:x,isAir:y}),Ext.ns=Ext.namespace}(),Ext.ns("Ext.util","Ext.lib","Ext.data","Ext.supports"),Ext.elCache={},Ext.apply(Function.prototype,{createInterceptor:function(a,b){var c=this;return Ext.isFunction(a)?function(){var d=this,e=arguments;return a.target=d,a.method=c,a.apply(b||d||window,e)!==!1?c.apply(d||window,e):null}:this},createCallback:function(){var a=arguments,b=this;return function(){return b.apply(window,a)}},createDelegate:function(a,b,c){var d=this;return function(){var e=b||arguments;if(c===!0)e=Array.prototype.slice.call(arguments,0),e=e.concat(b);else if(Ext.isNumber(c)){e=Array.prototype.slice.call(arguments,0);var f=[c,0].concat(b);Array.prototype.splice.apply(e,f)}return d.apply(a||window,e)}},defer:function(a,b,c,d){var e=this.createDelegate(b,c,d);return a>0?setTimeout(e,a):(e(),0)}}),Ext.applyIf(String,{format:function(a){var b=Ext.toArray(arguments,1);return a.replace(/\{(\d+)\}/g,function(a,c){return b[c]})}}),Ext.applyIf(Array.prototype,{indexOf:function(a,b){var c=this.length;b=b||0,b+=b<0?c:0;for(;b<c;++b)if(this[b]===a)return b;return-1},remove:function(a){var b=this.indexOf(a);return b!=-1&&this.splice(b,1),this}}),Ext.util.TaskRunner=function(a){a=a||10;var b=[],c=[],d=0,e=!1,f=function(){e=!1,clearInterval(d),d=0},g=function(){e||(e=!0,d=setInterval(i,a))},h=function(a){c.push(a),a.onStop&&a.onStop.apply(a.scope||a)},i=function(){var a=c.length,d=(new Date).getTime();if(a>0){for(var e=0;e<a;e++)b.remove(c[e]);c=[];if(b.length<1){f();return}}for(var e=0,g,i,j,k=b.length;e<k;++e){g=b[e],i=d-g.taskRunTime;if(g.interval<=i){j=g.run.apply(g.scope||g,g.args||[++g.taskRunCount]),g.taskRunTime=d;if(j===!1||g.taskRunCount===g.repeat){h(g);return}}g.duration&&g.duration<=d-g.taskStartTime&&h(g)}};this.start=function(a){return b.push(a),a.taskStartTime=(new Date).getTime(),a.taskRunTime=0,a.taskRunCount=0,g(),a},this.stop=function(a){return h(a),a},this.stopAll=function(){f();for(var a=0,d=b.length;a<d;a++)b[a].onStop&&b[a].onStop();b=[],c=[]}},Ext.TaskMgr=new Ext.util.TaskRunner,function(){function b(b){return a||(a=new Ext.Element.Flyweight),a.dom=b,a}var a;(function(){var a=document,c=a.compatMode=="CSS1Compat",d=Math.max,e=Math.round,f=parseInt;Ext.lib.Dom={isAncestor:function(a,b){var c=!1;a=Ext.getDom(a),b=Ext.getDom(b);if(a&&b){if(a.contains)return a.contains(b);if(a.compareDocumentPosition)return!!(a.compareDocumentPosition(b)&16);while(b=b.parentNode)c=b==a||c}return c},getViewWidth:function(a){return a?this.getDocumentWidth():this.getViewportWidth()},getViewHeight:function(a){return a?this.getDocumentHeight():this.getViewportHeight()},getDocumentHeight:function(){return d(c?a.documentElement.scrollHeight:a.body.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return d(c?a.documentElement.scrollWidth:a.body.scrollWidth,this.getViewportWidth())},getViewportHeight:function(){return Ext.isIE?Ext.isStrict?a.documentElement.clientHeight:a.body.clientHeight:self.innerHeight},getViewportWidth:function(){return!Ext.isStrict&&!Ext.isOpera?a.body.clientWidth:Ext.isIE?a.documentElement.clientWidth:self.innerWidth},getY:function(a){return this.getXY(a)[1]},getX:function(a){return this.getXY(a)[0]},getXY:function(c){var d,i,j,k,l,m,n=0,o=0,p,q,r=a.body||a.documentElement,s=[0,0];c=Ext.getDom(c);if(c!=r)if(c.getBoundingClientRect)j=c.getBoundingClientRect(),p=b(document).getScroll(),s=[e(j.left+p.left),e(j.top+p.top)];else{d=c,q=b(c).isStyle("position","absolute");while(d)i=b(d),n+=d.offsetLeft,o+=d.offsetTop,q=q||i.isStyle("position","absolute"),Ext.isGecko&&(o+=k=f(i.getStyle("borderTopWidth"),10)||0,n+=l=f(i.getStyle("borderLeftWidth"),10)||0,d!=c&&!i.isStyle("overflow","visible")&&(n+=l,o+=k)),d=d.offsetParent;Ext.isSafari&&q&&(n-=r.offsetLeft,o-=r.offsetTop),Ext.isGecko&&!q&&(m=b(r),n+=f(m.getStyle("borderLeftWidth"),10)||0,o+=f(m.getStyle("borderTopWidth"),10)||0),d=c.parentNode;while(d&&d!=r){if(!Ext.isOpera||d.tagName!="TR"&&!b(d).isStyle("display","inline"))n-=d.scrollLeft,o-=d.scrollTop;d=d.parentNode}s=[n,o]}return s},setXY:function(a,b){(a=Ext.fly(a,"_setXY")).position();var c=a.translatePoints(b),d=a.dom.style,e;for(e in c)isNaN(c[e])||(d[e]=c[e]+"px")},setX:function(a,b){this.setXY(a,[b,!1])},setY:function(a,b){this.setXY(a,[!1,b])}}})(),Ext.lib.Event=function(){function v(a){return!w(a.currentTarget,B.getRelatedTarget(a))}function w(a,b){if(a&&a.firstChild)while(b){if(b===a)return!0;b=b.parentNode,b&&b.nodeType!=1&&(b=null)}return!1}function x(){var b=!1,g=[],i,j,k,l,m=!a||c>0;if(!f){f=!0;for(j=0;j<d.length;++j)k=d[j],k&&(i=h.getElementById(k.id))&&(!k.checkReady||a||i.nextSibling||h&&h.body?(l=k.override,i=l?l===!0?k.obj:l:i,k.fn.call(i,k.obj),d.remove(k),--j):g.push(k));c=g.length===0?0:c-1,m?y():(clearInterval(e),e=null),b=!(f=!1)}return b}function y(){if(!e){var a=function(){x()};e=setInterval(a,j)}}function z(){var a=h.documentElement,b=h.body;return a&&(a[p]||a[o])?[a[o],a[p]]:b?[b[o],b[p]]:[0,0]}function A(a,b){a=a.browserEvent||a;var c=a["page"+b];return!c&&c!==0&&(c=a["client"+b]||0,Ext.isIE&&(c+=z()[b=="X"?0:1])),c}var a=!1,b={},c=0,d=[],e,f=!1,g=window,h=document,i=200,j=20,k=0,l=1,m=2,n=3,o="scrollLeft",p="scrollTop",q="unload",r="mouseover",s="mouseout",t=function(){var a;return g.addEventListener?a=function(a,b,c,d){return b=="mouseenter"?(c=c.createInterceptor(v),a.addEventListener(r,c,d)):b=="mouseleave"?(c=c.createInterceptor(v),a.addEventListener(s,c,d)):a.addEventListener(b,c,d),c}:g.attachEvent?a=function(a,b,c,d){return a.attachEvent("on"+b,c),c}:a=function(){},a}(),u=function(){var a;return g.removeEventListener?a=function(a,b,c,d){b=="mouseenter"?b=r:b=="mouseleave"&&(b=s),a.removeEventListener(b,c,d)}:g.detachEvent?a=function(a,b,c){a.detachEvent("on"+b,c)}:a=function(){},a}(),B={extAdapter:!0,onAvailable:function(a,b,e,f){d.push({id:a,fn:b,obj:e,override:f,checkReady:!1}),c=i,y()},addListener:function(a,c,d){return a=Ext.getDom(a),a&&d?c==q?(b[a.id]===undefined&&(b[a.id]=[]),b[a.id].push([c,d]),d):t(a,c,d,!1):!1},removeListener:function(a,c,d){a=Ext.getDom(a);var e,f,g,h;if(a&&d){if(c==q){if((h=b[a.id])!==undefined)for(e=0,f=h.length;e<f;e++)(g=h[e])&&g[k]==c&&g[l]==d&&b[a.id].splice(e,1);return}u(a,c,d,!1)}},getTarget:function(a){return a=a.browserEvent||a,this.resolveTextNode(a.target||a.srcElement)},resolveTextNode:Ext.isGecko?function(a){if(!a)return;var b=HTMLElement.prototype.toString.call(a);if(b=="[xpconnect wrapped native prototype]"||b=="[object XULElement]")return;return a.nodeType==3?a.parentNode:a}:function(a){return a&&a.nodeType==3?a.parentNode:a},getRelatedTarget:function(a){return a=a.browserEvent||a,this.resolveTextNode(a.relatedTarget||(/(mouseout|mouseleave)/.test(a.type)?a.toElement:/(mouseover|mouseenter)/.test(a.type)?a.fromElement:null))},getPageX:function(a){return A(a,"X")},getPageY:function(a){return A(a,"Y")},getXY:function(a){return[this.getPageX(a),this.getPageY(a)]},stopEvent:function(a){this.stopPropagation(a),this.preventDefault(a)},stopPropagation:function(a){a=a.browserEvent||a,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},preventDefault:function(a){a=a.browserEvent||a,a.preventDefault?a.preventDefault():a.returnValue=!1},getEvent:function(a){a=a||g.event;if(!a){var b=this.getEvent.caller;while(b){a=b.arguments[0];if(a&&Event==a.constructor)break;b=b.caller}}return a},getCharCode:function(a){return a=a.browserEvent||a,a.charCode||a.keyCode||0},getListeners:function(a,b){Ext.EventManager.getListeners(a,b)},purgeElement:function(a,b,c){Ext.EventManager.purgeElement(a,b,c)},_load:function(b){a=!0,Ext.isIE&&b!==!0&&u(g,"load",arguments.callee)},_unload:function(a){var c=Ext.lib.Event,d,e,f,h,i,j;for(h in b){f=b[h];for(d=0,i=f.length;d<i;d++){e=f[d];if(e)try{j=e[n]?e[n]===!0?e[m]:e[n]:g,e[l].call(j,c.getEvent(a),e[m])}catch(k){}}}Ext.EventManager._unload(),u(g,q,c._unload)}};return B.on=B.addListener,B.un=B.removeListener,h&&h.body?B._load(!0):t(g,"load",B._load),t(g,q,B._unload),x(),B}(),Ext.lib.Ajax=function(){function c(a){function e(a,b){for(c in b)b.hasOwnProperty(c)&&a.setRequestHeader(c,b[c])}var b=a.conn,c,d={};Ext.apply(d,o.headers,o.defaultHeaders),e(b,d),delete o.headers}function d(a,b,c,d){return{tId:a,status:c?-1:0,statusText:c?"transaction aborted":"communication failure",isAbort:c,isTimeout:d,argument:b}}function e(a,b){(o.headers=o.headers||{})[a]=b}function f(a,b){var c={},d,e=a.conn,f,g,h=e.status==1223;try{d=a.conn.getAllResponseHeaders(),Ext.each(d.replace(/\r\n/g,"\n").split("\n"),function(a){f=a.indexOf(":"),f>=0&&(g=a.substr(0,f).toLowerCase(),a.charAt(f+1)==" "&&++f,c[g]=a.substr(f+1))})}catch(i){}return{tId:a.tId,status:h?204:e.status,statusText:h?"No Content":e.statusText,getResponseHeader:function(a){return c[a.toLowerCase()]},getAllResponseHeaders:function(){return d},responseText:e.responseText,responseXML:e.responseXML,argument:b}}function g(a){a.tId&&(o.conn[a.tId]=null),a.conn=null,a=null}function h(a,b,c,e){if(!b){g(a);return}var h,i;try{a.conn.status!==undefined&&a.conn.status!=0?h=a.conn.status:h=13030}catch(j){h=13030}if(h>=200&&h<300||Ext.isIE&&h==1223)i=f(a,b.argument),b.success&&(b.scope?b.success.apply(b.scope,[i]):b.success(i));else switch(h){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:i=d(a.tId,b.argument,c?c:!1,e),b.failure&&(b.scope?b.failure.apply(b.scope,[i]):b.failure(i));break;default:i=f(a,b.argument),b.failure&&(b.scope?b.failure.apply(b.scope,[i]):b.failure(i))}g(a),i=null}function i(a,b,c,d,e,f){c&&c.readyState==4&&(clearInterval(e[d]),e[d]=null,f&&(clearTimeout(o.timeout[d]),o.timeout[d]=null),h(a,b))}function j(a,b){o.abort(a,b,!0)}function k(a,b){b=b||{};var c=a.conn,d=a.tId,e=o.poll,f=b.timeout||null;f&&(o.conn[d]=c,o.timeout[d]=setTimeout(j.createCallback(a,b),f)),e[d]=setInterval(i.createCallback(a,b,c,d,e,f),o.pollInterval)}function l(a,d,f,g){var h=m()||null;return h&&(h.conn.open(a,d,!0),o.useDefaultXhrHeader&&e("X-Requested-With",o.defaultXhrHeader),g&&o.useDefaultHeader&&(!o.headers||!o.headers[b])&&e(b,o.defaultPostHeader),(o.defaultHeaders||o.headers)&&c(h),k(h,f),h.conn.send(g||null)),h}function m(){var a;try{(a=n(o.transactionId))&&o.transactionId++}catch(b){}finally{return a}}function n(b){var c;try{c=new XMLHttpRequest}catch(d){for(var e=0;e<a.length;++e)try{c=new ActiveXObject(a[e]);break}catch(d){}}finally{return{conn:c,tId:b}}}var a=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP"],b="Content-Type",o={request:function(a,c,d,f,g){if(g){var h=this,i=g.xmlData,j=g.jsonData,k;Ext.applyIf(h,g);if(i||j)k=h.headers,(!k||!k[b])&&e(b,i?"text/xml":"application/json"),f=i||(Ext.isPrimitive(j)?j:Ext.encode(j))}return l(a||g.method||"POST",c,d,f)},serializeForm:function(a){var b=a.elements||(document.forms[a]||Ext.getDom(a)).elements,c=!1,d=encodeURIComponent,e,f="",g,h;return Ext.each(b,function(a){e=a.name,g=a.type,!a.disabled&&e&&(/select-(one|multiple)/i.test(g)?Ext.each(a.options,function(a){a.selected&&(h=a.hasAttribute?a.hasAttribute("value"):a.getAttributeNode("value").specified,f+=String.format("{0}={1}&",d(e),d(h?a.value:a.text)))}):/file|undefined|reset|button/i.test(g)||(!/radio|checkbox/i.test(g)||!!a.checked)&&(g!="submit"||!c)&&(f+=d(e)+"="+d(a.value)+"&",c=/submit/i.test(g)))}),f.substr(0,f.length-1)},useDefaultHeader:!0,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:!0,defaultXhrHeader:"XMLHttpRequest",poll:{},timeout:{},conn:{},pollInterval:50,transactionId:0,abort:function(a,b,c){var d=this,e=a.tId,f=!1;return d.isCallInProgress(a)&&(a.conn.abort(),clearInterval(d.poll[e]),d.poll[e]=null,clearTimeout(o.timeout[e]),d.timeout[e]=null,h(a,b,f=!0,c)),f},isCallInProgress:function(a){return a.conn&&!{0:!0,4:!0}[a.conn.readyState]}};return o}(),function(){var a=Ext.lib,b=/width|height|opacity|padding/i,c=/^((width|height)|(top|left))$/,d=/width|height|top$|bottom$|left$|right$/i,e=/\d+(em|%|en|ex|pt|in|cm|mm|pc)$/i,f=function(a){return typeof a!="undefined"},g=function(){return new Date};a.Anim={motion:function(a,b,c,d,e,f){return this.run(a,b,c,d,e,f,Ext.lib.Motion)},run:function(a,b,c,d,e,f,g){g=g||Ext.lib.AnimBase,typeof d=="string"&&(d=Ext.lib.Easing[d]);var h=new g(a,b,c,d);return h.animateX(function(){Ext.isFunction(e)&&e.call(f)}),h}},a.AnimBase=function(a,b,c,d){a&&this.init(a,b,c,d)},a.AnimBase.prototype={doMethod:function(a,b,c){var d=this;return d.method(d.curFrame,b,c-b,d.totalFrames)},setAttr:function(a,c,d){b.test(a)&&c<0&&(c=0),Ext.fly(this.el,"_anim").setStyle(a,c+d)},getAttr:function(a){var b=Ext.fly(this.el),d=b.getStyle(a),f=c.exec(a)||[];return d!=="auto"&&!e.test(d)?parseFloat(d):!!f[2]||b.getStyle("position")=="absolute"&&!!f[3]?b.dom["offset"+f[0].charAt(0).toUpperCase()+f[0].substr(1)]:0},getDefaultUnit:function(a){return d.test(a)?"px":""},animateX:function(a,b){var c=this,d=function(){c.onComplete.removeListener(d),Ext.isFunction(a)&&a.call(b||c,c)};c.onComplete.addListener(d,c),c.animate()},setRunAttr:function(a){var b=this,c=this.attributes[a],d=c.to,e=c.by,g=c.from,h=c.unit,i=this.runAttrs[a]={},k;if(!f(d)&&!f(e))return!1;var l=f(g)?g:b.getAttr(a);if(f(d))k=d;else if(f(e))if(Ext.isArray(l)){k=[];for(var m=0,n=l.length;m<n;m++)k[m]=l[m]+e[m]}else k=l+e;Ext.apply(i,{start:l,end:k,unit:f(h)?h:b.getDefaultUnit(a)})},init:function(b,c,d,e){var f=this,h=0,i=a.AnimMgr;Ext.apply(f,{isAnimated:!1,startTime:null,el:Ext.getDom(b),attributes:c||{},duration:d||1,method:e||a.Easing.easeNone,useSec:!0,curFrame:0,totalFrames:i.fps,runAttrs:{},animate:function(){var a=this,b=a.duration;if(a.isAnimated)return!1;a.curFrame=0,a.totalFrames=a.useSec?Math.ceil(i.fps*b):b,i.registerElement(a)},stop:function(a){var b=this;a&&(b.curFrame=b.totalFrames,b._onTween.fire()),i.stop(b)}});var j=function(){var a=this,b;a.onStart.fire(),a.runAttrs={};for(b in this.attributes)this.setRunAttr(b);a.isAnimated=!0,a.startTime=g(),h=0},k=function(){var a=this;a.onTween.fire({duration:g()-a.startTime,curFrame:a.curFrame});var b=a.runAttrs;for(var c in b)this.setAttr(c,a.doMethod(c,b[c].start,b[c].end),b[c].unit);++h},l=function(){var a=this,b=(g()-a.startTime)/1e3,c={duration:b,frames:h,fps:h/b};a.isAnimated=!1,h=0,a.onComplete.fire(c)};f.onStart=new Ext.util.Event(f),f.onTween=new Ext.util.Event(f),f.onComplete=new Ext.util.Event(f),(f._onStart=new Ext.util.Event(f)).addListener(j),(f._onTween=new Ext.util.Event(f)).addListener(k),(f._onComplete=new Ext.util.Event(f)).addListener(l)}},Ext.lib.AnimMgr=new function(){var a=this,b=null,c=[],d=0;Ext.apply(a,{fps:1e3,delay:1,registerElement:function(b){c.push(b),++d,b._onStart.fire(),a.start()},unRegister:function(b,f){b._onComplete.fire(),f=f||e(b),f!=-1&&c.splice(f,1),--d<=0&&a.stop()},start:function(){b===null&&(b=setInterval(a.run,a.delay))},stop:function(e){if(!e){clearInterval(b);for(var f=0,g=c.length;f<g;++f)c[0].isAnimated&&a.unRegister(c[0],0);c=[],b=null,d=0}else a.unRegister(e)},run:function(){var b,d,e,g;for(d=0,e=c.length;d<e;d++)g=c[d],g&&g.isAnimated&&(b=g.totalFrames,g.curFrame<b||b===null?(++g.curFrame,g.useSec&&f(g),g._onTween.fire()):a.stop(g))}});var e=function(a){var b,d;for(b=0,d=c.length;b<d;b++)if(c[b]===a)return b;return-1},f=function(a){var b=a.totalFrames,c=a.curFrame,d=a.duration,e=c*d*1e3/b,f=g()-a.startTime,h=0;f<d*1e3?h=Math.round((f/e-1)*c):h=b-(c+1),h>0&&isFinite(h)&&(a.curFrame+h>=b&&(h=b-(c+1)),a.curFrame+=h)}},a.Bezier=new function(){this.getPosition=function(a,b){var c=a.length,d=[],e=1-b,f,g;for(f=0;f<c;++f)d[f]=[a[f][0],a[f][1]];for(g=1;g<c;++g)for(f=0;f<c-g;++f)d[f][0]=e*d[f][0]+b*d[parseInt(f+1,10)][0],d[f][1]=e*d[f][1]+b*d[parseInt(f+1,10)][1];return[d[0][0],d[0][1]]}},a.Easing={easeNone:function(a,b,c,d){return c*a/d+b},easeIn:function(a,b,c,d){return c*(a/=d)*a+b},easeOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b}},function(){a.Motion=function(b,c,d,e){b&&a.Motion.superclass.constructor.call(this,b,c,d,e)},Ext.extend(a.Motion,Ext.lib.AnimBase);var b=a.Motion.superclass,c=/^points$/i;Ext.apply(a.Motion.prototype,{setAttr:function(a,d,e){var f=this,g=b.setAttr;c.test(a)?(e=e||"px",g.call(f,"left",d[0],e),g.call(f,"top",d[1],e)):g.call(f,a,d,e)},getAttr:function(a){var d=this,e=b.getAttr;return c.test(a)?[e.call(d,"left"),e.call(d,"top")]:e.call(d,a)},doMethod:function(d,e,f){var g=this;return c.test(d)?a.Bezier.getPosition(g.runAttrs[d],g.method(g.curFrame,0,100,g.totalFrames)/100):b.doMethod.call(g,d,e,f)},setRunAttr:function(e){if(c.test(e)){var g=this,h=this.el,i=this.attributes.points,n=i.control||[],o=i.from,p=i.to,q=i.by,r=a.Dom,s,t,u,v,w;n.length>0&&!Ext.isArray(n[0])&&(n=[n]),Ext.fly(h,"_anim").position(),r.setXY(h,f(o)?o:r.getXY(h)),s=g.getAttr("points");if(f(p)){u=d.call(g,p,s);for(t=0,v=n.length;t<v;++t)n[t]=d.call(g,n[t],s)}else if(f(q)){u=[s[0]+q[0],s[1]+q[1]];for(t=0,v=n.length;t<v;++t)n[t]=[s[0]+n[t][0],s[1]+n[t][1]]}w=this.runAttrs[e]=[s],n.length>0&&(w=w.concat(n)),w[w.length]=u}else b.setRunAttr.call(this,e)}});var d=function(b,c){var d=a.Dom.getXY(this.el);return[b[0]-d[0]+c[0],b[1]-d[1]+c[1]]}}()}(),function(){var a=Math.abs,b=Math.PI,c=Math.asin,d=Math.pow,e=Math.sin,f=Ext.lib;Ext.apply(f.Easing,{easeBoth:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInStrong:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOutStrong:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeBothStrong:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},elasticIn:function(f,j,k,l,m,n){if(f==0||(f/=l)==1)return f==0?j:j+k;n=n||l*.3;var o;return m>=a(k)?o=n/(2*b)*c(k/m):(m=k,o=n/4),-(m*d(2,10*(f-=1))*e((f*l-o)*2*b/n))+j},elasticOut:function(f,j,k,l,m,n){if(f==0||(f/=l)==1)return f==0?j:j+k;n=n||l*.3;var o;return m>=a(k)?o=n/(2*b)*c(k/m):(m=k,o=n/4),m*d(2,-10*f)*e((f*l-o)*2*b/n)+k+j},elasticBoth:function(f,j,k,l,m,n){if(f==0||(f/=l/2)==2)return f==0?j:j+k;n=n||l*.3*1.5;var o;return m>=a(k)?o=n/(2*b)*c(k/m):(m=k,o=n/4),f<1?-0.5*m*d(2,10*(f-=1))*e((f*l-o)*2*b/n)+j:m*d(2,-10*(f-=1))*e((f*l-o)*2*b/n)*.5+k+j},backIn:function(a,b,c,d,e){return e=e||1.70158,c*(a/=d)*a*((e+1)*a-e)+b},backOut:function(a,b,c,d,e){return e||(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},backBoth:function(a,b,c,d,e){return e=e||1.70158,(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},bounceIn:function(a,b,c,d){return c-f.Easing.bounceOut(d-a,0,c,d)+b},bounceOut:function(a,b,c,d){return(a/=d
)<1/2.75?c*7.5625*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},bounceBoth:function(a,b,c,d){return a<d/2?f.Easing.bounceIn(a*2,0,c,d)*.5+b:f.Easing.bounceOut(a*2-d,0,c,d)*.5+c*.5+b}})}(),function(){function i(a){var b=parseInt,c,d=null,h;return a.length==3?a:(Ext.each([f,e,g],function(e,f){c=f%2==0?16:10,h=e.exec(a);if(h&&h.length==4)return d=[b(h[1],c),b(h[2],c),b(h[3],c)],!1}),d)}var a=Ext.lib;a.Anim.color=function(b,c,d,e,f,g){return a.Anim.run(b,c,d,e,f,g,a.ColorAnim)},a.ColorAnim=function(b,c,d,e){a.ColorAnim.superclass.constructor.call(this,b,c,d,e)},Ext.extend(a.ColorAnim,a.AnimBase);var b=a.ColorAnim.superclass,c=/color$/i,d=/^transparent|rgba\(0, 0, 0, 0\)$/,e=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,f=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,g=/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,h=function(a){return typeof a!="undefined"};Ext.apply(a.ColorAnim.prototype,{getAttr:function(a){var e=this,f=e.el,g;if(c.test(a))while(f&&d.test(g=Ext.fly(f).getStyle(a)))f=f.parentNode,g="fff";else g=b.getAttr.call(e,a);return g},doMethod:function(a,d,e){var f=this,g,h=Math.floor,i,k,l;if(c.test(a)){g=[],e=e||[];for(i=0,k=d.length;i<k;i++)l=d[i],g[i]=b.doMethod.call(f,a,l,e[i]);g="rgb("+h(g[0])+","+h(g[1])+","+h(g[2])+")"}else g=b.doMethod.call(f,a,d,e);return g},setRunAttr:function(a){var d=this,e=d.attributes[a],f=e.to,g=e.by,l;b.setRunAttr.call(d,a),l=d.runAttrs[a];if(c.test(a)){var m=i(l.start),n=i(l.end);if(!h(f)&&h(g)){n=i(g);for(var o=0,p=m.length;o<p;o++)n[o]=m[o]+n[o]}l.start=m,l.end=n}}})}(),function(){var a=Ext.lib;a.Anim.scroll=function(b,c,e,f,g,h){return a.Anim.run(b,c,e,f,g,h,a.Scroll)},a.Scroll=function(b,c,e,f){b&&a.Scroll.superclass.constructor.call(this,b,c,e,f)},Ext.extend(a.Scroll,a.ColorAnim);var b=a.Scroll.superclass,c="scroll";Ext.apply(a.Scroll.prototype,{doMethod:function(a,d,g){var h,i=this,j=i.curFrame,k=i.totalFrames;return a==c?h=[i.method(j,d[0],g[0]-d[0],k),i.method(j,d[1],g[1]-d[1],k)]:h=b.doMethod.call(i,a,d,g),h},getAttr:function(a){var d=this;return a==c?[d.el.scrollLeft,d.el.scrollTop]:b.getAttr.call(d,a)},setAttr:function(a,d,g){var h=this;a==c?(h.el.scrollLeft=d[0],h.el.scrollTop=d[1]):b.setAttr.call(h,a,d,g)}})}();if(Ext.isIE){function c(){var a=Function.prototype;delete a.createSequence,delete a.defer,delete a.createDelegate,delete a.createCallback,delete a.createInterceptor,window.detachEvent("onunload",c)}window.attachEvent("onunload",c)}}(),function(){function f(a,b,c){return function(){b.target==arguments[0]&&a.apply(c,Array.prototype.slice.call(arguments,0))}}function g(b,c,d,e){return d.task=new a.DelayedTask,function(){d.task.delay(c.buffer,b,e,Array.prototype.slice.call(arguments,0))}}function h(a,b,c,d){return function(){return b.removeListener(c,d),a.apply(d,arguments)}}function i(b,c,d,e){return function(){var f=new a.DelayedTask,g=Array.prototype.slice.call(arguments,0);d.tasks||(d.tasks=[]),d.tasks.push(f),f.delay(c.delay||10,function(){d.tasks.remove(f),b.apply(e,g)},e)}}var a=Ext.util,b=Ext.each,c=!0,d=!1;a.Observable=function(){var a=this,b=a.events;a.listeners&&(a.on(a.listeners),delete a.listeners),a.events=b||{}},a.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var a=Array.prototype.slice.call(arguments,0),b=a[0].toLowerCase(),e=this,f=c,g=e.events[b],h,i,j;if(e.eventsSuspended===c)(i=e.eventQueue)&&i.push(a);else if(typeof g=="object")if(g.bubble){if(g.fire.apply(g,a.slice(1))===d)return d;j=e.getBubbleTarget&&e.getBubbleTarget();if(j&&j.enableBubble)return h=j.events[b],(!h||typeof h!="object"||!h.bubble)&&j.enableBubble(b),j.fireEvent.apply(j,a)}else a.shift(),f=g.fire.apply(g,a);return f},addListener:function(b,d,e,f){var g=this,h,i,j;if(typeof b=="object"){f=b;for(h in f)i=f[h],g.filterOptRe.test(h)||g.addListener(h,i.fn||i,i.scope||f.scope,i.fn?i:f)}else b=b.toLowerCase(),j=g.events[b]||c,typeof j=="boolean"&&(g.events[b]=j=new a.Event(g,b)),j.addListener(d,e,typeof f=="object"?f:{})},removeListener:function(a,b,c){var d=this.events[a.toLowerCase()];typeof d=="object"&&d.removeListener(b,c)},purgeListeners:function(){var a=this.events,b,c;for(c in a)b=a[c],typeof b=="object"&&b.clearListeners()},addEvents:function(a){var b=this;b.events=b.events||{};if(typeof a=="string"){var d=arguments,e=d.length;while(e--)b.events[d[e]]=b.events[d[e]]||c}else Ext.applyIf(b.events,a)},hasListener:function(a){var b=this.events[a.toLowerCase()];return typeof b=="object"&&b.listeners.length>0},suspendEvents:function(a){this.eventsSuspended=c,a&&!this.eventQueue&&(this.eventQueue=[])},resumeEvents:function(){var a=this,c=a.eventQueue||[];a.eventsSuspended=d,delete a.eventQueue,b(c,function(b){a.fireEvent.apply(a,b)})}};var e=a.Observable.prototype;e.on=e.addListener,e.un=e.removeListener,a.Observable.releaseCapture=function(a){a.fireEvent=e.fireEvent},a.Event=function(a,b){this.name=b,this.obj=a,this.listeners=[]},a.Event.prototype={addListener:function(a,b,c){var d=this,e;b=b||d.obj,d.isListening(a,b)||(e=d.createListener(a,b,c),d.firing&&(d.listeners=d.listeners.slice(0)),d.listeners.push(e))},createListener:function(a,b,c){c=c||{},b=b||this.obj;var d={fn:a,scope:b,options:c},e=a;return c.target&&(e=f(e,c,b)),c.delay&&(e=i(e,c,d,b)),c.single&&(e=h(e,this,a,b)),c.buffer&&(e=g(e,c,d,b)),d.fireFn=e,d},findListener:function(a,b){var c=this.listeners,d=c.length,e;b=b||this.obj;while(d--){e=c[d];if(e&&e.fn==a&&e.scope==b)return d}return-1},isListening:function(a,b){return this.findListener(a,b)!=-1},removeListener:function(a,b){var e,f,g,h=this,i=d;if((e=h.findListener(a,b))!=-1){h.firing&&(h.listeners=h.listeners.slice(0)),f=h.listeners[e],f.task&&(f.task.cancel(),delete f.task),g=f.tasks&&f.tasks.length;if(g){while(g--)f.tasks[g].cancel();delete f.tasks}h.listeners.splice(e,1),i=c}return i},clearListeners:function(){var a=this,b=a.listeners,c=b.length;while(c--)a.removeListener(b[c].fn,b[c].scope)},fire:function(){var a=this,b=a.listeners,e=b.length,f=0,g;if(e>0){a.firing=c;var h=Array.prototype.slice.call(arguments,0);for(;f<e;f++){g=b[f];if(g&&g.fireFn.apply(g.scope||a.obj||window,h)===d)return a.firing=d}}return a.firing=d,c}}}(),Ext.DomHelper=function(){function s(a,b,c,d,e,f){var g=h.insertHtml(d,Ext.getDom(a),t(b));return c?Ext.get(g,!0):g}function t(a){var c="",e,f,g,h;if(typeof a=="string")c=a;else if(Ext.isArray(a))for(var i=0;i<a.length;i++)a[i]&&(c+=t(a[i]));else{c+="<"+(a.tag=a.tag||"div");for(e in a){f=a[e];if(!d.test(e))if(typeof f=="object"){c+=" "+e+'="';for(g in f)c+=g+":"+f[g]+";";c+='"'}else c+=" "+({cls:"class",htmlFor:"for"}[e]||e)+'="'+f+'"'}b.test(a.tag)?c+="/>":(c+=">",(h=a.children||a.cn)?c+=t(h):a.html&&(c+=a.html),c+="</"+a.tag+">")}return c}function u(b,c,d,e){a.innerHTML=[c,d,e].join("");var f=-1,g=a,h;while(++f<b)g=g.firstChild;if(h=g.nextSibling){var i=document.createDocumentFragment();while(g)h=g.nextSibling,i.appendChild(g),g=h;g=i}return g}function v(b,c,d,f){var g,h;a=a||document.createElement("div");if(b=="td"&&(c==i||c==l)||!e.test(b)&&(c==k||c==j))return;h=c==k?d:c==j?d.nextSibling:c==i?d.firstChild:null;if(c==k||c==j)d=d.parentNode;return b=="td"||b=="tr"&&(c==l||c==i)?g=u(4,q,f,r):b=="tbody"&&(c==l||c==i)||b=="tr"&&(c==k||c==j)?g=u(3,o,f,p):g=u(2,m,f,n),d.insertBefore(g,h),g}var a=null,b=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,c=/^table|tbody|tr|td$/i,d=/tag|children|cn|html$/i,e=/td|tr|tbody/i,f=/([a-z0-9-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,g=/end/i,h,i="afterbegin",j="afterend",k="beforebegin",l="beforeend",m="<table>",n="</table>",o=m+"<tbody>",p="</tbody>"+n,q=o+"<tr>",r="</tr>"+p;return h={markup:function(a){return t(a)},applyStyles:function(a,b){if(b){var c;a=Ext.fly(a),typeof b=="function"&&(b=b.call());if(typeof b=="string"){f.lastIndex=0;while(c=f.exec(b))a.setStyle(c[1],c[2])}else typeof b=="object"&&a.setStyle(b)}},insertHtml:function(a,b,d){var e={},f,h,m,n,o,p;a=a.toLowerCase(),e[k]=["BeforeBegin","previousSibling"],e[j]=["AfterEnd","nextSibling"];if(!b.insertAdjacentHTML)return m=b.ownerDocument.createRange(),h="setStart"+(g.test(a)?"After":"Before"),e[a]?(m[h](b),n=m.createContextualFragment(d),b.parentNode.insertBefore(n,a==k?b:b.nextSibling),b[(a==k?"previous":"next")+"Sibling"]):(o=(a==i?"first":"last")+"Child",b.firstChild?(m[h](b[o]),n=m.createContextualFragment(d),a==i?b.insertBefore(n,b.firstChild):b.appendChild(n)):b.innerHTML=d,b[o]);if(c.test(b.tagName)&&(p=v(b.tagName.toLowerCase(),a,b,d)))return p;e[i]=["AfterBegin","firstChild"],e[l]=["BeforeEnd","lastChild"];if(f=e[a])return b.insertAdjacentHTML(f[0],d),b[f[1]];throw'Illegal insertion point -> "'+a+'"'},insertBefore:function(a,b,c){return s(a,b,c,k)},insertAfter:function(a,b,c){return s(a,b,c,j,"nextSibling")},insertFirst:function(a,b,c){return s(a,b,c,i,"firstChild")},append:function(a,b,c){return s(a,b,c,l,"",!0)},overwrite:function(a,b,c){return a=Ext.getDom(a),a.innerHTML=t(b),c?Ext.get(a.firstChild):a.firstChild},createHtml:t},h}(),Ext.Template=function(a){var b=this,c=arguments,d=[],e;if(Ext.isArray(a))a=a.join("");else if(c.length>1){for(var f=0,g=c.length;f<g;f++)e=c[f],typeof e=="object"?Ext.apply(b,e):d.push(e);a=d.join("")}b.html=a,b.compiled&&b.compile()},Ext.Template.prototype={re:/\{([\w-]+)\}/g,applyTemplate:function(a){var b=this;return b.compiled?b.compiled(a):b.html.replace(b.re,function(b,c){return a[c]!==undefined?a[c]:""})},set:function(a,b){var c=this;return c.html=a,c.compiled=null,b?c.compile():c},compile:function(){function fn(a,b){return b="values['"+b+"']","'"+sep+"("+b+" == undefined ? '' : "+b+")"+sep+"'"}var me=this,sep=Ext.isGecko?"+":",";return eval("this.compiled = function(values){ return "+(Ext.isGecko?"'":"['")+me.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn)+(Ext.isGecko?"';};":"'].join('');};")),me},insertFirst:function(a,b,c){return this.doInsert("afterBegin",a,b,c)},insertBefore:function(a,b,c){return this.doInsert("beforeBegin",a,b,c)},insertAfter:function(a,b,c){return this.doInsert("afterEnd",a,b,c)},append:function(a,b,c){return this.doInsert("beforeEnd",a,b,c)},doInsert:function(a,b,c,d){b=Ext.getDom(b);var e=Ext.DomHelper.insertHtml(a,b,this.applyTemplate(c));return d?Ext.get(e,!0):e},overwrite:function(a,b,c){return a=Ext.getDom(a),a.innerHTML=this.applyTemplate(b),c?Ext.get(a.firstChild,!0):a.firstChild}},Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate,Ext.Template.from=function(a,b){return a=Ext.getDom(a),new Ext.Template(a.value||a.innerHTML,b||"")},Ext.DomQuery=function(){function child(a,b){var c=0,d=a.firstChild;while(d){if(d.nodeType==1&&++c==b)return d;d=d.nextSibling}return null}function next(a){while((a=a.nextSibling)&&a.nodeType!=1);return a}function prev(a){while((a=a.previousSibling)&&a.nodeType!=1);return a}function children(a){var b=a.firstChild,c=-1,d;while(b)d=b.nextSibling,b.nodeType==3&&!nonSpace.test(b.nodeValue)?a.removeChild(b):b.nodeIndex=++c,b=d;return this}function byClassName(a,b){if(!b)return a;var c=[],d=-1;for(var e=0,f;f=a[e];e++)(" "+f.className+" ").indexOf(b)!=-1&&(c[++d]=f);return c}function attrValue(a,b){return!a.tagName&&typeof a.length!="undefined"&&(a=a[0]),a?b=="for"?a.htmlFor:b=="class"||b=="className"?a.className:a.getAttribute(b)||a[b]:null}function getNodes(a,b,c){var d=[],e=-1,f;if(!a)return d;c=c||"*",typeof a.getElementsByTagName!="undefined"&&(a=[a]);if(!b)for(var g=0,h;h=a[g];g++){f=h.getElementsByTagName(c);for(var i=0,j;j=f[i];i++)d[++e]=j}else if(b=="/"||b==">"){var k=c.toUpperCase();for(var g=0,h,l;h=a[g];g++){l=h.childNodes;for(var i=0,m;m=l[i];i++)if(m.nodeName==k||m.nodeName==c||c=="*")d[++e]=m}}else if(b=="+"){var k=c.toUpperCase();for(var g=0,n;n=a[g];g++){while((n=n.nextSibling)&&n.nodeType!=1);n&&(n.nodeName==k||n.nodeName==c||c=="*")&&(d[++e]=n)}}else if(b=="~"){var k=c.toUpperCase();for(var g=0,n;n=a[g];g++)while(n=n.nextSibling)if(n.nodeName==k||n.nodeName==c||c=="*")d[++e]=n}return d}function concat(a,b){if(b.slice)return a.concat(b);for(var c=0,d=b.length;c<d;c++)a[a.length]=b[c];return a}function byTag(a,b){if(a.tagName||a==document)a=[a];if(!b)return a;var c=[],d=-1;b=b.toLowerCase();for(var e=0,f;f=a[e];e++)f.nodeType==1&&f.tagName.toLowerCase()==b&&(c[++d]=f);return c}function byId(a,b){if(a.tagName||a==document)a=[a];if(!b)return a;var c=[],d=-1;for(var e=0,f;f=a[e];e++)if(f&&f.id==b)return c[++d]=f,c;return c}function byAttribute(a,b,c,d,e){var f=[],g=-1,h=e=="{",i=Ext.DomQuery.operators[d],j,k,l;for(var m=0,n;n=a[m];m++){if(n.nodeType!=1)continue;l||(k=Ext.DomQuery.isXml(n),l=!0),k?j=n.getAttribute(b):h?j=Ext.DomQuery.getStyle(n,b):b=="class"||b=="className"?j=n.className:b=="for"?j=n.htmlFor:b=="href"?j=n.getAttribute("href",2):j=n.getAttribute(b);if(i&&i(j,c)||!i&&j)f[++g]=n}return f}function byPseudo(a,b,c){return Ext.DomQuery.pseudos[b](a,c)}function nodupIEXml(a){var b=++key,c;a[0].setAttribute("_nodup",b),c=[a[0]];for(var d=1,e=a.length;d<e;d++){var f=a[d];!f.getAttribute("_nodup")!=b&&(f.setAttribute("_nodup",b),c[c.length]=f)}for(var d=0,e=a.length;d<e;d++)a[d].removeAttribute("_nodup");return c}function nodup(a){if(!a)return[];var b=a.length,c,d,e=a,f,g=-1;if(!b||typeof a.nodeType!="undefined"||b==1)return a;if(isIE&&typeof a[0].selectSingleNode!="undefined")return nodupIEXml(a);var h=++key;a[0]._nodup=h;for(d=1;c=a[d];d++){if(c._nodup==h){e=[];for(var i=0;i<d;i++)e[++g]=a[i];for(i=d+1;f=a[i];i++)f._nodup!=h&&(f._nodup=h,e[++g]=f);return e}c._nodup=h}return e}function quickDiffIEXml(a,b){var c=++key,d=[];for(var e=0,f=a.length;e<f;e++)a[e].setAttribute("_qdiff",c);for(var e=0,f=b.length;e<f;e++)b[e].getAttribute("_qdiff")!=c&&(d[d.length]=b[e]);for(var e=0,f=a.length;e<f;e++)a[e].removeAttribute("_qdiff");return d}function quickDiff(a,b){var c=a.length,d=++key,e=[];if(!c)return b;if(isIE&&typeof a[0].selectSingleNode!="undefined")return quickDiffIEXml(a,b);for(var f=0;f<c;f++)a[f]._qdiff=d;for(var f=0,g=b.length;f<g;f++)b[f]._qdiff!=d&&(e[e.length]=b[f]);return e}function quickId(a,b,c,d){if(a==c){var e=c.ownerDocument||c;return e.getElementById(d)}return a=getNodes(a,b,"*"),byId(a,d)}var cache={},simpleCache={},valueCache={},nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w-\*]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,isIE=window.ActiveXObject?!0:!1,key=30803;return eval("var batch = 30803;"),{getStyle:function(a,b){return Ext.fly(a).getStyle(b)},compile:function(path,type){type=type||"select";var fn=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"],mode,lastPath,matchers=Ext.DomQuery.matchers,matchersLn=matchers.length,modeMatch,lmode=path.match(modeRe);lmode&&lmode[1]&&(fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";',path=path.replace(lmode[1],""));while(path.substr(0,1)=="/")path=path.substr(1);while(path&&lastPath!=path){lastPath=path;var tokenMatch=path.match(tagTokenRe);type=="select"?tokenMatch?(tokenMatch[1]=="#"?fn[fn.length]='n = quickId(n, mode, root, "'+tokenMatch[2]+'");':fn[fn.length]='n = getNodes(n, mode, "'+tokenMatch[2]+'");',path=path.replace(tokenMatch[0],"")):path.substr(0,1)!="@"&&(fn[fn.length]='n = getNodes(n, mode, "*");'):tokenMatch&&(tokenMatch[1]=="#"?fn[fn.length]='n = byId(n, "'+tokenMatch[2]+'");':fn[fn.length]='n = byTag(n, "'+tokenMatch[2]+'");',path=path.replace(tokenMatch[0],""));while(!(modeMatch=path.match(modeRe))){var matched=!1;for(var j=0;j<matchersLn;j++){var t=matchers[j],m=path.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(a,b){return m[b]}),path=path.replace(m[0],""),matched=!0;break}}if(!matched)throw'Error parsing selector, parsing failed at "'+path+'"'}modeMatch[1]&&(fn[fn.length]='mode="'+modeMatch[1].replace(trimRe,"")+'";',path=path.replace(modeMatch[1],""))}return fn[fn.length]="return nodup(n);\n}",eval(fn.join("")),f},jsSelect:function(a,b,c){b=b||document,typeof b=="string"&&(b=document.getElementById(b));var d=a.split(","),e=[];for(var f=0,g=d.length;f<g;f++){var h=d[f].replace(trimRe,"");if(!cache[h]){cache[h]=Ext.DomQuery.compile(h);if(!cache[h])throw h+" is not a valid selector"}var i=cache[h](b);i&&i!=document&&(e=e.concat(i))}return d.length>1?nodup(e):e},isXml:function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1},select:document.querySelectorAll?function(a,b,c){b=b||document;if(!Ext.DomQuery.isXml(b))try{var d=b.querySelectorAll(a);return Ext.toArray(d)}catch(e){}return Ext.DomQuery.jsSelect.call(this,a,b,c)}:function(a,b,c){return Ext.DomQuery.jsSelect.call(this,a,b,c)},selectNode:function(a,b){return Ext.DomQuery.select(a,b)[0]},selectValue:function(a,b,c){a=a.replace(trimRe,""),valueCache[a]||(valueCache[a]=Ext.DomQuery.compile(a,"select"));var d=valueCache[a](b),e;return d=d[0]?d[0]:d,typeof d.normalize=="function"&&d.normalize(),e=d&&d.firstChild?d.firstChild.nodeValue:null,e===null||e===undefined||e===""?c:e},selectNumber:function(a,b,c){var d=Ext.DomQuery.selectValue(a,b,c||0);return parseFloat(d)},is:function(a,b){typeof a=="string"&&(a=document.getElementById(a));var c=Ext.isArray(a),d=Ext.DomQuery.filter(c?a:[a],b);return c?d.length==a.length:d.length>0},filter:function(a,b,c){b=b.replace(trimRe,""),simpleCache[b]||(simpleCache[b]=Ext.DomQuery.compile(b,"simple"));var d=simpleCache[b](a);return c?quickDiff(d,a):d},matchers:[{re:/^\.([\w-]+)/,select:'n = byClassName(n, " {1} ");'},{re:/^\:([\w-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'},{re:/^#([\w-]+)/,select:'n = byId(n, "{1}");'},{re:/^@([\w-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(a,b){return a==b},"!=":function(a,b){return a!=b},"^=":function(a,b){return a&&a.substr(0,b.length)==b},"$=":function(a,b){return a&&a.substr(a.length-b.length)==b},"*=":function(a,b){return a&&a.indexOf(b)!==-1},"%=":function(a,b){return a%b==0},"|=":function(a,b){return a&&(a==b||a.substr(0,b.length+1)==b+"-")},"~=":function(a,b){return a&&(" "+a+" ").indexOf(" "+b+" ")!=-1}},pseudos:{"first-child":function(a){var b=[],c=-1,d;for(var e=0,f;f=d=a[e];e++){while((d=d.previousSibling)&&d.nodeType!=1);d||(b[++c]=f)}return b},"last-child":function(a){var b=[],c=-1,d;for(var e=0,f;f=d=a[e];e++){while((d=d.nextSibling)&&d.nodeType!=1);d||(b[++c]=f)}return b},"nth-child":function(a,b){var c=[],d=-1,e=nthRe.exec(b=="even"&&"2n"||b=="odd"&&"2n+1"||!nthRe2.test(b)&&"n+"+b||b),f=(e[1]||1)-0,g=e[2]-0;for(var h=0,i;i=a[h];h++){var j=i.parentNode;if(batch!=j._batch){var k=0;for(var l=j.firstChild;l;l=l.nextSibling)l.nodeType==1&&(l.nodeIndex=++k);j._batch=batch}if(f==1){if(g==0||i.nodeIndex==g)c[++d]=i}else(i.nodeIndex+g)%f==0&&(c[++d]=i)}return c},"only-child":function(a){var b=[],c=-1;for(var d=0,e;e=a[d];d++)!prev(e)&&!next(e)&&(b[++c]=e);return b},empty:function(a){var b=[],c=-1;for(var d=0,e;e=a[d];d++){var f=e.childNodes,g=0,h,i=!0;while(h=f[g]){++g;if(h.nodeType==1||h.nodeType==3){i=!1;break}}i&&(b[++c]=e)}return b},contains:function(a,b){var c=[],d=-1;for(var e=0,f;f=a[e];e++)(f.textContent||f.innerText||"").indexOf(b)!=-1&&(c[++d]=f);return c},nodeValue:function(a,b){var c=[],d=-1;for(var e=0,f;f=a[e];e++)f.firstChild&&f.firstChild.nodeValue==b&&(c[++d]=f);return c},checked:function(a){var b=[],c=-1;for(var d=0,e;e=a[d];d++)e.checked==1&&(b[++c]=e);return b},not:function(a,b){return Ext.DomQuery.filter(a,b,!0)},any:function(a,b){var c=b.split("|"),d=[],e=-1,f;for(var g=0,h;h=a[g];g++)for(var i=0;f=c[i];i++)if(Ext.DomQuery.is(h,f)){d[++e]=h;break}return d},odd:function(a){return this["nth-child"](a,"odd")},even:function(a){return this["nth-child"](a,"even")},nth:function(a,b){return a[b-1]||[]},first:function(a){return a[0]||[]},last:function(a){return a[a.length-1]||[]},has:function(a,b){var c=Ext.DomQuery.select,d=[],e=-1;for(var f=0,g;g=a[f];f++)c(b,g).length>0&&(d[++e]=g);return d},next:function(a,b){var c=Ext.DomQuery.is,d=[],e=-1;for(var f=0,g;g=a[f];f++){var h=next(g);h&&c(h,b)&&(d[++e]=g)}return d},prev:function(a,b){var c=Ext.DomQuery.is,d=[],e=-1;for(var f=0,g;g=a[f];f++){var h=prev(g);h&&c(h,b)&&(d[++e]=g)}return d}}}}(),Ext.query=Ext.DomQuery.select,Ext.util.DelayedTask=function(a,b,c){var d=this,e,f=function(){clearInterval(e),e=null,a.apply(b,c||[])};d.delay=function(h,i,j,k){d.cancel(),a=i||a,b=j||b,c=k||c,e=setInterval(f,h)},d.cancel=function(){e&&(clearInterval(e),e=null)}},function(){function h(){if(!Ext.enableGarbageCollector)clearInterval(c.collectorThreadId);else{var b,e,f,g;for(b in d){g=d[b];if(g.skipGC)continue;e=g.el,f=e.dom;if(!f||!f.parentNode||!f.offsetParent&&!a.getElementById(b))Ext.enableListenerCollection&&Ext.EventManager.removeAll(f),delete d[b]}if(Ext.isIE){var h={};for(b in d)h[b]=d[b];d=Ext.elCache=h}}}var a=document;Ext.Element=function(b,c){var d=typeof b=="string"?a.getElementById(b):b,e;if(!d)return null;e=d.id;if(!c&&e&&Ext.elCache[e])return Ext.elCache[e].el;this.dom=d,this.id=e||Ext.id(d)};var b=Ext.DomHelper,c=Ext.Element,d=Ext.elCache;c.prototype={set:function(a,c){var d=this.dom,e,f,c=c!==!1&&!!d.setAttribute;for(e in a)a.hasOwnProperty(e)&&(f=a[e],e=="style"?b.applyStyles(d,f):e=="cls"?d.className=f:c?d.setAttribute(e,f):d[e]=f);return this},defaultUnit:"px",is:function(a){return Ext.DomQuery.is(this.dom,a)},focus:function(a,b){var c=this,b=b||c.dom;try{Number(a)?c.focus.defer(a,null,[null,b]):b.focus()}catch(d){}return c},blur:function(){try{this.dom.blur()}catch(a){}return this},getValue:function(a){var b=this.dom.value;return a?parseInt(b,10):b},addListener:function(a,b,c,d){return Ext.EventManager.on(this.dom,a,b,c||this,d),this},removeListener:function(a,b,c){return Ext.EventManager.removeListener(this.dom,a,b,c||this),this},removeAllListeners:function(){return Ext.EventManager.removeAll(this.dom),this},purgeAllListeners:function(){return Ext.EventManager.purgeElement(this,!0),this},addUnits:function(a){if(a===""||a=="auto"||a===undefined)a=a||"";else if(!isNaN(a)||!f.test(a))a+=this.defaultUnit||"px";return a},load:function(a,b,c){return Ext.Ajax.request(Ext.apply({params:b,url:a.url||a,callback:c,el:this.dom,indicatorText:a.indicatorText||""},Ext.isObject(a)?a:{})),this},isBorderBox:function(){return Ext.isBorderBox||Ext.isForcedBorderBox||j[(this.dom.tagName||"").toLowerCase()]},remove:function(){var a=this,b=a.dom;b&&(delete a.dom,Ext.removeNode(b))},hover:function(a,b,c,d){var e=this;return e.on("mouseenter",a,c||e.dom,d),e.on("mouseleave",b,c||e.dom,d),e},contains:function(a){return a?Ext.lib.Dom.isAncestor(this.dom,a.dom?a.dom:a):!1},getAttributeNS:function(a,b){return this.getAttribute(b,a)},getAttribute:Ext.isIE?function(a,b){var c=this.dom,d=typeof c[b+":"+a];return["undefined","unknown"].indexOf(d)==-1?c[b+":"+a]:c[a]}:function(a,b){var c=this.dom;return c.getAttributeNS(b,a)||c.getAttribute(b+":"+a)||c.getAttribute(a)||c[a]},update:function(a){return this.dom&&(this.dom.innerHTML=a),this}};var e=c.prototype;c.addMethods=function(a){Ext.apply(e,a)},e.on=e.addListener,e.un=e.removeListener,e.autoBoxAdjust=!0;var f=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,g;c.get=function(b){var e,f,h;if(!b)return null;if(typeof b=="string")return(f=a.getElementById(b))?(d[b]&&d[b].el?(e=d[b].el,e.dom=f):e=c.addToCache(new c(f)),e):null;if(b.tagName)return(h=b.id)||(h=Ext.id(b)),d[h]&&d[h].el?(e=d[h].el,e.dom=b):e=c.addToCache(new c(b)),e;if(b instanceof c)return b!=g&&(!Ext.isIE||b.id!=undefined&&b.id!=""?b.dom=a.getElementById(b.id)||b.dom:b.dom=b.dom),b;if(b.isComposite)return b;if(Ext.isArray(b))return c.select(b);if(b==a){if(!g){var i=function(){};i.prototype=c.prototype,g=new i,g.dom=a}return g}return null},c.addToCache=function(a,b){return b=b||a.id,d[b]={el:a,data:{},events:{}},a},c.data=function(a,b,e){a=c.get(a);if(!a)return null;var f=d[a.id].data;return arguments.length==2?f[b]:f[b]=e},c.collectorThreadId=setInterval(h,3e4);var i=function(){};i.prototype=c.prototype,c.Flyweight=function(a){this.dom=a},c.Flyweight.prototype=new i,c.Flyweight.prototype.isFlyweight=!0,c._flyweights={},c.fly=function(a,b){var d=null;b=b||"_global";if(a=Ext.getDom(a))(c._flyweights[b]=c._flyweights[b]||new c.Flyweight).dom=a,d=c._flyweights[b];return d},Ext.get=c.get,Ext.fly=c.fly;var j=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};if(Ext.isIE||Ext.isGecko)j.button=1}(),Ext.Element.addMethods(function(){var a="parentNode",b="nextSibling",c="previousSibling",d=Ext.DomQuery,e=Ext.get;return{findParent:function(a,b,c){var f=this.dom,g=document.body,h=0,i;if(Ext.isGecko&&Object.prototype.toString.call(f)=="[object XULElement]")return null;b=b||50,isNaN(b)&&(i=Ext.getDom(b),b=Number.MAX_VALUE);while(f&&f.nodeType==1&&h<b&&f!=g&&f!=i){if(d.is(f,a))return c?e(f):f;h++,f=f.parentNode}return null},findParentNode:function(a,b,c){var d=Ext.fly(this.dom.parentNode,"_internal");return d?d.findParent(a,b,c):null},up:function(a,b){return this.findParentNode(a,b,!0)},select:function(a){return Ext.Element.select(a,this.dom)},query:function(a){return d.select(a,this.dom)},child:function(a,b){var c=d.selectNode(a,this.dom);return b?c:e(c)},down:function(a,b){var c=d.selectNode(" > "+a,this.dom);return b?c:e(c)},parent:function(b,c){return this.matchNode(a,a,b,c)},next:function(a,c){return this.matchNode(b,b,a,c)},prev:function(a,b){return this.matchNode(c,c,a,b)},first:function(a,c){return this.matchNode(b,"firstChild",a,c)},last:function(a,b){return this.matchNode(c,"lastChild",a,b)},matchNode:function(a,b,c,f){var g=this.dom[b];while(g){if(g.nodeType==1&&(!c||d.is(g,c)))return f?g:e(g);g=g[a]}return null}}}()),Ext.Element.addMethods(function(){var a=Ext.getDom,b=Ext.get,c=Ext.DomHelper;return{appendChild:function(a){return b(a).appendTo(this)},appendTo:function(b){return a(b).appendChild(this.dom),this},insertBefore:function(b){return(b=a(b)).parentNode.insertBefore(this.dom,b),this},insertAfter:function(b){return(b=a(b)).parentNode.insertBefore(this.dom,b.nextSibling),this},insertFirst:function(c,d){return c=c||{},c.nodeType||c.dom||typeof c=="string"?(c=a(c),this.dom.insertBefore(c,this.dom.firstChild),d?c:b(c)):this.createChild(c,this.dom.firstChild,d)},replace:function(a){return a=b(a),this.insertBefore(a),a.remove(),this},replaceWith:function(b){var d=this;return b.nodeType||b.dom||typeof b=="string"?(b=a(b),d.dom.parentNode.insertBefore(b,d.dom)):b=c.insertBefore(d.dom,b),delete Ext.elCache[d.id],Ext.removeNode(d.dom),d.id=Ext.id(d.dom=b),Ext.Element.addToCache(d.isFlyweight?new Ext.Element(d.dom):d),d},createChild:function(a,b,d){return a=a||{tag:"div"},b?c.insertBefore(b,a,d!==!0):c[this.dom.firstChild?"append":"overwrite"](this.dom,a,d!==!0)},wrap:function(a,b){var d=c.insertBefore(this.dom,a||{tag:"div"},!b);return d.dom?d.dom.appendChild(this.dom):d.appendChild(this.dom),d},insertHtml:function(a,b,d){var e=c.insertHtml(a,this.dom,b);return d?Ext.get(e):e}}}()),Ext.Element.addMethods(function(){function C(a,b){return b.charAt(1).toUpperCase()}function D(d){return b[d]||(b[d]=d=="float"?a.cssFloat?"cssFloat":"styleFloat":d.replace(c,C))}var a=Ext.supports,b={},c=/(-[a-z])/gi,d=document.defaultView,e=/alpha\(opacity=(.*)\)/i,f=/^\s+|\s+$/g,g=Ext.Element,h=/\s+/,i=/\w/g,j="padding",k="margin",l="border",m="-left",n="-right",o="-top",p="-bottom",q="-width",r=Math,s="hidden",t="isClipped",u="overflow",v="overflow-x",w="overflow-y",x="originalClip",y={l:l+m+q,r:l+n+q,t:l+o+q,b:l+p+q},z={l:j+m,r:j+n,t:j+o,b:j+p},A={l:k+m,r:k+n,t:k+o,b:k+p},B=Ext.Element.data;return{adjustWidth:function(a){var b=this,c=typeof a=="number";return c&&b.autoBoxAdjust&&!b.isBorderBox()&&(a-=b.getBorderWidth("lr")+b.getPadding("lr")),c&&a<0?0:a},adjustHeight:function(a){var b=this,c=typeof a=="number";return c&&b.autoBoxAdjust&&!b.isBorderBox()&&(a-=b.getBorderWidth("tb")+b.getPadding("tb")),c&&a<0?0:a},addClass:function(a){var b=this,c,d,e,f=[];if(!Ext.isArray(a))typeof a=="string"&&!this.hasClass(a)&&(b.dom.className+=" "+a);else{for(c=0,d=a.length;c<d;c++)e=a[c],typeof e=="string"&&(" "+b.dom.className+" ").indexOf(" "+e+" ")==-1&&f.push(e);f.length&&(b.dom.className+=" "+f.join(" "))}return b},removeClass:function(a){var b=this,c,d,e,g,i;Ext.isArray(a)||(a=[a]);if(b.dom&&b.dom.className){i=b.dom.className.replace(f,"").split(h);for(c=0,e=a.length;c<e;c++)g=a[c],typeof g=="string"&&(g=g.replace(f,""),d=i.indexOf(g),d!=-1&&i.splice(d,1));b.dom.className=i.join(" ")}return b},radioClass:function(a){var b=this.dom.parentNode.childNodes,c,d,e;a=Ext.isArray(a)?a:[a];for(d=0,e=b.length;d<e;d++)c=b[d],c&&c.nodeType==1&&Ext.fly(c,"_internal").removeClass(a);return this.addClass(a)},toggleClass:function(a){return this.hasClass(a)?this.removeClass(a):this.addClass(a)},hasClass:function(a){return a&&(" "+this.dom.className+" ").indexOf(" "+a+" ")!=-1},replaceClass:function(a,b){return this.removeClass(a).addClass(b)},isStyle:function(a,b){return this.getStyle(a)==b},getStyle:function(){return d&&d.getComputedStyle?function(b){var c=this.dom,e,f,g,h;return c==document?null:(b=D(b),g=(e=c.style[b])?e:(f=d.getComputedStyle(c,""))?f[b]:null,b=="marginRight"&&g!="0px"&&!a.correctRightMargin&&(h=c.style.display,c.style.display="inline-block",g=d.getComputedStyle(c,"").marginRight,c.style.display=h),b=="backgroundColor"&&g=="rgba(0, 0, 0, 0)"&&!a.correctTransparentColor&&(g="transparent"),g)}:function(a){var b=this.dom,c,d;if(b==document)return null;if(a=="opacity"){if(b.style.filter.match)if(c=b.style.filter.match(e)){var f=parseFloat(c[1]);if(!isNaN(f))return f?f/100:0}return 1}return a=D(a),b.style[a]||((d=b.currentStyle)?d[a]:null)}}(),getColor:function(a,b,c){var d=this.getStyle(a),e=typeof c!="undefined"?c:"#",f;return!d||/transparent|inherit/.test(d)?b:(/^r/.test(d)?Ext.each(d.slice(4,d.length-1).split(","),function(a){f=parseInt(a,10),e+=(f<16?"0":"")+f.toString(16)}):(d=d.replace("#",""),e+=d.length==3?d.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):d),e.length>5?e.toLowerCase():b)},setStyle:function(a,b){var c,d;typeof a!="object"&&(c={},c[a]=b,a=c);for(d in a)b=a[d],d=="opacity"?this.setOpacity(b):this.dom.style[D(d)]=b;return this},setOpacity:function(a,b){var c=this,d=c.dom.style;if(!b||!c.anim)if(Ext.isIE){var g=a<1?"alpha(opacity="+a*100+")":"",h=d.filter.replace(e,"").replace(f,"");d.zoom=1,d.filter=h+(h.length>0?" ":"")+g}else d.opacity=a;else c.anim({opacity:{to:a}},c.preanim(arguments,1),null,.35,"easeIn");return c},clearOpacity:function(){var a=this.dom.style;return Ext.isIE?Ext.isEmpty(a.filter)||(a.filter=a.filter.replace(e,"").replace(f,"")):a.opacity=a["-moz-opacity"]=a["-khtml-opacity"]="",this},getHeight:function(a){var b=this,c=b.dom,d=Ext.isIE&&b.isStyle("display","none"),e=r.max(c.offsetHeight,d?0:c.clientHeight)||0;return e=a?e-b.getBorderWidth("tb")-b.getPadding("tb"):e,e<0?0:e},getWidth:function(a){var b=this,c=b.dom,d=Ext.isIE&&b.isStyle("display","none"),e=r.max(c.offsetWidth,d?0:c.clientWidth)||0;return e=a?e-b.getBorderWidth("lr")-b.getPadding("lr"):e,e<0?0:e},setWidth:function(a,b){var c=this;return a=c.adjustWidth(a),!b||!c.anim?c.dom.style.width=c.addUnits(a):c.anim({width:{to:a}},c.preanim(arguments,1)),c},setHeight:function(a,b){var c=this;return a=c.adjustHeight(a),!b||!c.anim?c.dom.style.height=c.addUnits(a):c.anim({height:{to:a}},c.preanim(arguments,1)),c},getBorderWidth:function(a){return this.addStyles(a,y)},getPadding:function(a){return this.addStyles(a,z)},clip:function(){var a=this,b=a.dom;return B(b,t)||(B(b,t,!0),B(b,x,{o:a.getStyle(u),x:a.getStyle(v),y:a.getStyle(w)}),a.setStyle(u,s),a.setStyle(v,s),a.setStyle(w,s)),a},unclip:function(){var a=this,b=a.dom;if(B(b,t)){B(b,t,!1);var c=B(b,x);c.o&&a.setStyle(u,c.o),c.x&&a.setStyle(v,c.x),c.y&&a.setStyle(w,c.y)}return a},addStyles:function(a,b){var c=0,d=a.match(i),e,f,g,h=d.length;for(g=0;g<h;g++)e=d[g],f=e&&parseInt(this.getStyle(b[e]),10),f&&(c+=r.abs(f));return c},margins:A}}()),function(){var a=Ext.lib.Dom,b="left",c="right",d="top",e="bottom",f="position",g="static",h="relative",i="auto",j="z-index";Ext.Element.addMethods({getX:function(){return a.getX(this.dom)},getY:function(){return a.getY(this.dom)},getXY:function(){return a.getXY(this.dom)},getOffsetsTo:function(a){var b=this.getXY(),c=Ext.fly(a,"_internal").getXY();return[b[0]-c[0],b[1]-c[1]]},setX:function(a,b){return this.setXY([a,this.getY()],this.animTest(arguments,b,1))},setY:function(a,b){return this.setXY([this.getX(),a],this.animTest(arguments,b,1))},setLeft:function(a){return this.setStyle(b,this.addUnits(a)),this},setTop:function(a){return this.setStyle(d,this.addUnits(a)),this},setRight:function(a){return this.setStyle(c,this.addUnits(a)),this},setBottom:function(a){return this.setStyle(e,this.addUnits(a)
),this},setXY:function(b,c){var d=this;return!c||!d.anim?a.setXY(d.dom,b):d.anim({points:{to:b}},d.preanim(arguments,1),"motion"),d},setLocation:function(a,b,c){return this.setXY([a,b],this.animTest(arguments,c,2))},moveTo:function(a,b,c){return this.setXY([a,b],this.animTest(arguments,c,2))},getLeft:function(a){return a?parseInt(this.getStyle(b),10)||0:this.getX()},getRight:function(a){var b=this;return a?b.getLeft(!0)+b.getWidth()||0:b.getX()+b.getWidth()},getTop:function(a){return a?parseInt(this.getStyle(d),10)||0:this.getY()},getBottom:function(a){var b=this;return a?b.getTop(!0)+b.getHeight()||0:b.getY()+b.getHeight()},position:function(a,b,c,d){var e=this;!a&&e.isStyle(f,g)?e.setStyle(f,h):a&&e.setStyle(f,a),b&&e.setStyle(j,b),(c||d)&&e.setXY([c||!1,d||!1])},clearPositioning:function(a){return a=a||"",this.setStyle({left:a,right:a,top:a,bottom:a,"z-index":"",position:g}),this},getPositioning:function(){var a=this.getStyle(b),g=this.getStyle(d);return{position:this.getStyle(f),left:a,right:a?"":this.getStyle(c),top:g,bottom:g?"":this.getStyle(e),"z-index":this.getStyle(j)}},setPositioning:function(a){var b=this,c=b.dom.style;return b.setStyle(a),a.right==i&&(c.right=""),a.bottom==i&&(c.bottom=""),b},translatePoints:function(a,c){c=isNaN(a[1])?c:a[1],a=isNaN(a[0])?a:a[0];var e=this,g=e.isStyle(f,h),i=e.getXY(),j=parseInt(e.getStyle(b),10),k=parseInt(e.getStyle(d),10);return j=isNaN(j)?g?0:e.dom.offsetLeft:j,k=isNaN(k)?g?0:e.dom.offsetTop:k,{left:a-i[0]+j,top:c-i[1]+k}},animTest:function(a,b,c){return!!b&&this.preanim?this.preanim(a,c):!1}})}(),Ext.Element.addMethods({isScrollable:function(){var a=this.dom;return a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth},scrollTo:function(a,b){return this.dom["scroll"+(/top/i.test(a)?"Top":"Left")]=b,this},getScroll:function(){var a=this.dom,b=document,c=b.body,d=b.documentElement,e,f,g;return a==b||a==c?(Ext.isIE&&Ext.isStrict?(e=d.scrollLeft,f=d.scrollTop):(e=window.pageXOffset,f=window.pageYOffset),g={left:e||(c?c.scrollLeft:0),top:f||(c?c.scrollTop:0)}):g={left:a.scrollLeft,top:a.scrollTop},g}}),Ext.Element.VISIBILITY=1,Ext.Element.DISPLAY=2,Ext.Element.OFFSETS=3,Ext.Element.ASCLASS=4,Ext.Element.visibilityCls="x-hide-nosize",Ext.Element.addMethods(function(){var a=Ext.Element,b="opacity",c="visibility",d="display",e="hidden",f="offsets",g="asclass",h="none",i="nosize",j="originalDisplay",k="visibilityMode",l="isVisible",m=a.data,n=function(a){var b=m(a,j);return b===undefined&&m(a,j,b=""),b},o=function(a){var b=m(a,k);return b===undefined&&m(a,k,b=1),b};return{originalDisplay:"",visibilityMode:1,setVisibilityMode:function(a){return m(this.dom,k,a),this},animate:function(a,b,c,d,e){return this.anim(a,{duration:b,callback:c,easing:d},e),this},anim:function(a,b,c,d,e,f){c=c||"run",b=b||{};var g=this,h=Ext.lib.Anim[c](g.dom,a,b.duration||d||.35,b.easing||e||"easeOut",function(){f&&f.call(g),b.callback&&b.callback.call(b.scope||g,g,b)},g);return b.anim=h,h},preanim:function(a,b){return a[b]?typeof a[b]=="object"?a[b]:{duration:a[b+1],callback:a[b+2],easing:a[b+3]}:!1},isVisible:function(){var b=this,f=b.dom,g=m(f,l);return typeof g=="boolean"?g:(g=!b.isStyle(c,e)&&!b.isStyle(d,h)&&(o(f)!=a.ASCLASS||!b.hasClass(b.visibilityCls||a.visibilityCls)),m(f,l,g),g)},setVisible:function(b,h){var j=this,k,n,q,r,s=j.dom,t=o(s);if(typeof h=="string"){switch(h){case d:t=a.DISPLAY;break;case c:t=a.VISIBILITY;break;case f:t=a.OFFSETS;break;case i:case g:t=a.ASCLASS}j.setVisibilityMode(t),h=!1}if(!h||!j.anim)if(t==a.ASCLASS)j[b?"removeClass":"addClass"](j.visibilityCls||a.visibilityCls);else{if(t==a.DISPLAY)return j.setDisplayed(b);t==a.OFFSETS?b?(j.applyStyles(j.hideModeStyles||{position:"",top:"",left:""}),delete j.hideModeStyles):(j.hideModeStyles={position:j.getStyle("position"),top:j.getStyle("top"),left:j.getStyle("left")},j.applyStyles({position:"absolute",top:"-10000px",left:"-10000px"})):(j.fixDisplay(),s.style.visibility=b?"visible":e)}else b&&(j.setOpacity(.01),j.setVisible(!0)),j.anim({opacity:{to:b?1:0}},j.preanim(arguments,1),null,.35,"easeIn",function(){b||j.setVisible(!1).setOpacity(1)});return m(s,l,b),j},hasMetrics:function(){var b=this.dom;return this.isVisible()||o(b)==a.VISIBILITY},toggle:function(a){var b=this;return b.setVisible(!b.isVisible(),b.preanim(arguments,0)),b},setDisplayed:function(a){return typeof a=="boolean"&&(a=a?n(this.dom):h),this.setStyle(d,a),this},fixDisplay:function(){var a=this;a.isStyle(d,h)&&(a.setStyle(c,e),a.setStyle(d,n(this.dom)),a.isStyle(d,h)&&a.setStyle(d,"block"))},hide:function(a){return typeof a=="string"?(this.setVisible(!1,a),this):(this.setVisible(!1,this.preanim(arguments,0)),this)},show:function(a){return typeof a=="string"?(this.setVisible(!0,a),this):(this.setVisible(!0,this.preanim(arguments,0)),this)}}}()),function(){var a=null,b=undefined,c=!0,d=!1,e="setX",f="setY",g="setXY",h="left",i="bottom",j="top",k="right",l="height",m="width",n="points",o="hidden",p="absolute",q="visible",r="motion",s="position",t="easeOut",u=new Ext.Element.Flyweight,v={},w=function(a){return a||{}},x=function(a){return u.dom=a,u.id=Ext.id(a),u},y=function(a){return v[a]||(v[a]=[]),v[a]},z=function(a,b){v[a]=b};Ext.enableFx=c,Ext.Fx={switchStatements:function(a,b,c){return b.apply(this,c[a])},slideIn:function(b,c){c=w(c);var d=this,l=d.dom,m=l.style,n,s,u,v,y,m,z,B,C,D;return b=b||"t",d.queueFx(c,function(){function d(){x(l).fxUnwrap(v,s.pos,c),m.width=s.width,m.height=s.height,x(l).afterFx(c)}function w(a,b,c,d,e,f,g,h,i,j,k){var l={};return x(a).setWidth(c).setHeight(d),x(a)[e]&&x(a)[e](f),b[g]=b[h]="0",i&&(l.width=i),j&&(l.height=j),k&&(l.points=k),l}n=x(l).getXY(),x(l).fixDisplay(),s=x(l).getFxRestore(),u={x:n[0],y:n[1],0:n[0],1:n[1],width:l.offsetWidth,height:l.offsetHeight},u.right=u.x+u.width,u.bottom=u.y+u.height,x(l).setWidth(u.width).setHeight(u.height),v=x(l).fxWrap(s.pos,c,o),m.visibility=q,m.position=p,B={to:[u.x,u.y]},C={to:u.width},D={to:u.height},z=x(l).switchStatements(b.toLowerCase(),w,{t:[v,m,u.width,0,a,a,h,i,a,D,a],l:[v,m,0,u.height,a,a,k,j,C,a,a],r:[v,m,u.width,u.height,e,u.right,h,j,a,a,B],b:[v,m,u.width,u.height,f,u.bottom,h,j,a,D,B],tl:[v,m,0,0,a,a,k,i,C,D,B],bl:[v,m,0,0,f,u.y+u.height,k,j,C,D,B],br:[v,m,0,0,g,[u.right,u.bottom],h,j,C,D,B],tr:[v,m,0,0,e,u.x+u.width,h,i,C,D,B]}),m.visibility=q,x(v).show(),arguments.callee.anim=x(v).fxanim(z,c,r,.5,t,d)}),d},slideOut:function(a,b){b=w(b);var c=this,e=c.dom,f=e.style,g=c.getXY(),o,s,u,v,y={to:0};return a=a||"t",c.queueFx(b,function(){function c(){b.useDisplay?x(e).setDisplayed(d):x(e).hide(),x(e).fxUnwrap(o,s.pos,b),f.width=s.width,f.height=s.height,x(e).afterFx(b)}function w(a,b,c,d,e,f,g,h,i){var j={};return a[b]=a[c]="0",j[d]=e,f&&(j[f]=g),h&&(j[h]=i),j}s=x(e).getFxRestore(),u={x:g[0],y:g[1],0:g[0],1:g[1],width:e.offsetWidth,height:e.offsetHeight},u.right=u.x+u.width,u.bottom=u.y+u.height,x(e).setWidth(u.width).setHeight(u.height),o=x(e).fxWrap(s.pos,b,q),f.visibility=q,f.position=p,x(o).setWidth(u.width).setHeight(u.height),v=x(e).switchStatements(a.toLowerCase(),w,{t:[f,h,i,l,y],l:[f,k,j,m,y],r:[f,h,j,m,y,n,{to:[u.right,u.y]}],b:[f,h,j,l,y,n,{to:[u.x,u.bottom]}],tl:[f,k,i,m,y,l,y],bl:[f,k,j,m,y,l,y,n,{to:[u.x,u.bottom]}],br:[f,h,j,m,y,l,y,n,{to:[u.x+u.width,u.bottom]}],tr:[f,h,i,m,y,l,y,n,{to:[u.right,u.y]}]}),arguments.callee.anim=x(o).fxanim(v,b,r,.5,t,c)}),c},puff:function(a){a=w(a);var b=this,c=b.dom,e=c.style,f,g,h;return b.queueFx(a,function(){function b(){a.useDisplay?x(c).setDisplayed(d):x(c).hide(),x(c).clearOpacity(),x(c).setPositioning(h.pos),e.width=h.width,e.height=h.height,e.fontSize="",x(c).afterFx(a)}f=x(c).getWidth(),g=x(c).getHeight(),x(c).clearOpacity(),x(c).show(),h=x(c).getFxRestore(),arguments.callee.anim=x(c).fxanim({width:{to:x(c).adjustWidth(f*2)},height:{to:x(c).adjustHeight(g*2)},points:{by:[-f*.5,-g*.5]},opacity:{to:0},fontSize:{to:200,unit:"%"}},a,r,.5,t,b)}),b},switchOff:function(b){b=w(b);var c=this,e=c.dom,f=e.style,g;return c.queueFx(b,function(){function c(){b.useDisplay?x(e).setDisplayed(d):x(e).hide(),x(e).clearOpacity(),x(e).setPositioning(g.pos),f.width=g.width,f.height=g.height,x(e).afterFx(b)}x(e).clearOpacity(),x(e).clip(),g=x(e).getFxRestore(),x(e).fxanim({opacity:{to:.3}},a,a,.1,a,function(){x(e).clearOpacity(),function(){x(e).fxanim({height:{to:1},points:{by:[0,x(e).getHeight()*.5]}},b,r,.3,"easeIn",c)}.defer(100)})}),c},highlight:function(a,b){b=w(b);var c=this,d=c.dom,e=b.attr||"backgroundColor",f={},g;return c.queueFx(b,function(){function c(){d.style[e]=g,x(d).afterFx(b)}x(d).clearOpacity(),x(d).show(),g=d.style[e],f[e]={from:a||"ffff9c",to:b.endColor||x(d).getColor(e)||"ffffff"},arguments.callee.anim=x(d).fxanim(f,b,"color",1,"easeIn",c)}),c},frame:function(a,b,c){c=w(c);var d=this,e=d.dom,f,g;return d.queueFx(c,function(){function j(){var a=Ext.isBorderBox?2:1;g=f.anim({top:{from:h.y,to:h.y-20},left:{from:h.x,to:h.x-20},borderWidth:{from:0,to:10},opacity:{from:1,to:0},height:{from:h.height,to:h.height+20*a},width:{from:h.width,to:h.width+20*a}},{duration:c.duration||1,callback:function(){f.remove(),--b>0?i():x(e).afterFx(c)}}),arguments.callee.anim={isAnimated:!0,stop:function(){g.stop()}}}a=a||"#C3DAF9",a.length==6&&(a="#"+a),b=b||1,x(e).show();var d=x(e).getXY(),h={x:d[0],y:d[1],0:d[0],1:d[1],width:e.offsetWidth,height:e.offsetHeight},i=function(){return f=x(document.body||document.documentElement).createChild({style:{position:p,"z-index":35e3,border:"0px solid "+a}}),f.queueFx({},j)};arguments.callee.anim={isAnimated:!0,stop:function(){b=0,f.stopFx()}},i()}),d},pause:function(a){var b=this.dom,c;return this.queueFx({},function(){c=setTimeout(function(){x(b).afterFx({})},a*1e3),arguments.callee.anim={isAnimated:!0,stop:function(){clearTimeout(c),x(b).afterFx({})}}}),this},fadeIn:function(b){b=w(b);var c=this,d=c.dom,e=b.endOpacity||1;return c.queueFx(b,function(){x(d).setOpacity(0),x(d).fixDisplay(),d.style.visibility=q,arguments.callee.anim=x(d).fxanim({opacity:{to:e}},b,a,.5,t,function(){e==1&&x(d).clearOpacity(),x(d).afterFx(b)})}),c},fadeOut:function(b){b=w(b);var c=this,d=c.dom,e=d.style,f=b.endOpacity||0;return c.queueFx(b,function(){arguments.callee.anim=x(d).fxanim({opacity:{to:f}},b,a,.5,t,function(){f==0&&(Ext.Element.data(d,"visibilityMode")==Ext.Element.DISPLAY||b.useDisplay?e.display="none":e.visibility=o,x(d).clearOpacity()),x(d).afterFx(b)})}),c},scale:function(a,b,c){return this.shift(Ext.apply({},c,{width:a,height:b})),this},shift:function(a){a=w(a);var c=this.dom,d={};return this.queueFx(a,function(){for(var e in a)a[e]!=b&&(d[e]={to:a[e]});d.width?d.width.to=x(c).adjustWidth(a.width):d,d.height?d.height.to=x(c).adjustWidth(a.height):d;if(d.x||d.y||d.xy)d.points=d.xy||{to:[d.x?d.x.to:x(c).getX(),d.y?d.y.to:x(c).getY()]};arguments.callee.anim=x(c).fxanim(d,a,r,.35,t,function(){x(c).afterFx(a)})}),this},ghost:function(a,b){b=w(b);var c=this,e=c.dom,f=e.style,g={opacity:{to:0},points:{}},h=g.points,i,j,k;return a=a||"b",c.queueFx(b,function(){function c(){b.useDisplay?x(e).setDisplayed(d):x(e).hide(),x(e).clearOpacity(),x(e).setPositioning(i.pos),f.width=i.width,f.height=i.height,x(e).afterFx(b)}i=x(e).getFxRestore(),j=x(e).getWidth(),k=x(e).getHeight(),h.by=x(e).switchStatements(a.toLowerCase(),function(a,b){return[a,b]},{t:[0,-k],l:[-j,0],r:[j,0],b:[0,k],tl:[-j,-k],bl:[-j,k],br:[j,k],tr:[j,-k]}),arguments.callee.anim=x(e).fxanim(g,b,r,.5,t,c)}),c},syncFx:function(){var a=this;return a.fxDefaults=Ext.apply(a.fxDefaults||{},{block:d,concurrent:c,stopFx:d}),a},sequenceFx:function(){var a=this;return a.fxDefaults=Ext.apply(a.fxDefaults||{},{block:d,concurrent:d,stopFx:d}),a},nextFx:function(){var a=y(this.dom.id)[0];a&&a.call(this)},hasActiveFx:function(){return y(this.dom.id)[0]},stopFx:function(a){var b=this,d=b.dom.id;if(b.hasActiveFx()){var e=y(d)[0];e&&e.anim&&(e.anim.isAnimated?(z(d,[e]),e.anim.stop(a!==undefined?a:c)):z(d,[]))}return b},beforeFx:function(a){return this.hasActiveFx()&&!a.concurrent?a.stopFx?(this.stopFx(),c):d:c},hasFxBlock:function(){var a=y(this.dom.id);return a&&a[0]&&a[0].block},queueFx:function(a,b){var c=x(this.dom);if(!c.hasFxBlock()){Ext.applyIf(a,c.fxDefaults);if(!a.concurrent){var d=c.beforeFx(a);b.block=a.block,y(c.dom.id).push(b),d&&c.nextFx()}else b.call(c)}return c},fxWrap:function(a,b,c){var d=this.dom,e,f;if(!b.wrap||!(e=Ext.getDom(b.wrap))){b.fixPosition&&(f=x(d).getXY());var g=document.createElement("div");g.style.visibility=c,e=d.parentNode.insertBefore(g,d),x(e).setPositioning(a),x(e).isStyle(s,"static")&&x(e).position("relative"),x(d).clearPositioning("auto"),x(e).clip(),e.appendChild(d),f&&x(e).setXY(f)}return e},fxUnwrap:function(a,b,c){var d=this.dom;x(d).clearPositioning(),x(d).setPositioning(b);if(!c.wrap){var e=x(a).dom.parentNode;e.insertBefore(d,a),x(a).remove()}},getFxRestore:function(){var a=this.dom.style;return{pos:this.getPositioning(),width:a.width,height:a.height}},afterFx:function(a){var b=this.dom,d=b.id;a.afterStyle&&x(b).setStyle(a.afterStyle),a.afterCls&&x(b).addClass(a.afterCls),a.remove==c&&x(b).remove(),a.callback&&a.callback.call(a.scope,x(b)),a.concurrent||(y(d).shift(),x(b).nextFx())},fxanim:function(a,b,c,d,e,f){c=c||"run",b=b||{};var g=Ext.lib.Anim[c](this.dom,a,b.duration||d||.35,b.easing||e||t,f,this);return b.anim=g,g}},Ext.Fx.resize=Ext.Fx.scale,Ext.Element.addMethods(Ext.Fx)}(),Ext.CompositeElementLite=function(a,b){this.elements=[],this.add(a,b),this.el=new Ext.Element.Flyweight},Ext.CompositeElementLite.prototype={isComposite:!0,getElement:function(a){var b=this.el;return b.dom=a,b.id=a.id,b},transformElement:function(a){return Ext.getDom(a)},getCount:function(){return this.elements.length},add:function(a,b){var c=this,d=c.elements;if(!a)return this;typeof a=="string"?a=Ext.Element.selectorFunction(a,b):a.isComposite?a=a.elements:Ext.isIterable(a)||(a=[a]);for(var e=0,f=a.length;e<f;++e)d.push(c.transformElement(a[e]));return c},invoke:function(a,b){var c=this,d=c.elements,e=d.length,f,g;for(g=0;g<e;g++)f=d[g],f&&Ext.Element.prototype[a].apply(c.getElement(f),b);return c},item:function(a){var b=this,c=b.elements[a],d=null;return c&&(d=b.getElement(c)),d},addListener:function(a,b,c,d){var e=this.elements,f=e.length,g,h;for(g=0;g<f;g++)h=e[g],h&&Ext.EventManager.on(h,a,b,c||h,d);return this},each:function(a,b){var c=this,d=c.elements,e=d.length,f,g;for(f=0;f<e;f++){g=d[f];if(g){g=this.getElement(g);if(a.call(b||g,g,c,f)===!1)break}}return c},fill:function(a){var b=this;return b.elements=[],b.add(a),b},filter:function(a){var b=[],c=this,d=Ext.isFunction(a)?a:function(b){return b.is(a)};return c.each(function(a,e,f){d(a,f)!==!1&&(b[b.length]=c.transformElement(a))}),c.elements=b,c},indexOf:function(a){return this.elements.indexOf(this.transformElement(a))},replaceElement:function(a,b,c){var d=isNaN(a)?this.indexOf(a):a,e;return d>-1&&(b=Ext.getDom(b),c&&(e=this.elements[d],e.parentNode.insertBefore(b,e),Ext.removeNode(e)),this.elements.splice(d,1,b)),this},clear:function(){this.elements=[]}},Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener,Ext.CompositeElementLite.importElementMethods=function(){var a,b=Ext.Element.prototype,c=Ext.CompositeElementLite.prototype;for(a in b)typeof b[a]=="function"&&function(a){c[a]=c[a]||function(){return this.invoke(a,arguments)}}.call(c,a)},Ext.CompositeElementLite.importElementMethods(),Ext.DomQuery&&(Ext.Element.selectorFunction=Ext.DomQuery.select),Ext.Element.select=function(a,b){var c;if(typeof a=="string")c=Ext.Element.selectorFunction(a,b);else{if(a.length===undefined)throw"Invalid selector";c=a}return new Ext.CompositeElementLite(c)},Ext.select=Ext.Element.select,function(){var a="beforerequest",b="requestcomplete",c="requestexception",d=undefined,e="load",f="POST",g="GET",h=window;Ext.data.Connection=function(d){Ext.apply(this,d),this.addEvents(a,b,c),Ext.data.Connection.superclass.constructor.call(this)},Ext.extend(Ext.data.Connection,Ext.util.Observable,{timeout:3e4,autoAbort:!1,disableCaching:!0,disableCachingParam:"_dc",request:function(b){var c=this;if(c.fireEvent(a,c,b)){b.el&&(Ext.isEmpty(b.indicatorText)||(c.indicatorText='<div class="loading-indicator">'+b.indicatorText+"</div>"),c.indicatorText&&(Ext.getDom(b.el).innerHTML=c.indicatorText),b.success=(Ext.isFunction(b.success)?b.success:function(){}).createInterceptor(function(a){Ext.getDom(b.el).innerHTML=a.responseText}));var e=b.params,j=b.url||c.url,k,l={success:c.handleResponse,failure:c.handleFailure,scope:c,argument:{options:b},timeout:Ext.num(b.timeout,c.timeout)},m,n;Ext.isFunction(e)&&(e=e.call(b.scope||h,b)),e=Ext.urlEncode(c.extraParams,Ext.isObject(e)?Ext.urlEncode(e):e),Ext.isFunction(j)&&(j=j.call(b.scope||h,b));if(m=Ext.getDom(b.form)){j=j||m.action;if(b.isUpload||/multipart\/form-data/i.test(m.getAttribute("enctype")))return c.doFormUpload.call(c,b,e,j);n=Ext.lib.Ajax.serializeForm(m),e=e?e+"&"+n:n}k=b.method||c.method||(e||b.xmlData||b.jsonData?f:g);if(k===g&&c.disableCaching&&b.disableCaching!==!1||b.disableCaching===!0){var o=b.disableCachingParam||c.disableCachingParam;j=Ext.urlAppend(j,o+"="+(new Date).getTime())}return b.headers=Ext.apply(b.headers||{},c.defaultHeaders||{}),(b.autoAbort===!0||c.autoAbort)&&c.abort(),(k==g||b.xmlData||b.jsonData)&&e&&(j=Ext.urlAppend(j,e),e=""),c.transId=Ext.lib.Ajax.request(k,j,l,e,b)}return b.callback?b.callback.apply(b.scope,[b,d,d]):null},isLoading:function(a){return a?Ext.lib.Ajax.isCallInProgress(a):!!this.transId},abort:function(a){(a||this.isLoading())&&Ext.lib.Ajax.abort(a||this.transId)},handleResponse:function(a){this.transId=!1;var c=a.argument.options;a.argument=c?c.argument:null,this.fireEvent(b,this,a,c),c.success&&c.success.call(c.scope,a,c),c.callback&&c.callback.call(c.scope,c,!0,a)},handleFailure:function(a,b){this.transId=!1;var d=a.argument.options;a.argument=d?d.argument:null,this.fireEvent(c,this,a,d,b),d.failure&&d.failure.call(d.scope,a,d),d.callback&&d.callback.call(d.scope,d,!1,a)},doFormUpload:function(a,c,d){function q(){function l(a,b,c){Ext.isFunction(a)&&a.apply(b,c)}var c=this,d={responseText:"",responseXML:null,argument:a.argument},f,i;try{f=k.contentWindow.document||k.contentDocument||h.frames[g].document,f&&(f.body&&(/textarea/i.test((i=f.body.firstChild||{}).tagName)?d.responseText=i.value:d.responseText=f.body.innerHTML),d.responseXML=f.XMLDocument||f)}catch(j){}Ext.EventManager.removeListener(k,e,q,c),c.fireEvent(b,c,d,a),l(a.success,a.scope,[d,a]),l(a.callback,a.scope,[a,!0,d]),c.debugUploads||setTimeout(function(){Ext.removeNode(k)},100)}var g=Ext.id(),j=document,k=j.createElement("iframe"),l=Ext.getDom(a.form),m=[],n,o="multipart/form-data",p={target:l.target,method:l.method,encoding:l.encoding,enctype:l.enctype,action:l.action};Ext.fly(k).set({id:g,name:g,cls:"x-hidden",src:Ext.SSL_SECURE_URL}),j.body.appendChild(k),Ext.isIE&&(document.frames[g].name=g),Ext.fly(l).set({target:g,method:f,enctype:o,encoding:o,action:d||p.action}),Ext.iterate(Ext.urlDecode(c,!1),function(a,b){n=j.createElement("input"),Ext.fly(n).set({type:"hidden",value:b,name:a}),l.appendChild(n),m.push(n)}),Ext.EventManager.on(k,e,q,this),l.submit(),Ext.fly(l).set(p),Ext.each(m,function(a){Ext.removeNode(a)})}})}(),Ext.Ajax=new Ext.data.Connection({autoAbort:!1,serializeForm:function(a){return Ext.lib.Ajax.serializeForm(a)}}),Ext.util.JSON=new function(){var useHasOwn=!!{}.hasOwnProperty,isNative=function(){var a=null;return function(){return a===null&&(a=Ext.USE_NATIVE_JSON&&window.JSON&&JSON.toString()=="[object JSON]"),a}}(),pad=function(a){return a<10?"0"+a:a},doDecode=function(json){return eval("("+json+")")},doEncode=function(a){if(!Ext.isDefined(a)||a===null)return"null";if(Ext.isArray(a))return encodeArray(a);if(Ext.isDate(a))return Ext.util.JSON.encodeDate(a);if(Ext.isString(a))return encodeString(a);if(typeof a=="number")return isFinite(a)?String(a):"null";if(Ext.isBoolean(a))return String(a);var b=["{"],c,d,e;for(d in a)if(!a.getElementsByTagName)if(!useHasOwn||a.hasOwnProperty(d)){e=a[d];switch(typeof e){case"undefined":case"function":case"unknown":break;default:c&&b.push(","),b.push(doEncode(d),":",e===null?"null":doEncode(e)),c=!0}}return b.push("}"),b.join("")},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},encodeString=function(a){return/["\\\x00-\x1f]/.test(a)?'"'+a.replace(/([\x00-\x1f\\"])/g,function(a,b){var c=m[b];return c?c:(c=b.charCodeAt(),"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16))})+'"':'"'+a+'"'},encodeArray=function(a){var b=["["],c,d,e=a.length,f;for(d=0;d<e;d+=1){f=a[d];switch(typeof f){case"undefined":case"function":case"unknown":break;default:c&&b.push(","),b.push(f===null?"null":Ext.util.JSON.encode(f)),c=!0}}return b.push("]"),b.join("")};this.encodeDate=function(a){return'"'+a.getFullYear()+"-"+pad(a.getMonth()+1)+"-"+pad(a.getDate())+"T"+pad(a.getHours())+":"+pad(a.getMinutes())+":"+pad(a.getSeconds())+'"'},this.encode=function(){var a;return function(b){return a||(a=isNative()?JSON.stringify:doEncode),a(b)}}(),this.decode=function(){var a;return function(b){return a||(a=isNative()?JSON.parse:doDecode),a(b)}}()},Ext.encode=Ext.util.JSON.encode,Ext.decode=Ext.util.JSON.decode,Ext.EventManager=function(){function m(a){var b=!1,c=0,d=l.length,e=!1,f;if(a){if(a.getElementById||a.navigator){for(;c<d;++c){f=l[c];if(f.el===a){b=f.id;break}}b||(b=Ext.id(a),l.push({id:b,el:a}),e=!0)}else b=Ext.id(a);Ext.elCache[b]||(Ext.Element.addToCache(new Ext.Element(a),b),e&&(Ext.elCache[b].skipGC=!0))}return b}function n(a,b,c,d,f,i){a=Ext.getDom(a);var j=m(a),k=Ext.elCache[j].events,l;l=e.on(a,b,f),k[b]=k[b]||[],k[b].push([c,f,i,l,d]);if(a.addEventListener&&b=="mousewheel"){var n=["DOMMouseScroll",f,!1];a.addEventListener.apply(a,n),Ext.EventManager.addListener(h,"unload",function(){a.removeEventListener.apply(a,n)})}a==g&&b=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.addListener(f)}function o(){if(window!=top)return!1;try{g.documentElement.doScroll("left")}catch(a){return!1}return t(),!0}function p(a){return Ext.isIE&&o()?!0:g.readyState==j?(t(),!0):(c||(b=setTimeout(arguments.callee,2)),!1)}function r(a){return q||(q=Ext.query("style, link[rel=stylesheet]")),q.length==g.styleSheets.length?(t(),!0):(c||(b=setTimeout(arguments.callee,2)),!1)}function s(a){g.removeEventListener(i,arguments.callee,!1),r()}function t(f){c||(c=!0,b&&clearTimeout(b),d&&g.removeEventListener(i,t,!1),Ext.isIE&&p.bindIE&&g.detachEvent("onreadystatechange",p),e.un(h,"load",arguments.callee)),a&&!Ext.isReady&&(Ext.isReady=!0,a.fire(),a.listeners=[])}function u(){a||(a=new Ext.util.Event),d&&g.addEventListener(i,t,!1),Ext.isIE?p()||(p.bindIE=!0,g.attachEvent("onreadystatechange",p)):Ext.isOpera?g.readyState==j&&r()||g.addEventListener(i,s,!1):Ext.isWebKit&&p(),e.on(h,"load",t)}function v(a,b){return function(){var c=Ext.toArray(arguments);b.target==Ext.EventObject.setEvent(c[0]).target&&a.apply(this,c)}}function w(a,b,c){return function(d){c.delay(b.buffer,a,null,[new Ext.EventObjectImpl(d)])}}function x(a,b,c,d,e){return function(f){Ext.EventManager.removeListener(b,c,d,e),a(f)}}function y(a,b,c){return function(d){var e=new Ext.util.DelayedTask(a);c.tasks||(c.tasks=[]),c.tasks.push(e),e.delay(b.delay||10,a,null,[new Ext.EventObjectImpl(d)])}}function z(a,b,c,d,e){function i(a){if(!Ext)return;a=Ext.EventObject.setEvent(a);var b;if(f.delegate){if(!(b=a.getTarget(f.delegate,g)))return}else b=a.target;f.stopEvent&&a.stopEvent(),f.preventDefault&&a.preventDefault(),f.stopPropagation&&a.stopPropagation(),f.normalized===!1&&(a=a.browserEvent),d.call(e||g,a,b,f)}var f=!c||typeof c=="boolean"?{}:c,g=Ext.getDom(a),h;d=d||f.fn,e=e||f.scope;if(!g)throw'Error listening for "'+b+'". Element "'+a+"\" doesn't exist.";return f.target&&(i=v(i,f)),f.delay&&(i=y(i,f,d)),f.single&&(i=x(i,g,b,d,e)),f.buffer&&(h=new Ext.util.DelayedTask(i),i=w(i,f,h)),n(g,b,d,h,i,e),i}var a,b,c=!1,d=Ext.isGecko||Ext.isWebKit||Ext.isSafari,e=Ext.lib.Event,f=Ext.lib.Dom,g=document,h=window,i="DOMContentLoaded",j="complete",k=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,l=[],q,A={addListener:function(a,b,c,d,e){if(typeof b=="object"){var f=b,g,h;for(g in f)h=f[g],k.test(g)||(Ext.isFunction(h)?z(a,g,f,h,f.scope):z(a,g,h))}else z(a,b,e,c,d)},removeListener:function(a,b,c,d){a=Ext.getDom(a);var f=m(a),h=a&&Ext.elCache[f].events[b]||[],i,j,k,l,n,o;for(j=0,n=h.length;j<n;j++)if(Ext.isArray(o=h[j])&&o[0]==c&&(!d||o[2]==d)){o[4]&&o[4].cancel(),l=c.tasks&&c.tasks.length;if(l){while(l--)c.tasks[l].cancel();delete c.tasks}i=o[1],e.un(a,b,e.extAdapter?o[3]:i),i&&a.addEventListener&&b=="mousewheel"&&a.removeEventListener("DOMMouseScroll",i,!1),i&&a==g&&b=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.removeListener(i),h.splice(j,1),h.length===0&&delete Ext.elCache[f].events[b];for(l in Ext.elCache[f].events)return!1;return Ext.elCache[f].events={},!1}},removeAll:function(a){a=Ext.getDom(a);var b=m(a),c=Ext.elCache[b]||{},d=c.events||{},f,h,i,j,k,l,n;for(j in d)if(d.hasOwnProperty(j)){f=d[j];for(h=0,i=f.length;h<i;h++){k=f[h],k[4]&&k[4].cancel();if(k[0].tasks&&(l=k[0].tasks.length)){while(l--)k[0].tasks[l].cancel();delete k.tasks}n=k[1],e.un(a,j,e.extAdapter?k[3]:n),a.addEventListener&&n&&j=="mousewheel"&&a.removeEventListener("DOMMouseScroll",n,!1),n&&a==g&&j=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.removeListener(n)}}Ext.elCache[b]&&(Ext.elCache[b].events={})},getListeners:function(a,b){a=Ext.getDom(a);var c=m(a),d=Ext.elCache[c]||{},e=d.events||{},f=[];return e&&e[b]?e[b]:null},purgeElement:function(a,b,c){a=Ext.getDom(a);var d=m(a),e=Ext.elCache[d]||{},f=e.events||{},g,h,i;if(c){if(f&&f.hasOwnProperty(c)){h=f[c];for(g=0,i=h.length;g<i;g++)Ext.EventManager.removeListener(a,c,h[g][0])}}else Ext.EventManager.removeAll(a);if(b&&a&&a.childNodes)for(g=0,i=a.childNodes.length;g<i;g++)Ext.EventManager.purgeElement(a.childNodes[g],b,c)},_unload:function(){var a;for(a in Ext.elCache)Ext.EventManager.removeAll(a);delete Ext.elCache,delete Ext.Element._flyweights;var b,c,d,e=Ext.lib.Ajax;typeof e.conn=="object"?c=e.conn:c={};for(d in c)b=c[d],b&&e.abort({conn:b,tId:d})},onDocumentReady:function(b,c,d){Ext.isReady?(a||(a=new Ext.util.Event),a.addListener(b,c,d),a.fire(),a.listeners=[]):(a||u(),d=d||{},d.delay=d.delay||1,a.addListener(b,c,d))},fireDocReady:t};return A.on=A.addListener,A.un=A.removeListener,A.stoppedMouseDownEvent=new Ext.util.Event,A}(),Ext.onReady=Ext.EventManager.onDocumentReady,function(){var a=function(){var a=document.body||document.getElementsByTagName("body")[0];if(!a)return!1;var b=[" ",Ext.isIE?"ext-ie "+(Ext.isIE6?"ext-ie6":Ext.isIE7?"ext-ie7":"ext-ie8"):Ext.isGecko?"ext-gecko "+(Ext.isGecko2?"ext-gecko2":"ext-gecko3"):Ext.isOpera?"ext-opera":Ext.isWebKit?"ext-webkit":""];Ext.isSafari?b.push("ext-safari "+(Ext.isSafari2?"ext-safari2":Ext.isSafari3?"ext-safari3":"ext-safari4")):Ext.isChrome&&b.push("ext-chrome"),Ext.isMac&&b.push("ext-mac"),Ext.isLinux&&b.push("ext-linux");if(Ext.isStrict||Ext.isBorderBox){var c=a.parentNode;c&&Ext.fly(c,"_internal").addClass(Ext.isStrict&&Ext.isIE||!Ext.enableForcedBoxModel&&!Ext.isIE?" ext-strict":" ext-border-box")}return Ext.enableForcedBoxModel&&!Ext.isIE&&(Ext.isForcedBorderBox=!0,b.push("ext-forced-border-box")),Ext.fly(a,"_internal").addClass(b),!0};a()||Ext.onReady(a)}(),function(){var a=Ext.apply(Ext.supports,{correctRightMargin:!0,correctTransparentColor:!0,cssFloat:!0}),b=function(){var b=document.createElement("div"),c=document,d,e;b.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="float:left;background-color:transparent;">',c.body.appendChild(b),e=b.lastChild;if(d=c.defaultView)d.getComputedStyle(b.firstChild.firstChild,null).marginRight!="0px"&&(a.correctRightMargin=!1),d.getComputedStyle(e,null).backgroundColor!="transparent"&&(a.correctTransparentColor=!1);a.cssFloat=!!e.style.cssFloat,c.body.removeChild(b)};Ext.isReady?b():Ext.onReady(b)}(),Ext.EventObject=function(){var a=Ext.lib.Event,b=/(dbl)?click/,c={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},d=Ext.isIE?{1:0,4:1,2:2}:{0:0,1:1,2:2};return Ext.EventObjectImpl=function(a){a&&this.setEvent(a.browserEvent||a)},Ext.EventObjectImpl.prototype={setEvent:function(c){var e=this;return c==e||c&&c.browserEvent?c:(e.browserEvent=c,c?(e.button=c.button?d[c.button]:c.which?c.which-1:-1,b.test(c.type)&&e.button==-1&&(e.button=0),e.type=c.type,e.shiftKey=c.shiftKey,e.ctrlKey=c.ctrlKey||c.metaKey||!1,e.altKey=c.altKey,e.keyCode=c.keyCode,e.charCode=c.charCode,e.target=a.getTarget(c),e.xy=a.getXY(c)):(e.button=-1,e.shiftKey=!1,e.ctrlKey=!1,e.altKey=!1,e.keyCode=0,e.charCode=0,e.target=null,e.xy=[0,0]),e)},stopEvent:function(){var b=this;b.browserEvent&&(b.browserEvent.type=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.fire(b),a.stopEvent(b.browserEvent))},preventDefault:function(){this.browserEvent&&a.preventDefault(this.browserEvent)},stopPropagation:function(){var b=this;b.browserEvent&&(b.browserEvent.type=="mousedown"&&Ext.EventManager.stoppedMouseDownEvent.fire(b),a.stopPropagation(b.browserEvent))},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.normalizeKey(this.keyCode||this.charCode)},normalizeKey:function(a){return Ext.isSafari?c[a]||a:a},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getXY:function(){return this.xy},getTarget:function(a,b,c){return a?Ext.fly(this.target).findParent(a,b,c):c?Ext.get(this.target):this.target},getRelatedTarget:function(){return this.browserEvent?a.getRelatedTarget(this.browserEvent):null},getWheelDelta:function(){var a=this.browserEvent,b=0;return a.wheelDelta?b=a.wheelDelta/120:a.detail&&(b=-a.detail/3),b},within:function(a,b,c){if(a){var d=this[b?"getRelatedTarget":"getTarget"]();return d&&((c?d==Ext.getDom(a):!1)||Ext.fly(a).contains(d))}return!1}},new Ext.EventObjectImpl}(),Ext.Loader=Ext.apply({},{load:function(a,b,c,d){var c=c||this,e=document.getElementsByTagName("head")[0],f=document.createDocumentFragment(),g=a.length,h=0,i=this,j=function(b){e.appendChild(i.buildScriptTag(a[b],k))},k=function(){h++,g==h&&typeof b=="function"?b.call(c):d===!0&&j(h)};d===!0?j.call(this,0):(Ext.each(a,function(a,b){f.appendChild(this.buildScriptTag(a,k))},this),e.appendChild(f))},buildScriptTag:function(a,b){var c=document.createElement("script");return c.type="text/javascript",c.src=a,c.readyState?c.onreadystatechange=function(){if(c.readyState=="loaded"||c.readyState=="complete")c.onreadystatechange=null,b()}:c.onload=b,c}}),Ext.ns("Ext.grid","Ext.list","Ext.dd","Ext.tree","Ext.form","Ext.menu","Ext.state","Ext.layout","Ext.app","Ext.ux","Ext.chart","Ext.direct"),Ext.apply(Ext,function(){var a=Ext,b=0,c=null;return{emptyFn:function(){},BLANK_IMAGE_URL:Ext.isIE6||Ext.isIE7||Ext.isAir?"http://www.extjs.com/s.gif":"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",extendX:function(a,b){return Ext.extend(a,b(a.prototype))},getDoc:function(){return Ext.get(document)},num:function(a,b){return a=Number(Ext.isEmpty(a)||Ext.isArray(a)||typeof a=="boolean"||typeof a=="string"&&a.trim().length==0?NaN:a),isNaN(a)?b:a},value:function(a,b,c){return Ext.isEmpty(a,c)?b:a},escapeRe:function(a){return a.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},sequence:function(a,b,c,d){a[b]=a[b].createSequence(c,d)},addBehaviors:function(a){if(!Ext.isReady)Ext.onReady(function(){Ext.addBehaviors(a)});else{var b={},c,d,e;for(d in a)(c=d.split("@"))[1]&&(e=c[0],b[e]||(b[e]=Ext.select(e)),b[e].on(c[1],a[d]));b=null}},getScrollBarWidth:function(a){if(!Ext.isReady)return 0;if(a===!0||c===null){var b=Ext.getBody().createChild('<div class="x-hide-offsets" style="width:100px;height:50px;overflow:hidden;"><div style="height:200px;"></div></div>'),d=b.child("div",!0),e=d.offsetWidth;b.setStyle("overflow",Ext.isWebKit||Ext.isGecko?"auto":"scroll");var f=d.offsetWidth;b.remove(),c=e-f+2}return c},combine:function(){var a=arguments,b=a.length,c=[];for(var d=0;d<b;d++){var e=a[d];Ext.isArray(e)?c=c.concat(e):e.length!==undefined&&!e.substr?c=c.concat(Array.prototype.slice.call(e,0)):c.push(e)}return c},copyTo:function(a,b,c){return typeof c=="string"&&(c=c.split(/[,;\s]/)),Ext.each(c,function(c){b.hasOwnProperty(c)&&(a[c]=b[c])},this),a},destroy:function(){Ext.each(arguments,function(a){a&&(Ext.isArray(a)?this.destroy.apply(this,a):typeof a.destroy=="function"?a.destroy():a.dom&&a.remove())},this)},destroyMembers:function(a,b,c,d){for(var e=1,f=arguments,g=f.length;e<g;e++)Ext.destroy(a[f[e]]),delete a[f[e]]},clean:function(a){var b=[];return Ext.each(a,function(a){!a||b.push(a)}),b},unique:function(a){var b=[],c={};return Ext.each(a,function(a){c[a]||b.push(a),c[a]=!0})
,b},flatten:function(a){function c(a){return Ext.each(a,function(a){Ext.isArray(a)?c(a):b.push(a)}),b}var b=[];return c(a)},min:function(a,b){var c=a[0];return b=b||function(a,b){return a<b?-1:1},Ext.each(a,function(a){c=b(c,a)==-1?c:a}),c},max:function(a,b){var c=a[0];return b=b||function(a,b){return a>b?1:-1},Ext.each(a,function(a){c=b(c,a)==1?c:a}),c},mean:function(a){return a.length>0?Ext.sum(a)/a.length:undefined},sum:function(a){var b=0;return Ext.each(a,function(a){b+=a}),b},partition:function(a,b){var c=[[],[]];return Ext.each(a,function(a,d,f){c[b&&b(a,d,f)||!b&&a?0:1].push(a)}),c},invoke:function(a,b){var c=[],d=Array.prototype.slice.call(arguments,2);return Ext.each(a,function(a,f){a&&typeof a[b]=="function"?c.push(a[b].apply(a,d)):c.push(undefined)}),c},pluck:function(a,b){var c=[];return Ext.each(a,function(a){c.push(a[b])}),c},zip:function(){var a=Ext.partition(arguments,function(a){return typeof a!="function"}),b=a[0],c=a[1][0],d=Ext.max(Ext.pluck(b,"length")),e=[];for(var f=0;f<d;f++){e[f]=[];if(c)e[f]=c.apply(c,Ext.pluck(b,f));else for(var g=0,h=b.length;g<h;g++)e[f].push(b[g][f])}return e},getCmp:function(a){return Ext.ComponentMgr.get(a)},useShims:a.isIE6||a.isMac&&a.isGecko2,type:function(a){if(a===undefined||a===null)return!1;if(a.htmlElement)return"element";var b=typeof a;if(b=="object"&&a.nodeName)switch(a.nodeType){case 1:return"element";case 3:return/\S/.test(a.nodeValue)?"textnode":"whitespace"}if(b=="object"||b=="function"){switch(a.constructor){case Array:return"array";case RegExp:return"regexp";case Date:return"date"}if(typeof a.length=="number"&&typeof a.item=="function")return"nodelist"}return b},intercept:function(a,b,c,d){a[b]=a[b].createInterceptor(c,d)},callback:function(a,b,c,d){typeof a=="function"&&(d?a.defer(d,b,c||[]):a.apply(b,c||[]))}}}()),Ext.apply(Function.prototype,{createSequence:function(a,b){var c=this;return typeof a!="function"?this:function(){var d=c.apply(this||window,arguments);return a.apply(b||this||window,arguments),d}}}),Ext.applyIf(String,{escape:function(a){return a.replace(/('|\\)/g,"\\$1")},leftPad:function(a,b,c){var d=String(a);c||(c=" ");while(d.length<b)d=c+d;return d}}),String.prototype.toggle=function(a,b){return this==a?b:a},String.prototype.trim=function(){var a=/^\s+|\s+$/g;return function(){return this.replace(a,"")}}(),Date.prototype.getElapsed=function(a){return Math.abs((a||new Date).getTime()-this.getTime())},Ext.applyIf(Number.prototype,{constrain:function(a,b){return Math.min(Math.max(this,a),b)}}),Ext.lib.Dom.getRegion=function(a){return Ext.lib.Region.getRegion(a)},Ext.lib.Region=function(a,b,c,d){var e=this;e.top=a,e[1]=a,e.right=b,e.bottom=c,e.left=d,e[0]=d},Ext.lib.Region.prototype={contains:function(a){var b=this;return a.left>=b.left&&a.right<=b.right&&a.top>=b.top&&a.bottom<=b.bottom},getArea:function(){var a=this;return(a.bottom-a.top)*(a.right-a.left)},intersect:function(a){var b=this,c=Math.max(b.top,a.top),d=Math.min(b.right,a.right),e=Math.min(b.bottom,a.bottom),f=Math.max(b.left,a.left);if(e>=c&&d>=f)return new Ext.lib.Region(c,d,e,f)},union:function(a){var b=this,c=Math.min(b.top,a.top),d=Math.max(b.right,a.right),e=Math.max(b.bottom,a.bottom),f=Math.min(b.left,a.left);return new Ext.lib.Region(c,d,e,f)},constrainTo:function(a){var b=this;return b.top=b.top.constrain(a.top,a.bottom),b.bottom=b.bottom.constrain(a.top,a.bottom),b.left=b.left.constrain(a.left,a.right),b.right=b.right.constrain(a.left,a.right),b},adjust:function(a,b,c,d){var e=this;return e.top+=a,e.left+=b,e.right+=d,e.bottom+=c,e}},Ext.lib.Region.getRegion=function(a){var b=Ext.lib.Dom.getXY(a),c=b[1],d=b[0]+a.offsetWidth,e=b[1]+a.offsetHeight,f=b[0];return new Ext.lib.Region(c,d,e,f)},Ext.lib.Point=function(a,b){Ext.isArray(a)&&(b=a[1],a=a[0]);var c=this;c.x=c.right=c.left=c[0]=a,c.y=c.top=c.bottom=c[1]=b},Ext.lib.Point.prototype=new Ext.lib.Region,Ext.apply(Ext.DomHelper,function(){function g(b,c,d,e,f,g){b=Ext.getDom(b);var i;return a.useDom?(i=h(c,null),g?b.appendChild(i):(f=="firstChild"?b:b.parentNode).insertBefore(i,b[f]||b)):i=Ext.DomHelper.insertHtml(e,b,Ext.DomHelper.createHtml(c)),d?Ext.get(i,!0):i}function h(a,b){var c,d=document,e,g,i,j;if(Ext.isArray(a)){c=d.createDocumentFragment();for(var k=0,l=a.length;k<l;k++)h(a[k],c)}else if(typeof a=="string")c=d.createTextNode(a);else{c=d.createElement(a.tag||"div"),e=!!c.setAttribute;for(var g in a)f.test(g)||(i=a[g],g=="cls"?c.className=i:e?c.setAttribute(g,i):c[g]=i);Ext.DomHelper.applyStyles(c,a.style),(j=a.children||a.cn)?h(j,c):a.html&&(c.innerHTML=a.html)}return b&&b.appendChild(c),c}var a,b="afterbegin",c="afterend",d="beforebegin",e="beforeend",f=/tag|children|cn|html$/i;return a={createTemplate:function(a){var b=Ext.DomHelper.createHtml(a);return new Ext.Template(b)},useDom:!1,insertBefore:function(a,b,c){return g(a,b,c,d)},insertAfter:function(a,b,d){return g(a,b,d,c,"nextSibling")},insertFirst:function(a,c,d){return g(a,c,d,b,"firstChild")},append:function(a,b,c){return g(a,b,c,e,"",!0)},createDom:h},a}()),Ext.apply(Ext.Template.prototype,{disableFormats:!1,re:/\{([\w-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,argsRe:/^\s*['"](.*)["']\s*$/,compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,applyTemplate:function(a){function f(f,h,i,j){if(i&&c){if(i.substr(0,5)=="this.")return e.call(i.substr(5),a[h],a);if(j){var k=b.argsRe;j=j.split(",");for(var l=0,m=j.length;l<m;l++)j[l]=j[l].replace(k,"$1");j=[a[h]].concat(j)}else j=[a[h]];return d[i].apply(d,j)}return a[h]!==undefined?a[h]:""}var b=this,c=b.disableFormats!==!0,d=Ext.util.Format,e=b;return b.compiled?b.compiled(a):b.html.replace(b.re,f)},compile:function(){function fn(a,b,c,d){return c&&useF?(d=d?","+d:"",c.substr(0,5)!="this."?c="fm."+c+"(":(c='this.call("'+c.substr(5)+'", ',d=", values")):(d="",c="(values['"+b+"'] == undefined ? '' : "),"'"+sep+c+"values['"+b+"']"+d+")"+sep+"'"}var me=this,fm=Ext.util.Format,useF=me.disableFormats!==!0,sep=Ext.isGecko?"+":",",body;return Ext.isGecko?body="this.compiled = function(values){ return '"+me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn)+"';};":(body=["this.compiled = function(values){ return ['"],body.push(me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn)),body.push("'].join('');};"),body=body.join("")),eval(body),me},call:function(a,b,c){return this[a](b,c)}}),Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate,Ext.util.Functions={createInterceptor:function(a,b,c){var d=a;return Ext.isFunction(b)?function(){var d=this,e=arguments;return b.target=d,b.method=a,b.apply(c||d||window,e)!==!1?a.apply(d||window,e):null}:a},createDelegate:function(a,b,c,d){return Ext.isFunction(a)?function(){var e=c||arguments;if(d===!0)e=Array.prototype.slice.call(arguments,0),e=e.concat(c);else if(Ext.isNumber(d)){e=Array.prototype.slice.call(arguments,0);var f=[d,0].concat(c);Array.prototype.splice.apply(e,f)}return a.apply(b||window,e)}:a},defer:function(a,b,c,d,e){return a=Ext.util.Functions.createDelegate(a,c,d,e),b>0?setTimeout(a,b):(a(),0)},createSequence:function(a,b,c){return Ext.isFunction(b)?function(){var d=a.apply(this||window,arguments);return b.apply(c||this||window,arguments),d}:a}},Ext.defer=Ext.util.Functions.defer,Ext.createInterceptor=Ext.util.Functions.createInterceptor,Ext.createSequence=Ext.util.Functions.createSequence,Ext.createDelegate=Ext.util.Functions.createDelegate,Ext.apply(Ext.util.Observable.prototype,function(){function a(a){var b=(this.methodEvents=this.methodEvents||{})[a],c,d,e,f=this;if(!b){this.methodEvents[a]=b={},b.originalFn=this[a],b.methodName=a,b.before=[],b.after=[];var g=function(a,b,g){(d=a.apply(b||f,g))!==undefined&&(typeof d=="object"?(d.returnValue!==undefined?c=d.returnValue:c=d,e=!!d.cancel):d===!1?e=!0:c=d)};this[a]=function(){var a=Array.prototype.slice.call(arguments,0),j;c=d=undefined,e=!1;for(var k=0,l=b.before.length;k<l;k++){j=b.before[k],g(j.fn,j.scope,a);if(e)return c}(d=b.originalFn.apply(f,a))!==undefined&&(c=d);for(var k=0,l=b.after.length;k<l;k++){j=b.after[k],g(j.fn,j.scope,a);if(e)return c}return c}}return b}return{beforeMethod:function(b,c,d){a.call(this,b).before.push({fn:c,scope:d})},afterMethod:function(b,c,d){a.call(this,b).after.push({fn:c,scope:d})},removeMethodListener:function(a,b,c){var d=this.getMethodEvent(a);for(var e=0,f=d.before.length;e<f;e++)if(d.before[e].fn==b&&d.before[e].scope==c){d.before.splice(e,1);return}for(var e=0,f=d.after.length;e<f;e++)if(d.after[e].fn==b&&d.after[e].scope==c){d.after.splice(e,1);return}},relayEvents:function(a,b){function d(a){return function(){return c.fireEvent.apply(c,[a].concat(Array.prototype.slice.call(arguments,0)))}}var c=this;for(var e=0,f=b.length;e<f;e++){var g=b[e];c.events[g]=c.events[g]||!0,a.on(g,d(g),c)}},enableBubble:function(a){var b=this;if(!Ext.isEmpty(a)){a=Ext.isArray(a)?a:Array.prototype.slice.call(arguments,0);for(var c=0,d=a.length;c<d;c++){var e=a[c];e=e.toLowerCase();var f=b.events[e]||!0;typeof f=="boolean"&&(f=new Ext.util.Event(b,e),b.events[e]=f),f.bubble=!0}}}}}()),Ext.util.Observable.capture=function(a,b,c){a.fireEvent=a.fireEvent.createInterceptor(b,c)},Ext.util.Observable.observeClass=function(a,b){if(a)return a.fireEvent||(Ext.apply(a,new Ext.util.Observable),Ext.util.Observable.capture(a.prototype,a.fireEvent,a)),typeof b=="object"&&a.on(b),a},Ext.apply(Ext.EventManager,function(){var a,b,c,d,e=Ext.lib.Dom,f=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,g=0,h=0,i=Ext.isWebKit?Ext.num(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1])>=525:!(Ext.isGecko&&!Ext.isWindows||Ext.isOpera);return{doResizeEvent:function(){var b=e.getViewHeight(),c=e.getViewWidth();(h!=b||g!=c)&&a.fire(g=c,h=b)},onWindowResize:function(c,d,e){a||(a=new Ext.util.Event,b=new Ext.util.DelayedTask(this.doResizeEvent),Ext.EventManager.on(window,"resize",this.fireWindowResize,this)),a.addListener(c,d,e)},fireWindowResize:function(){a&&b.delay(100)},onTextResize:function(a,b,e){if(!c){c=new Ext.util.Event;var f=new Ext.Element(document.createElement("div"));f.dom.className="x-text-resize",f.dom.innerHTML="X",f.appendTo(document.body),d=f.dom.offsetHeight,setInterval(function(){f.dom.offsetHeight!=d&&c.fire(d,d=f.dom.offsetHeight)},this.textResizeInterval)}c.addListener(a,b,e)},removeResizeListener:function(b,c){a&&a.removeListener(b,c)},fireResize:function(){a&&a.fire(e.getViewWidth(),e.getViewHeight())},textResizeInterval:50,ieDeferSrc:!1,getKeyEvent:function(){return i?"keydown":"keypress"},useKeydown:i}}()),Ext.EventManager.on=Ext.EventManager.addListener,Ext.apply(Ext.EventObjectImpl.prototype,{BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGEUP:33,PAGE_DOWN:34,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,isNavKeyPress:function(){var a=this,b=this.normalizeKey(a.keyCode);return b>=33&&b<=40||b==a.RETURN||b==a.TAB||b==a.ESC},isSpecialKey:function(){var a=this.normalizeKey(this.keyCode);return this.type=="keypress"&&this.ctrlKey||this.isNavKeyPress()||a==this.BACKSPACE||a>=16&&a<=20||a>=44&&a<=46},getPoint:function(){return new Ext.lib.Point(this.xy[0],this.xy[1])},hasModifier:function(){return this.ctrlKey||this.altKey||this.shiftKey}}),Ext.Element.addMethods({swallowEvent:function(a,b){function d(a){a.stopPropagation(),b&&a.preventDefault()}var c=this;return Ext.isArray(a)?(Ext.each(a,function(a){c.on(a,d)}),c):(c.on(a,d),c)},relayEvent:function(a,b){this.on(a,function(c){b.fireEvent(a,c)})},clean:function(a){var b=this,c=b.dom,d=c.firstChild,e=-1;if(Ext.Element.data(c,"isCleaned")&&a!==!0)return b;while(d){var f=d.nextSibling;d.nodeType==3&&!/\S/.test(d.nodeValue)?c.removeChild(d):d.nodeIndex=++e,d=f}return Ext.Element.data(c,"isCleaned",!0),b},load:function(){var a=this.getUpdater();return a.update.apply(a,arguments),this},getUpdater:function(){return this.updateManager||(this.updateManager=new Ext.Updater(this))},update:function(a,b,c){if(!this.dom)return this;a=a||"";if(b!==!0)return this.dom.innerHTML=a,typeof c=="function"&&c(),this;var d=Ext.id(),e=this.dom;return a+='<span id="'+d+'"></span>',Ext.lib.Event.onAvailable(d,function(){var b=document,e=b.getElementsByTagName("head")[0],f=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,g=/\ssrc=([\'\"])(.*?)\1/i,h=/\stype=([\'\"])(.*?)\1/i,i,j,k,l,m,n;while(i=f.exec(a))j=i[1],k=j?j.match(g):!1,k&&k[2]?(n=b.createElement("script"),n.src=k[2],l=j.match(h),l&&l[2]&&(n.type=l[2]),e.appendChild(n)):i[2]&&i[2].length>0&&(window.execScript?window.execScript(i[2]):window.eval(i[2]));m=b.getElementById(d),m&&Ext.removeNode(m),typeof c=="function"&&c()}),e.innerHTML=a.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,""),this},removeAllListeners:function(){return this.removeAnchor(),Ext.EventManager.removeAll(this.dom),this},createProxy:function(a,b,c){a=typeof a=="object"?a:{tag:"div",cls:a};var d=this,e=b?Ext.DomHelper.append(b,a,!0):Ext.DomHelper.insertBefore(d.dom,a,!0);return c&&d.setBox&&d.getBox&&e.setBox(d.getBox()),e}}),Ext.Element.prototype.getUpdateManager=Ext.Element.prototype.getUpdater,Ext.Element.addMethods({getAnchorXY:function(a,b,c){a=(a||"tl").toLowerCase(),c=c||{};var d=this,e=d.dom==document.body||d.dom==document,f=c.width||e?Ext.lib.Dom.getViewWidth():d.getWidth(),g=c.height||e?Ext.lib.Dom.getViewHeight():d.getHeight(),h,i=Math.round,j=d.getXY(),k=d.getScroll(),l=e?k.left:b?0:j[0],m=e?k.top:b?0:j[1],n={c:[i(f*.5),i(g*.5)],t:[i(f*.5),0],l:[0,i(g*.5)],r:[f,i(g*.5)],b:[i(f*.5),g],tl:[0,0],bl:[0,g],br:[f,g],tr:[f,0]};return h=n[a],[h[0]+l,h[1]+m]},anchorTo:function(a,b,c,d,e,f){var g=this,h=g.dom,i=!Ext.isEmpty(e),j=function(){Ext.fly(h).alignTo(a,b,c,d),Ext.callback(f,Ext.fly(h))},k=this.getAnchor();return this.removeAnchor(),Ext.apply(k,{fn:j,scroll:i}),Ext.EventManager.onWindowResize(j,null),i&&Ext.EventManager.on(window,"scroll",j,null,{buffer:isNaN(e)?50:e}),j.call(g),g},removeAnchor:function(){var a=this,b=this.getAnchor();return b&&b.fn&&(Ext.EventManager.removeResizeListener(b.fn),b.scroll&&Ext.EventManager.un(window,"scroll",b.fn),delete b.fn),a},getAnchor:function(){var a=Ext.Element.data,b=this.dom;if(!b)return;var c=a(b,"_anchor");return c||(c=a(b,"_anchor",{})),c},getAlignToXY:function(a,b,c){a=Ext.get(a);if(!a||!a.dom)throw"Element.alignToXY with an element that doesn't exist";c=c||[0,0],b=(!b||b=="?"?"tl-bl?":!/-/.test(b)&&b!==""?"tl-"+b:b||"tl-bl").toLowerCase();var d=this,e=d.dom,f,g,h,i,j,k,l,m=Ext.lib.Dom.getViewWidth()-10,n=Ext.lib.Dom.getViewHeight()-10,o,p,q,r,s,t,u=document,v=u.documentElement,w=u.body,x=(v.scrollLeft||w.scrollLeft||0)+5,y=(v.scrollTop||w.scrollTop||0)+5,z=!1,A="",B="",C=b.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!C)throw"Element.alignTo with an invalid alignment "+b;return A=C[1],B=C[2],z=!!C[3],f=d.getAnchorXY(A,!0),g=a.getAnchorXY(B,!1),h=g[0]-f[0]+c[0],i=g[1]-f[1]+c[1],z&&(j=d.getWidth(),k=d.getHeight(),l=a.getRegion(),o=A.charAt(0),p=A.charAt(A.length-1),q=B.charAt(0),r=B.charAt(B.length-1),s=o=="t"&&q=="b"||o=="b"&&q=="t",t=p=="r"&&r=="l"||p=="l"&&r=="r",h+j>m+x&&(h=t?l.left-j:m+x-j),h<x&&(h=t?l.right:x),i+k>n+y&&(i=s?l.top-k:n+y-k),i<y&&(i=s?l.bottom:y)),[h,i]},alignTo:function(a,b,c,d){var e=this;return e.setXY(e.getAlignToXY(a,b,c),e.preanim&&!!d?e.preanim(arguments,3):!1)},adjustForConstraints:function(a,b,c){return this.getConstrainToXY(b||document,!1,c,a)||a},getConstrainToXY:function(a,b,c,d){var e={top:0,left:0,bottom:0,right:0};return function(a,b,c,d){a=Ext.get(a),c=c?Ext.applyIf(c,e):e;var f,g,h=0,i=0;if(a.dom==document.body||a.dom==document)f=Ext.lib.Dom.getViewWidth(),g=Ext.lib.Dom.getViewHeight();else{f=a.dom.clientWidth,g=a.dom.clientHeight;if(!b){var j=a.getXY();h=j[0],i=j[1]}}var k=a.getScroll();h+=c.left+k.left,i+=c.top+k.top,f-=c.right,g-=c.bottom;var l=h+f,m=i+g,n=d||(b?[this.getLeft(!0),this.getTop(!0)]:this.getXY()),o=n[0],p=n[1],q=this.getConstrainOffset(),r=this.dom.offsetWidth+q,s=this.dom.offsetHeight+q,t=!1;return o+r>l&&(o=l-r,t=!0),p+s>m&&(p=m-s,t=!0),o<h&&(o=h,t=!0),p<i&&(p=i,t=!0),t?[o,p]:!1}}(),getConstrainOffset:function(){return 0},getCenterXY:function(){return this.getAlignToXY(document,"c-c")},center:function(a){return this.alignTo(a||document,"c-c")}}),Ext.Element.addMethods({select:function(a,b){return Ext.Element.select(a,b,this.dom)}}),Ext.apply(Ext.Element.prototype,function(){var a=Ext.getDom,b=Ext.get,c=Ext.DomHelper;return{insertSibling:function(d,e,f){var g=this,h,i=(e||"before").toLowerCase()=="after",j;return Ext.isArray(d)?(j=g,Ext.each(d,function(a){h=Ext.fly(j,"_internal").insertSibling(a,e,f),i&&(j=h)}),h):(d=d||{},d.nodeType||d.dom?(h=g.dom.parentNode.insertBefore(a(d),i?g.dom.nextSibling:g.dom),f||(h=b(h))):i&&!g.dom.nextSibling?h=c.append(g.dom.parentNode,d,!f):h=c[i?"insertAfter":"insertBefore"](g.dom,d,!f),h)}}}()),Ext.Element.boxMarkup='<div class="{0}-tl"><div class="{0}-tr"><div class="{0}-tc"></div></div></div><div class="{0}-ml"><div class="{0}-mr"><div class="{0}-mc"></div></div></div><div class="{0}-bl"><div class="{0}-br"><div class="{0}-bc"></div></div></div>',Ext.Element.addMethods(function(){var a="_internal",b=/(\d+\.?\d+)px/;return{applyStyles:function(a){return Ext.DomHelper.applyStyles(this.dom,a),this},getStyles:function(){var a={};return Ext.each(arguments,function(b){a[b]=this.getStyle(b)},this),a},setOverflow:function(a){var b=this.dom;a=="auto"&&Ext.isMac&&Ext.isGecko2?(b.style.overflow="hidden",function(){b.style.overflow="auto"}.defer(1)):b.style.overflow=a},boxWrap:function(a){a=a||"x-box";var b=Ext.get(this.insertHtml("beforeBegin","<div class='"+a+"'>"+String.format(Ext.Element.boxMarkup,a)+"</div>"));return Ext.DomQuery.selectNode("."+a+"-mc",b.dom).appendChild(this.dom),b},setSize:function(a,b,c){var d=this;return typeof a=="object"&&(b=a.height,a=a.width),a=d.adjustWidth(a),b=d.adjustHeight(b),!c||!d.anim?(d.dom.style.width=d.addUnits(a),d.dom.style.height=d.addUnits(b)):d.anim({width:{to:a},height:{to:b}},d.preanim(arguments,2)),d},getComputedHeight:function(){var a=this,b=Math.max(a.dom.offsetHeight,a.dom.clientHeight);return b||(b=parseFloat(a.getStyle("height"))||0,a.isBorderBox()||(b+=a.getFrameWidth("tb"))),b},getComputedWidth:function(){var a=Math.max(this.dom.offsetWidth,this.dom.clientWidth);return a||(a=parseFloat(this.getStyle("width"))||0,this.isBorderBox()||(a+=this.getFrameWidth("lr"))),a},getFrameWidth:function(a,b){return b&&this.isBorderBox()?0:this.getPadding(a)+this.getBorderWidth(a)},addClassOnOver:function(b){return this.hover(function(){Ext.fly(this,a).addClass(b)},function(){Ext.fly(this,a).removeClass(b)}),this},addClassOnFocus:function(b){return this.on("focus",function(){Ext.fly(this,a).addClass(b)},this.dom),this.on("blur",function(){Ext.fly(this,a).removeClass(b)},this.dom),this},addClassOnClick:function(b){var c=this.dom;return this.on("mousedown",function(){Ext.fly(c,a).addClass(b);var e=Ext.getDoc(),f=function(){Ext.fly(c,a).removeClass(b),e.removeListener("mouseup",f)};e.on("mouseup",f)}),this},getViewSize:function(){var a=document,b=this.dom,c=b==a||b==a.body;if(c){var d=Ext.lib.Dom;return{width:d.getViewWidth(),height:d.getViewHeight()}}return{width:b.clientWidth,height:b.clientHeight}},getStyleSize:function(){var a=this,b,c,d=document,e=this.dom,f=e==d||e==d.body,g=e.style;if(f){var h=Ext.lib.Dom;return{width:h.getViewWidth(),height:h.getViewHeight()}}return g.width&&g.width!="auto"&&(b=parseFloat(g.width),a.isBorderBox()&&(b-=a.getFrameWidth("lr"))),g.height&&g.height!="auto"&&(c=parseFloat(g.height),a.isBorderBox()&&(c-=a.getFrameWidth("tb"))),{width:b||a.getWidth(!0),height:c||a.getHeight(!0)}},getSize:function(a){return{width:this.getWidth(a),height:this.getHeight(a)}},repaint:function(){var a=this.dom;return this.addClass("x-repaint"),setTimeout(function(){Ext.fly(a).removeClass("x-repaint")},1),this},unselectable:function(){return this.dom.unselectable="on",this.swallowEvent("selectstart",!0).applyStyles("-moz-user-select:none;-khtml-user-select:none;").addClass("x-unselectable")},getMargins:function(a){var b=this,c,d={t:"top",l:"left",r:"right",b:"bottom"},e={};if(!a){for(c in b.margins)e[d[c]]=parseFloat(b.getStyle(b.margins[c]))||0;return e}return b.addStyles.call(b,a,b.margins)}}}()),Ext.Element.addMethods({setBox:function(a,b,c){var d=this,e=a.width,f=a.height;return b&&!d.autoBoxAdjust&&!d.isBorderBox()&&(e-=d.getBorderWidth("lr")+d.getPadding("lr"),f-=d.getBorderWidth("tb")+d.getPadding("tb")),d.setBounds(a.x,a.y,e,f,d.animTest.call(d,arguments,c,2)),d},getBox:function(a,b){var c=this,d,e,f,g=c.getBorderWidth,h=c.getPadding,i,j,k,l;b?(e=parseInt(c.getStyle("left"),10)||0,f=parseInt(c.getStyle("top"),10)||0,d=[e,f]):d=c.getXY();var m=c.dom,n=m.offsetWidth,o=m.offsetHeight,p;return a?(i=g.call(c,"l")+h.call(c,"l"),j=g.call(c,"r")+h.call(c,"r"),k=g.call(c,"t")+h.call(c,"t"),l=g.call(c,"b")+h.call(c,"b"),p={x:d[0]+i,y:d[1]+k,0:d[0]+i,1:d[1]+k,width:n-(i+j),height:o-(k+l)}):p={x:d[0],y:d[1],0:d[0],1:d[1],width:n,height:o},p.right=p.x+p.width,p.bottom=p.y+p.height,p},move:function(a,b,c){var d=this,e=d.getXY(),f=e[0],g=e[1],h=[f-b,g],i=[f+b,g],j=[f,g-b],k=[f,g+b],l={l:h,left:h,r:i,right:i,t:j,top:j,up:j,b:k,bottom:k,down:k};a=a.toLowerCase(),d.moveTo(l[a][0],l[a][1],d.animTest.call(d,arguments,c,2))},setLeftTop:function(a,b){var c=this,d=c.dom.style;return d.left=c.addUnits(a),d.top=c.addUnits(b),c},getRegion:function(){return Ext.lib.Dom.getRegion(this.dom)},setBounds:function(a,b,c,d,e){var f=this;return!e||!f.anim?(f.setSize(c,d),f.setLocation(a,b)):f.anim({points:{to:[a,b]},width:{to:f.adjustWidth(c)},height:{to:f.adjustHeight(d)}},f.preanim(arguments,4),"motion"),f},setRegion:function(a,b){return this.setBounds(a.left,a.top,a.right-a.left,a.bottom-a.top,this.animTest.call(this,arguments,b,1))}}),Ext.Element.addMethods({scrollTo:function(a,b,c){var d=/top/i.test(a),e=this,f=e.dom,g;return!c||!e.anim?(g="scroll"+(d?"Top":"Left"),f[g]=b):(g="scroll"+(d?"Left":"Top"),e.anim({scroll:{to:d?[f[g],b]:[b,f[g]]}},e.preanim(arguments,2),"scroll")),e},scrollIntoView:function(a,b){var c=Ext.getDom(a)||Ext.getBody().dom,d=this.dom,e=this.getOffsetsTo(c),f=e[0]+c.scrollLeft,g=e[1]+c.scrollTop,h=g+d.offsetHeight,i=f+d.offsetWidth,j=c.clientHeight,k=parseInt(c.scrollTop,10),l=parseInt(c.scrollLeft,10),m=k+j,n=l+c.clientWidth;return d.offsetHeight>j||g<k?c.scrollTop=g:h>m&&(c.scrollTop=h-j),c.scrollTop=c.scrollTop,b!==!1&&(d.offsetWidth>c.clientWidth||f<l?c.scrollLeft=f:i>n&&(c.scrollLeft=i-c.clientWidth),c.scrollLeft=c.scrollLeft),this},scrollChildIntoView:function(a,b){Ext.fly(a,"_scrollChildIntoView").scrollIntoView(this,b)},scroll:function(a,b,c){if(!this.isScrollable())return!1;var d=this.dom,e=d.scrollLeft,f=d.scrollTop,g=d.scrollWidth,h=d.scrollHeight,i=d.clientWidth,j=d.clientHeight,k=!1,l,m={l:Math.min(e+b,g-i),r:l=Math.max(e-b,0),t:Math.max(f-b,0),b:Math.min(f+b,h-j)};return m.d=m.b,m.u=m.t,a=a.substr(0,1),(l=m[a])>-1&&(k=!0,this.scrollTo(a=="l"||a=="r"?"left":"top",l,this.preanim(arguments,2))),k}}),Ext.Element.addMethods(function(){var a="visibility",b="display",c="hidden",d="none",e="x-masked",f="x-masked-relative",g=Ext.Element.data;return{isVisible:function(e){var f=!this.isStyle(a,c)&&!this.isStyle(b,d),g=this.dom.parentNode;if(e!==!0||!f)return f;while(g&&!/^body/i.test(g.tagName)){if(!Ext.fly(g,"_isVisible").isVisible())return!1;g=g.parentNode}return!0},isDisplayed:function(){return!this.isStyle(b,d)},enableDisplayMode:function(a){return this.setVisibilityMode(Ext.Element.DISPLAY),Ext.isEmpty(a)||g(this.dom,"originalDisplay",a),this},mask:function(a,b){var c=this,d=c.dom,h=Ext.DomHelper,i="ext-el-mask-msg",j,k;(!/^body/i.test(d.tagName)||c.getStyle("position")!="static")&&c.addClass(f),(j=g(d,"maskMsg"))&&j.remove(),(j=g(d,"mask"))&&j.remove(),k=h.append(d,{cls:"ext-el-mask"},!0),g(d,"mask",k),c.addClass(e),k.setDisplayed(!0);if(typeof a=="string"){var l=h.append(d,{cls:i,cn:{tag:"div"}},!0);g(d,"maskMsg",l),l.dom.className=b?i+" "+b:i,l.dom.firstChild.innerHTML=a,l.setDisplayed(!0),l.center(c)}return Ext.isIE&&(!Ext.isIE7||!Ext.isStrict)&&c.getStyle("height")=="auto"&&k.setSize(undefined,c.getHeight()),k},unmask:function(){var a=this,b=a.dom,c=g(b,"mask"),d=g(b,"maskMsg");c&&(d&&(d.remove(),g(b,"maskMsg",undefined)),c.remove(),g(b,"mask",undefined),a.removeClass([e,f]))},isMasked:function(){var a=g(this.dom,"mask");return a&&a.isVisible()},createShim:function(){var a=document.createElement("iframe"),b;return a.frameBorder="0",a.className="ext-shim",a.src=Ext.SSL_SECURE_URL,b=Ext.get(this.dom.parentNode.insertBefore(a,this.dom)),b.autoBoxAdjust=!1,b}}}()),Ext.Element.addMethods({addKeyListener:function(a,b,c){var d;return typeof a!="object"||Ext.isArray(a)?d={key:a,fn:b,scope:c}:d={key:a.key,shift:a.shift,ctrl:a.ctrl,alt:a.alt,fn:b,scope:c},new Ext.KeyMap(this,d)},addKeyMap:function(a){return new Ext.KeyMap(this,a)}}),Ext.CompositeElementLite.importElementMethods(),Ext.apply(Ext.CompositeElementLite.prototype,{addElements:function(a,b){if(!a)return this;typeof a=="string"&&(a=Ext.Element.selectorFunction(a,b));var c=this.elements;return Ext.each(a,function(a){c.push(Ext.get(a))}),this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(a){return this.indexOf(a)!=-1},removeElement:function(a,b){var c=this,d=this.elements,e;return Ext.each(a,function(a){if(e=d[a]||d[a=c.indexOf(a)])b&&(e.dom?e.remove():Ext.removeNode(e)),d.splice(a,1)}),this}}),Ext.CompositeElement=Ext.extend(Ext.CompositeElementLite,{constructor:function(a,b){this.elements=[],this.add(a,b)},getElement:function(a){return a},transformElement:function(a){return Ext.get(a)}}),Ext.Element.select=function(a,b,c){var d;if(typeof a=="string")d=Ext.Element.selectorFunction(a,c);else{if(a.length===undefined)throw"Invalid selector";d=a}return b===!0?new Ext.CompositeElement(d):new Ext.CompositeElementLite(d)},Ext.select=Ext.Element.select,Ext.UpdateManager=Ext.Updater=Ext.extend(Ext.util.Observable,function(){function d(a){var b=this;b.transaction=null;if(a.argument.form&&a.argument.reset)try{a.argument.form.reset()}catch(c){}b.loadScripts?b.renderer.render(b.el,a,b,e.createDelegate(b,[a])):(b.renderer.render(b.el,a,b),e.call(b,a))}function e(a,c,d){this.fireEvent(c||b,this.el,a),Ext.isFunction(a.argument.callback)&&a.argument.callback.call(a.argument.scope,this.el,Ext.isEmpty(d)?!0:!1,a,a.argument.options)}function f(a){e.call(this,a,c,!!(this.transaction=null))}var a="beforeupdate",b="update",c="failure";return{constructor:function(d,e){var f=this;d=Ext.get(d);if(!e&&d.updateManager)return d.updateManager;f.el=d,f.defaultUrl=null,f.addEvents(a,b,c),Ext.apply(f,Ext.Updater.defaults),f.transaction=null,f.refreshDelegate=f.refresh.createDelegate(f),f.updateDelegate=f.update.createDelegate(f),f.formUpdateDelegate=(f.formUpdate||function(){}).createDelegate(f),f.renderer=f.renderer||f.getDefaultRenderer(),Ext.Updater.superclass.constructor.call(f)},setRenderer:function(a){this.renderer=a},getRenderer:function(){return this.renderer},getDefaultRenderer:function(){return new Ext.Updater.BasicRenderer},setDefaultUrl:function(a){this.defaultUrl=a},getEl:function(){return this.el},update:function(b,c,e,g){var h=this,i,j;if(h.fireEvent(a,h.el,b,c)!==!1){Ext.isObject(b)&&(i=b,b=i.url,c=c||i.params,e=e||i.callback,g=g||i.discardUrl,j=i.scope,Ext.isEmpty(i.nocache)||(h.disableCaching=i.nocache),Ext.isEmpty(i.text)||(h.indicatorText='<div class="loading-indicator">'+i.text+"</div>"),Ext.isEmpty(i.scripts)||(h.loadScripts=i.scripts),Ext.isEmpty(i.timeout)||(h.timeout=i.timeout)),h.showLoading(),g||(h.defaultUrl=b),Ext.isFunction(b)&&(b=b.call(h));var k=Ext.apply({},{url:b,params:Ext.isFunction(c)&&j?c.createDelegate(j):c,success:d,failure:f,scope:h,callback:undefined,timeout:h.timeout*1e3,disableCaching:h.disableCaching,argument:{options:i,url:b,form:null,callback:e,scope:j||window,params:c}},i);h.transaction=Ext.Ajax.request(k)}},formUpdate:function(b,c,e,g){var h=this;h.fireEvent(a,h.el,b,c)!==!1&&(Ext.isFunction(c)&&(c=c.call(h)),b=Ext.getDom(b),h.transaction=Ext.Ajax.request({form:b,url:c,success:d,failure:f,scope:h,timeout:h.timeout*1e3,argument:{url:c,form:b,callback:g,reset:e}}),h.showLoading.defer(1,h))},startAutoRefresh:function(a,b,c,d,e){var f=this;e&&f.update(b||f.defaultUrl,c,d,!0),f.autoRefreshProcId&&clearInterval(f.autoRefreshProcId),f.autoRefreshProcId=setInterval(f.update.createDelegate(f,[b||f.defaultUrl,c,d,!0]),a*1e3)},stopAutoRefresh:function(){this.autoRefreshProcId&&(clearInterval(this.autoRefreshProcId),delete this.autoRefreshProcId)},isAutoRefreshing:function(){return!!this.autoRefreshProcId},showLoading:function(){this.showLoadIndicator&&(this.el.dom.innerHTML=this.indicatorText)},abort:function(){this.transaction&&Ext.Ajax.abort(this.transaction)},isUpdating:function(){return this.transaction?Ext.Ajax.isLoading(this.transaction):!1},refresh:function(a){this.defaultUrl&&this.update(this.defaultUrl,null,a,!0)}}}()),Ext.Updater.defaults={timeout:30,disableCaching:!1,showLoadIndicator:!0,indicatorText:'<div class="loading-indicator">Loading...</div>',loadScripts:!1,sslBlankUrl:Ext.SSL_SECURE_URL},Ext.Updater.updateElement=function(a,b,c,d){var e=Ext.get(a).getUpdater();Ext.apply(e,d),e.update(b,c,d?d.callback:null)},Ext.Updater.BasicRenderer=function(){},Ext.Updater.BasicRenderer.prototype={render:function(a,b,c,d){a.update(b.responseText,c.loadScripts,d)}},function(){function a(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/\{(\d+)\}/g,function(a,d){return b[d]})}Date.useStrict=!1,Date.formatCodeToRegex=function(b,c){var d=Date.parseCodes[b];return d&&(d=typeof d=="function"?d():d,Date.parseCodes[b]=d),d?Ext.applyIf({c:d.c?a(d.c,c||"{0}"):d.c},d):{g:0,c:null,s:Ext.escapeRe(b)}};var b=Date.formatCodeToRegex;Ext.apply(Date,{parseFunctions:{M$:function(a,b){var c=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),d=(a||"").match(c);return d?new Date(((d[1]||"")+d[2])*1):null}},parseRegexes:[],formatFunctions:{M$:function(){return"\\/Date("+this.getTime()+")\\/"}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},getShortMonthName:function(a){return Date.monthNames[a].substring(0,3)},getShortDayName:function(a){return Date.dayNames[a].substring(0,3)},getMonthNumber:function(a){return Date.monthNumbers[a.substring(0,1).toUpperCase()+a.substring(1,3).toLowerCase()]},formatCodes:{d:"String.leftPad(this.getDate(), 2, '0')",D:"Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"this.getSuffix()",w:"this.getDay()",z:"this.getDayOfYear()",W:"String.leftPad(this.getWeekOfYear(), 2, '0')",F:"Date.monthNames[this.getMonth()]",m:"String.leftPad(this.getMonth() + 1, 2, '0')",M:"Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"this.getDaysInMonth()",L:"(this.isLeapYear() ? 1 : 0)",o:"(this.getFullYear() + (this.getWeekOfYear() == 1 && this.getMonth() > 0 ? +1 : (this.getWeekOfYear() >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"String.leftPad(this.getFullYear(), 4, '0')",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"String.leftPad(this.getHours(), 2, '0')",i:"String.leftPad(this.getMinutes(), 2, '0')",s:"String.leftPad(this.getSeconds(), 2, '0')",u:"String.leftPad(this.getMilliseconds(), 3, '0')",O:"this.getGMTOffset()",P:"this.getGMTOffset(true)",T:"this.getTimezone()",Z:"(this.getTimezoneOffset() * -60)",c:function(){for(var a="Y-m-dTH:i:sP",b=[],c=0,d=a.length;c<d;++c){var e=a.charAt(c);b.push(e=="T"?"'T'":Date.getFormatCode(e))}return b
.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(a,b,c,d,e,f,g){d=d||0,e=e||0,f=f||0,g=g||0;var h=(new Date(a<100?100:a,b-1,c,d,e,f,g)).add(Date.YEAR,a<100?a-100:0);return a==h.getFullYear()&&b==h.getMonth()+1&&c==h.getDate()&&d==h.getHours()&&e==h.getMinutes()&&f==h.getSeconds()&&g==h.getMilliseconds()},parseDate:function(a,b,c){var d=Date.parseFunctions;return d[b]==null&&Date.createParser(b),d[b](a,Ext.isDefined(c)?c:Date.useStrict)},getFormatCode:function(a){var b=Date.formatCodes[a];return b&&(b=typeof b=="function"?b():b,Date.formatCodes[a]=b),b||"'"+String.escape(a)+"'"},createFormat:function(a){var b=[],c=!1,d="";for(var e=0;e<a.length;++e)d=a.charAt(e),!c&&d=="\\"?c=!0:c?(c=!1,b.push("'"+String.escape(d)+"'")):b.push(Date.getFormatCode(d));Date.formatFunctions[a]=new Function("return "+b.join("+"))},createParser:function(){var c=["var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,","def = Date.defaults,","results = String(input).match(Date.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = (new Date()).clearTime();","y = Ext.num(y, Ext.num(def.y, dt.getFullYear()));","m = Ext.num(m, Ext.num(def.m - 1, dt.getMonth()));","d = Ext.num(d, Ext.num(def.d, dt.getDate()));","h  = Ext.num(h, Ext.num(def.h, dt.getHours()));","i  = Ext.num(i, Ext.num(def.i, dt.getMinutes()));","s  = Ext.num(s, Ext.num(def.s, dt.getSeconds()));","ms = Ext.num(ms, Ext.num(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms).add(Date.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (v.isLeapYear() && z <= 365))? v.add(Date.DAY, z) : null);","}else if(strict === true && !Date.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","v = new Date(y < 100 ? 100 : y, m, d, h, i, s, ms).add(Date.YEAR, y < 100 ? y - 100 : 0);","}","}","}","if(v){","if(zz != null){","v = v.add(Date.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = v.add(Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");return function(d){var e=Date.parseRegexes.length,f=1,g=[],h=[],i=!1,j="",k=0,l,m;for(;k<d.length;++k)j=d.charAt(k),!i&&j=="\\"?i=!0:i?(i=!1,h.push(String.escape(j))):(l=b(j,f),f+=l.g,h.push(l.s),l.g&&l.c&&(l.calcLast?m=l.c:g.push(l.c)));m&&g.push(m),Date.parseRegexes[e]=new RegExp("^"+h.join("")+"$","i"),Date.parseFunctions[d]=new Function("input","strict",a(c,e,g.join("")))}}(),parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},D:function(){for(var a=[],b=0;b<7;a.push(Date.getShortDayName(b)),++b);return{g:0,c:null,s:"(?:"+a.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:0,c:null,s:"(?:\\d{2})"},F:function(){return{g:1,c:"m = parseInt(Date.getMonthNumber(results[{0}]), 10);\n",s:"("+Date.monthNames.join("|")+")"}},M:function(){for(var a=[],c=0;c<12;a.push(Date.getShortMonthName(c)),++c);return Ext.applyIf({s:"("+a.join("|")+")"},b("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{2})"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{1,2})"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:function(){return b("Y")},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:function(){return b("A")},A:{calcLast:!0,g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)"},g:function(){return b("G")},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},h:function(){return b("H")},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,4}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var a=[],c=[b("Y",1),b("m",2),b("d",3),b("h",4),b("i",5),b("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",b("P",8).c,"}else{",b("O",8).c,"}","}"].join("\n")}];for(var d=0,e=c.length;d<e;++d)a.push(c[d].c);return{g:1,c:a.join(""),s:[c[0].s,"(?:","-",c[1].s,"(?:","-",c[2].s,"(?:","(?:T| )?",c[3].s,":",c[4].s,"(?::",c[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}}})}(),Ext.apply(Date.prototype,{dateFormat:function(a){return Date.formatFunctions[a]==null&&Date.createFormat(a),Date.formatFunctions[a].call(this)},getTimezone:function(){return this.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(a){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+(a?":":"")+String.leftPad(Math.abs(this.getTimezoneOffset()%60),2,"0")},getDayOfYear:function(){var a=0,b=this.clone(),c=this.getMonth(),d;for(d=0,b.setDate(1),b.setMonth(0);d<c;b.setMonth(++d))a+=b.getDaysInMonth();return a+this.getDate()-1},getWeekOfYear:function(){var a=864e5,b=7*a;return function(){var c=Date.UTC(this.getFullYear(),this.getMonth(),this.getDate()+3)/a,d=Math.floor(c/7),e=(new Date(d*b)).getUTCFullYear();return d-Math.floor(Date.UTC(e,0,7)/b)+1}}(),isLeapYear:function(){var a=this.getFullYear();return(a&3)==0&&!!(a%100||a%400==0&&a)},getFirstDayOfMonth:function(){var a=(this.getDay()-(this.getDate()-1))%7;return a<0?a+7:a},getLastDayOfMonth:function(){return this.getLastDateOfMonth().getDay()},getFirstDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),1)},getLastDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),this.getDaysInMonth())},getDaysInMonth:function(){var a=[31,28,31,30,31,30,31,31,30,31,30,31];return function(){var b=this.getMonth();return b==1&&this.isLeapYear()?29:a[b]}}(),getSuffix:function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(){return new Date(this.getTime())},isDST:function(){return(new Date(this.getFullYear(),0,1)).getTimezoneOffset()!=this.getTimezoneOffset()},clearTime:function(a){if(a)return this.clone().clearTime();var b=this.getDate();this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0);if(this.getDate()!=b){for(var c=1,d=this.add(Date.HOUR,c);d.getDate()!=b;c++,d=this.add(Date.HOUR,c));this.setDate(b),this.setHours(d.getHours())}return this},add:function(a,b){var c=this.clone();if(!a||b===0)return c;switch(a.toLowerCase()){case Date.MILLI:c.setMilliseconds(this.getMilliseconds()+b);break;case Date.SECOND:c.setSeconds(this.getSeconds()+b);break;case Date.MINUTE:c.setMinutes(this.getMinutes()+b);break;case Date.HOUR:c.setHours(this.getHours()+b);break;case Date.DAY:c.setDate(this.getDate()+b);break;case Date.MONTH:var d=this.getDate();d>28&&(d=Math.min(d,this.getFirstDateOfMonth().add("mo",b).getLastDateOfMonth().getDate())),c.setDate(d),c.setMonth(this.getMonth()+b);break;case Date.YEAR:c.setFullYear(this.getFullYear()+b)}return c},between:function(a,b){var c=this.getTime();return a.getTime()<=c&&c<=b.getTime()}}),Date.prototype.format=Date.prototype.dateFormat,Ext.isSafari&&(navigator.userAgent.match(/WebKit\/(\d+)/)[1]||NaN)<420&&Ext.apply(Date.prototype,{_xMonth:Date.prototype.setMonth,_xDate:Date.prototype.setDate,setMonth:function(a){if(a<=-1){var b=Math.ceil(-a),c=Math.ceil(b/12),d=b%12?12-b%12:0;return this.setFullYear(this.getFullYear()-c),this._xMonth(d)}return this._xMonth(a)},setDate:function(a){return this.setTime(this.getTime()-(this.getDate()-a)*864e5)}}),Ext.util.MixedCollection=function(a,b){this.items=[],this.map={},this.keys=[],this.length=0,this.addEvents("clear","add","replace","remove","sort"),this.allowFunctions=a===!0,b&&(this.getKey=b),Ext.util.MixedCollection.superclass.constructor.call(this)},Ext.extend(Ext.util.MixedCollection,Ext.util.Observable,{allowFunctions:!1,add:function(a,b){arguments.length==1&&(b=arguments[0],a=this.getKey(b));if(typeof a!="undefined"&&a!==null){var c=this.map[a];if(typeof c!="undefined")return this.replace(a,b);this.map[a]=b}return this.length++,this.items.push(b),this.keys.push(a),this.fireEvent("add",this.length-1,b,a),b},getKey:function(a){return a.id},replace:function(a,b){arguments.length==1&&(b=arguments[0],a=this.getKey(b));var c=this.map[a];if(typeof a=="undefined"||a===null||typeof c=="undefined")return this.add(a,b);var d=this.indexOfKey(a);return this.items[d]=b,this.map[a]=b,this.fireEvent("replace",a,c,b),b},addAll:function(a){if(arguments.length>1||Ext.isArray(a)){var b=arguments.length>1?arguments:a;for(var c=0,d=b.length;c<d;c++)this.add(b[c])}else for(var e in a)(this.allowFunctions||typeof a[e]!="function")&&this.add(e,a[e])},each:function(a,b){var c=[].concat(this.items);for(var d=0,e=c.length;d<e;d++)if(a.call(b||c[d],c[d],d,e)===!1)break},eachKey:function(a,b){for(var c=0,d=this.keys.length;c<d;c++)a.call(b||window,this.keys[c],this.items[c],c,d)},find:function(a,b){for(var c=0,d=this.items.length;c<d;c++)if(a.call(b||window,this.items[c],this.keys[c]))return this.items[c];return null},insert:function(a,b,c){return arguments.length==2&&(c=arguments[1],b=this.getKey(c)),this.containsKey(b)&&(this.suspendEvents(),this.removeKey(b),this.resumeEvents()),a>=this.length?this.add(b,c):(this.length++,this.items.splice(a,0,c),typeof b!="undefined"&&b!==null&&(this.map[b]=c),this.keys.splice(a,0,b),this.fireEvent("add",a,c,b),c)},remove:function(a){return this.removeAt(this.indexOf(a))},removeAt:function(a){if(a<this.length&&a>=0){this.length--;var b=this.items[a];this.items.splice(a,1);var c=this.keys[a];return typeof c!="undefined"&&delete this.map[c],this.keys.splice(a,1),this.fireEvent("remove",b,c),b}return!1},removeKey:function(a){return this.removeAt(this.indexOfKey(a))},getCount:function(){return this.length},indexOf:function(a){return this.items.indexOf(a)},indexOfKey:function(a){return this.keys.indexOf(a)},item:function(a){var b=this.map[a],c=b!==undefined?b:typeof a=="number"?this.items[a]:undefined;return typeof c!="function"||this.allowFunctions?c:null},itemAt:function(a){return this.items[a]},key:function(a){return this.map[a]},contains:function(a){return this.indexOf(a)!=-1},containsKey:function(a){return typeof this.map[a]!="undefined"},clear:function(){this.length=0,this.items=[],this.keys=[],this.map={},this.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(a,b,c){var d,e,f=String(b).toUpperCase()=="DESC"?-1:1,g=[],h=this.keys,i=this.items;c=c||function(a,b){return a-b};for(d=0,e=i.length;d<e;d++)g[g.length]={key:h[d],value:i[d],index:d};g.sort(function(b,d){var e=c(b[a],d[a])*f;return e===0&&(e=b.index<d.index?-1:1),e});for(d=0,e=g.length;d<e;d++)i[d]=g[d].value,h[d]=g[d].key;this.fireEvent("sort",this)},sort:function(a,b){this._sort("value",a,b)},reorder:function(a){this.suspendEvents();var b=this.items,c=0,d=b.length,e=[],f=[],g;for(g in a)e[a[g]]=b[g];for(c=0;c<d;c++)a[c]==undefined&&f.push(b[c]);for(c=0;c<d;c++)e[c]==undefined&&(e[c]=f.shift());this.clear(),this.addAll(e),this.resumeEvents(),this.fireEvent("sort",this)},keySort:function(a,b){this._sort("key",a,b||function(a,b){var c=String(a).toUpperCase(),d=String(b).toUpperCase();return c>d?1:c<d?-1:0})},getRange:function(a,b){var c=this.items;if(c.length<1)return[];a=a||0,b=Math.min(typeof b=="undefined"?this.length-1:b,this.length-1);var d,e=[];if(a<=b)for(d=a;d<=b;d++)e[e.length]=c[d];else for(d=a;d>=b;d--)e[e.length]=c[d];return e},filter:function(a,b,c,d){return Ext.isEmpty(b,!1)?this.clone():(b=this.createValueMatcher(b,c,d),this.filterBy(function(c){return c&&b.test(c[a])}))},filterBy:function(a,b){var c=new Ext.util.MixedCollection;c.getKey=this.getKey;var d=this.keys,e=this.items;for(var f=0,g=e.length;f<g;f++)a.call(b||this,e[f],d[f])&&c.add(d[f],e[f]);return c},findIndex:function(a,b,c,d,e){return Ext.isEmpty(b,!1)?-1:(b=this.createValueMatcher(b,d,e),this.findIndexBy(function(c){return c&&b.test(c[a])},null,c))},findIndexBy:function(a,b,c){var d=this.keys,e=this.items;for(var f=c||0,g=e.length;f<g;f++)if(a.call(b||this,e[f],d[f]))return f;return-1},createValueMatcher:function(a,b,c,d){if(!a.exec){var e=Ext.escapeRe;a=String(a),b===!0?a=e(a):(a="^"+e(a),d===!0&&(a+="$")),a=new RegExp(a,c?"":"i")}return a},clone:function(){var a=new Ext.util.MixedCollection,b=this.keys,c=this.items;for(var d=0,e=c.length;d<e;d++)a.add(b[d],c[d]);return a.getKey=this.getKey,a}}),Ext.util.MixedCollection.prototype.get=Ext.util.MixedCollection.prototype.item,Ext.AbstractManager=Ext.extend(Object,{typeName:"type",constructor:function(a){Ext.apply(this,a||{}),this.all=new Ext.util.MixedCollection,this.types={}},get:function(a){return this.all.get(a)},register:function(a){this.all.add(a)},unregister:function(a){this.all.remove(a)},registerType:function(a,b){this.types[a]=b,b[this.typeName]=a},isRegistered:function(a){return this.types[a]!==undefined},create:function(a,b){var c=a[this.typeName]||a.type||b,d=this.types[c];if(d==undefined)throw new Error(String.format("The '{0}' type has not been registered with this manager",c));return new d(a)},onAvailable:function(a,b,c){var d=this.all;d.on("add",function(e,f){f.id==a&&(b.call(c||f,f),d.un("add",b,c))})}}),Ext.util.Format=function(){var trimRe=/^\s+|\s+$/g,stripTagsRE=/<\/?[^>]+>/gi,stripScriptsRe=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,nl2brRe=/\r?\n/g;return{ellipsis:function(a,b,c){if(a&&a.length>b){if(c){var d=a.substr(0,b-2),e=Math.max(d.lastIndexOf(" "),d.lastIndexOf("."),d.lastIndexOf("!"),d.lastIndexOf("?"));return e==-1||e<b-15?a.substr(0,b-3)+"...":d.substr(0,e)+"..."}return a.substr(0,b-3)+"..."}return a},undef:function(a){return a!==undefined?a:""},defaultValue:function(a,b){return a!==undefined&&a!==""?a:b},htmlEncode:function(a){return a?String(a).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"):a},htmlDecode:function(a){return a?String(a).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):a},trim:function(a){return String(a).replace(trimRe,"")},substr:function(a,b,c){return String(a).substr(b,c)},lowercase:function(a){return String(a).toLowerCase()},uppercase:function(a){return String(a).toUpperCase()},capitalize:function(a){return a?a.charAt(0).toUpperCase()+a.substr(1).toLowerCase():a},call:function(value,fn){if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);return args.unshift(value),eval(fn).apply(window,args)}return eval(fn).call(window,value)},usMoney:function(a){a=Math.round((a-0)*100)/100,a=a==Math.floor(a)?a+".00":a*10==Math.floor(a*10)?a+"0":a,a=String(a);var b=a.split("."),c=b[0],d=b[1]?"."+b[1]:".00",e=/(\d+)(\d{3})/;while(e.test(c))c=c.replace(e,"$1,$2");return a=c+d,a.charAt(0)=="-"?"-$"+a.substr(1):"$"+a},date:function(a,b){return a?(Ext.isDate(a)||(a=new Date(Date.parse(a))),a.dateFormat(b||"m/d/Y")):""},dateRenderer:function(a){return function(b){return Ext.util.Format.date(b,a)}},stripTags:function(a){return a?String(a).replace(stripTagsRE,""):a},stripScripts:function(a){return a?String(a).replace(stripScriptsRe,""):a},fileSize:function(a){return a<1024?a+" bytes":a<1048576?Math.round(a*10/1024)/10+" KB":Math.round(a*10/1048576)/10+" MB"},math:function(){var a={};return function(b,c){return a[c]||(a[c]=new Function("v","return v "+c+";")),a[c](b)}}(),round:function(a,b){var c=Number(a);return typeof b=="number"&&(b=Math.pow(10,b),c=Math.round(a*b)/b),c},number:function(a,b){if(!b)return a;a=Ext.num(a,NaN);if(isNaN(a))return"";var c=",",d=".",e=!1,f=a<0;a=Math.abs(a),b.substr(b.length-2)=="/i"&&(b=b.substr(0,b.length-2),e=!0,c=".",d=",");var g=b.indexOf(c)!=-1,h=(e?b.replace(/[^\d\,]/g,""):b.replace(/[^\d\.]/g,"")).split(d);if(1<h.length)a=a.toFixed(h[1].length);else{if(2<h.length)throw"NumberFormatException: invalid format, formats should have no more than 1 period: "+b;a=a.toFixed(0)}var i=a.toString();h=i.split(".");if(g){var j=h[0],k=[],l=j.length,m=Math.floor(l/3),n=j.length%3||3,o;for(o=0;o<l;o+=n)o!=0&&(n=3),k[k.length]=j.substr(o,n),m-=1;i=k.join(c),h[1]&&(i+=d+h[1])}else h[1]&&(i=h[0]+d+h[1]);return(f?"-":"")+b.replace(/[\d,?\.?]+/,i)},numberRenderer:function(a){return function(b){return Ext.util.Format.number(b,a)}},plural:function(a,b,c){return a+" "+(a==1?b:c?c:b+"s")},nl2br:function(a){return Ext.isEmpty(a)?"":a.replace(nl2brRe,"<br/>")}}}(),Ext.XTemplate=function(){Ext.XTemplate.superclass.constructor.apply(this,arguments);var a=this,b=a.html,c=/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/,d=/^<tpl\b[^>]*?for="(.*?)"/,e=/^<tpl\b[^>]*?if="(.*?)"/,f=/^<tpl\b[^>]*?exec="(.*?)"/,g,h=0,i=[],j="values",k="parent",l="xindex",m="xcount",n="return ",o="with(values){ ";b=["<tpl>",b,"</tpl>"].join("");while(g=b.match(c)){var p=g[0].match(d),q=g[0].match(e),r=g[0].match(f),s=null,t=null,u=null,v=p&&p[1]?p[1]:"";q&&(s=q&&q[1]?q[1]:null,s&&(t=new Function(j,k,l,m,o+n+Ext.util.Format.htmlDecode(s)+"; }"))),r&&(s=r&&r[1]?r[1]:null,s&&(u=new Function(j,k,l,m,o+Ext.util.Format.htmlDecode(s)+"; }")));if(v)switch(v){case".":v=new Function(j,k,o+n+j+"; }");break;case"..":v=new Function(j,k,o+n+k+"; }");break;default:v=new Function(j,k,o+n+v+"; }")}i.push({id:h,target:v,exec:u,test:t,body:g[1]||""}),b=b.replace(g[0],"{xtpl"+h+"}"),++h}for(var w=i.length-1;w>=0;--w)a.compileTpl(i[w]);a.master=i[i.length-1],a.tpls=i},Ext.extend(Ext.XTemplate,Ext.Template,{re:/\{([\w-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\\]\s?[\d\.\+\-\*\\\(\)]+)?\}/g,codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,applySubTemplate:function(a,b,c,d,e){var f=this,g,h=f.tpls[a],i,j=[];if(h.test&&!h.test.call(f,b,c,d,e)||h.exec&&h.exec.call(f,b,c,d,e))return"";i=h.target?h.target.call(f,b,c):b,g=i.length,c=h.target?b:c;if(h.target&&Ext.isArray(i)){for(var k=0,g=i.length;k<g;k++)j[j.length]=h.compiled.call(f,i[k],c,k+1,g);return j.join("")}return h.compiled.call(f,i,c,d,e)},compileTpl:function(tpl){function fn(a,b,c,d,e){if(b.substr(0,4)=="xtpl")return"'"+sep+"this.applySubTemplate("+b.substr(4)+", values, parent, xindex, xcount)"+sep+"'";var f;return b==="."?f="values":b==="#"?f="xindex":b.indexOf(".")!=-1?f=b:f="values['"+b+"']",e&&(f="("+f+e+")"),c&&useF?(d=d?","+d:"",c.substr(0,5)!="this."?c="fm."+c+"(":(c='this.call("'+c.substr(5)+'", ',d=", values")):(d="",c="("+f+" === undefined ? '' : "),"'"+sep+c+f+d+")"+sep+"'"}function codeFn(a,b){return"'"+sep+"("+b.replace(/\\'/g,"'")+")"+sep+"'"}var fm=Ext.util.Format,useF=this.disableFormats!==!0,sep=Ext.isGecko?"+":",",body;return Ext.isGecko?body="tpl.compiled = function(values, parent, xindex, xcount){ return '"+tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn)+"';};":(body=["tpl.compiled = function(values, parent, xindex, xcount){ return ['"],body.push(tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn)),body.push("'].join('');};"),body=body.join("")),eval(body),this},applyTemplate:function(a){return this.master.compiled.call(this,a,{},1,1)},compile:function(){return this}}),Ext.XTemplate.prototype.apply=Ext.XTemplate.prototype.applyTemplate,Ext.XTemplate.from=function(a){return a=Ext.getDom(a),new Ext.XTemplate(a.value||a.innerHTML)},Ext.util.CSS=function(){var a=null,b=document,c=/(-[a-z])/gi,d=function(a,b){return b.charAt(1).toUpperCase()};return{createStyleSheet:function(a,c){var d,e=b.getElementsByTagName("head")[0],f=b.createElement("style");f.setAttribute("type","text/css"),c&&f.setAttribute("id",c);if(Ext.isIE)e.appendChild(f),d=f.styleSheet,d.cssText=a;else{try{f.appendChild(b.createTextNode(a))}catch(g){f.cssText=a}e.appendChild(f),d=f.styleSheet?f.styleSheet:f.sheet||b.styleSheets[b.styleSheets.length-1]}return this.cacheStyleSheet(d),d},removeStyleSheet:function(a){var c=b.getElementById(a);c&&c.parentNode.removeChild(c)},swapStyleSheet:function(a,c){this.removeStyleSheet(a);var d=b.createElement("link");d.setAttribute("rel","stylesheet"),d.setAttribute("type","text/css"),d.setAttribute("id",a),d.setAttribute("href",c),b.getElementsByTagName("head")[0].appendChild(d)},refreshCache:function(){return this.getRules(!0)},cacheStyleSheet:function(b){a||(a={});try{var c=b.cssRules||b.rules;for(var d=c.length-1;d>=0;--d)a[c[d].selectorText.toLowerCase()]=c[d]}catch(e){}},getRules:function(c){if(a===null||c){a={};var d=b.styleSheets;for(var e=0,f=d.length;e<f;e++)try{this.cacheStyleSheet(d[e])}catch(g){}}return a},getRule:function(a,b){var c=this.getRules(b);if(!Ext.isArray(a))return c[a.toLowerCase()];for(var d=0;d<a.length;d++)if(c[a[d]])return c[a[d].toLowerCase()];return null},updateRule:function(a,b,e){if(!Ext.isArray(a)){var f=this.getRule(a);if(f)return f.style[b.replace(c,d)]=e,!0}else for(var g=0;g<a.length;g++)if(this.updateRule(a[g],b,e))return!0;return!1}}}(),Ext.util.ClickRepeater=Ext.extend(Ext.util.Observable,{constructor:function(a,b){this.el=Ext.get(a),this.el.unselectable(),Ext.apply(this,b),this.addEvents("mousedown","click","mouseup"),this.disabled||(this.disabled=!0,this.enable()),this.handler&&this.on("click",this.handler,this.scope||this),Ext.util.ClickRepeater.superclass.constructor.call(this)},interval:20,delay:250,preventDefault:!0,stopDefault:!1,timer:0,enable:function(){this.disabled&&(this.el.on("mousedown",this.handleMouseDown,this),Ext.isIE&&this.el.on("dblclick",this.handleDblClick,this),(this.preventDefault||this.stopDefault)&&this.el.on("click",this.eventOptions,this)),this.disabled=!1},disable:function(a){if(a||!this.disabled)clearTimeout(this.timer),this.pressClass&&this.el.removeClass(this.pressClass),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.el.removeAllListeners();this.disabled=!0},setDisabled:function(a){this[a?"disable":"enable"]()},eventOptions:function(a){this.preventDefault&&a.preventDefault(),this.stopDefault&&a.stopEvent()},destroy:function(){this.disable(!0),Ext.destroy(this.el),this.purgeListeners()},handleDblClick:function(a){clearTimeout(this.timer),this.el.blur(),this.fireEvent("mousedown",this,a),this.fireEvent("click",this,a)},handleMouseDown:function(a){clearTimeout(this.timer),this.el.blur(),this.pressClass&&this.el.addClass(this.pressClass),this.mousedownTime=new Date,Ext.getDoc().on("mouseup",this.handleMouseUp,this),this.el.on("mouseout",this.handleMouseOut,this),this.fireEvent("mousedown",this,a),this.fireEvent("click",this,a),this.accelerate&&(this.delay=400),this.timer=this.click.defer(this.delay||this.interval,this,[a])},click:function(a){this.fireEvent("click",this,a),this.timer=this.click.defer(this.accelerate?this.easeOutExpo(this.mousedownTime.getElapsed(),400,-390,12e3):this.interval,this,[a])},easeOutExpo:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},handleMouseOut:function(){clearTimeout(this.timer),this.pressClass&&this.el.removeClass(this.pressClass),this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un("mouseover",this.handleMouseReturn,this),this.pressClass&&this.el.addClass(this.pressClass),this.click()},handleMouseUp:function(a){clearTimeout(this.timer),this.el.un("mouseover",this.handleMouseReturn,this),this.el.un("mouseout",this.handleMouseOut,this),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.el.removeClass(this.pressClass),this.fireEvent("mouseup",this,a)}}),Ext.KeyNav=function(a,b){this.el=Ext.get(a),Ext.apply(this,b),this.disabled||(this.disabled=!0,this.enable())},Ext.KeyNav.prototype={disabled:!1,defaultEventAction:"stopEvent",forceKeyDown:!1,relay:function(a){var b=a.getKey(),c=this.keyToHandler[b];c&&this[c]&&this.doRelay(a,this[c],c)!==!0&&a[this.defaultEventAction]()},doRelay:function(a,b,c){return b.call(this.scope||this,a,c)},enter:!1,left:!1,right:!1,up:!1,down:!1,tab:!1,esc:!1,pageUp:!1,pageDown:!1,del:!1,home:!1,end:!1,keyToHandler:{37:"left",39:"right",38:"up",40:"down",33:"pageUp",34:"pageDown",46:"del",36:"home",35:"end",13:"enter",27:"esc",9:"tab"},stopKeyUp:function(a){var b=a.getKey();b>=37&&b<=40&&a.stopEvent()},destroy:function(){this.disable()},enable:function(){this.disabled&&(Ext.isSafari2&&this.el.on("keyup",this.stopKeyUp,this),this.el.on(this.isKeydown()?"keydown":"keypress",this.relay,this),this.disabled=!1)},disable:function(){this.disabled||(Ext.isSafari2&&this.el.un("keyup",this.stopKeyUp,this),this.el.un(this.isKeydown()?"keydown":"keypress",this.relay,this),this.disabled=!0)},setDisabled:function(a){this[a?"disable":"enable"]()},isKeydown:function(){return this.forceKeyDown||Ext.EventManager.useKeydown}},Ext.KeyMap=function(a,b,c){this.el=Ext.get(a),this.eventName=c||"keydown",this.bindings=[],b&&this.addBinding(b),this.enable()},Ext.KeyMap.prototype={stopEvent:!1,addBinding:function(a){if(Ext.isArray(a)){Ext.each(a,function(a){this.addBinding(a)},this);return}var b=a.key,c=a.fn||a.handler,d=a.scope;a.stopEvent&&(this.stopEvent=a.stopEvent);if(typeof b=="string"){var e=[],f=b.toUpperCase();for(var g=0,h=f.length;g<h;g++)e.push(f.charCodeAt(g));b=e}var i=Ext.isArray(b),j=function(e){if(this.checkModifiers(a,e)){var f=e.getKey();if(i){for(var g=0,h=b.length;g<h;g++)if(b[g]==f){this.stopEvent&&e.stopEvent(),c.call(d||window,f,e);return}}else f==b&&(this.stopEvent&&e.stopEvent(),c.call(d||window,f,e))}};this.bindings.push(j)},checkModifiers:function(a,b){var c,d,e=["shift","ctrl","alt"];for(var f=0,g=e.length;f<g;++f){d=e[f],c=a[d];if(c!==undefined&&c!==b[d+"Key"])return!1}return!0},on:function(a,b,c){var d,e,f,g;typeof a=="object"&&!Ext.isArray(a)?(d=a.key,e=a.shift,f=a.ctrl,g=a.alt):d=a,this.addBinding({key:d,shift:e,ctrl:f,alt:g,fn:b,scope:c})},handleKeyDown:function(a){if(this.enabled){var b=this.bindings;for(var c=0,d=b.length;c<d;c++)b[c].call(this,a)}},isEnabled:function(){return this.enabled},enable:function(){this.enabled||(this.el.on(this.eventName,this.handleKeyDown,this),this.enabled=!0)},disable:function(){this.enabled&&(this.el.removeListener(this.eventName,this.handleKeyDown,this),this.enabled=!1)},setDisabled:function(a){this[a?"disable":"enable"]()}},Ext.util.TextMetrics=function(){var a;return{measure:function(b,c,d){return a||(a=Ext.util.TextMetrics.Instance(b,d)),a.bind(b),a.setFixedWidth(d||"auto"),a.getSize(c)},createInstance:function(a,b){return Ext.util.TextMetrics.Instance(a,b)}}}(),Ext.util.TextMetrics.Instance=function(a,b){var c=new Ext.Element(document.createElement("div"));document.body.appendChild(c.dom),c.position("absolute"),c.setLeftTop(-1e3,-1e3),c.hide(),b&&c.setWidth(b);var d={getSize:function(a){c.update(a);var b=c.getSize();return c.update(""),b},bind:function(a){c.setStyle(Ext.fly(a).getStyles("font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"))},setFixedWidth:function(a){c.setWidth(a)},getWidth:function(a){return c.dom.style.width="auto",this.getSize(a).width},getHeight:function(a){return this.getSize(a).height}};return d.bind(a),d},Ext.Element.addMethods({getTextWidth:function(a,b,c){return Ext.util.TextMetrics.measure(this.dom,Ext.value(a,this.dom.innerHTML,!0)).width.constrain(b||0,c||1e6)}}),Ext.util.Cookies={set:function(a,b){var c=arguments,d=arguments.length,e=d>2?c[2]:null,f=d>3?c[3]:"/",g=d>4?c[4]:null,h=d>5?c[5]:!1;document.cookie=a+"="+escape(b)+(e===null?"":"; expires="+e.toGMTString())+(f===null?"":"; path="+f)+(g===null?"":"; domain="+g)+(h===!0?"; secure":"")},get:function(a){var b=a+"=",c=b.length,d=document.cookie.length,e=0,f=0;while(e<d){f=e+c;if(document.cookie.substring(e,f)==b)return Ext.util.Cookies.getCookieVal(f);e=document.cookie.indexOf(" ",e)+1;if(e===0)break}return null},clear:function(a){Ext.util.Cookies.get(a)&&(document.cookie=a+"=; expires=Thu, 01-Jan-70 00:00:01 GMT")},getCookieVal:function(a){var b=document.cookie.indexOf(";",a);return b==-1&&(b=document.cookie.length),unescape(document.cookie.substring(a,b))}},Ext.handleError=function(a){throw a},Ext.Error=function(a){this.message=this.lang[a]?this.lang[a]:a},Ext.Error.prototype=new Error,Ext.apply(Ext.Error.prototype,{lang:{},name:"Ext.Error",getName:function(){return this.name},getMessage:function(){return this.message},toJson:function(){return Ext.encode(this)}}),Ext.ComponentMgr=function(){var a=new Ext.util.MixedCollection,b={},c={};return{register:function(b){a.add(b)},unregister:function(b){a.remove(b)},get:function(b){return a.get(b)},onAvailable:function(b,c,d){a.on("add",function(f,h){h.id==b&&(c.call(d||h,h),a.un("add",c,d))})},all:a,types:b,ptypes:c,isRegistered:function(a){return b[a]!==undefined},isPluginRegistered:function(a){return c[a]!==undefined},registerType:function(a,c){b[a]=c,c.xtype=a},create:function(a,c){return a.render?a:new b[a.xtype||c](a)},registerPlugin:function(a,b){c[a]=b,b.ptype=a},createPlugin:function(a,b){var d=c[a.ptype||b];return d.init?d:new d(a)}}}(),Ext.reg=Ext.ComponentMgr.registerType,Ext.preg=Ext.ComponentMgr.registerPlugin,Ext.create=Ext.ComponentMgr.create,Ext.Component=function(a){a=a||{};if(a.initialConfig)a.isAction&&(this.baseAction=a),a=a.initialConfig;else if(a.tagName||a.dom||Ext.isString(a))a={applyTo:a,id:a.id||a};this.initialConfig=a,Ext.apply(this,a),this.addEvents("added","disable","enable","beforeshow","show","beforehide","hide","removed","beforerender","render","afterrender","beforedestroy","destroy","beforestaterestore","staterestore","beforestatesave","statesave"),this.getId(),Ext.ComponentMgr.register(this),Ext.Component.superclass.constructor.call(this),this.baseAction&&this.baseAction.addComponent(this),this.initComponent();if(this.plugins)if(Ext.isArray(this.plugins))for(var b=0,c=this.plugins.length;b<c;b++)this.plugins[b]=this.initPlugin(this.plugins[b]);else this.plugins=this.initPlugin(this.plugins);this.stateful!==!1&&this.initState(),this.applyTo?(this.applyToMarkup(this.applyTo),delete this.applyTo):this.renderTo&&(this.render(this.renderTo),delete this.renderTo)},Ext.Component.AUTO_ID=1e3,Ext.extend(Ext.Component,Ext.util.Observable,{disabled:!1,hidden:!1,autoEl:"div",disabledClass:"x-item-disabled",allowDomMove:!0,autoShow:!1,hideMode:"display",hideParent:!1,rendered:!1,tplWriteMode:"overwrite",bubbleEvents:[],ctype:"Ext.Component",actionMode:"el",getActionEl:function(){return this[this.actionMode]},initPlugin:function(a){return a.ptype&&!Ext.isFunction(a.init)?a=Ext.ComponentMgr.createPlugin(a):Ext.isString(a)&&(a=Ext.ComponentMgr.createPlugin({ptype:a})),a.init(this),a},initComponent:function(){this.listeners&&(this.on(this.listeners),delete this.listeners),this.enableBubble(this.bubbleEvents)},render:function(a,b){if(!this.rendered&&this.fireEvent("beforerender",this)!==!1){!a&&this.el&&(this.el=Ext.get(this.el),a=this.el.dom.parentNode,this.allowDomMove=!1),this.container=Ext.get(a),this.ctCls&&this.container.addClass(this.ctCls),this.rendered=!0,b!==undefined&&(Ext.isNumber(b)?b=this.container.dom.childNodes[b]:b=Ext.getDom(b)),this.onRender(this.container,b||null),this.autoShow&&this.el.removeClass(["x-hidden","x-hide-"+this.hideMode]),this.cls&&(this.el.addClass(this.cls),delete this.cls),this.style&&(this.el.applyStyles(this.style),delete this.style),this.overCls&&this.el.addClassOnOver(this.overCls),this.fireEvent("render",this);var c=this.getContentTarget();this.html&&(c.update(Ext.DomHelper.markup(this.html)),delete this.html);if(this.contentEl){var d=Ext.getDom(this.contentEl);Ext.fly(d).removeClass(["x-hidden","x-hide-display"]),c.appendChild(d)}this.tpl&&(this.tpl.compile||(this.tpl=new Ext.XTemplate(this.tpl)),this.data&&(this.tpl
[this.tplWriteMode](c,this.data),delete this.data)),this.afterRender(this.container),this.hidden&&this.doHide(),this.disabled&&this.disable(!0),this.stateful!==!1&&this.initStateEvents(),this.fireEvent("afterrender",this)}return this},update:function(a,b,c){var d=this.getContentTarget();if(this.tpl&&typeof a!="string")this.tpl[this.tplWriteMode](d,a||{});else{var e=Ext.isObject(a)?Ext.DomHelper.markup(a):a;d.update(e,b,c)}},onAdded:function(a,b){this.ownerCt=a,this.initRef(),this.fireEvent("added",this,a,b)},onRemoved:function(){this.removeRef(),this.fireEvent("removed",this,this.ownerCt),delete this.ownerCt},initRef:function(){if(this.ref&&!this.refOwner){var a=this.ref.split("/"),b=a.length,c=0,d=this;while(d&&c<b)d=d.ownerCt,++c;d&&(d[this.refName=a[--c]]=this,this.refOwner=d)}},removeRef:function(){this.refOwner&&this.refName&&(delete this.refOwner[this.refName],delete this.refOwner)},initState:function(){if(Ext.state.Manager){var a=this.getStateId();if(a){var b=Ext.state.Manager.get(a);b&&this.fireEvent("beforestaterestore",this,b)!==!1&&(this.applyState(Ext.apply({},b)),this.fireEvent("staterestore",this,b))}}},getStateId:function(){return this.stateId||(/^(ext-comp-|ext-gen)/.test(String(this.id))?null:this.id)},initStateEvents:function(){if(this.stateEvents)for(var a=0,b;b=this.stateEvents[a];a++)this.on(b,this.saveState,this,{delay:100})},applyState:function(a){a&&Ext.apply(this,a)},getState:function(){return null},saveState:function(){if(Ext.state.Manager&&this.stateful!==!1){var a=this.getStateId();if(a){var b=this.getState();this.fireEvent("beforestatesave",this,b)!==!1&&(Ext.state.Manager.set(a,b),this.fireEvent("statesave",this,b))}}},applyToMarkup:function(a){this.allowDomMove=!1,this.el=Ext.get(a),this.render(this.el.dom.parentNode)},addClass:function(a){return this.el?this.el.addClass(a):this.cls=this.cls?this.cls+" "+a:a,this},removeClass:function(a){return this.el?this.el.removeClass(a):this.cls&&(this.cls=this.cls.split(" ").remove(a).join(" ")),this},onRender:function(a,b){if(!this.el&&this.autoEl){if(Ext.isString(this.autoEl))this.el=document.createElement(this.autoEl);else{var c=document.createElement("div");Ext.DomHelper.overwrite(c,this.autoEl),this.el=c.firstChild}this.el.id||(this.el.id=this.getId())}this.el&&(this.el=Ext.get(this.el),this.allowDomMove!==!1&&(a.dom.insertBefore(this.el.dom,b),c&&(Ext.removeNode(c),c=null)))},getAutoCreate:function(){var a=Ext.isObject(this.autoCreate)?this.autoCreate:Ext.apply({},this.defaultAutoCreate);return this.id&&!a.id&&(a.id=this.id),a},afterRender:Ext.emptyFn,destroy:function(){this.isDestroyed||this.fireEvent("beforedestroy",this)!==!1&&(this.destroying=!0,this.beforeDestroy(),this.ownerCt&&this.ownerCt.remove&&this.ownerCt.remove(this,!1),this.rendered&&(this.el.remove(),(this.actionMode=="container"||this.removeMode=="container")&&this.container.remove()),this.focusTask&&this.focusTask.cancel&&this.focusTask.cancel(),this.onDestroy(),Ext.ComponentMgr.unregister(this),this.fireEvent("destroy",this),this.purgeListeners(),this.destroying=!1,this.isDestroyed=!0)},deleteMembers:function(){var a=arguments;for(var b=0,c=a.length;b<c;++b)delete this[a[b]]},beforeDestroy:Ext.emptyFn,onDestroy:Ext.emptyFn,getEl:function(){return this.el},getContentTarget:function(){return this.el},getId:function(){return this.id||(this.id="ext-comp-"+ ++Ext.Component.AUTO_ID)},getItemId:function(){return this.itemId||this.getId()},focus:function(a,b){return b?(this.focusTask=new Ext.util.DelayedTask(this.focus,this,[a,!1]),this.focusTask.delay(Ext.isNumber(b)?b:10),this):(this.rendered&&!this.isDestroyed&&(this.el.focus(),a===!0&&this.el.dom.select()),this)},blur:function(){return this.rendered&&this.el.blur(),this},disable:function(a){return this.rendered&&this.onDisable(),this.disabled=!0,a!==!0&&this.fireEvent("disable",this),this},onDisable:function(){this.getActionEl().addClass(this.disabledClass),this.el.dom.disabled=!0},enable:function(){return this.rendered&&this.onEnable(),this.disabled=!1,this.fireEvent("enable",this),this},onEnable:function(){this.getActionEl().removeClass(this.disabledClass),this.el.dom.disabled=!1},setDisabled:function(a){return this[a?"disable":"enable"]()},show:function(){return this.fireEvent("beforeshow",this)!==!1&&(this.hidden=!1,this.autoRender&&this.render(Ext.isBoolean(this.autoRender)?Ext.getBody():this.autoRender),this.rendered&&this.onShow(),this.fireEvent("show",this)),this},onShow:function(){this.getVisibilityEl().removeClass("x-hide-"+this.hideMode)},hide:function(){return this.fireEvent("beforehide",this)!==!1&&(this.doHide(),this.fireEvent("hide",this)),this},doHide:function(){this.hidden=!0,this.rendered&&this.onHide()},onHide:function(){this.getVisibilityEl().addClass("x-hide-"+this.hideMode)},getVisibilityEl:function(){return this.hideParent?this.container:this.getActionEl()},setVisible:function(a){return this[a?"show":"hide"]()},isVisible:function(){return this.rendered&&this.getVisibilityEl().isVisible()},cloneConfig:function(a){a=a||{};var b=a.id||Ext.id(),c=Ext.applyIf(a,this.initialConfig);return c.id=b,new this.constructor(c)},getXType:function(){return this.constructor.xtype},isXType:function(a,b){return Ext.isFunction(a)?a=a.xtype:Ext.isObject(a)&&(a=a.constructor.xtype),b?this.constructor.xtype==a:("/"+this.getXTypes()+"/").indexOf("/"+a+"/")!=-1},getXTypes:function(){var a=this.constructor;if(!a.xtypes){var b=[],c=this;while(c&&c.constructor.xtype)b.unshift(c.constructor.xtype),c=c.constructor.superclass;a.xtypeChain=b,a.xtypes=b.join("/")}return a.xtypes},findParentBy:function(a){for(var b=this.ownerCt;b!=null&&!a(b,this);b=b.ownerCt);return b||null},findParentByType:function(a,b){return this.findParentBy(function(c){return c.isXType(a,b)})},bubble:function(a,b,c){var d=this;while(d){if(a.apply(b||d,c||[d])===!1)break;d=d.ownerCt}return this},getPositionEl:function(){return this.positionEl||this.el},purgeListeners:function(){Ext.Component.superclass.purgeListeners.call(this),this.mons&&this.on("beforedestroy",this.clearMons,this,{single:!0})},clearMons:function(){Ext.each(this.mons,function(a){a.item.un(a.ename,a.fn,a.scope)},this),this.mons=[]},createMons:function(){this.mons||(this.mons=[],this.on("beforedestroy",this.clearMons,this,{single:!0}))},mon:function(a,b,c,d,e){this.createMons();if(Ext.isObject(b)){var f=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,g=b;for(var h in g){if(f.test(h))continue;Ext.isFunction(g[h])?(this.mons.push({item:a,ename:h,fn:g[h],scope:g.scope}),a.on(h,g[h],g.scope,g)):(this.mons.push({item:a,ename:h,fn:g[h],scope:g.scope}),a.on(h,g[h]))}return}this.mons.push({item:a,ename:b,fn:c,scope:d}),a.on(b,c,d,e)},mun:function(a,b,c,d){var e,f;this.createMons();for(var g=0,h=this.mons.length;g<h;++g){f=this.mons[g];if(a===f.item&&b==f.ename&&c===f.fn&&d===f.scope){this.mons.splice(g,1),a.un(b,c,d),e=!0;break}}return e},nextSibling:function(){if(this.ownerCt){var a=this.ownerCt.items.indexOf(this);if(a!=-1&&a+1<this.ownerCt.items.getCount())return this.ownerCt.items.itemAt(a+1)}return null},previousSibling:function(){if(this.ownerCt){var a=this.ownerCt.items.indexOf(this);if(a>0)return this.ownerCt.items.itemAt(a-1)}return null},getBubbleTarget:function(){return this.ownerCt}}),Ext.reg("component",Ext.Component),Ext.Action=Ext.extend(Object,{constructor:function(a){this.initialConfig=a,this.itemId=a.itemId=a.itemId||a.id||Ext.id(),this.items=[]},isAction:!0,setText:function(a){this.initialConfig.text=a,this.callEach("setText",[a])},getText:function(){return this.initialConfig.text},setIconClass:function(a){this.initialConfig.iconCls=a,this.callEach("setIconClass",[a])},getIconClass:function(){return this.initialConfig.iconCls},setDisabled:function(a){this.initialConfig.disabled=a,this.callEach("setDisabled",[a])},enable:function(){this.setDisabled(!1)},disable:function(){this.setDisabled(!0)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(a){this.initialConfig.hidden=a,this.callEach("setVisible",[!a])},show:function(){this.setHidden(!1)},hide:function(){this.setHidden(!0)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(a,b){this.initialConfig.handler=a,this.initialConfig.scope=b,this.callEach("setHandler",[a,b])},each:function(a,b){Ext.each(this.items,a,b)},callEach:function(a,b){var c=this.items;for(var d=0,e=c.length;d<e;d++)c[d][a].apply(c[d],b)},addComponent:function(a){this.items.push(a),a.on("destroy",this.removeComponent,this)},removeComponent:function(a){this.items.remove(a)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||window,arguments)}}),function(){Ext.Layer=function(a,b){a=a||{};var c=Ext.DomHelper,d=a.parentEl,e=d?Ext.getDom(d):document.body;b&&(this.dom=Ext.getDom(b));if(!this.dom){var f=a.dh||{tag:"div",cls:"x-layer"};this.dom=c.append(e,f)}a.cls&&this.addClass(a.cls),this.constrain=a.constrain!==!1,this.setVisibilityMode(Ext.Element.VISIBILITY),a.id?this.id=this.dom.id=a.id:this.id=Ext.id(this.dom),this.zindex=a.zindex||this.getZIndex(),this.position("absolute",this.zindex),a.shadow?(this.shadowOffset=a.shadowOffset||4,this.shadow=new Ext.Shadow({offset:this.shadowOffset,mode:a.shadow})):this.shadowOffset=0,this.useShim=a.shim!==!1&&Ext.useShims,this.useDisplay=a.useDisplay,this.hide()};var a=Ext.Element.prototype,b=[];Ext.extend(Ext.Layer,Ext.Element,{getZIndex:function(){return this.zindex||parseInt((this.getShim()||this).getStyle("z-index"),10)||11e3},getShim:function(){if(!this.useShim)return null;if(this.shim)return this.shim;var a=b.shift();a||(a=this.createShim(),a.enableDisplayMode("block"),a.dom.style.display="none",a.dom.style.visibility="visible");var c=this.dom.parentNode;return a.dom.parentNode!=c&&c.insertBefore(a.dom,this.dom),a.setStyle("z-index",this.getZIndex()-2),this.shim=a,a},hideShim:function(){this.shim&&(this.shim.setDisplayed(!1),b.push(this.shim),delete this.shim)},disableShadow:function(){this.shadow&&(this.shadowDisabled=!0,this.shadow.hide(),this.lastShadowOffset=this.shadowOffset,this.shadowOffset=0)},enableShadow:function(a){this.shadow&&(this.shadowDisabled=!1,this.shadowOffset=this.lastShadowOffset,delete this.lastShadowOffset,a&&this.sync(!0))},sync:function(a){var b=this.shadow;if(!this.updating&&this.isVisible()&&(b||this.useShim)){var c=this.getShim(),d=this.getWidth(),e=this.getHeight(),f=this.getLeft(!0),g=this.getTop(!0);if(b&&!this.shadowDisabled){a&&!b.isVisible()?b.show(this):b.realign(f,g,d,e);if(c){a&&c.show();var h=b.el.getXY(),i=c.dom.style,j=b.el.getSize();i.left=h[0]+"px",i.top=h[1]+"px",i.width=j.width+"px",i.height=j.height+"px"}}else c&&(a&&c.show(),c.setSize(d,e),c.setLeftTop(f,g))}},destroy:function(){this.hideShim(),this.shadow&&this.shadow.hide(),this.removeAllListeners(),Ext.removeNode(this.dom),delete this.dom},remove:function(){this.destroy()},beginUpdate:function(){this.updating=!0},endUpdate:function(){this.updating=!1,this.sync(!0)},hideUnders:function(a){this.shadow&&this.shadow.hide(),this.hideShim()},constrainXY:function(){if(this.constrain){var b=Ext.lib.Dom.getViewWidth(),c=Ext.lib.Dom.getViewHeight(),d=Ext.getDoc().getScroll(),e=this.getXY(),f=e[0],g=e[1],h=this.shadowOffset,i=this.dom.offsetWidth+h,j=this.dom.offsetHeight+h,k=!1;f+i>b+d.left&&(f=b-i-h,k=!0),g+j>c+d.top&&(g=c-j-h,k=!0),f<d.left&&(f=d.left,k=!0),g<d.top&&(g=d.top,k=!0);if(k){if(this.avoidY){var l=this.avoidY;g<=l&&g+j>=l&&(g=l-j-5)}e=[f,g],this.storeXY(e),a.setXY.call(this,e),this.sync()}}return this},getConstrainOffset:function(){return this.shadowOffset},isVisible:function(){return this.visible},showAction:function(){this.visible=!0,this.useDisplay===!0?this.setDisplayed(""):this.lastXY?a.setXY.call(this,this.lastXY):this.lastLT&&a.setLeftTop.call(this,this.lastLT[0],this.lastLT[1])},hideAction:function(){this.visible=!1,this.useDisplay===!0?this.setDisplayed(!1):this.setLeftTop(-1e4,-1e4)},setVisible:function(b,c,d,e,f){b&&this.showAction();if(c&&b){var g=function(){this.sync(!0),e&&e()}.createDelegate(this);a.setVisible.call(this,!0,!0,d,g,f)}else{b||this.hideUnders(!0);var g=e;c&&(g=function(){this.hideAction(),e&&e()}.createDelegate(this)),a.setVisible.call(this,b,c,d,g,f),b?this.sync(!0):c||this.hideAction()}return this},storeXY:function(a){delete this.lastLT,this.lastXY=a},storeLeftTop:function(a,b){delete this.lastXY,this.lastLT=[a,b]},beforeFx:function(){return this.beforeAction(),Ext.Layer.superclass.beforeFx.apply(this,arguments)},afterFx:function(){Ext.Layer.superclass.afterFx.apply(this,arguments),this.sync(this.isVisible())},beforeAction:function(){!this.updating&&this.shadow&&this.shadow.hide()},setLeft:function(b){return this.storeLeftTop(b,this.getTop(!0)),a.setLeft.apply(this,arguments),this.sync(),this},setTop:function(b){return this.storeLeftTop(this.getLeft(!0),b),a.setTop.apply(this,arguments),this.sync(),this},setLeftTop:function(b,c){return this.storeLeftTop(b,c),a.setLeftTop.apply(this,arguments),this.sync(),this},setXY:function(b,c,d,e,f){this.fixDisplay(),this.beforeAction(),this.storeXY(b);var g=this.createCB(e);return a.setXY.call(this,b,c,d,g,f),c||g(),this},createCB:function(a){var b=this;return function(){b.constrainXY(),b.sync(!0),a&&a()}},setX:function(a,b,c,d,e){return this.setXY([a,this.getY()],b,c,d,e),this},setY:function(a,b,c,d,e){return this.setXY([this.getX(),a],b,c,d,e),this},setSize:function(b,c,d,e,f,g){this.beforeAction();var h=this.createCB(f);return a.setSize.call(this,b,c,d,e,h,g),d||h(),this},setWidth:function(b,c,d,e,f){this.beforeAction();var g=this.createCB(e);return a.setWidth.call(this,b,c,d,g,f),c||g(),this},setHeight:function(b,c,d,e,f){this.beforeAction();var g=this.createCB(e);return a.setHeight.call(this,b,c,d,g,f),c||g(),this},setBounds:function(b,c,d,e,f,g,h,i){this.beforeAction();var j=this.createCB(h);return f?a.setBounds.call(this,b,c,d,e,f,g,j,i):(this.storeXY([b,c]),a.setXY.call(this,[b,c]),a.setSize.call(this,d,e,f,g,j,i),j()),this},setZIndex:function(a){return this.zindex=a,this.setStyle("z-index",a+2),this.shadow&&this.shadow.setZIndex(a+1),this.shim&&this.shim.setStyle("z-index",a),this}})}(),Ext.Shadow=function(a){Ext.apply(this,a),typeof this.mode!="string"&&(this.mode=this.defaultMode);var b=this.offset,c={h:0},d=Math.floor(this.offset/2);switch(this.mode.toLowerCase()){case"drop":c.w=0,c.l=c.t=b,c.t-=1,Ext.isIE&&(c.l-=this.offset+d,c.t-=this.offset+d,c.w-=d,c.h-=d,c.t+=1);break;case"sides":c.w=b*2,c.l=-b,c.t=b-1,Ext.isIE&&(c.l-=this.offset-d,c.t-=this.offset+d,c.l+=1,c.w-=(this.offset-d)*2,c.w-=d+1,c.h-=1);break;case"frame":c.w=c.h=b*2,c.l=c.t=-b,c.t+=1,c.h-=2,Ext.isIE&&(c.l-=this.offset-d,c.t-=this.offset-d,c.l+=1,c.w-=this.offset+d+1,c.h-=this.offset+d,c.h+=1)}this.adjusts=c},Ext.Shadow.prototype={offset:4,defaultMode:"drop",show:function(a){a=Ext.get(a),this.el||(this.el=Ext.Shadow.Pool.pull(),this.el.dom.nextSibling!=a.dom&&this.el.insertBefore(a)),this.el.setStyle("z-index",this.zIndex||parseInt(a.getStyle("z-index"),10)-1),Ext.isIE&&(this.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+this.offset+")"),this.realign(a.getLeft(!0),a.getTop(!0),a.getWidth(),a.getHeight()),this.el.dom.style.display="block"},isVisible:function(){return this.el?!0:!1},realign:function(a,b,c,d){if(!this.el)return;var e=this.adjusts,f=this.el.dom,g=f.style,h=0,i=c+e.w,j=d+e.h,k=i+"px",l=j+"px",m,n;g.left=a+e.l+"px",g.top=b+e.t+"px";if(g.width!=k||g.height!=l)g.width=k,g.height=l,Ext.isIE||(m=f.childNodes,n=Math.max(0,i-12)+"px",m[0].childNodes[1].style.width=n,m[1].childNodes[1].style.width=n,m[2].childNodes[1].style.width=n,m[1].style.height=Math.max(0,j-12)+"px")},hide:function(){this.el&&(this.el.dom.style.display="none",Ext.Shadow.Pool.push(this.el),delete this.el)},setZIndex:function(a){this.zIndex=a,this.el&&this.el.setStyle("z-index",a)}},Ext.Shadow.Pool=function(){var a=[],b=Ext.isIE?'<div class="x-ie-shadow"></div>':'<div class="x-shadow"><div class="xst"><div class="xstl"></div><div class="xstc"></div><div class="xstr"></div></div><div class="xsc"><div class="xsml"></div><div class="xsmc"></div><div class="xsmr"></div></div><div class="xsb"><div class="xsbl"></div><div class="xsbc"></div><div class="xsbr"></div></div></div>';return{pull:function(){var c=a.shift();return c||(c=Ext.get(Ext.DomHelper.insertHtml("beforeBegin",document.body.firstChild,b)),c.autoBoxAdjust=!1),c},push:function(b){a.push(b)}}}(),Ext.BoxComponent=Ext.extend(Ext.Component,{initComponent:function(){Ext.BoxComponent.superclass.initComponent.call(this),this.addEvents("resize","move")},boxReady:!1,deferHeight:!1,setSize:function(a,b){typeof a=="object"&&(b=a.height,a=a.width),Ext.isDefined(a)&&Ext.isDefined(this.boxMinWidth)&&a<this.boxMinWidth&&(a=this.boxMinWidth),Ext.isDefined(b)&&Ext.isDefined(this.boxMinHeight)&&b<this.boxMinHeight&&(b=this.boxMinHeight),Ext.isDefined(a)&&Ext.isDefined(this.boxMaxWidth)&&a>this.boxMaxWidth&&(a=this.boxMaxWidth),Ext.isDefined(b)&&Ext.isDefined(this.boxMaxHeight)&&b>this.boxMaxHeight&&(b=this.boxMaxHeight);if(!this.boxReady)return this.width=a,this.height=b,this;if(this.cacheSizes!==!1&&this.lastSize&&this.lastSize.width==a&&this.lastSize.height==b)return this;this.lastSize={width:a,height:b};var c=this.adjustSize(a,b),d=c.width,e=c.height,f;if(d!==undefined||e!==undefined)f=this.getResizeEl(),!this.deferHeight&&d!==undefined&&e!==undefined?f.setSize(d,e):!this.deferHeight&&e!==undefined?f.setHeight(e):d!==undefined&&f.setWidth(d),this.onResize(d,e,a,b),this.fireEvent("resize",this,d,e,a,b);return this},setWidth:function(a){return this.setSize(a)},setHeight:function(a){return this.setSize(undefined,a)},getSize:function(){return this.getResizeEl().getSize()},getWidth:function(){return this.getResizeEl().getWidth()},getHeight:function(){return this.getResizeEl().getHeight()},getOuterSize:function(){var a=this.getResizeEl();return{width:a.getWidth()+a.getMargins("lr"),height:a.getHeight()+a.getMargins("tb")}},getPosition:function(a){var b=this.getPositionEl();return a===!0?[b.getLeft(!0),b.getTop(!0)]:this.xy||b.getXY()},getBox:function(a){var b=this.getPosition(a),c=this.getSize();return c.x=b[0],c.y=b[1],c},updateBox:function(a){return this.setSize(a.width,a.height),this.setPagePosition(a.x,a.y),this},getResizeEl:function(){return this.resizeEl||this.el},setAutoScroll:function(a){return this.rendered&&this.getContentTarget().setOverflow(a?"auto":""),this.autoScroll=a,this},setPosition:function(a,b){a&&typeof a[1]=="number"&&(b=a[1],a=a[0]),this.x=a,this.y=b;if(!this.boxReady)return this;var c=this.adjustPosition(a,b),d=c.x,e=c.y,f=this.getPositionEl();if(d!==undefined||e!==undefined)d!==undefined&&e!==undefined?f.setLeftTop(d,e):d!==undefined?f.setLeft(d):e!==undefined&&f.setTop(e),this.onPosition(d,e),this.fireEvent("move",this,d,e);return this},setPagePosition:function(a,b){a&&typeof a[1]=="number"&&(b=a[1],a=a[0]),this.pageX=a,this.pageY=b;if(!this.boxReady)return;if(a===undefined||b===undefined)return;var c=this.getPositionEl().translatePoints(a,b);return this.setPosition(c.left,c.top),this},afterRender:function(){Ext.BoxComponent.superclass.afterRender.call(this),this.resizeEl&&(this.resizeEl=Ext.get(this.resizeEl)),this.positionEl&&(this.positionEl=Ext.get(this.positionEl)),this.boxReady=!0,Ext.isDefined(this.autoScroll)&&this.setAutoScroll(this.autoScroll),this.setSize(this.width,this.height),this.x||this.y?this.setPosition(this.x,this.y):(this.pageX||this.pageY)&&this.setPagePosition(this.pageX,this.pageY)},syncSize:function(){return delete this.lastSize,this.setSize(this.autoWidth?undefined:this.getResizeEl().getWidth(),this.autoHeight?undefined:this.getResizeEl().getHeight()),this},onResize:function(a,b,c,d){},onPosition:function(a,b){},adjustSize:function(a,b){return this.autoWidth&&(a="auto"),this.autoHeight&&(b="auto"),{width:a,height:b}},adjustPosition:function(a,b){return{x:a,y:b}}}),Ext.reg("box",Ext.BoxComponent),Ext.Spacer=Ext.extend(Ext.BoxComponent,{autoEl:"div"}),Ext.reg("spacer",Ext.Spacer),Ext.SplitBar=function(a,b,c,d,e){this.el=Ext.get(a,!0),this.el.dom.unselectable="on",this.resizingEl=Ext.get(b,!0),this.orientation=c||Ext.SplitBar.HORIZONTAL,this.minSize=0,this.maxSize=2e3,this.animate=!1,this.useShim=!1,this.shim=null,e?this.proxy=Ext.get(e).dom:this.proxy=Ext.SplitBar.createProxy(this.orientation),this.dd=new Ext.dd.DDProxy(this.el.dom.id,"XSplitBars",{dragElId:this.proxy.id}),this.dd.b4StartDrag=this.onStartProxyDrag.createDelegate(this),this.dd.endDrag=this.onEndProxyDrag.createDelegate(this),this.dragSpecs={},this.adapter=new Ext.SplitBar.BasicLayoutAdapter,this.adapter.init(this),this.orientation==Ext.SplitBar.HORIZONTAL?(this.placement=d||(this.el.getX()>this.resizingEl.getX()?Ext.SplitBar.LEFT:Ext.SplitBar.RIGHT),this.el.addClass("x-splitbar-h")):(this.placement=d||(this.el.getY()>this.resizingEl.getY()?Ext.SplitBar.TOP:Ext.SplitBar.BOTTOM),this.el.addClass("x-splitbar-v")),this.addEvents("resize","moved","beforeresize","beforeapply"),Ext.SplitBar.superclass.constructor.call(this)},Ext.extend(Ext.SplitBar,Ext.util.Observable,{onStartProxyDrag:function(a,b){this.fireEvent("beforeresize",this),this.overlay=Ext.DomHelper.append(document.body,{cls:"x-drag-overlay",html:"&#160;"},!0),this.overlay.unselectable(),this.overlay.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.overlay.show(),Ext.get(this.proxy).setDisplayed("block");var c=this.adapter.getElementSize(this);this.activeMinSize=this.getMinimumSize(),this.activeMaxSize=this.getMaximumSize();var d=c-this.activeMinSize,e=Math.max(this.activeMaxSize-c,0);this.orientation==Ext.SplitBar.HORIZONTAL?(this.dd.resetConstraints(),this.dd.setXConstraint(this.placement==Ext.SplitBar.LEFT?d:e,this.placement==Ext.SplitBar.LEFT?e:d,this.tickSize),this.dd.setYConstraint(0,0)):(this.dd.resetConstraints(),this.dd.setXConstraint(0,0),this.dd.setYConstraint(this.placement==Ext.SplitBar.TOP?d:e,this.placement==Ext.SplitBar.TOP?e:d,this.tickSize)),this.dragSpecs.startSize=c,this.dragSpecs.startPoint=[a,b],Ext.dd.DDProxy.prototype.b4StartDrag.call(this.dd,a,b)},onEndProxyDrag:function(a){Ext.get(this.proxy).setDisplayed(!1);var b=Ext.lib.Event.getXY(a);this.overlay&&(Ext.destroy(this.overlay),delete this.overlay);var c;this.orientation==Ext.SplitBar.HORIZONTAL?c=this.dragSpecs.startSize+(this.placement==Ext.SplitBar.LEFT?b[0]-this.dragSpecs.startPoint[0]:this.dragSpecs.startPoint[0]-b[0]):c=this.dragSpecs.startSize+(this.placement==Ext.SplitBar.TOP?b[1]-this.dragSpecs.startPoint[1]:this.dragSpecs.startPoint[1]-b[1]),c=Math.min(Math.max(c,this.activeMinSize),this.activeMaxSize),c!=this.dragSpecs.startSize&&this.fireEvent("beforeapply",this,c)!==!1&&(this.adapter.setElementSize(this,c),this.fireEvent("moved",this,c),this.fireEvent("resize",this,c))},getAdapter:function(){return this.adapter},setAdapter:function(a){this.adapter=a,this.adapter.init(this)},getMinimumSize:function(){return this.minSize},setMinimumSize:function(a){this.minSize=a},getMaximumSize:function(){return this.maxSize},setMaximumSize:function(a){this.maxSize=a},setCurrentSize:function(a){var b=this.animate;this.animate=!1,this.adapter.setElementSize(this,a),this.animate=b},destroy:function(a){Ext.destroy(this.shim,Ext.get(this.proxy)),this.dd.unreg(),a&&this.el.remove(),this.purgeListeners()}}),Ext.SplitBar.createProxy=function(a){var b=new Ext.Element(document.createElement("div"));document.body.appendChild(b.dom),b.unselectable();var c="x-splitbar-proxy";return b.addClass(c+" "+(a==Ext.SplitBar.HORIZONTAL?c+"-h":c+"-v")),b.dom},Ext.SplitBar.BasicLayoutAdapter=function(){},Ext.SplitBar.BasicLayoutAdapter.prototype={init:function(a){},getElementSize:function(a){return a.orientation==Ext.SplitBar.HORIZONTAL?a.resizingEl.getWidth():a.resizingEl.getHeight()},setElementSize:function(a,b,c){a.orientation==Ext.SplitBar.HORIZONTAL?a.animate?a.resizingEl.setWidth(b,!0,.1,c,"easeOut"):(a.resizingEl.setWidth(b),c&&c(a,b)):a.animate?a.resizingEl.setHeight(b,!0,.1,c,"easeOut"):(a.resizingEl.setHeight(b),c&&c(a,b))}},Ext.SplitBar.AbsoluteLayoutAdapter=function(a){this.basic=new Ext.SplitBar.BasicLayoutAdapter,this.container=Ext.get(a)},Ext.SplitBar.AbsoluteLayoutAdapter.prototype={init:function(a){this.basic.init(a)},getElementSize:function(a){return this.basic.getElementSize(a)},setElementSize:function(a,b,c){this.basic.setElementSize(a,b,this.moveSplitter.createDelegate(this,[a]))},moveSplitter:function(a){var b=Ext.SplitBar;switch(a.placement){case b.LEFT:a.el.setX(a.resizingEl.getRight());break;case b.RIGHT:a.el.setStyle("right",this.container.getWidth()-a.resizingEl.getLeft()+"px");break;case b.TOP:a.el.setY(a.resizingEl.getBottom());break;case b.BOTTOM:a.el.setY(a.resizingEl.getTop()-a.el.getHeight())}}},Ext.SplitBar.VERTICAL=1,Ext.SplitBar.HORIZONTAL=2,Ext.SplitBar.LEFT=1,Ext.SplitBar.RIGHT=2,Ext.SplitBar.TOP=3,Ext.SplitBar.BOTTOM=4,Ext.Container=Ext.extend(Ext.BoxComponent,{bufferResize:50,autoDestroy:!0,forceLayout:!1,defaultType:"panel",resizeEvent:"resize",bubbleEvents:["add","remove"],initComponent:function(){Ext.Container.superclass.initComponent.call(this),this.addEvents("afterlayout","beforeadd","beforeremove","add","remove");var a=this.items;a&&(delete this.items,this.add(a))},initItems:function(){this.items||(this.items=new Ext.util.MixedCollection(!1,this.getComponentId),this.getLayout())},setLayout:function(a){this.layout&&this.layout!=a&&this.layout.setContainer(null),this.layout=a,this.initItems(),a.setContainer(this)},afterRender:function(){Ext.Container.superclass.afterRender.call(this),this.layout||(this.layout="auto"),Ext.isObject(this.layout)&&!this.layout.layout&&(this.layoutConfig=this.layout,this.layout=this.layoutConfig.type),Ext.isString(this.layout)&&(this.layout=new(Ext.Container.LAYOUTS[this.layout.toLowerCase()])(this.layoutConfig)),this.setLayout(this.layout);if(this.activeItem!==undefined&&this.layout.setActiveItem){var a=this.activeItem;delete this.activeItem,this.layout.setActiveItem(a)}this.ownerCt||this.doLayout(!1,!0),this.monitorResize===!0&&Ext.EventManager.onWindowResize(this.doLayout,this,[!1])},getLayoutTarget:function(){return this.el},getComponentId:function(a){return a.getItemId()},add:function(a){this.initItems();var b=arguments.length>1;if(b||Ext.isArray(a)){var c=[];return Ext.each(b?arguments:a,function(a){c.push(this.add(a))},this),c}var d=this.lookupComponent(this.applyDefaults(a)),e=this.items.length;return this.fireEvent("beforeadd",this,d,e)!==!1&&this.onBeforeAdd(d)!==!1&&(this.items.add(d),d.onAdded(this,e),this.onAdd(d),this.fireEvent("add",this,d,e)),d},onAdd:function(a){},onAdded:function(a,b){this.ownerCt=a,this.initRef(),this.cascade(function(a){a.initRef()}),this.fireEvent("added",this,a,b)},insert:function(a,b){var c=arguments,d=c.length,e=[],f,g;this.initItems();if(d>2){for(f=d-1;f>=1;--f)e.push(this.insert(a,c[f]));return e}return g=this.lookupComponent(this.applyDefaults(b)),a=Math.min(a,this.items.length),this.fireEvent("beforeadd",this,g,a)!==!1&&this.onBeforeAdd(g)!==!1&&(g.ownerCt==this&&this.items.remove(g),this.items.insert(a,g),g.onAdded(this,a),this.onAdd(g),this.fireEvent("add",this,g,a)),g},applyDefaults:function(a){var b=this.defaults;return b&&(Ext.isFunction(b)&&(b=b.call(this,a)),Ext.isString(a)?(a=Ext.ComponentMgr.get(a),Ext.apply(a,b)):a.events?Ext.apply(a,b):Ext.applyIf(a.isAction?a.initialConfig:a,b)),a},onBeforeAdd:function(a){a.ownerCt&&a.ownerCt.remove(a,!1),this.hideBorders===!0&&(a.border=a.border===!0)},remove:function(a,b){this.initItems();var c=this.getComponent(a);return c&&this.fireEvent("beforeremove",this,c)!==!1&&(this.doRemove(c,b),this.fireEvent("remove",this,c)),c},onRemove:function(a){},doRemove:function(a,b){var c=this.layout,d=c&&this.rendered;d&&c.onRemove(a),this.items.remove(a),a.onRemoved(),this.onRemove(a),(b===!0||b!==!1&&this.autoDestroy)&&a.destroy(),d&&c.afterRemove(a)},removeAll:function(a){this.initItems();var b,c=[],d=[];this.items.each(function(a){c.push(a)});for(var e=0,f=c.length;e<f;++e)b=c[e],this.remove(b,a),b.ownerCt!==this&&d.push(b);return d},getComponent:function(a){return Ext.isObject(a)&&(a=a.getItemId()),this.items.get(a)},lookupComponent:function(a){return Ext.isString(a)?Ext.ComponentMgr.get(a):a.events?a:this.createComponent(a)},createComponent:function(a,b){if(a.render)return a;var c=Ext.create(Ext.apply({ownerCt:this},a),b||this.defaultType);return delete c.initialConfig.ownerCt,delete c.ownerCt,c},canLayout:function(){var a=this.getVisibilityEl();return a&&a.dom&&!a.isStyle("display","none")},doLayout:function(a,b){var c=this.rendered,d=b||this.forceLayout;if(this.collapsed||!this.canLayout()){this.deferLayout=this.deferLayout||!a;if(!d)return;a=a&&!this.deferLayout}else delete this.deferLayout;c&&this.layout&&this.layout.layout();if(a!==!0&&this.items){var e=this.items.items;for(var f=0,g=e.length;f<g;f++){var h=e[f];h.doLayout&&h.doLayout(!1,d)}}c&&this.onLayout(a,d),this.hasLayout=!0,delete this.forceLayout},onLayout:Ext.emptyFn,shouldBufferLayout:function(){var a=this.hasLayout;return this.ownerCt?a?!this.hasLayoutPending():!1:a},hasLayoutPending:function(){var a=!1;return this.ownerCt.bubble(function(b){if(b.layoutPending)return a=!0,!1}),a},onShow:function(){Ext.Container.superclass.onShow.call(this),Ext.isDefined(this.deferLayout)&&(delete this.deferLayout,this.doLayout(!0))},getLayout:function(){if(!this.layout){var a=new Ext.layout.AutoLayout(this.layoutConfig);this.setLayout(a)}return this.layout},beforeDestroy:function(){var a;if(this.items)while(a=this.items.first())this.doRemove(a,!0);this.monitorResize&&Ext.EventManager.removeResizeListener(this.doLayout,this),Ext.destroy(this.layout),Ext.Container.superclass.beforeDestroy.call(this)},cascade:function(a,b,c){if(a.apply(b||this,c||[this])!==!1&&this.items){var d=this.items.items;for(var e=0,f=d.length;e<f;e++)d[e].cascade?d[e].cascade(a,b,c):a.apply(b||d[e],c||[d[e]])}return this},findById:function(a){var b=null,c=this;return this.cascade(function(d){if(c!=d&&d.id===a)return b=d,!1}),b},findByType:function(a,b){return this.findBy(function(c){return c.isXType(a,b)})},find:function(a,b){return this.findBy(function(c){return c[a]===b})},findBy:function(a,b){var c=[],d=this;return this.cascade(function(e){d!=e&&a.call(b||e,e,d)===!0&&c.push(e)}),c},get:function(a){return this.getComponent(a)}}),Ext.Container.LAYOUTS={},Ext.reg("container",Ext.Container),Ext.layout.ContainerLayout=Ext.extend(Object,{monitorResize:!1,activeItem:null,constructor:function(a){this.id=Ext.id(null,"ext-layout-"),Ext.apply(this,a)},type:"container",IEMeasureHack:function(a,b){var c=a.dom.childNodes,d=c.length,e,f=[],g,h,i;for(h=0;h<d;h++)e=c[h],g=Ext.get(e),g&&(f[h]=g.getStyle("display"),g.setStyle({display:"none"}));i=a?a.getViewSize(b):{};for(h=0;h<d;h++)e=c[h],g=Ext.get(e),g&&g.setStyle({display:f[h]});return i},getLayoutTargetSize:Ext.EmptyFn,layout:function(){var a=this.container,b=a.getLayoutTarget();!this.hasLayout&&!Ext.isEmpty(this.targetCls)&&b.addClass(this.targetCls),this.onLayout(a,b),a.fireEvent("afterlayout",a,this)},onLayout:function(a,b){this.renderAll(a,b)},isValidParent:function(a,b){return b&&a.getPositionEl().dom.parentNode==(b.dom||b)},renderAll:function(a,b){var c=a.items.items,d,e,f=c.length;for(d=0;d<f;d++)e=c[d],e&&(!e.rendered||!this.isValidParent(e,b))&&this.renderItem(e,d,b)},renderItem:function(a,b,c){a&&(a.rendered?this.isValidParent(a,c)||(Ext.isNumber(b)&&(b=c.dom.childNodes[b]),c.dom.insertBefore(a.getPositionEl().dom,b||null),a.container=c,this.configureItem(a)):(a.render(c,b),this.configureItem(a)))},getRenderedItems:function(a){var b=a.getLayoutTarget(),c=a.items.items,d=c.length,e,f,g=[];for(e=0;e<d;e++)(f=c[e]).rendered&&this.isValidParent(f,b)&&f.shouldLayout!==!1&&g.push(f);return g},configureItem:function(a){if(this.extraCls){var b=a.getPositionEl?a.getPositionEl():a;b.addClass(this.extraCls)}a.doLayout&&this.forceLayout&&a.doLayout(),this.renderHidden&&a!=this.activeItem&&a.hide()},onRemove:function(a){this.activeItem==a&&delete this.activeItem;if(a.rendered&&this.extraCls){var b=a.getPositionEl?a.getPositionEl():a;b.removeClass(this.extraCls)}},afterRemove:function(a){a.removeRestore&&(a.removeMode="container",delete a.removeRestore)},onResize:function(){var a=this.container,b;if(a.collapsed)return;(b=a.bufferResize&&a.shouldBufferLayout())?(this.resizeTask||(this.resizeTask=new Ext.util.DelayedTask(this.runLayout,this),this.resizeBuffer=Ext.isNumber(b)?b:50),a.layoutPending=!0,this.resizeTask.delay(this.resizeBuffer)):this.runLayout()},runLayout:function(){var a=this.container;this.layout(),a.onLayout(),delete a.layoutPending},setContainer:function(a){if(this.monitorResize&&a!=this.container){var b=this.container;b&&
b.un(b.resizeEvent,this.onResize,this),a&&a.on(a.resizeEvent,this.onResize,this)}this.container=a},parseMargins:function(a){Ext.isNumber(a)&&(a=a.toString());var b=a.split(" "),c=b.length;return c==1?b[1]=b[2]=b[3]=b[0]:c==2?(b[2]=b[0],b[3]=b[1]):c==3&&(b[3]=b[1]),{top:parseInt(b[0],10)||0,right:parseInt(b[1],10)||0,bottom:parseInt(b[2],10)||0,left:parseInt(b[3],10)||0}},fieldTpl:function(){var a=new Ext.Template('<div class="x-form-item {itemCls}" tabIndex="-1">','<label for="{id}" style="{labelStyle}" class="x-form-item-label">{label}{labelSeparator}</label>','<div class="x-form-element" id="x-form-el-{id}" style="{elementStyle}">','</div><div class="{clearCls}"></div>',"</div>");return a.disableFormats=!0,a.compile()}(),destroy:function(){this.resizeTask&&this.resizeTask.cancel&&this.resizeTask.cancel(),this.container&&this.container.un(this.container.resizeEvent,this.onResize,this);if(!Ext.isEmpty(this.targetCls)){var a=this.container.getLayoutTarget();a&&a.removeClass(this.targetCls)}}}),Ext.layout.AutoLayout=Ext.extend(Ext.layout.ContainerLayout,{type:"auto",monitorResize:!0,onLayout:function(a,b){Ext.layout.AutoLayout.superclass.onLayout.call(this,a,b);var c=this.getRenderedItems(a),d=c.length,e,f;for(e=0;e<d;e++)f=c[e],f.doLayout&&f.doLayout(!0)}}),Ext.Container.LAYOUTS.auto=Ext.layout.AutoLayout,Ext.layout.FitLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"fit",getLayoutTargetSize:function(){var a=this.container.getLayoutTarget();return a?a.getStyleSize():{}},onLayout:function(a,b){Ext.layout.FitLayout.superclass.onLayout.call(this,a,b),a.collapsed||this.setItemSize(this.activeItem||a.items.itemAt(0),this.getLayoutTargetSize())},setItemSize:function(a,b){a&&b.height>0&&a.setSize(b)}}),Ext.Container.LAYOUTS.fit=Ext.layout.FitLayout,Ext.layout.CardLayout=Ext.extend(Ext.layout.FitLayout,{deferredRender:!1,layoutOnCardChange:!1,renderHidden:!0,type:"card",setActiveItem:function(a){var b=this.activeItem,c=this.container;a=c.getComponent(a);if(a&&b!=a){if(b){b.hide();if(b.hidden!==!0)return!1;b.fireEvent("deactivate",b)}var d=a.doLayout&&(this.layoutOnCardChange||!a.rendered);this.activeItem=a,delete a.deferLayout,a.show(),this.layout(),d&&a.doLayout(),a.fireEvent("activate",a)}},renderAll:function(a,b){this.deferredRender?this.renderItem(this.activeItem,undefined,b):Ext.layout.CardLayout.superclass.renderAll.call(this,a,b)}}),Ext.Container.LAYOUTS.card=Ext.layout.CardLayout,Ext.layout.AnchorLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,getLayoutTargetSize:function(){var a=this.container.getLayoutTarget(),b={};return a&&(b=a.getViewSize(),Ext.isIE&&Ext.isStrict&&b.width==0&&(b=a.getStyleSize()),b.width-=a.getPadding("lr"),b.height-=a.getPadding("tb")),b},onLayout:function(a,b){Ext.layout.AnchorLayout.superclass.onLayout.call(this,a,b);var c=this.getLayoutTargetSize(),d=c.width,e=c.height,f=b.getStyle("overflow"),g=this.getRenderedItems(a),h=g.length,i=[],j,k,l,m,n,o,p,q,r=0,s,t;if(d<20&&e<20)return;a.anchorSize?typeof a.anchorSize=="number"?k=a.anchorSize:(k=a.anchorSize.width,l=a.anchorSize.height):(k=a.initialConfig.width,l=a.initialConfig.height);for(s=0;s<h;s++)m=g[s],t=m.getPositionEl(),!m.anchor&&m.items&&!Ext.isNumber(m.width)&&(!Ext.isIE6||!Ext.isStrict)&&(m.anchor=this.defaultAnchor),m.anchor&&(n=m.anchorSpec,n||(q=m.anchor.split(" "),m.anchorSpec=n={right:this.parseAnchor(q[0],m.initialConfig.width,k),bottom:this.parseAnchor(q[1],m.initialConfig.height,l)}),o=n.right?this.adjustWidthAnchor(n.right(d)-t.getMargins("lr"),m):undefined,p=n.bottom?this.adjustHeightAnchor(n.bottom(e)-t.getMargins("tb"),m):undefined,(o||p)&&i.push({component:m,width:o||undefined,height:p||undefined}));for(s=0,h=i.length;s<h;s++)j=i[s],j.component.setSize(j.width,j.height);if(f&&f!="hidden"&&!this.adjustmentPass){var u=this.getLayoutTargetSize();if(u.width!=c.width||u.height!=c.height)this.adjustmentPass=!0,this.onLayout(a,b)}delete this.adjustmentPass},parseAnchor:function(a,b,c){if(a&&a!="none"){var d;if(this.parseAnchorRE.test(a)){var e=c-b;return function(a){if(a!==d)return d=a,a-e}}if(a.indexOf("%")!=-1){var f=parseFloat(a.replace("%",""))*.01;return function(a){if(a!==d)return d=a,Math.floor(a*f)}}a=parseInt(a,10);if(!isNaN(a))return function(b){if(b!==d)return d=b,b+a}}return!1},adjustWidthAnchor:function(a,b){return a},adjustHeightAnchor:function(a,b){return a}}),Ext.Container.LAYOUTS.anchor=Ext.layout.AnchorLayout,Ext.layout.ColumnLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"column",extraCls:"x-column",scrollOffset:0,targetCls:"x-column-layout-ct",isValidParent:function(a,b){return this.innerCt&&a.getPositionEl().dom.parentNode==this.innerCt.dom},getLayoutTargetSize:function(){var a=this.container.getLayoutTarget(),b;return a&&(b=a.getViewSize(),Ext.isIE&&Ext.isStrict&&b.width==0&&(b=a.getStyleSize()),b.width-=a.getPadding("lr"),b.height-=a.getPadding("tb")),b},renderAll:function(a,b){this.innerCt||(this.innerCt=b.createChild({cls:"x-column-inner"}),this.innerCt.createChild({cls:"x-clear"})),Ext.layout.ColumnLayout.superclass.renderAll.call(this,a,this.innerCt)},onLayout:function(a,b){var c=a.items.items,d=c.length,e,f,g,h=[];this.renderAll(a,b);var i=this.getLayoutTargetSize();if(i.width<1&&i.height<1)return;var j=i.width-this.scrollOffset,k=i.height,l=j;this.innerCt.setWidth(j);for(f=0;f<d;f++)e=c[f],g=e.getPositionEl().getMargins("lr"),h[f]=g,e.columnWidth||(l-=e.getWidth()+g);l=l<0?0:l;for(f=0;f<d;f++)e=c[f],g=h[f],e.columnWidth&&e.setSize(Math.floor(e.columnWidth*l)-g);if(Ext.isIE)if(f=b.getStyle("overflow")&&f!="hidden"&&!this.adjustmentPass){var m=this.getLayoutTargetSize();m.width!=i.width&&(this.adjustmentPass=!0,this.onLayout(a,b))}delete this.adjustmentPass}}),Ext.Container.LAYOUTS.column=Ext.layout.ColumnLayout,Ext.layout.BorderLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,rendered:!1,type:"border",targetCls:"x-border-layout-ct",getLayoutTargetSize:function(){var a=this.container.getLayoutTarget();return a?a.getViewSize():{}},onLayout:function(a,b){var c,d,e,f,g=a.items.items,h=g.length;if(!this.rendered){c=[];for(d=0;d<h;d++)e=g[d],f=e.region,e.collapsed&&c.push(e),e.collapsed=!1,e.rendered||(e.render(b,d),e.getPositionEl().addClass("x-border-panel")),this[f]=f!="center"&&e.split?new Ext.layout.BorderLayout.SplitRegion(this,e.initialConfig,f):new Ext.layout.BorderLayout.Region(this,e.initialConfig,f),this[f].render(b,e);this.rendered=!0}var i=this.getLayoutTargetSize();if(i.width<20||i.height<20){c&&(this.restoreCollapsed=c);return}this.restoreCollapsed&&(c=this.restoreCollapsed,delete this.restoreCollapsed);var j=i.width,k=i.height,l=j,m=k,n=0,o=0,p=this.north,q=this.south,r=this.west,s=this.east,e=this.center,t,u,v,w;if(!e&&Ext.layout.BorderLayout.WARN!==!1)throw"No center region defined in BorderLayout "+a.id;p&&p.isVisible()&&(t=p.getSize(),u=p.getMargins(),t.width=j-(u.left+u.right),t.x=u.left,t.y=u.top,n=t.height+t.y+u.bottom,m-=n,p.applyLayout(t)),q&&q.isVisible()&&(t=q.getSize(),u=q.getMargins(),t.width=j-(u.left+u.right),t.x=u.left,w=t.height+u.top+u.bottom,t.y=k-w+u.top,m-=w,q.applyLayout(t)),r&&r.isVisible()&&(t=r.getSize(),u=r.getMargins(),t.height=m-(u.top+u.bottom),t.x=u.left,t.y=n+u.top,v=t.width+u.left+u.right,o+=v,l-=v,r.applyLayout(t)),s&&s.isVisible()&&(t=s.getSize(),u=s.getMargins(),t.height=m-(u.top+u.bottom),v=t.width+u.left+u.right,t.x=j-v+u.left,t.y=n+u.top,l-=v,s.applyLayout(t));if(e){u=e.getMargins();var x={x:o+u.left,y:n+u.top,width:l-(u.left+u.right),height:m-(u.top+u.bottom)};e.applyLayout(x)}if(c)for(d=0,h=c.length;d<h;d++)c[d].collapse(!1);Ext.isIE&&Ext.isStrict&&b.repaint();if(d=b.getStyle("overflow")&&d!="hidden"&&!this.adjustmentPass){var y=this.getLayoutTargetSize();if(y.width!=i.width||y.height!=i.height)this.adjustmentPass=!0,this.onLayout(a,b)}delete this.adjustmentPass},destroy:function(){var a=["north","south","east","west"],b,c;for(b=0;b<a.length;b++)c=this[a[b]],c&&(c.destroy?c.destroy():c.split&&c.split.destroy(!0));Ext.layout.BorderLayout.superclass.destroy.call(this)}}),Ext.layout.BorderLayout.Region=function(a,b,c){Ext.apply(this,b),this.layout=a,this.position=c,this.state={},typeof this.margins=="string"&&(this.margins=this.layout.parseMargins(this.margins)),this.margins=Ext.applyIf(this.margins||{},this.defaultMargins),this.collapsible&&(typeof this.cmargins=="string"&&(this.cmargins=this.layout.parseMargins(this.cmargins)),this.collapseMode=="mini"&&!this.cmargins?this.cmargins={left:0,top:0,right:0,bottom:0}:this.cmargins=Ext.applyIf(this.cmargins||{},c=="north"||c=="south"?this.defaultNSCMargins:this.defaultEWCMargins))},Ext.layout.BorderLayout.Region.prototype={collapsible:!1,split:!1,floatable:!0,minWidth:50,minHeight:50,defaultMargins:{left:0,top:0,right:0,bottom:0},defaultNSCMargins:{left:5,top:5,right:5,bottom:5},defaultEWCMargins:{left:5,top:0,right:5,bottom:0},floatingZIndex:100,isCollapsed:!1,render:function(a,b){this.panel=b,b.el.enableDisplayMode(),this.targetEl=a,this.el=b.el;var c=b.getState,d=this.position;b.getState=function(){return Ext.apply(c.call(b)||{},this.state)}.createDelegate(this);if(d!="center"){b.allowQueuedExpand=!1,b.on({beforecollapse:this.beforeCollapse,collapse:this.onCollapse,beforeexpand:this.beforeExpand,expand:this.onExpand,hide:this.onHide,show:this.onShow,scope:this});if(this.collapsible||this.floatable)b.collapseEl="el",b.slideAnchor=this.getSlideAnchor();b.tools&&b.tools.toggle&&(b.tools.toggle.addClass("x-tool-collapse-"+d),b.tools.toggle.addClassOnOver("x-tool-collapse-"+d+"-over"))}},getCollapsedEl:function(){if(!this.collapsedEl){if(!this.toolTemplate){var a=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>');a.disableFormats=!0,a.compile(),Ext.layout.BorderLayout.Region.prototype.toolTemplate=a}this.collapsedEl=this.targetEl.createChild({cls:"x-layout-collapsed x-layout-collapsed-"+this.position,id:this.panel.id+"-xcollapsed"}),this.collapsedEl.enableDisplayMode("block");if(this.collapseMode=="mini")this.collapsedEl.addClass("x-layout-cmini-"+this.position),this.miniCollapsedEl=this.collapsedEl.createChild({cls:"x-layout-mini x-layout-mini-"+this.position,html:"&#160;"}),this.miniCollapsedEl.addClassOnOver("x-layout-mini-over"),this.collapsedEl.addClassOnOver("x-layout-collapsed-over"),this.collapsedEl.on("click",this.onExpandClick,this,{stopEvent:!0});else{if(this.collapsible!==!1&&!this.hideCollapseTool){var b=this.expandToolEl=this.toolTemplate.append(this.collapsedEl.dom,{id:"expand-"+this.position},!0);b.addClassOnOver("x-tool-expand-"+this.position+"-over"),b.on("click",this.onExpandClick,this,{stopEvent:!0})}if(this.floatable!==!1||this.titleCollapse)this.collapsedEl.addClassOnOver("x-layout-collapsed-over"),this.collapsedEl.on("click",this[this.floatable?"collapseClick":"onExpandClick"],this)}}return this.collapsedEl},onExpandClick:function(a){this.isSlid?this.panel.expand(!1):this.panel.expand()},onCollapseClick:function(a){this.panel.collapse()},beforeCollapse:function(a,b){this.lastAnim=b,this.splitEl&&this.splitEl.hide(),this.getCollapsedEl().show();var c=this.panel.getEl();this.originalZIndex=c.getStyle("z-index"),c.setStyle("z-index",100),this.isCollapsed=!0,this.layout.layout()},onCollapse:function(a){this.panel.el.setStyle("z-index",1),this.lastAnim===!1||this.panel.animCollapse===!1?this.getCollapsedEl().dom.style.visibility="visible":this.getCollapsedEl().slideIn(this.panel.slideAnchor,{duration:.2}),this.state.collapsed=!0,this.panel.saveState()},beforeExpand:function(a){this.isSlid&&this.afterSlideIn();var b=this.getCollapsedEl();this.el.show(),this.position=="east"||this.position=="west"?this.panel.setSize(undefined,b.getHeight()):this.panel.setSize(b.getWidth(),undefined),b.hide(),b.dom.style.visibility="hidden",this.panel.el.setStyle("z-index",this.floatingZIndex)},onExpand:function(){this.isCollapsed=!1,this.splitEl&&this.splitEl.show(),this.layout.layout(),this.panel.el.setStyle("z-index",this.originalZIndex),this.state.collapsed=!1,this.panel.saveState()},collapseClick:function(a){this.isSlid?(a.stopPropagation(),this.slideIn()):(a.stopPropagation(),this.slideOut())},onHide:function(){this.isCollapsed?this.getCollapsedEl().hide():this.splitEl&&this.splitEl.hide()},onShow:function(){this.isCollapsed?this.getCollapsedEl().show():this.splitEl&&this.splitEl.show()},isVisible:function(){return!this.panel.hidden},getMargins:function(){return this.isCollapsed&&this.cmargins?this.cmargins:this.margins},getSize:function(){return this.isCollapsed?this.getCollapsedEl().getSize():this.panel.getSize()},setPanel:function(a){this.panel=a},getMinWidth:function(){return this.minWidth},getMinHeight:function(){return this.minHeight},applyLayoutCollapsed:function(a){var b=this.getCollapsedEl();b.setLeftTop(a.x,a.y),b.setSize(a.width,a.height)},applyLayout:function(a){this.isCollapsed?this.applyLayoutCollapsed(a):(this.panel.setPosition(a.x,a.y),this.panel.setSize(a.width,a.height))},beforeSlide:function(){this.panel.beforeEffect()},afterSlide:function(){this.panel.afterEffect()},initAutoHide:function(){this.autoHide!==!1&&(this.autoHideHd||(this.autoHideSlideTask=new Ext.util.DelayedTask(this.slideIn,this),this.autoHideHd={mouseout:function(a){a.within(this.el,!0)||this.autoHideSlideTask.delay(500)},mouseover:function(a){this.autoHideSlideTask.cancel()},scope:this}),this.el.on(this.autoHideHd),this.collapsedEl.on(this.autoHideHd))},clearAutoHide:function(){this.autoHide!==!1&&(this.el.un("mouseout",this.autoHideHd.mouseout),this.el.un("mouseover",this.autoHideHd.mouseover),this.collapsedEl.un("mouseout",this.autoHideHd.mouseout),this.collapsedEl.un("mouseover",this.autoHideHd.mouseover))},clearMonitor:function(){Ext.getDoc().un("click",this.slideInIf,this)},slideOut:function(){if(this.isSlid||this.el.hasActiveFx())return;this.isSlid=!0;var a=this.panel.tools,b,c;a&&a.toggle&&a.toggle.hide(),this.el.show(),c=this.panel.collapsed,this.panel.collapsed=!1,this.position=="east"||this.position=="west"?(b=this.panel.deferHeight,this.panel.deferHeight=!1,this.panel.setSize(undefined,this.collapsedEl.getHeight()),this.panel.deferHeight=b):this.panel.setSize(this.collapsedEl.getWidth(),undefined),this.panel.collapsed=c,this.restoreLT=[this.el.dom.style.left,this.el.dom.style.top],this.el.alignTo(this.collapsedEl,this.getCollapseAnchor()),this.el.setStyle("z-index",this.floatingZIndex+2),this.panel.el.replaceClass("x-panel-collapsed","x-panel-floating"),this.animFloat!==!1?(this.beforeSlide(),this.el.slideIn(this.getSlideAnchor(),{callback:function(){this.afterSlide(),this.initAutoHide(),Ext.getDoc().on("click",this.slideInIf,this)},scope:this,block:!0})):(this.initAutoHide(),Ext.getDoc().on("click",this.slideInIf,this))},afterSlideIn:function(){this.clearAutoHide(),this.isSlid=!1,this.clearMonitor(),this.el.setStyle("z-index",""),this.panel.el.replaceClass("x-panel-floating","x-panel-collapsed"),this.el.dom.style.left=this.restoreLT[0],this.el.dom.style.top=this.restoreLT[1];var a=this.panel.tools;a&&a.toggle&&a.toggle.show()},slideIn:function(a){if(!this.isSlid||this.el.hasActiveFx()){Ext.callback(a);return}this.isSlid=!1,this.animFloat!==!1?(this.beforeSlide(),this.el.slideOut(this.getSlideAnchor(),{callback:function(){this.el.hide(),this.afterSlide(),this.afterSlideIn(),Ext.callback(a)},scope:this,block:!0})):(this.el.hide(),this.afterSlideIn())},slideInIf:function(a){a.within(this.el)||this.slideIn()},anchors:{west:"left",east:"right",north:"top",south:"bottom"},sanchors:{west:"l",east:"r",north:"t",south:"b"},canchors:{west:"tl-tr",east:"tr-tl",north:"tl-bl",south:"bl-tl"},getAnchor:function(){return this.anchors[this.position]},getCollapseAnchor:function(){return this.canchors[this.position]},getSlideAnchor:function(){return this.sanchors[this.position]},getAlignAdj:function(){var a=this.cmargins;switch(this.position){case"west":return[0,0];case"east":return[0,0];case"north":return[0,0];case"south":return[0,0]}},getExpandAdj:function(){var a=this.collapsedEl,b=this.cmargins;switch(this.position){case"west":return[-(b.right+a.getWidth()+b.left),0];case"east":return[b.right+a.getWidth()+b.left,0];case"north":return[0,-(b.top+b.bottom+a.getHeight())];case"south":return[0,b.top+b.bottom+a.getHeight()]}},destroy:function(){this.autoHideSlideTask&&this.autoHideSlideTask.cancel&&this.autoHideSlideTask.cancel(),Ext.destroyMembers(this,"miniCollapsedEl","collapsedEl","expandToolEl")}},Ext.layout.BorderLayout.SplitRegion=function(a,b,c){Ext.layout.BorderLayout.SplitRegion.superclass.constructor.call(this,a,b,c),this.applyLayout=this.applyFns[c]},Ext.extend(Ext.layout.BorderLayout.SplitRegion,Ext.layout.BorderLayout.Region,{splitTip:"Drag to resize.",collapsibleSplitTip:"Drag to resize. Double click to hide.",useSplitTips:!1,splitSettings:{north:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.TOP,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},south:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.BOTTOM,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},east:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.RIGHT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"},west:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.LEFT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"}},applyFns:{west:function(a){if(this.isCollapsed)return this.applyLayoutCollapsed(a);var b=this.splitEl.dom,c=b.style;this.panel.setPosition(a.x,a.y);var d=b.offsetWidth;c.left=a.x+a.width-d+"px",c.top=a.y+"px",c.height=Math.max(0,a.height)+"px",this.panel.setSize(a.width-d,a.height)},east:function(a){if(this.isCollapsed)return this.applyLayoutCollapsed(a);var b=this.splitEl.dom,c=b.style,d=b.offsetWidth;this.panel.setPosition(a.x+d,a.y),c.left=a.x+"px",c.top=a.y+"px",c.height=Math.max(0,a.height)+"px",this.panel.setSize(a.width-d,a.height)},north:function(a){if(this.isCollapsed)return this.applyLayoutCollapsed(a);var b=this.splitEl.dom,c=b.style,d=b.offsetHeight;this.panel.setPosition(a.x,a.y),c.left=a.x+"px",c.top=a.y+a.height-d+"px",c.width=Math.max(0,a.width)+"px",this.panel.setSize(a.width,a.height-d)},south:function(a){if(this.isCollapsed)return this.applyLayoutCollapsed(a);var b=this.splitEl.dom,c=b.style,d=b.offsetHeight;this.panel.setPosition(a.x,a.y+d),c.left=a.x+"px",c.top=a.y+"px",c.width=Math.max(0,a.width)+"px",this.panel.setSize(a.width,a.height-d)}},render:function(a,b){Ext.layout.BorderLayout.SplitRegion.superclass.render.call(this,a,b);var c=this.position;this.splitEl=a.createChild({cls:"x-layout-split x-layout-split-"+c,html:"&#160;",id:this.panel.id+"-xsplit"}),this.collapseMode=="mini"&&(this.miniSplitEl=this.splitEl.createChild({cls:"x-layout-mini x-layout-mini-"+c,html:"&#160;"}),this.miniSplitEl.addClassOnOver("x-layout-mini-over"),this.miniSplitEl.on("click",this.onCollapseClick,this,{stopEvent:!0}));var d=this.splitSettings[c];this.split=new Ext.SplitBar(this.splitEl.dom,b.el,d.orientation),this.split.tickSize=this.tickSize,this.split.placement=d.placement,this.split.getMaximumSize=this[d.maxFn].createDelegate(this),this.split.minSize=this.minSize||this[d.minProp],this.split.on("beforeapply",this.onSplitMove,this),this.split.useShim=this.useShim===!0,this.maxSize=this.maxSize||this[d.maxProp],b.hidden&&this.splitEl.hide(),this.useSplitTips&&(this.splitEl.dom.title=this.collapsible?this.collapsibleSplitTip:this.splitTip),this.collapsible&&this.splitEl.on("dblclick",this.onCollapseClick,this)},getSize:function(){if(this.isCollapsed)return this.collapsedEl.getSize();var a=this.panel.getSize();return this.position=="north"||this.position=="south"?a.height+=this.splitEl.dom.offsetHeight:a.width+=this.splitEl.dom.offsetWidth,a},getHMaxSize:function(){var a=this.maxSize||1e4,b=this.layout.center;return Math.min(a,this.el.getWidth()+b.el.getWidth()-b.getMinWidth())},getVMaxSize:function(){var a=this.maxSize||1e4,b=this.layout.center;return Math.min(a,this.el.getHeight()+b.el.getHeight()-b.getMinHeight())},onSplitMove:function(a,b){var c=this.panel.getSize();return this.lastSplitSize=b,this.position=="north"||this.position=="south"?(this.panel.setSize(c.width,b),this.state.height=b):(this.panel.setSize(b,c.height),this.state.width=b),this.layout.layout(),this.panel.saveState(),!1},getSplitBar:function(){return this.split},destroy:function(){Ext.destroy(this.miniSplitEl,this.split,this.splitEl),Ext.layout.BorderLayout.SplitRegion.superclass.destroy.call(this)}}),Ext.Container.LAYOUTS.border=Ext.layout.BorderLayout,Ext.layout.FormLayout=Ext.extend(Ext.layout.AnchorLayout,{labelSeparator:":",trackLabels:!0,type:"form",onRemove:function(a){Ext.layout.FormLayout.superclass.onRemove.call(this,a),this.trackLabels&&(a.un("show",this.onFieldShow,this),a.un("hide",this.onFieldHide,this));var b=a.getPositionEl(),c=a.getItemCt&&a.getItemCt();a.rendered&&c&&(b&&b.dom&&b.insertAfter(c),Ext.destroy(c),Ext.destroyMembers(a,"label","itemCt"),a.customItemCt&&Ext.destroyMembers(a,"getItemCt","customItemCt"))},setContainer:function(a){Ext.layout.FormLayout.superclass.setContainer.call(this,a),a.labelAlign&&a.addClass("x-form-label-"+a.labelAlign);if(a.hideLabels)Ext.apply(this,{labelStyle:"display:none",elementStyle:"padding-left:0;",labelAdjust:0});else{this.labelSeparator=Ext.isDefined(a.labelSeparator)?a.labelSeparator:this.labelSeparator,a.labelWidth=a.labelWidth||100;if(Ext.isNumber(a.labelWidth)){var b=Ext.isNumber(a.labelPad)?a.labelPad:5;Ext.apply(this,{labelAdjust:a.labelWidth+b,labelStyle:"width:"+a.labelWidth+"px;",elementStyle:"padding-left:"+(a.labelWidth+b)+"px"})}a.labelAlign=="top"&&Ext.apply(this,{labelStyle:"width:auto;",labelAdjust:0,elementStyle:"padding-left:0;"})}},isHide:function(a){return a.hideLabel||this.container.hideLabels},onFieldShow:function(a){a.getItemCt().removeClass("x-hide-"+a.hideMode),a.isComposite&&a.doLayout()},onFieldHide:function(a){a.getItemCt().addClass("x-hide-"+a.hideMode)},getLabelStyle:function(a){var b="",c=[this.labelStyle,a];for(var d=0,e=c.length;d<e;++d)c[d]&&(b+=c[d],b.substr(-1,1)!=";"&&(b+=";"));return b},renderItem:function(a,b,c){if(a&&(a.isFormField||a.fieldLabel)&&a.inputType!="hidden"){var d=this.getTemplateArgs(a);Ext.isNumber(b)&&(b=c.dom.childNodes[b]||null),b?a.itemCt=this.fieldTpl.insertBefore(b,d,!0):a.itemCt=this.fieldTpl.append(c,d,!0),a.getItemCt||Ext.apply(a,{getItemCt:function(){return a.itemCt},customItemCt:!0}),a.label=a.getItemCt().child("label.x-form-item-label"),a.rendered?this.isValidParent(a,c)||Ext.fly("x-form-el-"+a.id).appendChild(a.getPositionEl()):a.render("x-form-el-"+a.id),this.trackLabels&&(a.hidden&&this.onFieldHide(a),a.on({scope:this,show:this.onFieldShow,hide:this.onFieldHide})),this.configureItem(a)}else Ext.layout.FormLayout.superclass.renderItem.apply(this,arguments)},getTemplateArgs:function(a){var b=!a.fieldLabel||a.hideLabel;return{id:a.id,label:a.fieldLabel,itemCls:(a.itemCls||this.container.itemCls||"")+(a.hideLabel?" x-hide-label":""),clearCls:a.clearCls||"x-form-clear-left",labelStyle:this.getLabelStyle(a.labelStyle),elementStyle:this.elementStyle||"",labelSeparator:b?"":Ext.isDefined(a.labelSeparator)?a.labelSeparator:this.labelSeparator}},adjustWidthAnchor:function(a,b){if(b.label&&!this.isHide(b)&&this.container.labelAlign!="top"){var c=Ext.isIE6||Ext.isIE&&!Ext.isStrict;return a-this.labelAdjust+(c?-3:0)}return a},adjustHeightAnchor:function(a,b){return b.label&&!this.isHide(b)&&this.container.labelAlign=="top"?a-b.label.getHeight():a},isValidParent:function(a,b){return b&&this.container.getEl().contains(a.getPositionEl())}}),Ext.Container.LAYOUTS.form=Ext.layout.FormLayout,Ext.layout.AccordionLayout=Ext.extend(Ext.layout.FitLayout,{fill:!0,autoWidth:!0,titleCollapse:!0,hideCollapseTool:!1,collapseFirst:!1,animate:!1,sequence:!1,activeOnTop:!1,type:"accordion",renderItem:function(a){this.animate===!1&&(a.animCollapse=!1),a.collapsible=!0,this.autoWidth&&(a.autoWidth=!0),this.titleCollapse&&(a.titleCollapse=!0),this.hideCollapseTool&&(a.hideCollapseTool=!0),this.collapseFirst!==undefined&&(a.collapseFirst=this.collapseFirst),!this.activeItem&&!a.collapsed?this.setActiveItem(a,!0):this.activeItem&&this.activeItem!=a&&(a.collapsed=!0),Ext.layout.AccordionLayout.superclass.renderItem.apply(this,arguments),a.header.addClass("x-accordion-hd"),a.on("beforeexpand",this.beforeExpand,this)},onRemove:function(a){Ext.layout.AccordionLayout.superclass.onRemove.call(this,a),a.rendered&&a.header.removeClass("x-accordion-hd"),a.un("beforeexpand",this.beforeExpand,this)},beforeExpand:function(a,b){var c=this.activeItem;if(c)if(this.sequence){delete this.activeItem;if(!c.collapsed)return c.collapse({callback:function(){a.expand(b||!0)},scope:this}),!1}else c.collapse(this.animate);this.setActive(a),this.activeOnTop&&a.el.dom.parentNode.insertBefore(a.el.dom,a.el.dom.parentNode.firstChild),this.layout()},setItemSize:function(a,b){if(this.fill&&a){var c=0,d,e=this.getRenderedItems(this.container),f=e.length,g;for(d=0;d<f;d++)(g=e[d])!=a&&!g.hidden&&(c+=g.header.getHeight());b.height-=c,a.setSize(b)}},setActiveItem:function(a){this.setActive(a,!0)},setActive:function(a,b){var c=this.activeItem;a=this.container.getComponent(a),c!=a&&(a.rendered&&a.collapsed&&b?a.expand():(c&&c.fireEvent("deactivate",c),this.activeItem=a,a.fireEvent("activate",a)))}}),Ext.Container.LAYOUTS.accordion=Ext.layout.AccordionLayout,Ext.layout.Accordion=Ext.layout.AccordionLayout,Ext.layout.TableLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!1,type:"table",targetCls:"x-table-layout-ct",tableAttrs:null,setContainer:function(a){Ext.layout.TableLayout.superclass.setContainer.call(this,a),this.currentRow=0,this.currentColumn=0,this.cells=[]},onLayout:function(a,b){var c=a.items.items,d=c.length,e,f;this.table||(b.addClass("x-table-layout-ct"),this.table=b.createChild(Ext.apply({tag:"table",cls:"x-table-layout",cellspacing:0,cn:{tag:"tbody"}},this.tableAttrs),null,!0)),this.renderAll(a,b)},getRow:function(a){var b=this.table.tBodies[0].childNodes[a];return b||(b=document.createElement("tr"),this.table.tBodies[0].appendChild(b)),b},getNextCell:function(a){var b=this.getNextNonSpan(this.currentColumn,this.currentRow),c=this.currentColumn=b[0],d=this.currentRow=b[1];for(var e=d;e<d+(a.rowspan||1);e++){this.cells[e]||(this.cells[e]=[]);for(var f=c;f<c+(a.colspan||1);f++)this.cells[e][f]=!0}var g=document.createElement("td");a.cellId&&(g.id=a.cellId);var h="x-table-layout-cell";return a.cellCls&&(h+=" "+a.cellCls),g.className=h,a.colspan&&(g.colSpan=a.colspan),a.rowspan&&(g.rowSpan=a.rowspan),this.getRow(d).appendChild(g),g},getNextNonSpan:function(a,b){var c=this.columns;while(c&&a>=c||this.cells[b]&&this.cells[b][a])c&&a>=c?(b++,a=0):a++;return[a,b]},renderItem:function(a,b,c){this.table||(this.table=c.createChild(Ext.apply({tag:"table",cls:"x-table-layout",cellspacing:0,cn:{tag:"tbody"}},this.tableAttrs),null,!0));if(a&&!a.rendered)a.render(this.getNextCell(a)),this.configureItem(a);else if(a&&!this.isValidParent(a,c)){var d=this.getNextCell(a);d.insertBefore(a.getPositionEl().dom,null),a.container=Ext.get(d),this.configureItem(a)}},isValidParent:function(a,b){return a.getPositionEl().up("table",5).dom.parentNode===(b.dom||b)},destroy:function(){delete this.table,Ext.layout.TableLayout.superclass.destroy.call(this)}}),Ext.Container.LAYOUTS.table=Ext.layout.TableLayout,Ext.layout.AbsoluteLayout=Ext.extend(Ext.layout.AnchorLayout,{extraCls:"x-abs-layout-item",type:"absolute",onLayout:function(a,b){b.position(),this.paddingLeft=b.getPadding("l"),this.paddingTop=b.getPadding("t"),Ext.layout.AbsoluteLayout.superclass.onLayout.call(this,a,b)},adjustWidthAnchor:function(a,b){return a?a-b.getPosition(!0)[0]+this.paddingLeft:a},adjustHeightAnchor:function(a,b){return a?a-b.getPosition(!0)[1]+this.paddingTop:a}}),Ext.Container.LAYOUTS.absolute=Ext.layout.AbsoluteLayout,Ext.layout.BoxLayout=Ext.extend(Ext.layout.ContainerLayout,{defaultMargins:{left:0,top:0,right:0,bottom:0},padding:"0",pack:"start",monitorResize:!0,type:"box",scrollOffset:0,extraCls:"x-box-item",targetCls:"x-box-layout-ct",innerCls:"x-box-inner",constructor:function(a){Ext.layout.BoxLayout.superclass.constructor.call(this,a),Ext.isString(this.defaultMargins)&&(this.defaultMargins=this.parseMargins(this.defaultMargins));var b=this.overflowHandler;typeof b=="string"&&(b={type:b});var c="none";b&&b.type!=undefined&&(c=b.type);var d=Ext.layout.boxOverflow[c];d[this.type]&&(d=d[this.type]),this.overflowHandler=new d(this,b)},onLayout:function(a,b){Ext.layout.BoxLayout.superclass.onLayout.call(this,a,b);var c=this.getLayoutTargetSize(),d=this.getVisibleItems(a),e=this.calculateChildBoxes(d,c),f=e.boxes,g=e.meta;if(c.width>0){var h=this.overflowHandler,i=g.tooNarrow?"handleOverflow":"clearOverflow",j=h[i](e,c);j&&(j.targetSize&&(c=j.targetSize),j.recalculate&&(d=this.getVisibleItems(a),e=this.calculateChildBoxes(d,c),f=e.boxes))}this.layoutTargetLastSize=c,this.childBoxCache=e,this.updateInnerCtSize(c,e),this.updateChildBoxes(f),this.handleTargetOverflow(c,a,b)},updateChildBoxes:function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b],e=d.component;d.dirtySize&&e.setSize(d.width,d.height);if(isNaN(d.left)||isNaN(d.top))continue;e.setPosition(d.left,d.top)}},updateInnerCtSize:function(a,b){var c=this.align,d=this.padding,e=a.width,f=a.height;if(this.type=="hbox"){var g=e,h=b.meta.maxHeight+d.top+d.bottom;c=="stretch"?h=f:c=="middle"&&(h=Math.max(f,h))}else{var h=f,g=b.meta.maxWidth+d.left+d.right;c=="stretch"?g=e:c=="center"&&(g=Math.max(e,g))}this.innerCt.setSize(g||undefined,h||undefined)},handleTargetOverflow:function(a,b,c){var d=c.getStyle("overflow");if(d&&d!="hidden"&&!this.adjustmentPass){var e=this.getLayoutTargetSize();if(e.width!=a.width||e.height!=a.height)this.adjustmentPass=!0,this.onLayout(b,c)}delete this.adjustmentPass},isValidParent:function(a,b){return this.innerCt&&a.getPositionEl().dom.parentNode==this.innerCt.dom},getVisibleItems:function(a){var a=a||this.container,b=a.getLayoutTarget(),c=a.items.items,d=c.length,e,f,g=[];for(e=0;e<d;e++)(f=c[e]).rendered&&this.isValidParent(f,b)&&f.hidden!==!0&&f.collapsed!==!0&&f.shouldLayout!==!1&&g.push(f);return g},renderAll:function(a,b){this.innerCt||(this.innerCt=b.createChild({cls:this.innerCls}),this.padding=this.parseMargins(this.padding)),Ext.layout.BoxLayout.superclass.renderAll.call(this,a,this.innerCt)},getLayoutTargetSize:function(){var a=this.container.getLayoutTarget(),b;return a&&(b=a.getViewSize(),Ext.isIE&&Ext.isStrict&&b.width==0&&(b=a.getStyleSize()),b.width-=a.getPadding("lr"),b.height-=a.getPadding("tb")),b},renderItem:function(a){Ext.isString(a.margins)?a.margins=this.parseMargins(a.margins):a.margins||(a.margins=this.defaultMargins),Ext.layout.BoxLayout.superclass.renderItem.apply(this,arguments)},destroy:function(){Ext.destroy(this.overflowHandler),Ext.layout.BoxLayout.superclass.destroy.apply(this,arguments)}}),Ext.ns("Ext.layout.boxOverflow"),Ext.layout.boxOverflow.None=Ext.extend(Object,{constructor:function(a,b){this.layout=a,Ext.apply(this,b||{})},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn}),Ext.layout.boxOverflow.none=Ext.layout.boxOverflow.None,Ext.layout.boxOverflow.Menu=Ext.extend(Ext.layout.boxOverflow.None,{afterCls:"x-strip-right",noItemsMenuText:'<div class="x-toolbar-no-items">(None)</div>',constructor:function(a){Ext.layout.boxOverflow.Menu.superclass.constructor.apply(this,arguments),this.menuItems=[]},createInnerElements:function(){this.afterCt||(this.afterCt=this.layout.innerCt.insertSibling({cls:this.afterCls},"before"))},clearOverflow:function(a,b){var c=b.width+(this.afterCt?this.afterCt.getWidth():0),d=this.menuItems;this.hideTrigger();for(var e=0,f=d.length;e<f;e++)d.pop().component.show();return{targetSize:{height:b.height,width:c}}},showTrigger:function(){this.createMenu(),this.menuTrigger.show()},hideTrigger:function(){this.menuTrigger!=undefined&&this.menuTrigger.hide()},beforeMenuShow:function(a){var b=this.menuItems,c=b.length,d,e,f=function(a,b){return a.isXType("buttongroup")&&!(b instanceof Ext.Toolbar.Separator)};this.clearMenu(),a.removeAll();for(var g=0;g<c;g++)d=b[g].component,e&&(f(d,e)||f(e,d))&&a.add("-"),this.addComponentToMenu(a,d),e=d;a.items.length<1&&a.add(this.noItemsMenuText)},createMenuConfig:function(a,b){var c=Ext.apply({},a.initialConfig),d=a.toggleGroup;return Ext.copyTo(c,a,["iconCls","icon","itemId","disabled","handler","scope","menu"]),Ext.apply(c,{text:a.overflowText||a.text,hideOnClick:b}),(d||a.enableToggle)&&Ext.apply(c,{group:d,checked:a.pressed,listeners:{checkchange:function(b,c){a.toggle(c)}}}),delete c.ownerCt,delete c.xtype,delete c.id,c},addComponentToMenu:function(a,b){b instanceof Ext.Toolbar.Separator?a.add("-"):Ext.isFunction(b.isXType)&&(b.isXType("splitbutton")?
a.add(this.createMenuConfig(b,!0)):b.isXType("button")?a.add(this.createMenuConfig(b,!b.menu)):b.isXType("buttongroup")&&b.items.each(function(b){this.addComponentToMenu(a,b)},this))},clearMenu:function(){var a=this.moreMenu;a&&a.items&&a.items.each(function(a){delete a.menu})},createMenu:function(){this.menuTrigger||(this.createInnerElements(),this.menu=new Ext.menu.Menu({ownerCt:this.layout.container,listeners:{scope:this,beforeshow:this.beforeMenuShow}}),this.menuTrigger=new Ext.Button({iconCls:"x-toolbar-more-icon",cls:"x-toolbar-more",menu:this.menu,renderTo:this.afterCt}))},destroy:function(){Ext.destroy(this.menu,this.menuTrigger)}}),Ext.layout.boxOverflow.menu=Ext.layout.boxOverflow.Menu,Ext.layout.boxOverflow.HorizontalMenu=Ext.extend(Ext.layout.boxOverflow.Menu,{constructor:function(){Ext.layout.boxOverflow.HorizontalMenu.superclass.constructor.apply(this,arguments);var a=this,b=a.layout,c=b.calculateChildBoxes;b.calculateChildBoxes=function(d,e){var f=c.apply(b,arguments),g=f.meta,h=a.menuItems,i=0;for(var j=0,k=h.length;j<k;j++)i+=h[j].width;return g.minimumWidth+=i,g.tooNarrow=g.minimumWidth>e.width,f}},handleOverflow:function(a,b){this.showTrigger();var c=b.width-this.afterCt.getWidth(),d=a.boxes,e=0,f=!1;for(var g=0,h=d.length;g<h;g++)e+=d[g].width;var i=c-e,j=0;for(var g=0,h=this.menuItems.length;g<h;g++){var k=this.menuItems[g],l=k.component,m=k.width;if(!(m<i))break;l.show(),i-=m,j++,f=!0}if(f)this.menuItems=this.menuItems.slice(j);else for(var n=d.length-1;n>=0;n--){var o=d[n].component,p=d[n].left+d[n].width;if(!(p>=c))break;this.menuItems.unshift({component:o,width:d[n].width}),o.hide()}return this.menuItems.length==0&&this.hideTrigger(),{targetSize:{height:b.height,width:c},recalculate:f}}}),Ext.layout.boxOverflow.menu.hbox=Ext.layout.boxOverflow.HorizontalMenu,Ext.layout.boxOverflow.Scroller=Ext.extend(Ext.layout.boxOverflow.None,{animateScroll:!0,scrollIncrement:100,wheelIncrement:3,scrollRepeatInterval:400,scrollDuration:.4,beforeCls:"x-strip-left",afterCls:"x-strip-right",scrollerCls:"x-strip-scroller",beforeScrollerCls:"x-strip-scroller-left",afterScrollerCls:"x-strip-scroller-right",createWheelListener:function(){this.layout.innerCt.on({scope:this,mousewheel:function(a){a.stopEvent(),this.scrollBy(a.getWheelDelta()*this.wheelIncrement*-1,!1)}})},handleOverflow:function(a,b){this.createInnerElements(),this.showScrollers()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){this.createScrollers(),this.beforeScroller.show(),this.afterScroller.show(),this.updateScrollButtons()},hideScrollers:function(){this.beforeScroller!=undefined&&(this.beforeScroller.hide(),this.afterScroller.hide())},createScrollers:function(){if(!this.beforeScroller&&!this.afterScroller){var a=this.beforeCt.createChild({cls:String.format("{0} {1} ",this.scrollerCls,this.beforeScrollerCls)}),b=this.afterCt.createChild({cls:String.format("{0} {1}",this.scrollerCls,this.afterScrollerCls)});a.addClassOnOver(this.beforeScrollerCls+"-hover"),b.addClassOnOver(this.afterScrollerCls+"-hover"),a.setVisibilityMode(Ext.Element.DISPLAY),b.setVisibilityMode(Ext.Element.DISPLAY),this.beforeRepeater=new Ext.util.ClickRepeater(a,{interval:this.scrollRepeatInterval,handler:this.scrollLeft,scope:this}),this.afterRepeater=new Ext.util.ClickRepeater(b,{interval:this.scrollRepeatInterval,handler:this.scrollRight,scope:this}),this.beforeScroller=a,this.afterScroller=b}},destroy:function(){Ext.destroy(this.beforeScroller,this.afterScroller,this.beforeRepeater,this.afterRepeater,this.beforeCt,this.afterCt)},scrollBy:function(a,b){this.scrollTo(this.getScrollPosition()+a,b)},getItem:function(a){return Ext.isString(a)?a=Ext.getCmp(a):Ext.isNumber(a)&&(a=this.items[a]),a},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){if(this.beforeScroller==undefined||this.afterScroller==undefined)return;var a=this.atExtremeBefore()?"addClass":"removeClass",b=this.atExtremeAfter()?"addClass":"removeClass",c=this.beforeScrollerCls+"-disabled",d=this.afterScrollerCls+"-disabled";this.beforeScroller[a](c),this.afterScroller[b](d),this.scrolling=!1},atExtremeBefore:function(){return this.getScrollPosition()===0},scrollLeft:function(a){this.scrollBy(-this.scrollIncrement,a)},scrollRight:function(a){this.scrollBy(this.scrollIncrement,a)},scrollToItem:function(a,b){a=this.getItem(a);if(a!=undefined){var c=this.getItemVisibility(a);if(!c.fullyVisible){var d=a.getBox(!0,!0),e=d.x;c.hiddenRight&&(e-=this.layout.innerCt.getWidth()-d.width),this.scrollTo(e,b)}}},getItemVisibility:function(a){var b=this.getItem(a).getBox(!0,!0),c=b.x,d=b.x+b.width,e=this.getScrollPosition(),f=this.layout.innerCt.getWidth()+e;return{hiddenLeft:c<e,hiddenRight:d>f,fullyVisible:c>e&&d<f}}}),Ext.layout.boxOverflow.scroller=Ext.layout.boxOverflow.Scroller,Ext.layout.boxOverflow.VerticalScroller=Ext.extend(Ext.layout.boxOverflow.Scroller,{scrollIncrement:75,wheelIncrement:2,handleOverflow:function(a,b){return Ext.layout.boxOverflow.VerticalScroller.superclass.handleOverflow.apply(this,arguments),{targetSize:{height:b.height-(this.beforeCt.getHeight()+this.afterCt.getHeight()),width:b.width}}},createInnerElements:function(){var a=this.layout.innerCt;this.beforeCt||(this.beforeCt=a.insertSibling({cls:this.beforeCls},"before"),this.afterCt=a.insertSibling({cls:this.afterCls},"after"),this.createWheelListener())},scrollTo:function(a,b){var c=this.getScrollPosition(),d=a.constrain(0,this.getMaxScrollBottom());d!=c&&!this.scrolling&&(b==undefined&&(b=this.animateScroll),this.layout.innerCt.scrollTo("top",d,b?this.getScrollAnim():!1),b?this.scrolling=!0:(this.scrolling=!1,this.updateScrollButtons()))},getScrollPosition:function(){return parseInt(this.layout.innerCt.dom.scrollTop,10)||0},getMaxScrollBottom:function(){return this.layout.innerCt.dom.scrollHeight-this.layout.innerCt.getHeight()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollBottom()}}),Ext.layout.boxOverflow.scroller.vbox=Ext.layout.boxOverflow.VerticalScroller,Ext.layout.boxOverflow.HorizontalScroller=Ext.extend(Ext.layout.boxOverflow.Scroller,{handleOverflow:function(a,b){return Ext.layout.boxOverflow.HorizontalScroller.superclass.handleOverflow.apply(this,arguments),{targetSize:{height:b.height,width:b.width-(this.beforeCt.getWidth()+this.afterCt.getWidth())}}},createInnerElements:function(){var a=this.layout.innerCt;this.beforeCt||(this.afterCt=a.insertSibling({cls:this.afterCls},"before"),this.beforeCt=a.insertSibling({cls:this.beforeCls},"before"),this.createWheelListener())},scrollTo:function(a,b){var c=this.getScrollPosition(),d=a.constrain(0,this.getMaxScrollRight());d!=c&&!this.scrolling&&(b==undefined&&(b=this.animateScroll),this.layout.innerCt.scrollTo("left",d,b?this.getScrollAnim():!1),b?this.scrolling=!0:(this.scrolling=!1,this.updateScrollButtons()))},getScrollPosition:function(){return parseInt(this.layout.innerCt.dom.scrollLeft,10)||0},getMaxScrollRight:function(){return this.layout.innerCt.dom.scrollWidth-this.layout.innerCt.getWidth()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollRight()}}),Ext.layout.boxOverflow.scroller.hbox=Ext.layout.boxOverflow.HorizontalScroller,Ext.layout.HBoxLayout=Ext.extend(Ext.layout.BoxLayout,{align:"top",type:"hbox",calculateChildBoxes:function(a,b){var c=a.length,d=this.padding,e=d.top,f=d.left,g=e+d.bottom,h=f+d.right,i=b.width-this.scrollOffset,j=b.height,k=Math.max(0,j-g),l=this.pack=="start",m=this.pack=="center",n=this.pack=="end",o=0,p=0,q=0,r=0,s=0,t=[],u,v,w,x,y,z,A,B,C,D,E,F;for(A=0;A<c;A++)u=a[A],w=u.height,v=u.width,z=!u.hasLayout&&typeof u.doLayout=="function",typeof v!="number"&&(u.flex&&!v?q+=u.flex:(!v&&z&&u.doLayout(),x=u.getSize(),v=x.width,w=x.height)),y=u.margins,D=y.left+y.right,o+=D+(v||0),r+=D+(u.flex?u.minWidth||0:v),s+=D+(u.minWidth||v||0),typeof w!="number"&&(z&&u.doLayout(),w=u.getHeight()),p=Math.max(p,w+y.top+y.bottom),t.push({component:u,height:w||undefined,width:v||undefined});var G=r-i,H=s>i,I=Math.max(0,i-o-h);if(H)for(A=0;A<c;A++)t[A].width=a[A].minWidth||a[A].width||t[A].width;else if(G>0){var J=[];for(var K=0,L=c;K<L;K++){var M=a[K],N=M.minWidth||0;M.flex?t[K].width=N:J.push({minWidth:N,available:t[K].width-N,index:K})}J.sort(function(a,b){return a.available>b.available?1:-1});for(var A=0,L=J.length;A<L;A++){var O=J[A].index;if(O==undefined)continue;var M=a[O],P=t[O],Q=P.width,N=M.minWidth,R=Math.max(N,Q-Math.ceil(G/(L-A))),S=Q-R;t[O].width=R,G-=S}}else{var T=I,U=q;for(A=0;A<c;A++)u=a[A],B=t[A],y=u.margins,E=y.top+y.bottom,l&&u.flex&&!u.width&&(C=Math.ceil(u.flex/U*T),T-=C,U-=u.flex,B.width=C,B.dirtySize=!0)}m?f+=I/2:n&&(f+=I);for(A=0;A<c;A++){u=a[A],B=t[A],y=u.margins,f+=y.left,E=y.top+y.bottom,B.left=f,B.top=e+y.top;switch(this.align){case"stretch":F=k-E,B.height=F.constrain(u.minHeight||0,u.maxHeight||1e6),B.dirtySize=!0;break;case"stretchmax":F=p-E,B.height=F.constrain(u.minHeight||0,u.maxHeight||1e6),B.dirtySize=!0;break;case"middle":var V=k-B.height-E;V>0&&(B.top=e+E+V/2)}f+=B.width+y.right}return{boxes:t,meta:{maxHeight:p,nonFlexWidth:o,desiredWidth:r,minimumWidth:s,shortfall:r-i,tooNarrow:H}}}}),Ext.Container.LAYOUTS.hbox=Ext.layout.HBoxLayout,Ext.layout.VBoxLayout=Ext.extend(Ext.layout.BoxLayout,{align:"left",type:"vbox",calculateChildBoxes:function(a,b){var c=a.length,d=this.padding,e=d.top,f=d.left,g=e+d.bottom,h=f+d.right,i=b.width-this.scrollOffset,j=b.height,k=Math.max(0,i-h),l=this.pack=="start",m=this.pack=="center",n=this.pack=="end",o=0,p=0,q=0,r=0,s=0,t=[],u,v,w,x,y,z,A,B,C,D,E,F;for(A=0;A<c;A++)u=a[A],w=u.height,v=u.width,z=!u.hasLayout&&typeof u.doLayout=="function",typeof w!="number"&&(u.flex&&!w?q+=u.flex:(!w&&z&&u.doLayout(),x=u.getSize(),v=x.width,w=x.height)),y=u.margins,E=y.top+y.bottom,o+=E+(w||0),r+=E+(u.flex?u.minHeight||0:w),s+=E+(u.minHeight||w||0),typeof v!="number"&&(z&&u.doLayout(),v=u.getWidth()),p=Math.max(p,v+y.left+y.right),t.push({component:u,height:w||undefined,width:v||undefined});var G=r-j,H=s>j,I=Math.max(0,j-o-g);if(H)for(A=0,L=c;A<L;A++)t[A].height=a[A].minHeight||a[A].height||t[A].height;else if(G>0){var J=[];for(var K=0,L=c;K<L;K++){var M=a[K],N=M.minHeight||0;M.flex?t[K].height=N:J.push({minHeight:N,available:t[K].height-N,index:K})}J.sort(function(a,b){return a.available>b.available?1:-1});for(var A=0,L=J.length;A<L;A++){var O=J[A].index;if(O==undefined)continue;var M=a[O],P=t[O],Q=P.height,N=M.minHeight,R=Math.max(N,Q-Math.ceil(G/(L-A))),S=Q-R;t[O].height=R,G-=S}}else{var T=I,U=q;for(A=0;A<c;A++)u=a[A],B=t[A],y=u.margins,D=y.left+y.right,l&&u.flex&&!u.height&&(flexedHeight=Math.ceil(u.flex/U*T),T-=flexedHeight,U-=u.flex,B.height=flexedHeight,B.dirtySize=!0)}m?e+=I/2:n&&(e+=I);for(A=0;A<c;A++){u=a[A],B=t[A],y=u.margins,e+=y.top,D=y.left+y.right,B.left=f+y.left,B.top=e;switch(this.align){case"stretch":F=k-D,B.width=F.constrain(u.minWidth||0,u.maxWidth||1e6),B.dirtySize=!0;break;case"stretchmax":F=p-D,B.width=F.constrain(u.minWidth||0,u.maxWidth||1e6),B.dirtySize=!0;break;case"center":var V=k-B.width-D;V>0&&(B.left=f+D+V/2)}e+=B.height+y.bottom}return{boxes:t,meta:{maxWidth:p,nonFlexHeight:o,desiredHeight:r,minimumHeight:s,shortfall:r-j,tooNarrow:H}}}}),Ext.Container.LAYOUTS.vbox=Ext.layout.VBoxLayout,Ext.layout.ToolbarLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"toolbar",triggerWidth:18,noItemsMenuText:'<div class="x-toolbar-no-items">(None)</div>',lastOverflow:!1,tableHTML:['<table cellspacing="0" class="x-toolbar-ct">',"<tbody>","<tr>",'<td class="x-toolbar-left" align="{0}">','<table cellspacing="0">',"<tbody>",'<tr class="x-toolbar-left-row"></tr>',"</tbody>","</table>","</td>",'<td class="x-toolbar-right" align="right">','<table cellspacing="0" class="x-toolbar-right-ct">',"<tbody>","<tr>","<td>",'<table cellspacing="0">',"<tbody>",'<tr class="x-toolbar-right-row"></tr>',"</tbody>","</table>","</td>","<td>",'<table cellspacing="0">',"<tbody>",'<tr class="x-toolbar-extras-row"></tr>',"</tbody>","</table>","</td>","</tr>","</tbody>","</table>","</td>","</tr>","</tbody>","</table>"].join(""),onLayout:function(a,b){if(!this.leftTr){var c=a.buttonAlign=="center"?"center":"left";b.addClass("x-toolbar-layout-ct"),b.insertHtml("beforeEnd",String.format(this.tableHTML,c)),this.leftTr=b.child("tr.x-toolbar-left-row",!0),this.rightTr=b.child("tr.x-toolbar-right-row",!0),this.extrasTr=b.child("tr.x-toolbar-extras-row",!0),this.hiddenItem==undefined&&(this.hiddenItems=[])}var d=a.buttonAlign=="right"?this.rightTr:this.leftTr,e=a.items.items,f=0;for(var g=0,h=e.length,i;g<h;g++,f++){i=e[g];if(i.isFill)d=this.rightTr,f=-1;else if(!i.rendered)i.render(this.insertCell(i,d,f)),this.configureItem(i);else if(!i.xtbHidden&&!this.isValidParent(i,d.childNodes[f])){var j=this.insertCell(i,d,f);j.appendChild(i.getPositionEl().dom),i.container=Ext.get(j)}}this.cleanup(this.leftTr),this.cleanup(this.rightTr),this.cleanup(this.extrasTr),this.fitToSize(b)},cleanup:function(a){var b=a.childNodes,c,d;for(c=b.length-1;c>=0&&(d=b[c]);c--)d.firstChild||a.removeChild(d)},insertCell:function(a,b,c){var d=document.createElement("td");return d.className="x-toolbar-cell",b.insertBefore(d,b.childNodes[c]||null),d},hideItem:function(a){this.hiddenItems.push(a),a.xtbHidden=!0,a.xtbWidth=a.getPositionEl().dom.parentNode.offsetWidth,a.hide()},unhideItem:function(a){a.show(),a.xtbHidden=!1,this.hiddenItems.remove(a)},getItemWidth:function(a){return a.hidden?a.xtbWidth||0:a.getPositionEl().dom.parentNode.offsetWidth},fitToSize:function(a){if(this.container.enableOverflow===!1)return;var b=a.dom.clientWidth,c=a.dom.firstChild.offsetWidth,d=b-this.triggerWidth,e=this.lastWidth||0,f=this.hiddenItems,g=f.length!=0,h=b>=e;this.lastWidth=b;if(c>b||g&&h){var i=this.container.items.items,j=i.length,k=0,l;for(var m=0;m<j;m++)l=i[m],l.isFill||(k+=this.getItemWidth(l),k>d?!l.hidden&&!l.xtbHidden&&this.hideItem(l):l.xtbHidden&&this.unhideItem(l))}g=f.length!=0,g?(this.initMore(),this.lastOverflow||(this.container.fireEvent("overflowchange",this.container,!0),this.lastOverflow=!0)):this.more&&(this.clearMenu(),this.more.destroy(),delete this.more,this.lastOverflow&&(this.container.fireEvent("overflowchange",this.container,!1),this.lastOverflow=!1))},createMenuConfig:function(a,b){var c=Ext.apply({},a.initialConfig),d=a.toggleGroup;return Ext.copyTo(c,a,["iconCls","icon","itemId","disabled","handler","scope","menu"]),Ext.apply(c,{text:a.overflowText||a.text,hideOnClick:b}),(d||a.enableToggle)&&Ext.apply(c,{group:d,checked:a.pressed,listeners:{checkchange:function(b,c){a.toggle(c)}}}),delete c.ownerCt,delete c.xtype,delete c.id,c},addComponentToMenu:function(a,b){b instanceof Ext.Toolbar.Separator?a.add("-"):Ext.isFunction(b.isXType)&&(b.isXType("splitbutton")?a.add(this.createMenuConfig(b,!0)):b.isXType("button")?a.add(this.createMenuConfig(b,!b.menu)):b.isXType("buttongroup")&&b.items.each(function(b){this.addComponentToMenu(a,b)},this))},clearMenu:function(){var a=this.moreMenu;a&&a.items&&a.items.each(function(a){delete a.menu})},beforeMoreShow:function(a){var b=this.container.items.items,c=b.length,d,e,f=function(a,b){return a.isXType("buttongroup")&&!(b instanceof Ext.Toolbar.Separator)};this.clearMenu(),a.removeAll();for(var g=0;g<c;g++)d=b[g],d.xtbHidden&&(e&&(f(d,e)||f(e,d))&&a.add("-"),this.addComponentToMenu(a,d),e=d);a.items.length<1&&a.add(this.noItemsMenuText)},initMore:function(){if(!this.more){this.moreMenu=new Ext.menu.Menu({ownerCt:this.container,listeners:{beforeshow:this.beforeMoreShow,scope:this}}),this.more=new Ext.Button({iconCls:"x-toolbar-more-icon",cls:"x-toolbar-more",menu:this.moreMenu,ownerCt:this.container});var a=this.insertCell(this.more,this.extrasTr,100);this.more.render(a)}},destroy:function(){Ext.destroy(this.more,this.moreMenu),delete this.leftTr,delete this.rightTr,delete this.extrasTr,Ext.layout.ToolbarLayout.superclass.destroy.call(this)}}),Ext.Container.LAYOUTS.toolbar=Ext.layout.ToolbarLayout,Ext.layout.MenuLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"menu",setContainer:function(a){this.monitorResize=!a.floating,a.on("autosize",this.doAutoSize,this),Ext.layout.MenuLayout.superclass.setContainer.call(this,a)},renderItem:function(a,b,c){this.itemTpl||(this.itemTpl=Ext.layout.MenuLayout.prototype.itemTpl=new Ext.XTemplate('<li id="{itemId}" class="{itemCls}">','<tpl if="needsIcon">','<img alt="{altText}" src="{icon}" class="{iconCls}"/>',"</tpl>","</li>"));if(a&&!a.rendered){Ext.isNumber(b)&&(b=c.dom.childNodes[b]);var d=this.getItemArgs(a);a.render(a.positionEl=b?this.itemTpl.insertBefore(b,d,!0):this.itemTpl.append(c,d,!0)),a.positionEl.menuItemId=a.getItemId(),!d.isMenuItem&&d.needsIcon&&a.positionEl.addClass("x-menu-list-item-indent"),this.configureItem(a)}else a&&!this.isValidParent(a,c)&&(Ext.isNumber(b)&&(b=c.dom.childNodes[b]),c.dom.insertBefore(a.getActionEl().dom,b||null))},getItemArgs:function(a){var b=a instanceof Ext.menu.Item,c=!(b||a instanceof Ext.menu.Separator);return{isMenuItem:b,needsIcon:c&&(a.icon||a.iconCls),icon:a.icon||Ext.BLANK_IMAGE_URL,iconCls:"x-menu-item-icon "+(a.iconCls||""),itemId:"x-menu-el-"+a.id,itemCls:"x-menu-list-item ",altText:a.altText||""}},isValidParent:function(a,b){return a.el.up("li.x-menu-list-item",5).dom.parentNode===(b.dom||b)},onLayout:function(a,b){Ext.layout.MenuLayout.superclass.onLayout.call(this,a,b),this.doAutoSize()},doAutoSize:function(){var a=this.container,b=a.width;if(a.floating)if(b)a.setWidth(b);else if(Ext.isIE){a.setWidth(Ext.isStrict&&(Ext.isIE7||Ext.isIE8)?"auto":a.minWidth);var c=a.getEl(),d=c.dom.offsetWidth;a.setWidth(a.getLayoutTarget().getWidth()+c.getFrameWidth("lr"))}}}),Ext.Container.LAYOUTS.menu=Ext.layout.MenuLayout,Ext.Viewport=Ext.extend(Ext.Container,{initComponent:function(){Ext.Viewport.superclass.initComponent.call(this),document.getElementsByTagName("html")[0].className+=" x-viewport",this.el=Ext.getBody(),this.el.setHeight=Ext.emptyFn,this.el.setWidth=Ext.emptyFn,this.el.setSize=Ext.emptyFn,this.el.dom.scroll="no",this.allowDomMove=!1,this.autoWidth=!0,this.autoHeight=!0,Ext.EventManager.onWindowResize(this.fireResize,this),this.renderTo=this.el},fireResize:function(a,b){this.fireEvent("resize",this,a,b,a,b)}}),Ext.reg("viewport",Ext.Viewport),Ext.Panel=Ext.extend(Ext.Container,{baseCls:"x-panel",collapsedCls:"x-panel-collapsed",maskDisabled:!0,animCollapse:Ext.enableFx,headerAsText:!0,buttonAlign:"right",collapsed:!1,collapseFirst:!0,minButtonWidth:75,elements:"body",preventBodyReset:!1,padding:undefined,resizeEvent:"bodyresize",toolTarget:"header",collapseEl:"bwrap",slideAnchor:"t",disabledClass:"",deferHeight:!0,expandDefaults:{duration:.25},collapseDefaults:{duration:.25},initComponent:function(){Ext.Panel.superclass.initComponent.call(this),this.addEvents("bodyresize","titlechange","iconchange","collapse","expand","beforecollapse","beforeexpand","beforeclose","close","activate","deactivate"),this.unstyled&&(this.baseCls="x-plain"),this.toolbars=[],this.tbar&&(this.elements+=",tbar",this.topToolbar=this.createToolbar(this.tbar),this.tbar=null),this.bbar&&(this.elements+=",bbar",this.bottomToolbar=this.createToolbar(this.bbar),this.bbar=null);if(this.header===!0)this.elements+=",header",this.header=null;else if(this.headerCfg||this.title&&this.header!==!1)this.elements+=",header";if(this.footerCfg||this.footer===!0)this.elements+=",footer",this.footer=null;this.buttons&&(this.fbar=this.buttons,this.buttons=null),this.fbar&&this.createFbar(this.fbar),this.autoLoad&&this.on("render",this.doAutoLoad,this,{delay:10})},createFbar:function(a){var b=this.minButtonWidth;this.elements+=",footer",this.fbar=this.createToolbar(a,{buttonAlign:this.buttonAlign,toolbarCls:"x-panel-fbar",enableOverflow:!1,defaults:function(a){return{minWidth:a.minWidth||b}}}),this.fbar.items.each(function(a){a.minWidth=a.minWidth||this.minButtonWidth},this),this.buttons=this.fbar.items.items},createToolbar:function(a,b){var c;return Ext.isArray(a)&&(a={items:a}),c=a.events?Ext.apply(a,b):this.createComponent(Ext.apply({},a,b),"toolbar"),this.toolbars.push(c),c},createElement:function(a,b){if(this[a]){b.appendChild(this[a].dom);return}if(a==="bwrap"||this.elements.indexOf(a)!=-1){if(this[a+"Cfg"])this[a]=Ext.fly(b).createChild(this[a+"Cfg"]);else{var c=document.createElement("div");c.className=this[a+"Cls"],this[a]=Ext.get(b.appendChild(c))}this[a+"CssClass"]&&this[a].addClass(this[a+"CssClass"]),this[a+"Style"]&&this[a].applyStyles(this[a+"Style"])}},onRender:function(a,b){Ext.Panel.superclass.onRender.call(this,a,b),this.createClasses();var c=this.el,d=c.dom,e,f;this.collapsible&&!this.hideCollapseTool&&(this.tools=this.tools?this.tools.slice(0):[],this.tools[this.collapseFirst?"unshift":"push"]({id:"toggle",handler:this.toggleCollapse,scope:this})),this.tools&&(f=this.tools,this.elements+=this.header!==!1?",header":""),this.tools={},c.addClass(this.baseCls);if(d.firstChild){this.header=c.down("."+this.headerCls),this.bwrap=c.down("."+this.bwrapCls);var g=this.bwrap?this.bwrap:c;this.tbar=g.down("."+this.tbarCls),this.body=g.down("."+this.bodyCls),this.bbar=g.down("."+this.bbarCls),this.footer=g.down("."+this.footerCls),this.fromMarkup=!0}this.preventBodyReset===!0&&c.addClass("x-panel-reset"),this.cls&&c.addClass(this.cls),this.buttons&&(this.elements+=",footer");if(this.frame){c.insertHtml("afterBegin",String.format(Ext.Element.boxMarkup,this.baseCls)),this.createElement("header",d.firstChild.firstChild.firstChild),this.createElement("bwrap",d),e=this.bwrap.dom;var h=d.childNodes[1],i=d.childNodes[2];e.appendChild(h),e.appendChild(i);var j=e.firstChild.firstChild.firstChild;this.createElement("tbar",j),this.createElement("body",j),this.createElement("bbar",j),this.createElement("footer",e.lastChild.firstChild.firstChild),this.footer||(this.bwrap.dom.lastChild.className+=" x-panel-nofooter"),this.ft=Ext.get(this.bwrap.dom.lastChild),this.mc=Ext.get(j)}else this.createElement("header",d),this.createElement("bwrap",d),e=this.bwrap.dom,this.createElement("tbar",e),this.createElement("body",e),this.createElement("bbar",e),this.createElement("footer",e),this.header||(this.body.addClass(this.bodyCls+"-noheader"),this.tbar&&this.tbar.addClass(this.tbarCls+"-noheader"));Ext.isDefined(this.padding)&&this.body.setStyle("padding",this.body.addUnits(this.padding)),this.border===!1&&(this.el.addClass(this.baseCls+"-noborder"),this.body.addClass(this.bodyCls+"-noborder"),this.header&&this.header.addClass(this.headerCls+"-noborder"),this.footer&&this.footer.addClass(this.footerCls+"-noborder"),this.tbar&&this.tbar.addClass(this.tbarCls+"-noborder"),this.bbar&&this.bbar.addClass(this.bbarCls+"-noborder")),this.bodyBorder===!1&&this.body.addClass(this.bodyCls+"-noborder"),this.bwrap.enableDisplayMode("block"),this.header&&(this.header.unselectable(),this.headerAsText&&(this.header.dom.innerHTML='<span class="'+this.headerTextCls+'">'+this.header.dom.innerHTML+"</span>",this.iconCls&&this.setIconClass(this.iconCls))),this.floating&&this.makeFloating(this.floating),this.collapsible&&this.titleCollapse&&this.header&&(this.mon(this.header,"click",this.toggleCollapse,this),this.header.setStyle("cursor","pointer")),f&&this.addTool.apply(this,f),this.fbar&&(this.footer.addClass("x-panel-btns"),this.fbar.ownerCt=this,this.fbar.render(this.footer),this.footer.createChild({cls:"x-clear"})),this.tbar&&this.topToolbar&&(this.topToolbar.ownerCt=this,this.topToolbar.render(this.tbar)),this.bbar&&this.bottomToolbar&&(this.bottomToolbar.ownerCt=this,this.bottomToolbar.render(this.bbar))},setIconClass:function(a){var b=this.iconCls;this.iconCls=a;if(this.rendered&&this.header)if(this.frame)this.header.addClass("x-panel-icon"),this.header.replaceClass(b,this.iconCls);else{var c=this.header,d=c.child("img.x-panel-inline-icon");if(d)Ext.fly(d).replaceClass(b,this.iconCls);else{var e=c.child("span."+this.headerTextCls);e&&Ext.DomHelper.insertBefore(e.dom,{tag:"img",alt:"",src:Ext.BLANK_IMAGE_URL,cls:"x-panel-inline-icon "+this.iconCls})}}this.fireEvent("iconchange",this,a,b)},makeFloating:function(a){this.floating=!0,this.el=new Ext.Layer(Ext.apply({},a,{shadow:Ext.isDefined(this.shadow)?this.shadow:"sides",shadowOffset:this.shadowOffset,constrain:!1,shim:this.shim===!1?!1:undefined}),this.el)},getTopToolbar:function(){return this.topToolbar},getBottomToolbar:function(){return this.bottomToolbar},getFooterToolbar:function(){return this.fbar},addButton:function(a,b,c){return this.fbar||this.createFbar([]),b&&(Ext.isString(a)&&(a={text:a}),a=Ext.apply({handler:b,scope:c},a)),this.fbar.add(a)},addTool:function(){if(!this.rendered){this.tools||(this.tools=[]),Ext.each(arguments,function(a){this.tools.push(a)},this);return}if(!this[this.toolTarget])return;if(!this.toolTemplate){var a=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>');a.disableFormats=!0,a.compile(),Ext.Panel.prototype.toolTemplate=a}for(var b=0,c=arguments,d=c.length;b<d;b++){var e=c[b];if(!this.tools[e.id]){var f="x-tool-"+e.id+"-over",g=this.toolTemplate.insertFirst(this[this.toolTarget],e,!0);this.tools[e.id]=g,g.enableDisplayMode("block"),this.mon(g,"click",this.createToolHandler(g,e,f,this)),e.on&&this.mon(g,e.on),e.hidden&&g.hide(),e.qtip&&(Ext.isObject(e.qtip)?Ext.QuickTips.register(Ext.apply({target:g.id},e.qtip)):g.dom.qtip=e.qtip),g.addClassOnOver(f)}}},onLayout:function(a,b){Ext.Panel.superclass.onLayout.apply(this,arguments),this.hasLayout&&this.toolbars.length>0&&(Ext.each(this.toolbars,function(a){a.doLayout(undefined,b)}),this.syncHeight())},syncHeight:function(){var a=this.toolbarHeight,b=this.body,c=this.lastSize.height,d;if(this.autoHeight||!Ext.isDefined(c)||c=="auto")return;a!=this.getToolbarHeight()&&(a=Math.max(0,c-this.getFrameHeight()),b.setHeight(a),d=b.getSize(),this.toolbarHeight=this.getToolbarHeight(),this.onBodyResize(d.width,d.height))},onShow:function(){if(this.floating)return this.el.show();Ext.Panel.superclass.onShow.call(this)},onHide:function(){if(this.floating)return this.el.hide();Ext.Panel.superclass.onHide.call(this)},createToolHandler:function(a,b,c,d){return function(e){a.removeClass(c),b.stopEvent!==!1&&e.stopEvent(),b.handler&&b.handler.call(b.scope||a,e,a,d,b)}},afterRender:function(){this.floating&&!this.hidden&&this.el.show(),this.title&&this.setTitle(this.title),Ext.Panel.superclass.afterRender.call(this),this.collapsed&&(this.collapsed=!1,this.collapse(!1)),this.initEvents()},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.KeyMap(this.el,this.keys)),this.keyMap},initEvents:function(){this.keys&&this.getKeyMap(),this.draggable&&this.initDraggable(),this.toolbars.length>0&&(Ext.each(this.toolbars,function(a){a.doLayout(),a.on({scope:this,afterlayout:this.syncHeight,remove:this.syncHeight})},this),this.syncHeight())},initDraggable:function(){this.dd=new Ext.Panel.DD(this,Ext.isBoolean(this.draggable)?null:this.draggable)},beforeEffect:function(a){this.floating&&this.el.beforeAction(),a!==!1&&this.el.addClass("x-panel-animated")},afterEffect:function(a){this.syncShadow(),this.el.removeClass("x-panel-animated")},createEffect:function(a,b,c){var d={scope:c,block:!0};return a===!0?(d.callback=b,d):(a.callback?d.callback=function(){b.call(c),Ext.callback(a.callback,a.scope)}:d.callback=b,Ext.applyIf(d,a))},collapse:function(a){if(this.collapsed||this.el.hasFxBlock()||this.fireEvent("beforecollapse",this,a)===!1)return;var b=a===!0||a!==!1&&this.animCollapse;return this.beforeEffect(b),this.onCollapse(b,a),this},onCollapse:function(a,b){a?this[this.collapseEl].slideOut(this.slideAnchor,Ext.apply(this.createEffect(b||!0,this.afterCollapse,this),this.collapseDefaults)):(this[this.collapseEl].hide(this.hideMode),this.afterCollapse(!1))},afterCollapse:function(a){this.collapsed=!0,this.el.addClass(this.collapsedCls),a!==!1&&this[this.collapseEl].hide(this.hideMode),this.afterEffect(a),this.cascade(function(a){a.lastSize&&(a.lastSize={width:undefined,height:undefined})}),this.fireEvent("collapse",this)},expand:function(a){if(!this.collapsed||this.el.hasFxBlock()||this.fireEvent("beforeexpand",this,a)===!1)return;var b=a===!0||a!==!1&&this.animCollapse;return this.el.removeClass(this.collapsedCls),this.beforeEffect(b),this.onExpand(b,a),this},onExpand:function(a,b){a?this[this.collapseEl].slideIn(this.slideAnchor,Ext.apply(this.createEffect(b||!0,this.afterExpand,this),this.expandDefaults)):(this[this.collapseEl].show(this.hideMode),this.afterExpand(!1))},afterExpand:function(a){this.collapsed=!1,a!==!1&&this[this.collapseEl].show(this.hideMode),this.afterEffect(a),this.deferLayout&&(delete this.deferLayout,this.doLayout(!0)),this.fireEvent("expand",this)},toggleCollapse:function(a){return this[this.collapsed?"expand":"collapse"](a),this},onDisable:function(){this.rendered&&this.maskDisabled&&this.el.mask(),Ext.Panel.superclass.onDisable.call(this)},onEnable:function(){this.rendered&&this.maskDisabled&&this.el.unmask(),Ext.Panel.superclass.onEnable.call(this)},onResize:function(a,b,c,d){var e=a,f=b;if(Ext.isDefined(e)||Ext.isDefined(f))this.collapsed?(this.queuedBodySize={width:e,height:f},!this.queuedExpand&&this.allowQueuedExpand!==!1&&(this.queuedExpand=!0,this.on("expand",function(){delete this.queuedExpand,this.onResize(this.queuedBodySize.width,this.queuedBodySize.height)},this,{single:!0}))):(Ext.isNumber(e)?this.body.setWidth(e=this.adjustBodyWidth(e-this.getFrameWidth())):e=="auto"?e=this.body.setWidth("auto").dom.offsetWidth:e=this.body.dom.offsetWidth,this.tbar&&(this.tbar.setWidth(e),this.topToolbar&&this.topToolbar.setSize(e)),this.bbar&&(this.bbar.setWidth(e),this.bottomToolbar&&(this.bottomToolbar.setSize(e),Ext.isIE&&(this.bbar.setStyle("position","static"),this.bbar.setStyle("position","")))),this.footer&&(this.footer.setWidth(e),this.fbar&&this.fbar.setSize(Ext.isIE?e-this.footer.getFrameWidth("lr"):"auto")),Ext.isNumber(f)?(f=Math.max(0,f-this.getFrameHeight()),this.body.setHeight(f)):f=="auto"&&this.body.setHeight(f),this.disabled&&this.el._mask&&this.el._mask.setSize(this.el.dom.clientWidth,this.el.getHeight())),this.onBodyResize(e,f);this.syncShadow(),Ext.Panel.superclass.onResize.call(this,a,b,c,d)},onBodyResize:function(a,b){this.fireEvent("bodyresize",this,a,b)},getToolbarHeight:function(){var a=0;return this.rendered&&Ext.each(this.toolbars,function(b){a+=b.getHeight()},this),a},adjustBodyHeight:function(a){return a},adjustBodyWidth:function(a){return a},onPosition:function(){this.syncShadow()},getFrameWidth:function(){var a=this.el.getFrameWidth("lr")+this.bwrap.getFrameWidth("lr");if(this.frame){var b=this.bwrap.dom.firstChild;a+=Ext.fly(b).getFrameWidth("l")+Ext.fly(b.firstChild).getFrameWidth("r"),a+=this.mc.getFrameWidth("lr")}return a},getFrameHeight:function(){var a=this.el.getFrameWidth("tb")+this.bwrap.getFrameWidth("tb");return a+=(this.tbar?this.tbar.getHeight():0)+(this.bbar?this.bbar.getHeight():0),this.frame?a+=this.el.dom.firstChild.offsetHeight+this.ft.dom.offsetHeight+this.mc.getFrameWidth("tb"):a+=(this.header?this.header.getHeight():0)+(this.footer?this.footer.getHeight():0),a},getInnerWidth:function(){return this.getSize().width-this.getFrameWidth()},getInnerHeight:function(){return this.body.getHeight()},syncShadow:function(){this.floating&&this.el.sync(!0)},getLayoutTarget:function(){return this.body},getContentTarget:function(){return this.body},setTitle:function(a,b){return this.title=a,this.header&&this.headerAsText&&this.header.child("span").update(a),b&&this.setIconClass(b),this.fireEvent("titlechange",this,a),this},getUpdater:function(){return this.body.getUpdater()},load:function(){var a=this.body.getUpdater();return a.update.apply(a,arguments),this},beforeDestroy:function(){Ext.Panel.superclass.beforeDestroy.call(this),this.header&&this.header.removeAllListeners();if(this.tools)for(var a in this.tools)Ext.destroy(this.tools[a]);this.toolbars.length>0&&Ext.each(this.toolbars,function(a){a.un("afterlayout",this.syncHeight,this),a.un("remove",this.syncHeight,this)},this);if(Ext.isArray(this.buttons))while(this.buttons.length)Ext.destroy(this.buttons[0]);this.rendered&&(Ext.destroy(this.ft,this.header,this.footer,this.tbar,this.bbar,this.body,this.mc,this.bwrap,this.dd),this.fbar&&Ext.destroy(this.fbar,this.fbar.el)),Ext.destroy(this.toolbars)},createClasses:function(){this.headerCls=this.baseCls+"-header",this.headerTextCls=this.baseCls+"-header-text",this.bwrapCls=this.baseCls+"-bwrap",this.tbarCls=this.baseCls+"-tbar",this.bodyCls=this.baseCls+"-body",this.bbarCls=this.baseCls+"-bbar",this.footerCls=this.baseCls+"-footer"},createGhost:function(a,b,c){var d=document.createElement("div");d.className="x-panel-ghost "+(a?a:""),this.header&&d.appendChild(this.el.dom.firstChild.cloneNode(!0)),Ext.fly(d.appendChild(document.createElement
("ul"))).setHeight(this.bwrap.getHeight()),d.style.width=this.el.dom.offsetWidth+"px",c?Ext.getDom(c).appendChild(d):this.container.dom.appendChild(d);if(b!==!1&&this.el.useShim!==!1){var e=new Ext.Layer({shadow:!1,useDisplay:!0,constrain:!1},d);return e.show(),e}return new Ext.Element(d)},doAutoLoad:function(){var a=this.body.getUpdater();this.renderer&&a.setRenderer(this.renderer),a.update(Ext.isObject(this.autoLoad)?this.autoLoad:{url:this.autoLoad})},getTool:function(a){return this.tools[a]}}),Ext.reg("panel",Ext.Panel),Ext.Editor=function(a,b){a.field?(this.field=Ext.create(a.field,"textfield"),b=Ext.apply({},a),delete b.field):this.field=a,Ext.Editor.superclass.constructor.call(this,b)},Ext.extend(Ext.Editor,Ext.Component,{allowBlur:!0,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:!1,swallowKeys:!0,completeOnEnter:!0,cancelOnEsc:!0,updateEl:!1,initComponent:function(){Ext.Editor.superclass.initComponent.call(this),this.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onRender:function(a,b){this.el=new Ext.Layer({shadow:this.shadow,cls:"x-editor",parentEl:a,shim:this.shim,shadowOffset:this.shadowOffset||4,id:this.id,constrain:this.constrain}),this.zIndex&&this.el.setZIndex(this.zIndex),this.el.setStyle("overflow",Ext.isGecko?"auto":"hidden"),this.field.msgTarget!="title"&&(this.field.msgTarget="qtip"),this.field.inEditor=!0,this.mon(this.field,{scope:this,blur:this.onBlur,specialkey:this.onSpecialKey}),this.field.grow&&this.mon(this.field,"autosize",this.el.sync,this.el,{delay:1}),this.field.render(this.el).show(),this.field.getEl().dom.name="",this.swallowKeys&&this.field.el.swallowEvent(["keypress","keydown"])},onSpecialKey:function(a,b){var c=b.getKey(),d=this.completeOnEnter&&c==b.ENTER,e=this.cancelOnEsc&&c==b.ESC;if(d||e)b.stopEvent(),d?this.completeEdit():this.cancelEdit(),a.triggerBlur&&a.triggerBlur();this.fireEvent("specialkey",a,b)},startEdit:function(a,b){this.editing&&this.completeEdit(),this.boundEl=Ext.get(a);var c=b!==undefined?b:this.boundEl.dom.innerHTML;this.rendered||this.render(this.parentEl||document.body),this.fireEvent("beforestartedit",this,this.boundEl,c)!==!1&&(this.startValue=c,this.field.reset(),this.field.setValue(c),this.realign(!0),this.editing=!0,this.show())},doAutoSize:function(){if(this.autoSize){var a=this.boundEl.getSize(),b=this.field.getSize();switch(this.autoSize){case"width":this.setSize(a.width,b.height);break;case"height":this.setSize(b.width,a.height);break;case"none":this.setSize(b.width,b.height);break;default:this.setSize(a.width,a.height)}}},setSize:function(a,b){delete this.field.lastSize,this.field.setSize(a,b),this.el&&((Ext.isGecko2||Ext.isOpera||Ext.isIE7&&Ext.isStrict)&&this.el.setSize(a,b),this.el.sync())},realign:function(a){a===!0&&this.doAutoSize(),this.el.alignTo(this.boundEl,this.alignment,this.offsets)},completeEdit:function(a){if(!this.editing)return;this.field.assertValue&&this.field.assertValue();var b=this.getValue();if(!this.field.isValid()){this.revertInvalid!==!1&&this.cancelEdit(a);return}if(String(b)===String(this.startValue)&&this.ignoreNoChange){this.hideEdit(a);return}this.fireEvent("beforecomplete",this,b,this.startValue)!==!1&&(b=this.getValue(),this.updateEl&&this.boundEl&&this.boundEl.update(b),this.hideEdit(a),this.fireEvent("complete",this,b,this.startValue))},onShow:function(){this.el.show(),this.hideEl!==!1&&this.boundEl.hide(),this.field.show().focus(!1,!0),this.fireEvent("startedit",this.boundEl,this.startValue)},cancelEdit:function(a){if(this.editing){var b=this.getValue();this.setValue(this.startValue),this.hideEdit(a),this.fireEvent("canceledit",this,b,this.startValue)}},hideEdit:function(a){a!==!0&&(this.editing=!1,this.hide())},onBlur:function(){this.allowBlur===!0&&this.editing&&this.selectSameEditor!==!0&&this.completeEdit()},onHide:function(){if(this.editing){this.completeEdit();return}this.field.blur(),this.field.collapse&&this.field.collapse(),this.el.hide(),this.hideEl!==!1&&this.boundEl.show()},setValue:function(a){this.field.setValue(a)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){Ext.destroyMembers(this,"field"),delete this.parentEl,delete this.boundEl}}),Ext.reg("editor",Ext.Editor),Ext.ColorPalette=Ext.extend(Ext.Component,{itemCls:"x-color-palette",value:null,clickEvent:"click",ctype:"Ext.ColorPalette",allowReselect:!1,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],initComponent:function(){Ext.ColorPalette.superclass.initComponent.call(this),this.addEvents("select"),this.handler&&this.on("select",this.handler,this.scope,!0)},onRender:function(a,b){this.autoEl={tag:"div",cls:this.itemCls},Ext.ColorPalette.superclass.onRender.call(this,a,b);var c=this.tpl||new Ext.XTemplate('<tpl for="."><a href="#" class="color-{.}" hidefocus="on"><em><span style="background:#{.}" unselectable="on">&#160;</span></em></a></tpl>');c.overwrite(this.el,this.colors),this.mon(this.el,this.clickEvent,this.handleClick,this,{delegate:"a"}),this.clickEvent!="click"&&this.mon(this.el,"click",Ext.emptyFn,this,{delegate:"a",preventDefault:!0})},afterRender:function(){Ext.ColorPalette.superclass.afterRender.call(this);if(this.value){var a=this.value;this.value=null,this.select(a,!0)}},handleClick:function(a,b){a.preventDefault();if(!this.disabled){var c=b.className.match(/(?:^|\s)color-(.{6})(?:\s|$)/)[1];this.select(c.toUpperCase())}},select:function(a,b){a=a.replace("#","");if(a!=this.value||this.allowReselect){var c=this.el;this.value&&c.child("a.color-"+this.value).removeClass("x-color-palette-sel"),c.child("a.color-"+a).addClass("x-color-palette-sel"),this.value=a,b!==!0&&this.fireEvent("select",this,a)}}}),Ext.reg("colorpalette",Ext.ColorPalette),Ext.DatePicker=Ext.extend(Ext.BoxComponent,{todayText:"Today",okText:"&#160;OK&#160;",cancelText:"Cancel",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",format:"m/d/y",disabledDaysText:"Disabled",disabledDatesText:"Disabled",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",startDay:0,showToday:!0,focusOnSelect:!0,initHour:12,initComponent:function(){Ext.DatePicker.superclass.initComponent.call(this),this.value=this.value?this.value.clearTime(!0):(new Date).clearTime(),this.addEvents("select"),this.handler&&this.on("select",this.handler,this.scope||this),this.initDisabledDays()},initDisabledDays:function(){if(!this.disabledDatesRE&&this.disabledDates){var a=this.disabledDates,b=a.length-1,c="(?:";Ext.each(a,function(d,e){c+=Ext.isDate(d)?"^"+Ext.escapeRe(d.dateFormat(this.format))+"$":a[e],e!=b&&(c+="|")},this),this.disabledDatesRE=new RegExp(c+")")}},setDisabledDates:function(a){Ext.isArray(a)?(this.disabledDates=a,this.disabledDatesRE=null):this.disabledDatesRE=a,this.initDisabledDays(),this.update(this.value,!0)},setDisabledDays:function(a){this.disabledDays=a,this.update(this.value,!0)},setMinDate:function(a){this.minDate=a,this.update(this.value,!0)},setMaxDate:function(a){this.maxDate=a,this.update(this.value,!0)},setValue:function(a){this.value=a.clearTime(!0),this.update(this.value)},getValue:function(){return this.value},focus:function(){this.update(this.activeDate)},onEnable:function(a){Ext.DatePicker.superclass.onEnable.call(this),this.doDisabled(!1),this.update(a?this.value:this.activeDate),Ext.isIE&&this.el.repaint()},onDisable:function(){Ext.DatePicker.superclass.onDisable.call(this),this.doDisabled(!0),Ext.isIE&&!Ext.isIE8&&Ext.each([].concat(this.textNodes,this.el.query("th span")),function(a){Ext.fly(a).repaint()})},doDisabled:function(a){this.keyNav.setDisabled(a),this.prevRepeater.setDisabled(a),this.nextRepeater.setDisabled(a),this.showToday&&(this.todayKeyListener.setDisabled(a),this.todayBtn.setDisabled(a))},onRender:function(a,b){var c=['<table cellspacing="0">','<tr><td class="x-date-left"><a href="#" title="',this.prevText,'">&#160;</a></td><td class="x-date-middle" align="center"></td><td class="x-date-right"><a href="#" title="',this.nextText,'">&#160;</a></td></tr>','<tr><td colspan="3"><table class="x-date-inner" cellspacing="0"><thead><tr>'],d=this.dayNames,e;for(e=0;e<7;e++){var f=this.startDay+e;f>6&&(f-=7),c.push("<th><span>",d[f].substr(0,1),"</span></th>")}c[c.length]="</tr></thead><tbody><tr>";for(e=0;e<42;e++)e%7===0&&e!==0&&(c[c.length]="</tr><tr>"),c[c.length]='<td><a href="#" hidefocus="on" class="x-date-date" tabIndex="1"><em><span></span></em></a></td>';c.push("</tr></tbody></table></td></tr>",this.showToday?'<tr><td colspan="3" class="x-date-bottom" align="center"></td></tr>':"",'</table><div class="x-date-mp"></div>');var g=document.createElement("div");g.className="x-date-picker",g.innerHTML=c.join(""),a.dom.insertBefore(g,b),this.el=Ext.get(g),this.eventEl=Ext.get(g.firstChild),this.prevRepeater=new Ext.util.ClickRepeater(this.el.child("td.x-date-left a"),{handler:this.showPrevMonth,scope:this,preventDefault:!0,stopDefault:!0}),this.nextRepeater=new Ext.util.ClickRepeater(this.el.child("td.x-date-right a"),{handler:this.showNextMonth,scope:this,preventDefault:!0,stopDefault:!0}),this.monthPicker=this.el.down("div.x-date-mp"),this.monthPicker.enableDisplayMode("block"),this.keyNav=new Ext.KeyNav(this.eventEl,{left:function(a){a.ctrlKey?this.showPrevMonth():this.update(this.activeDate.add("d",-1))},right:function(a){a.ctrlKey?this.showNextMonth():this.update(this.activeDate.add("d",1))},up:function(a){a.ctrlKey?this.showNextYear():this.update(this.activeDate.add("d",-7))},down:function(a){a.ctrlKey?this.showPrevYear():this.update(this.activeDate.add("d",7))},pageUp:function(a){this.showNextMonth()},pageDown:function(a){this.showPrevMonth()},enter:function(a){return a.stopPropagation(),!0},scope:this}),this.el.unselectable(),this.cells=this.el.select("table.x-date-inner tbody td"),this.textNodes=this.el.query("table.x-date-inner tbody span"),this.mbtn=new Ext.Button({text:"&#160;",tooltip:this.monthYearText,renderTo:this.el.child("td.x-date-middle",!0)}),this.mbtn.el.child("em").addClass("x-btn-arrow");if(this.showToday){this.todayKeyListener=this.eventEl.addKeyListener(Ext.EventObject.SPACE,this.selectToday,this);var h=(new Date).dateFormat(this.format);this.todayBtn=new Ext.Button({renderTo:this.el.child("td.x-date-bottom",!0),text:String.format(this.todayText,h),tooltip:String.format(this.todayTip,h),handler:this.selectToday,scope:this})}this.mon(this.eventEl,"mousewheel",this.handleMouseWheel,this),this.mon(this.eventEl,"click",this.handleDateClick,this,{delegate:"a.x-date-date"}),this.mon(this.mbtn,"click",this.showMonthPicker,this),this.onEnable(!0)},createMonthPicker:function(){if(!this.monthPicker.dom.firstChild){var a=['<table border="0" cellspacing="0">'];for(var b=0;b<6;b++)a.push('<tr><td class="x-date-mp-month"><a href="#">',Date.getShortMonthName(b),"</a></td>",'<td class="x-date-mp-month x-date-mp-sep"><a href="#">',Date.getShortMonthName(b+6),"</a></td>",b===0?'<td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-prev"></a></td><td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-next"></a></td></tr>':'<td class="x-date-mp-year"><a href="#"></a></td><td class="x-date-mp-year"><a href="#"></a></td></tr>');a.push('<tr class="x-date-mp-btns"><td colspan="4"><button type="button" class="x-date-mp-ok">',this.okText,'</button><button type="button" class="x-date-mp-cancel">',this.cancelText,"</button></td></tr>","</table>"),this.monthPicker.update(a.join("")),this.mon(this.monthPicker,"click",this.onMonthClick,this),this.mon(this.monthPicker,"dblclick",this.onMonthDblClick,this),this.mpMonths=this.monthPicker.select("td.x-date-mp-month"),this.mpYears=this.monthPicker.select("td.x-date-mp-year"),this.mpMonths.each(function(a,b,c){c+=1,c%2===0?a.dom.xmonth=5+Math.round(c*.5):a.dom.xmonth=Math.round((c-1)*.5)})}},showMonthPicker:function(){if(!this.disabled){this.createMonthPicker();var a=this.el.getSize();this.monthPicker.setSize(a),this.monthPicker.child("table").setSize(a),this.mpSelMonth=(this.activeDate||this.value).getMonth(),this.updateMPMonth(this.mpSelMonth),this.mpSelYear=(this.activeDate||this.value).getFullYear(),this.updateMPYear(this.mpSelYear),this.monthPicker.slideIn("t",{duration:.2})}},updateMPYear:function(a){this.mpyear=a;var b=this.mpYears.elements;for(var c=1;c<=10;c++){var d=b[c-1],e;c%2===0?(e=a+Math.round(c*.5),d.firstChild.innerHTML=e,d.xyear=e):(e=a-(5-Math.round(c*.5)),d.firstChild.innerHTML=e,d.xyear=e),this.mpYears.item(c-1)[e==this.mpSelYear?"addClass":"removeClass"]("x-date-mp-sel")}},updateMPMonth:function(a){this.mpMonths.each(function(b,c,d){b[b.dom.xmonth==a?"addClass":"removeClass"]("x-date-mp-sel")})},selectMPMonth:function(a){},onMonthClick:function(a,b){a.stopEvent();var c=new Ext.Element(b),d;if(c.is("button.x-date-mp-cancel"))this.hideMonthPicker();else if(c.is("button.x-date-mp-ok")){var e=new Date(this.mpSelYear,this.mpSelMonth,(this.activeDate||this.value).getDate());e.getMonth()!=this.mpSelMonth&&(e=(new Date(this.mpSelYear,this.mpSelMonth,1)).getLastDateOfMonth()),this.update(e),this.hideMonthPicker()}else(d=c.up("td.x-date-mp-month",2))?(this.mpMonths.removeClass("x-date-mp-sel"),d.addClass("x-date-mp-sel"),this.mpSelMonth=d.dom.xmonth):(d=c.up("td.x-date-mp-year",2))?(this.mpYears.removeClass("x-date-mp-sel"),d.addClass("x-date-mp-sel"),this.mpSelYear=d.dom.xyear):c.is("a.x-date-mp-prev")?this.updateMPYear(this.mpyear-10):c.is("a.x-date-mp-next")&&this.updateMPYear(this.mpyear+10)},onMonthDblClick:function(a,b){a.stopEvent();var c=new Ext.Element(b),d;if(d=c.up("td.x-date-mp-month",2))this.update(new Date(this.mpSelYear,d.dom.xmonth,(this.activeDate||this.value).getDate())),this.hideMonthPicker();else if(d=c.up("td.x-date-mp-year",2))this.update(new Date(d.dom.xyear,this.mpSelMonth,(this.activeDate||this.value).getDate())),this.hideMonthPicker()},hideMonthPicker:function(a){this.monthPicker&&(a===!0?this.monthPicker.hide():this.monthPicker.slideOut("t",{duration:.2}))},showPrevMonth:function(a){this.update(this.activeDate.add("mo",-1))},showNextMonth:function(a){this.update(this.activeDate.add("mo",1))},showPrevYear:function(){this.update(this.activeDate.add("y",-1))},showNextYear:function(){this.update(this.activeDate.add("y",1))},handleMouseWheel:function(a){a.stopEvent();if(!this.disabled){var b=a.getWheelDelta();b>0?this.showPrevMonth():b<0&&this.showNextMonth()}},handleDateClick:function(a,b){a.stopEvent(),!this.disabled&&b.dateValue&&!Ext.fly(b.parentNode).hasClass("x-date-disabled")&&(this.cancelFocus=this.focusOnSelect===!1,this.setValue(new Date(b.dateValue)),delete this.cancelFocus,this.fireEvent("select",this,this.value))},selectToday:function(){this.todayBtn&&!this.todayBtn.disabled&&(this.setValue((new Date).clearTime()),this.fireEvent("select",this,this.value))},update:function(a,b){if(this.rendered){var c=this.activeDate,d=this.isVisible();this.activeDate=a;if(!b&&c&&this.el){var e=a.getTime();if(c.getMonth()==a.getMonth()&&c.getFullYear()==a.getFullYear()){this.cells.removeClass("x-date-selected"),this.cells.each(function(a){if(a.dom.firstChild.dateValue==e)return a.addClass("x-date-selected"),d&&!this.cancelFocus&&Ext.fly(a.dom.firstChild).focus(50),!1},this);return}}var f=a.getDaysInMonth(),g=a.getFirstDateOfMonth(),h=g.getDay()-this.startDay;h<0&&(h+=7),f+=h;var i=a.add("mo",-1),j=i.getDaysInMonth()-h,k=this.cells.elements,l=this.textNodes,m=new Date(i.getFullYear(),i.getMonth(),j,this.initHour),n=(new Date).clearTime().getTime(),o=a.clearTime(!0).getTime(),p=this.minDate?this.minDate.clearTime(!0):Number.NEGATIVE_INFINITY,q=this.maxDate?this.maxDate.clearTime(!0):Number.POSITIVE_INFINITY,r=this.disabledDatesRE,s=this.disabledDatesText,t=this.disabledDays?this.disabledDays.join(""):!1,u=this.disabledDaysText,v=this.format;if(this.showToday){var w=(new Date).clearTime(),x=w<p||w>q||r&&v&&r.test(w.dateFormat(v))||t&&t.indexOf(w.getDay())!=-1;this.disabled||(this.todayBtn.setDisabled(x),this.todayKeyListener[x?"disable":"enable"]())}var y=function(a,b){b.title="";var c=m.clearTime(!0).getTime();b.firstChild.dateValue=c,c==n&&(b.className+=" x-date-today",b.title=a.todayText),c==o&&(b.className+=" x-date-selected",d&&Ext.fly(b.firstChild).focus(50));if(c<p){b.className=" x-date-disabled",b.title=a.minText;return}if(c>q){b.className=" x-date-disabled",b.title=a.maxText;return}t&&t.indexOf(m.getDay())!=-1&&(b.title=u,b.className=" x-date-disabled");if(r&&v){var e=m.dateFormat(v);r.test(e)&&(b.title=s.replace("%0",e),b.className=" x-date-disabled")}},z=0;for(;z<h;z++)l[z].innerHTML=++j,m.setDate(m.getDate()+1),k[z].className="x-date-prevday",y(this,k[z]);for(;z<f;z++){var A=z-h+1;l[z].innerHTML=A,m.setDate(m.getDate()+1),k[z].className="x-date-active",y(this,k[z])}var B=0;for(;z<42;z++)l[z].innerHTML=++B,m.setDate(m.getDate()+1),k[z].className="x-date-nextday",y(this,k[z]);this.mbtn.setText(this.monthNames[a.getMonth()]+" "+a.getFullYear());if(!this.internalRender){var C=this.el.dom.firstChild,D=C.offsetWidth;this.el.setWidth(D+this.el.getBorderWidth("lr")),Ext.fly(C).setWidth(D),this.internalRender=!0,Ext.isOpera&&!this.secondPass&&(C.rows[0].cells[1].style.width=D-(C.rows[0].cells[0].offsetWidth+C.rows[0].cells[2].offsetWidth)+"px",this.secondPass=!0,this.update.defer(10,this,[a]))}}},beforeDestroy:function(){this.rendered&&(Ext.destroy(this.keyNav,this.monthPicker,this.eventEl,this.mbtn,this.nextRepeater,this.prevRepeater,this.cells.el,this.todayBtn),delete this.textNodes,delete this.cells.elements)}}),Ext.reg("datepicker",Ext.DatePicker),Ext.LoadMask=function(a,b){this.el=Ext.get(a),Ext.apply(this,b);if(this.store)this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.onLoad}),this.removeMask=Ext.value(this.removeMask,!1);else{var c=this.el.getUpdater();c.showLoadIndicator=!1,c.on({scope:this,beforeupdate:this.onBeforeLoad,update:this.onLoad,failure:this.onLoad}),this.removeMask=Ext.value(this.removeMask,!0)}},Ext.LoadMask.prototype={msg:"Loading...",msgCls:"x-mask-loading",disabled:!1,disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},onLoad:function(){this.el.unmask(this.removeMask)},onBeforeLoad:function(){this.disabled||this.el.mask(this.msg,this.msgCls)},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){if(this.store)this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("exception",this.onLoad,this);else{var a=this.el.getUpdater();a.un("beforeupdate",this.onBeforeLoad,this),a.un("update",this.onLoad,this),a.un("failure",this.onLoad,this)}}},Ext.ns("Ext.slider"),Ext.slider.Thumb=Ext.extend(Object,{dragging:!1,constructor:function(a){Ext.apply(this,a||{},{cls:"x-slider-thumb",constrain:!1}),Ext.slider.Thumb.superclass.constructor.call(this,a),this.slider.vertical&&Ext.apply(this,Ext.slider.Thumb.Vertical)},render:function(){this.el=this.slider.innerEl.insertFirst({cls:this.cls}),this.initEvents()},enable:function(){this.disabled=!1,this.el.removeClass(this.slider.disabledClass)},disable:function(){this.disabled=!0,this.el.addClass(this.slider.disabledClass)},initEvents:function(){var a=this.el;a.addClassOnOver("x-slider-thumb-over"),this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeDragStart.createDelegate(this),onStart:this.onDragStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onDragEnd.createDelegate(this),tolerance:3,autoStart:300}),this.tracker.initEl(a)},onBeforeDragStart:function(a){return this.disabled?!1:(this.slider.promoteThumb(this),!0)},onDragStart:function(a){this.el.addClass("x-slider-thumb-drag"),this.dragging=!0,this.dragStartValue=this.value,this.slider.fireEvent("dragstart",this.slider,a,this)},onDrag:function(a){var b=this.slider,c=this.index,d=this.getNewValue();if(this.constrain){var e=b.thumbs[c+1],f=b.thumbs[c-1];f!=undefined&&d<=f.value&&(d=f.value),e!=undefined&&d>=e.value&&(d=e.value)}b.setValue(c,d,!1),b.fireEvent("drag",b,a,this)},getNewValue:function(){var a=this.slider,b=a.innerEl.translatePoints(this.tracker.getXY());return Ext.util.Format.round(a.reverseValue(b.left),a.decimalPrecision)},onDragEnd:function(a){var b=this.slider,c=this.value;this.el.removeClass("x-slider-thumb-drag"),this.dragging=!1,b.fireEvent("dragend",b,a),this.dragStartValue!=c&&b.fireEvent("changecomplete",b,c,this)},destroy:function(){Ext.destroyMembers(this,"tracker","el")}}),Ext.slider.MultiSlider=Ext.extend(Ext.BoxComponent,{vertical:!1,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:!0,animate:!0,constrainThumbs:!0,topThumbZIndex:1e4,initComponent:function(){Ext.isDefined(this.value)||(this.value=this.minValue),this.thumbs=[],Ext.slider.MultiSlider.superclass.initComponent.call(this),this.keyIncrement=Math.max(this.increment,this.keyIncrement),this.addEvents("beforechange","change","changecomplete","dragstart","drag","dragend");if(this.values==undefined||Ext.isEmpty(this.values))this.values=[0];var a=this.values;for(var b=0;b<a.length;b++)this.addThumb(a[b]);this.vertical&&Ext.apply(this,Ext.slider.Vertical)},addThumb:function(a){var b=new Ext.slider.Thumb({value:a,slider:this,index:this.thumbs.length,constrain:this.constrainThumbs});this.thumbs.push(b),this.rendered&&b.render()},promoteThumb:function(a){var b=this.thumbs,c,d;for(var e=0,f=b.length;e<f;e++)d=b[e],d==a?c=this.topThumbZIndex:c="",d.el.setStyle("zIndex",c)},onRender:function(){this.autoEl={cls:"x-slider "+(this.vertical?"x-slider-vert":"x-slider-horz"),cn:{cls:"x-slider-end",cn:{cls:"x-slider-inner",cn:[{tag:"a",cls:"x-slider-focus",href:"#",tabIndex:"-1",hidefocus:"on"}]}}},Ext.slider.MultiSlider.superclass.onRender.apply(this,arguments),this.endEl=this.el.first(),this.innerEl=this.endEl.first(),this.focusEl=this.innerEl.child(".x-slider-focus");for(var a=0;a<this.thumbs.length;a++)this.thumbs[a].render();var b=this.innerEl.child(".x-slider-thumb");this.halfThumb=(this.vertical?b.getHeight():b.getWidth())/2,this.initEvents()},initEvents:function(){this.mon(this.el,{scope:this,mousedown:this.onMouseDown,keydown:this.onKeyDown}),this.focusEl.swallowEvent("click",!0)},onMouseDown:function(a){if(this.disabled)return;var b=!1;for(var c=0;c<this.thumbs.length;c++)b=b||a.target==this.thumbs[c].el.dom;if(this.clickToChange&&!b){var d=this.innerEl.translatePoints(a.getXY());this.onClickChange(d)}this.focus()},onClickChange:function(a){if(a.top>this.clickRange[0]&&a.top<this.clickRange[1]){var b=this.getNearest(a,"left"),c=b.index;this.setValue(c,Ext.util.Format.round(this.reverseValue(a.left),this.decimalPrecision),undefined,!0)}},getNearest:function(a,b){var c=b=="top"?this.innerEl.getHeight()-a[b]:a[b],d=this.reverseValue(c),e=this.maxValue-this.minValue+5,f=0,g=null;for(var h=0;h<this.thumbs.length;h++){var i=this.thumbs[h],j=i.value,k=Math.abs(j-d);Math.abs(k<=e)&&(g=i,f=h,e=k)}return g},onKeyDown:function(a){if(this.disabled||this.thumbs.length!==1){a.preventDefault();return}var b=a.getKey(),c;switch(b){case a.UP:case a.RIGHT:a.stopEvent(),c=a.ctrlKey?this.maxValue:this.getValue(0)+this.keyIncrement,this.setValue(0,c,undefined,!0);break;case a.DOWN:case a.LEFT:a.stopEvent(),c=a.ctrlKey?this.minValue:this.getValue(0)-this.keyIncrement,this.setValue(0,c,undefined,!0);break;default:a.preventDefault()}},doSnap:function(a){if(!this.increment||!a)return a;var b=a,c=this.increment,d=a%c;return d!=0&&(b-=d,d*2>=c?b+=c:d*2<-c&&(b-=c)),b.constrain(this.minValue,this.maxValue)},afterRender:function(){Ext.slider.MultiSlider.superclass.afterRender.apply(this,arguments);for(var a=0;a<this.thumbs.length;a++){var b=this.thumbs[a];if(b.value!==undefined){var c=this.normalizeValue(b.value);c!==b.value?this.setValue(a,c,!1):this.moveThumb(a,this.translateValue(c),!1)}}},getRatio:function(){var a=this.innerEl.getWidth(),b=this.maxValue-this.minValue;return b==0?a:a/b},normalizeValue:function(a){return a=this.doSnap(a),a=Ext.util.Format.round(a,this.decimalPrecision),a=a.constrain(this.minValue,this.maxValue),a},setMinValue:function(a){this.minValue=a;var b=0,c=this.thumbs,d=c.length,e;for(;b<d;++b)e=c[b],e.value=e.value<a?a:e.value;this.syncThumb()},setMaxValue:function(a){this.maxValue=a;var b=0,c=this.thumbs,d=c.length,e;for(;b<d;++b)e=c[b],e.value=e.value>a?a:e.value;this.syncThumb()},setValue:function(a,b,c,d){var e=this.thumbs[a],f=e.el;b=this.normalizeValue(b),b!==e.value&&this.fireEvent("beforechange",this,b,e.value,e)!==!1&&(e.value=b,this.rendered&&(this.moveThumb(a,this.translateValue(b),c!==!1),this.fireEvent("change",this,b,e),d&&this.fireEvent("changecomplete",this,b,e)))},translateValue:function(a){var b=this.getRatio();return a*b-this.minValue*b-this.halfThumb},reverseValue:function(a){var b=this.getRatio();return(a+this.minValue*b)/b},moveThumb:function(a,b,c){var d=this.thumbs[a].el;!c||this.animate===!1?d.setLeft(b):d.shift({left:b,stopFx:!0,duration:.35})},focus:function(){this.focusEl.focus(10)},onResize:function(a,b){var c=this.thumbs,d=c.length,e=0;for(;e<d;++e)c[e].el.stopFx();Ext.isNumber(a)&&this.innerEl.setWidth(a-(this.el.getPadding("l")+this.endEl.getPadding("r"))),this.syncThumb(),Ext.slider.MultiSlider.superclass.onResize.apply(this,arguments)},onDisable:function(){Ext.slider.MultiSlider.superclass.onDisable.call(this);for(var a=0;a<this.thumbs.length;a++){var b=this.thumbs[a],c=b.el;b.disable();if(Ext.isIE){var d=c.getXY();c.hide(),this.innerEl.addClass(this.disabledClass).dom.disabled=!0,this.thumbHolder||(this.thumbHolder=this.endEl.createChild({cls:"x-slider-thumb "+this.disabledClass})),this.thumbHolder.show().setXY(d)}}},onEnable:function(){Ext.slider.MultiSlider.superclass.onEnable.call(this);for(var a=0;a<this.thumbs.length;a++){var b=this.thumbs[a],c=b.el;b.enable(),Ext.isIE&&(this.innerEl.removeClass(this.disabledClass).dom.disabled=!1,this.thumbHolder&&this.thumbHolder.hide(),c.show(),this.syncThumb())}},syncThumb:function(){if(this.rendered)for(var a=0;a<this.thumbs.length;a++)this.moveThumb(a,this.translateValue(this.thumbs[a].value))},getValue:function(a){return this.thumbs[a].value},getValues:function(){var a=[];for(var b=0;b<this.thumbs.length;b++)a.push(this.thumbs[b].value);return a},beforeDestroy:function(){var a=this.thumbs;for(var b=0,c=a.length;b<c;++b)a[b].destroy(),a[b]=null;Ext.destroyMembers(this,"endEl","innerEl","focusEl","thumbHolder"),Ext.slider.MultiSlider.superclass.beforeDestroy.call(this)}}),Ext.reg("multislider",Ext.slider.MultiSlider),Ext.slider.SingleSlider=Ext.extend(Ext.slider.MultiSlider,{constructor:function(a){a=a||{},Ext.applyIf(a,{values:[a.value||0]}),Ext.slider.SingleSlider.superclass.constructor.call(this,a)},getValue:function(){return Ext.slider.SingleSlider.superclass.getValue.call(this,0)},setValue:function(a,b){var c=Ext.toArray(arguments),d=c.length;return(d==1||d<=3&&typeof arguments[1]!="number")&&c.unshift(0),Ext.slider.SingleSlider.superclass.setValue.apply(this,c)},syncThumb:function(){return Ext.slider.SingleSlider.superclass.syncThumb.apply(this,[0].concat(arguments))},getNearest:function(){return this.thumbs[0]}}),Ext.Slider=Ext.slider.SingleSlider,Ext.reg("slider",Ext.slider.SingleSlider),Ext.slider.Vertical={onResize:function(a,b){this.innerEl.setHeight(b-(this.el.getPadding("t")+this.endEl.getPadding("b"))),this.syncThumb()},getRatio:function(){var a=this.innerEl.getHeight(),b=this.maxValue-this.minValue;return a/b},moveThumb:function(a,b,c){var d=this.thumbs[a],e=d.el;!c||this.animate===!1?e.setBottom(b):e.shift({bottom:b,stopFx:!0,duration:.35})},onClickChange:function(a){if(a.left>this.clickRange[0]&&a.left<this.clickRange[1]){var b=this.getNearest(a,"top"),c=b.index,d=this.minValue+this.reverseValue(this.innerEl.getHeight()-a.top);this.setValue(c,Ext.util.Format.round(d,this.decimalPrecision),undefined,!0)}}},Ext.slider.Thumb.Vertical={getNewValue:function(){var a=this.slider,b=a.innerEl,c=b.translatePoints(this.tracker.getXY()),d=b.getHeight()-c.top;return a.minValue+Ext.util.Format.round(d/a.getRatio(),a.decimalPrecision)}},Ext.ProgressBar=Ext.extend(Ext.BoxComponent,{baseCls:"x-progress",animate:!1,waitTimer:null,initComponent:function(){Ext.ProgressBar.superclass.initComponent.call(this),this.addEvents("update")},onRender:function(a,b){var c=new Ext.Template('<div class="{cls}-wrap">','<div class="{cls}-inner">','<div class="{cls}-bar">','<div class="{cls}-text">',"<div>&#160;</div>","</div>","</div>",'<div class="{cls}-text {cls}-text-back">',"<div>&#160;</div>","</div>","</div>","</div>");this.el=b?c.insertBefore(b,{cls:this.baseCls},!0):c.append(a,{cls:this.baseCls},!0),this.id&&(this.el.dom.id=this.id);var d=this.el.dom.firstChild;this.progressBar=Ext.get(d.firstChild);if(this.textEl)this.textEl=Ext.get(this.textEl),delete this.textTopEl;else{this.textTopEl=Ext.get(this.progressBar.dom.firstChild);var e=Ext.get(d.childNodes[1]);this.textTopEl.setStyle("z-index",99).addClass("x-hidden"),this.textEl=new Ext.CompositeElement([this.textTopEl.dom.firstChild,e.dom.firstChild]),this.textEl.setWidth(d.offsetWidth)}this.progressBar.setHeight(d.offsetHeight)},afterRender:function(){Ext.ProgressBar.superclass.afterRender.call(this),this.value?this.updateProgress(this.value,this.text):this.updateText(this.text)},updateProgress:function(a,b,c){this.value=a||0,b&&this.updateText(b);if(this.rendered&&!this.isDestroyed){var d=Math.floor(a*this.el.dom.firstChild.offsetWidth);this.progressBar.setWidth(d,c===!0||c!==!1&&this.animate),this.textTopEl&&this.textTopEl.removeClass("x-hidden").setWidth(d)}return this.fireEvent("update",this,a,b),this},wait:function(a){if(!this.waitTimer){var b=this;a=a||{},this.updateText(a.text),this.waitTimer=Ext.TaskMgr.start({run:function(b){var c=a.increment||10;b-=1,this.updateProgress(((b+c)%c+1)*(100/c)*.01,null,a.animate)},interval:a.interval||1e3,duration:a.duration,onStop:function(){a.fn&&a.fn.apply(a.scope||this),this.reset()},scope:b})}return this},isWaiting:function(){return this.waitTimer!==null},updateText:function(a){return this.text=a||"&#160;",this.rendered&&this.textEl.update(this.text),this},syncProgressBar:function(){return this.value&&this.updateProgress(this.value,this.text),this},setSize:function(a,b){Ext.ProgressBar.superclass.setSize.call(this,a,b);if(this.textTopEl){var c=this.el.dom.firstChild;this.textEl.setSize(c.offsetWidth,c.offsetHeight)}return this.syncProgressBar(),this},reset:function(a){return this.updateProgress(0),this.textTopEl&&this.textTopEl.addClass("x-hidden"),this.clearTimer(),a===!0&&this.hide(),this},clearTimer:function(){this.waitTimer&&(this.waitTimer.onStop=null,Ext.TaskMgr.stop(this.waitTimer),this.waitTimer=null)},onDestroy:function(){this.clearTimer(),this.rendered&&(this.textEl.isComposite&&this.textEl.clear(),Ext.destroyMembers(this,"textEl","progressBar","textTopEl")),Ext.ProgressBar.superclass.onDestroy.call(this)}}),Ext.reg("progress",Ext.ProgressBar),function(){var a=Ext.EventManager,b=Ext.lib.Dom;Ext.dd.DragDrop=function(a,b,c){a&&this.init(a,b,c)},Ext.dd.DragDrop.prototype={id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:!1,lock:function(){this.locked=!0},moveOnly:!1,unlock:function(){this.locked=!1},isTarget:!0,padding:null,_domRef:null,__ygDragDrop:!0,constrainX:!1,constrainY:!1,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:!1,xTicks:null,yTicks:null,primaryButtonOnly:!0,available:!1,hasOuterHandles:!1,b4StartDrag:function(a,b){},startDrag:function(a,b){},b4Drag:function(a){},onDrag:function(a){},onDragEnter:function(a,b){},b4DragOver:function(a){},onDragOver:function(a,b){},b4DragOut:function(a){},onDragOut:function(a,b){},b4DragDrop:function(a){},onDragDrop:function(a,b){},onInvalidDrop:function(a){},b4EndDrag:function(a){},endDrag:function(a){},b4MouseDown:function(a){},onMouseDown:function(a){},onMouseUp:function(a){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(a,b,c){Ext.isNumber(b)&&(b={left:b,right:b,top:b,bottom:b}),b=b||this.defaultPadding;var d=Ext.get(this.getEl()).getBox(),e=Ext.get(a),f=e.getScroll(),g,h=e.dom;if(h==document.body)g={x:f.left,y:f.top,width:Ext.lib.Dom.getViewWidth(),height:Ext.lib.Dom.getViewHeight()};else{var i=e.getXY();g={x:i[0],y:i[1],width:h.clientWidth,height:h.clientHeight}}var j=d.y-g.y,k=d.x-g.x;this.resetConstraints
(),this.setXConstraint(k-(b.left||0),g.width-k-d.width-(b.right||0),this.xTickSize),this.setYConstraint(j-(b.top||0),g.height-j-d.height-(b.bottom||0),this.yTickSize)},getEl:function(){return this._domRef||(this._domRef=Ext.getDom(this.id)),this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(b,c,d){this.initTarget(b,c,d),a.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(a,b,c){this.config=c||{},this.DDM=Ext.dd.DDM,this.groups={},typeof a!="string"&&(a=Ext.id(a)),this.id=a,this.addToGroup(b?b:"default"),this.handleElId=a,this.setDragElId(a),this.invalidHandleTypes={A:"A"},this.invalidHandleIds={},this.invalidHandleClasses=[],this.applyConfig(),this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0],this.isTarget=this.config.isTarget!==!1,this.maintainOffset=this.config.maintainOffset,this.primaryButtonOnly=this.config.primaryButtonOnly!==!1},handleOnAvailable:function(){this.available=!0,this.resetConstraints(),this.onAvailable()},setPadding:function(a,b,c,d){!b&&0!==b?this.padding=[a,a,a,a]:!c&&0!==c?this.padding=[a,b,a,b]:this.padding=[a,b,c,d]},setInitPosition:function(a,c){var d=this.getEl();if(!this.DDM.verifyEl(d))return;var e=a||0,f=c||0,g=b.getXY(d);this.initPageX=g[0]-e,this.initPageY=g[1]-f,this.lastPageX=g[0],this.lastPageY=g[1],this.setStartPosition(g)},setStartPosition:function(a){var c=a||b.getXY(this.getEl());this.deltaSetXY=null,this.startPageX=c[0],this.startPageY=c[1]},addToGroup:function(a){this.groups[a]=!0,this.DDM.regDragDrop(this,a)},removeFromGroup:function(a){this.groups[a]&&delete this.groups[a],this.DDM.removeDDFromGroup(this,a)},setDragElId:function(a){this.dragElId=a},setHandleElId:function(a){typeof a!="string"&&(a=Ext.id(a)),this.handleElId=a,this.DDM.regHandle(this.id,a)},setOuterHandleElId:function(b){typeof b!="string"&&(b=Ext.id(b)),a.on(b,"mousedown",this.handleMouseDown,this),this.setHandleElId(b),this.hasOuterHandles=!0},unreg:function(){a.un(this.id,"mousedown",this.handleMouseDown),this._domRef=null,this.DDM._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return this.DDM.isLocked()||this.locked},handleMouseDown:function(a,b){if(this.primaryButtonOnly&&a.button!=0)return;if(this.isLocked())return;this.DDM.refreshCache(this.groups);var c=new Ext.lib.Point(Ext.lib.Event.getPageX(a),Ext.lib.Event.getPageY(a));(!!this.hasOuterHandles||!!this.DDM.isOverTarget(c,this))&&this.clickValidator(a)&&(this.setStartPosition(),this.b4MouseDown(a),this.onMouseDown(a),this.DDM.handleMouseDown(a,this),this.DDM.stopEvent(a))},clickValidator:function(a){var b=a.getTarget();return this.isValidHandleChild(b)&&(this.id==this.handleElId||this.DDM.handleWasClicked(b,this.id))},addInvalidHandleType:function(a){var b=a.toUpperCase();this.invalidHandleTypes[b]=b},addInvalidHandleId:function(a){typeof a!="string"&&(a=Ext.id(a)),this.invalidHandleIds[a]=a},addInvalidHandleClass:function(a){this.invalidHandleClasses.push(a)},removeInvalidHandleType:function(a){var b=a.toUpperCase();delete this.invalidHandleTypes[b]},removeInvalidHandleId:function(a){typeof a!="string"&&(a=Ext.id(a)),delete this.invalidHandleIds[a]},removeInvalidHandleClass:function(a){for(var b=0,c=this.invalidHandleClasses.length;b<c;++b)this.invalidHandleClasses[b]==a&&delete this.invalidHandleClasses[b]},isValidHandleChild:function(a){var b=!0,c;try{c=a.nodeName.toUpperCase()}catch(d){c=a.nodeName}b=b&&!this.invalidHandleTypes[c],b=b&&!this.invalidHandleIds[a.id];for(var e=0,f=this.invalidHandleClasses.length;b&&e<f;++e)b=!Ext.fly(a).hasClass(this.invalidHandleClasses[e]);return b},setXTicks:function(a,b){this.xTicks=[],this.xTickSize=b;var c={};for(var d=this.initPageX;d>=this.minX;d-=b)c[d]||(this.xTicks[this.xTicks.length]=d,c[d]=!0);for(d=this.initPageX;d<=this.maxX;d+=b)c[d]||(this.xTicks[this.xTicks.length]=d,c[d]=!0);this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(a,b){this.yTicks=[],this.yTickSize=b;var c={};for(var d=this.initPageY;d>=this.minY;d-=b)c[d]||(this.yTicks[this.yTicks.length]=d,c[d]=!0);for(d=this.initPageY;d<=this.maxY;d+=b)c[d]||(this.yTicks[this.yTicks.length]=d,c[d]=!0);this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(a,b,c){this.leftConstraint=a,this.rightConstraint=b,this.minX=this.initPageX-a,this.maxX=this.initPageX+b,c&&this.setXTicks(this.initPageX,c),this.constrainX=!0},clearConstraints:function(){this.constrainX=!1,this.constrainY=!1,this.clearTicks()},clearTicks:function(){this.xTicks=null,this.yTicks=null,this.xTickSize=0,this.yTickSize=0},setYConstraint:function(a,b,c){this.topConstraint=a,this.bottomConstraint=b,this.minY=this.initPageY-a,this.maxY=this.initPageY+b,c&&this.setYTicks(this.initPageY,c),this.constrainY=!0},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var a=this.maintainOffset?this.lastPageX-this.initPageX:0,b=this.maintainOffset?this.lastPageY-this.initPageY:0;this.setInitPosition(a,b)}else this.setInitPosition();this.constrainX&&this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize),this.constrainY&&this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)},getTick:function(a,b){if(!b)return a;if(b[0]>=a)return b[0];for(var c=0,d=b.length;c<d;++c){var e=c+1;if(b[e]&&b[e]>=a){var f=a-b[c],g=b[e]-a;return g>f?b[c]:b[e]}}return b[b.length-1]},toString:function(){return"DragDrop "+this.id}}}(),Ext.dd.DragDropMgr||(Ext.dd.DragDropMgr=function(){var a=Ext.EventManager;return{ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:!0,stopPropagation:!0,initialized:!1,locked:!1,init:function(){this.initialized=!0},POINT:0,INTERSECT:1,mode:0,_execOnAll:function(a,b){for(var c in this.ids)for(var d in this.ids[c]){var e=this.ids[c][d];if(!this.isTypeOfDD(e))continue;e[a].apply(e,b)}},_onLoad:function(){this.init(),a.on(document,"mouseup",this.handleMouseUp,this,!0),a.on(document,"mousemove",this.handleMouseMove,this,!0),a.on(window,"unload",this._onUnload,this,!0),a.on(window,"resize",this._onResize,this,!0)},_onResize:function(a){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked},locationCache:{},useCache:!0,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:!1,clickTimeout:null,startX:0,startY:0,regDragDrop:function(a,b){this.initialized||this.init(),this.ids[b]||(this.ids[b]={}),this.ids[b][a.id]=a},removeDDFromGroup:function(a,b){this.ids[b]||(this.ids[b]={});var c=this.ids[b];c&&c[a.id]&&delete c[a.id]},_remove:function(a){for(var b in a.groups)b&&this.ids[b]&&this.ids[b][a.id]&&delete this.ids[b][a.id];delete this.handleIds[a.id]},regHandle:function(a,b){this.handleIds[a]||(this.handleIds[a]={}),this.handleIds[a][b]=b},isDragDrop:function(a){return this.getDDById(a)?!0:!1},getRelated:function(a,b){var c=[];for(var d in a.groups)for(var e in this.ids[d]){var f=this.ids[d][e];if(!this.isTypeOfDD(f))continue;if(!b||f.isTarget)c[c.length]=f}return c},isLegalTarget:function(a,b){var c=this.getRelated(a,!0);for(var d=0,e=c.length;d<e;++d)if(c[d].id==b.id)return!0;return!1},isTypeOfDD:function(a){return a&&a.__ygDragDrop},isHandle:function(a,b){return this.handleIds[a]&&this.handleIds[a][b]},getDDById:function(a){for(var b in this.ids)if(this.ids[b][a])return this.ids[b][a];return null},handleMouseDown:function(a,b){Ext.QuickTips&&Ext.QuickTips.ddDisable(),this.dragCurrent&&this.handleMouseUp(a),this.currentTarget=a.getTarget(),this.dragCurrent=b;var c=b.getEl();this.startX=a.getPageX(),this.startY=a.getPageY(),this.deltaX=this.startX-c.offsetLeft,this.deltaY=this.startY-c.offsetTop,this.dragThreshMet=!1,this.clickTimeout=setTimeout(function(){var a=Ext.dd.DDM;a.startDrag(a.startX,a.startY)},this.clickTimeThresh)},startDrag:function(a,b){clearTimeout(this.clickTimeout),this.dragCurrent&&(this.dragCurrent.b4StartDrag(a,b),this.dragCurrent.startDrag(a,b)),this.dragThreshMet=!0},handleMouseUp:function(a){Ext.QuickTips&&Ext.QuickTips.ddEnable();if(!this.dragCurrent)return;clearTimeout(this.clickTimeout),this.dragThreshMet&&this.fireEvents(a,!0),this.stopDrag(a),this.stopEvent(a)},stopEvent:function(a){this.stopPropagation&&a.stopPropagation(),this.preventDefault&&a.preventDefault()},stopDrag:function(a){this.dragCurrent&&(this.dragThreshMet&&(this.dragCurrent.b4EndDrag(a),this.dragCurrent.endDrag(a)),this.dragCurrent.onMouseUp(a)),this.dragCurrent=null,this.dragOvers={}},handleMouseMove:function(a){if(!this.dragCurrent)return!0;if(Ext.isIE&&a.button!==0&&a.button!==1&&a.button!==2)return this.stopEvent(a),this.handleMouseUp(a);if(!this.dragThreshMet){var b=Math.abs(this.startX-a.getPageX()),c=Math.abs(this.startY-a.getPageY());(b>this.clickPixelThresh||c>this.clickPixelThresh)&&this.startDrag(this.startX,this.startY)}return this.dragThreshMet&&(this.dragCurrent.b4Drag(a),this.dragCurrent.onDrag(a),this.dragCurrent.moveOnly||this.fireEvents(a,!1)),this.stopEvent(a),!0},fireEvents:function(a,b){var c=this.dragCurrent;if(!c||c.isLocked())return;var d=a.getPoint(),e=[],f=[],g=[],h=[],i=[];for(var j in this.dragOvers){var k=this.dragOvers[j];if(!this.isTypeOfDD(k))continue;this.isOverTarget(d,k,this.mode)||f.push(k),e[j]=!0,delete this.dragOvers[j]}for(var l in c.groups){if("string"!=typeof l)continue;for(j in this.ids[l]){var m=this.ids[l][j];if(!this.isTypeOfDD(m))continue;m.isTarget&&!m.isLocked()&&(m!=c||c.ignoreSelf===!1)&&this.isOverTarget(d,m,this.mode)&&(b?h.push(m):(e[m.id]?g.push(m):i.push(m),this.dragOvers[m.id]=m))}}if(this.mode)f.length&&(c.b4DragOut(a,f),c.onDragOut(a,f)),i.length&&c.onDragEnter(a,i),g.length&&(c.b4DragOver(a,g),c.onDragOver(a,g)),h.length&&(c.b4DragDrop(a,h),c.onDragDrop(a,h));else{var n=0;for(j=0,n=f.length;j<n;++j)c.b4DragOut(a,f[j].id),c.onDragOut(a,f[j].id);for(j=0,n=i.length;j<n;++j)c.onDragEnter(a,i[j].id);for(j=0,n=g.length;j<n;++j)c.b4DragOver(a,g[j].id),c.onDragOver(a,g[j].id);for(j=0,n=h.length;j<n;++j)c.b4DragDrop(a,h[j].id),c.onDragDrop(a,h[j].id)}b&&!h.length&&c.onInvalidDrop(a)},getBestMatch:function(a){var b=null,c=a.length;if(c==1)b=a[0];else for(var d=0;d<c;++d){var e=a[d];if(e.cursorIsOver){b=e;break}if(!b||b.overlap.getArea()<e.overlap.getArea())b=e}return b},refreshCache:function(a){for(var b in a){if("string"!=typeof b)continue;for(var c in this.ids[b]){var d=this.ids[b][c];if(this.isTypeOfDD(d)){var e=this.getLocation(d);e?this.locationCache[d.id]=e:delete this.locationCache[d.id]}}}},verifyEl:function(a){if(a){var b;if(Ext.isIE)try{b=a.offsetParent}catch(c){}else b=a.offsetParent;if(b)return!0}return!1},getLocation:function(a){if(!this.isTypeOfDD(a))return null;var b=a.getEl(),c,d,e,f,g,h,i,j,k;try{c=Ext.lib.Dom.getXY(b)}catch(l){}return c?(d=c[0],e=d+b.offsetWidth,f=c[1],g=f+b.offsetHeight,h=f-a.padding[0],i=e+a.padding[1],j=g+a.padding[2],k=d-a.padding[3],new Ext.lib.Region(h,i,j,k)):null},isOverTarget:function(a,b,c){var d=this.locationCache[b.id];if(!d||!this.useCache)d=this.getLocation(b),this.locationCache[b.id]=d;if(!d)return!1;b.cursorIsOver=d.contains(a);var e=this.dragCurrent;if(!e||!e.getTargetCoord||!c&&!e.constrainX&&!e.constrainY)return b.cursorIsOver;b.overlap=null;var f=e.getTargetCoord(a.x,a.y),g=e.getDragEl(),h=new Ext.lib.Region(f.y,f.x+g.offsetWidth,f.y+g.offsetHeight,f.x),i=h.intersect(d);return i?(b.overlap=i,c?!0:b.cursorIsOver):!1},_onUnload:function(a,b){Ext.dd.DragDropMgr.unregAll()},unregAll:function(){this.dragCurrent&&(this.stopDrag(),this.dragCurrent=null),this._execOnAll("unreg",[]);for(var a in this.elementCache)delete this.elementCache[a];this.elementCache={},this.ids={}},elementCache:{},getElWrapper:function(a){var b=this.elementCache[a];if(!b||!b.el)b=this.elementCache[a]=new this.ElementWrapper(Ext.getDom(a));return b},getElement:function(a){return Ext.getDom(a)},getCss:function(a){var b=Ext.getDom(a);return b?b.style:null},ElementWrapper:function(a){this.el=a||null,this.id=this.el&&a.id,this.css=this.el&&a.style},getPosX:function(a){return Ext.lib.Dom.getX(a)},getPosY:function(a){return Ext.lib.Dom.getY(a)},swapNode:function(a,b){if(a.swapNode)a.swapNode(b);else{var c=b.parentNode,d=b.nextSibling;d==a?c.insertBefore(a,b):b==a.nextSibling?c.insertBefore(b,a):(a.parentNode.replaceChild(b,a),c.insertBefore(a,d))}},getScroll:function(){var a,b,c=document.documentElement,d=document.body;return c&&(c.scrollTop||c.scrollLeft)?(a=c.scrollTop,b=c.scrollLeft):d&&(a=d.scrollTop,b=d.scrollLeft),{top:a,left:b}},getStyle:function(a,b){return Ext.fly(a).getStyle(b)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(a,b){var c=Ext.lib.Dom.getXY(b);Ext.lib.Dom.setXY(a,c)},numericSort:function(a,b){return a-b},_timeoutCount:0,_addListeners:function(){var a=Ext.dd.DDM;Ext.lib.Event&&document?a._onLoad():a._timeoutCount>2e3||(setTimeout(a._addListeners,10),document&&document.body&&(a._timeoutCount+=1))},handleWasClicked:function(a,b){if(this.isHandle(b,a.id))return!0;var c=a.parentNode;while(c){if(this.isHandle(b,c.id))return!0;c=c.parentNode}return!1}}}(),Ext.dd.DDM=Ext.dd.DragDropMgr,Ext.dd.DDM._addListeners()),Ext.dd.DD=function(a,b,c){a&&this.init(a,b,c)},Ext.extend(Ext.dd.DD,Ext.dd.DragDrop,{scroll:!0,autoOffset:function(a,b){var c=a-this.startPageX,d=b-this.startPageY;this.setDelta(c,d)},setDelta:function(a,b){this.deltaX=a,this.deltaY=b},setDragElPos:function(a,b){var c=this.getDragEl();this.alignElWithMouse(c,a,b)},alignElWithMouse:function(a,b,c){var d=this.getTargetCoord(b,c),e=a.dom?a:Ext.fly(a,"_dd");if(!this.deltaSetXY){var f=[d.x,d.y];e.setXY(f);var g=e.getLeft(!0),h=e.getTop(!0);this.deltaSetXY=[g-d.x,h-d.y]}else e.setLeftTop(d.x+this.deltaSetXY[0],d.y+this.deltaSetXY[1]);return this.cachePosition(d.x,d.y),this.autoScroll(d.x,d.y,a.offsetHeight,a.offsetWidth),d},cachePosition:function(a,b){if(a)this.lastPageX=a,this.lastPageY=b;else{var c=Ext.lib.Dom.getXY(this.getEl());this.lastPageX=c[0],this.lastPageY=c[1]}},autoScroll:function(a,b,c,d){if(this.scroll){var e=Ext.lib.Dom.getViewHeight(),f=Ext.lib.Dom.getViewWidth(),g=this.DDM.getScrollTop(),h=this.DDM.getScrollLeft(),i=c+b,j=d+a,k=e+g-b-this.deltaY,l=f+h-a-this.deltaX,m=40,n=document.all?80:30;i>e&&k<m&&window.scrollTo(h,g+n),b<g&&g>0&&b-g<m&&window.scrollTo(h,g-n),j>f&&l<m&&window.scrollTo(h+n,g),a<h&&h>0&&a-h<m&&window.scrollTo(h-n,g)}},getTargetCoord:function(a,b){var c=a-this.deltaX,d=b-this.deltaY;return this.constrainX&&(c<this.minX&&(c=this.minX),c>this.maxX&&(c=this.maxX)),this.constrainY&&(d<this.minY&&(d=this.minY),d>this.maxY&&(d=this.maxY)),c=this.getTick(c,this.xTicks),d=this.getTick(d,this.yTicks),{x:c,y:d}},applyConfig:function(){Ext.dd.DD.superclass.applyConfig.call(this),this.scroll=this.config.scroll!==!1},b4MouseDown:function(a){this.autoOffset(a.getPageX(),a.getPageY())},b4Drag:function(a){this.setDragElPos(a.getPageX(),a.getPageY())},toString:function(){return"DD "+this.id}}),Ext.dd.DDProxy=function(a,b,c){a&&(this.init(a,b,c),this.initFrame())},Ext.dd.DDProxy.dragElId="ygddfdiv",Ext.extend(Ext.dd.DDProxy,Ext.dd.DD,{resizeFrame:!0,centerFrame:!1,createFrame:function(){var a=this,b=document.body;if(!b||!b.firstChild){setTimeout(function(){a.createFrame()},50);return}var c=this.getDragEl();if(!c){c=document.createElement("div"),c.id=this.dragElId;var d=c.style;d.position="absolute",d.visibility="hidden",d.cursor="move",d.border="2px solid #aaa",d.zIndex=999,b.insertBefore(c,b.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DDProxy.superclass.applyConfig.call(this),this.resizeFrame=this.config.resizeFrame!==!1,this.centerFrame=this.config.centerFrame,this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(a,b){var c=this.getEl(),d=this.getDragEl(),e=d.style;this._resizeProxy(),this.centerFrame&&this.setDelta(Math.round(parseInt(e.width,10)/2),Math.round(parseInt(e.height,10)/2)),this.setDragElPos(a,b),Ext.fly(d).show()},_resizeProxy:function(){if(this.resizeFrame){var a=this.getEl();Ext.fly(this.getDragEl()).setSize(a.offsetWidth,a.offsetHeight)}},b4MouseDown:function(a){var b=a.getPageX(),c=a.getPageY();this.autoOffset(b,c),this.setDragElPos(b,c)},b4StartDrag:function(a,b){this.showFrame(a,b)},b4EndDrag:function(a){Ext.fly(this.getDragEl()).hide()},endDrag:function(a){var b=this.getEl(),c=this.getDragEl();c.style.visibility="",this.beforeMove(),b.style.visibility="hidden",Ext.dd.DDM.moveToEl(b,c),c.style.visibility="hidden",b.style.visibility="",this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return"DDProxy "+this.id}}),Ext.dd.DDTarget=function(a,b,c){a&&this.initTarget(a,b,c)},Ext.extend(Ext.dd.DDTarget,Ext.dd.DragDrop,{getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return"DDTarget "+this.id}}),Ext.dd.DragTracker=Ext.extend(Ext.util.Observable,{active:!1,tolerance:5,autoStart:!1,constructor:function(a){Ext.apply(this,a),this.addEvents("mousedown","mouseup","mousemove","dragstart","dragend","drag"),this.dragRegion=new Ext.lib.Region(0,0,0,0),this.el&&this.initEl(this.el),Ext.dd.DragTracker.superclass.constructor.call(this,a)},initEl:function(a){this.el=Ext.get(a),a.on("mousedown",this.onMouseDown,this,this.delegate?{delegate:this.delegate}:undefined)},destroy:function(){this.el.un("mousedown",this.onMouseDown,this),delete this.el},onMouseDown:function(a,b){this.fireEvent("mousedown",this,a)!==!1&&this.onBeforeStart(a)!==!1&&(this.startXY=this.lastXY=a.getXY(),this.dragTarget=this.delegate?b:this.el.dom,this.preventDefault!==!1&&a.preventDefault(),Ext.getDoc().on({scope:this,mouseup:this.onMouseUp,mousemove:this.onMouseMove,selectstart:this.stopSelect}),this.autoStart&&(this.timer=this.triggerStart.defer(this.autoStart===!0?1e3:this.autoStart,this,[a])))},onMouseMove:function(a,b){if(this.active&&Ext.isIE&&!a.browserEvent.button){a.preventDefault(),this.onMouseUp(a);return}a.preventDefault();var c=a.getXY(),d=this.startXY;this.lastXY=c;if(!this.active){if(!(Math.abs(d[0]-c[0])>this.tolerance||Math.abs(d[1]-c[1])>this.tolerance))return;this.triggerStart(a)}this.fireEvent("mousemove",this,a),this.onDrag(a),this.fireEvent("drag",this,a)},onMouseUp:function(a){var b=Ext.getDoc(),c=this.active;b.un("mousemove",this.onMouseMove,this),b.un("mouseup",this.onMouseUp,this),b.un("selectstart",this.stopSelect,this),a.preventDefault(),this.clearStart(),this.active=!1,delete this.elRegion,this.fireEvent("mouseup",this,a),c&&(this.onEnd(a),this.fireEvent("dragend",this,a))},triggerStart:function(a){this.clearStart(),this.active=!0,this.onStart(a),this.fireEvent("dragstart",this,a)},clearStart:function(){this.timer&&(clearTimeout(this.timer),delete this.timer)},stopSelect:function(a){return a.stopEvent(),!1},onBeforeStart:function(a){},onStart:function(a){},onDrag:function(a){},onEnd:function(a){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getXY:function(a){return a?this.constrainModes[a].call(this,this.lastXY):this.lastXY},getOffset:function(a){var b=this.getXY(a),c=this.startXY;return[c[0]-b[0],c[1]-b[1]]},constrainModes:{point:function(a){this.elRegion||(this.elRegion=this.getDragCt().getRegion());var b=this.dragRegion;return b.left=a[0],b.top=a[1],b.right=a[0],b.bottom=a[1],b.constrainTo(this.elRegion),[b.left,b.top]}}}),Ext.dd.ScrollManager=function(){var a=Ext.dd.DragDropMgr,b={},c=null,d={},e=function(a){c=null,h()},f=function(){a.dragCurrent&&a.refreshCache(a.dragCurrent.groups)},g=function(){if(a.dragCurrent){var b=Ext.dd.ScrollManager,c=d.el.ddScrollConfig?d.el.ddScrollConfig.increment:b.increment;b.animate?d.el.scroll(d.dir,c,!0,b.animDuration,f):d.el.scroll(d.dir,c)&&f()}},h=function(){d.id&&clearInterval(d.id),d.id=0,d.el=null,d.dir=""},i=function(b,c){h(),d.el=b,d.dir=c;var e=b.ddScrollConfig?b.ddScrollConfig.ddGroup:undefined,f=b.ddScrollConfig&&b.ddScrollConfig.frequency?b.ddScrollConfig.frequency:Ext.dd.ScrollManager.frequency;if(e===undefined||a.dragCurrent.ddGroup==e)d.id=setInterval(g,f)},j=function(e,f){if(f||!a.dragCurrent)return;var g=Ext.dd.ScrollManager;if(!c||c!=a.dragCurrent)c=a.dragCurrent,g.refreshCache();var j=Ext.lib.Event.getXY(e),k=new Ext.lib.Point(j[0],j[1]);for(var l in b){var m=b[l],n=m._region,o=m.ddScrollConfig?m.ddScrollConfig:g;if(n&&n.contains(k)&&m.isScrollable()){if(n.bottom-k.y<=o.vthresh){d.el!=m&&i(m,"down");return}if(n.right-k.x<=o.hthresh){d.el!=m&&i(m,"left");return}if(k.y-n.top<=o.vthresh){d.el!=m&&i(m,"up");return}if(k.x-n.left<=o.hthresh){d.el!=m&&i(m,"right");return}}}h()};return a.fireEvents=a.fireEvents.createSequence(j,a),a.stopDrag=a.stopDrag.createSequence(e,a),{register:function(a){if(Ext.isArray(a))for(var c=0,d=a.length;c<d;c++)this.register(a[c]);else a=Ext.get(a),b[a.id]=a},unregister:function(a){if(Ext.isArray(a))for(var c=0,d=a.length;c<d;c++)this.unregister(a[c]);else a=Ext.get(a),delete b[a.id]},vthresh:25,hthresh:25,increment:100,frequency:500,animate:!0,animDuration:.4,ddGroup:undefined,refreshCache:function(){for(var a in b)typeof b[a]=="object"&&(b[a]._region=b[a].getRegion())}}}(),Ext.dd.Registry=function(){var a={},b={},c=0,d=function(a,b){if(typeof a=="string")return a;var d=a.id;return!d&&b!==!1&&(d="extdd-"+ ++c,a.id=d),d};return{register:function(c,e){e=e||{},typeof c=="string"&&(c=document.getElementById(c)),e.ddel=c,a[d(c)]=e,e.isHandle!==!1&&(b[e.ddel.id]=e);if(e.handles){var f=e.handles;for(var g=0,h=f.length;g<h;g++)b[d(f[g])]=e}},unregister:function(c){var e=d(c,!1),f=a[e];if(f){delete a[e];if(f.handles){var g=f.handles;for(var h=0,i=g.length;h<i;h++)delete b[d(g[h],!1)]}}},getHandle:function(a){return typeof a!="string"&&(a=a.id),b[a]},getHandleFromEvent:function(a){var c=Ext.lib.Event.getTarget(a);return c?b[c.id]:null},getTarget:function(b){return typeof b!="string"&&(b=b.id),a[b]},getTargetFromEvent:function(c){var d=Ext.lib.Event.getTarget(c);return d?a[d.id]||b[d.id]:null}}}(),Ext.dd.StatusProxy=function(a){Ext.apply(this,a),this.id=this.id||Ext.id(),this.el=new Ext.Layer({dh:{id:this.id,tag:"div",cls:"x-dd-drag-proxy "+this.dropNotAllowed,children:[{tag:"div",cls:"x-dd-drop-icon"},{tag:"div",cls:"x-dd-drag-ghost"}]},shadow:!a||a.shadow!==!1}),this.ghost=Ext.get(this.el.dom.childNodes[1]),this.dropStatus=this.dropNotAllowed},Ext.dd.StatusProxy.prototype={dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(a){a=a||this.dropNotAllowed,this.dropStatus!=a&&(this.el.replaceClass(this.dropStatus,a),this.dropStatus=a)},reset:function(a){this.el.dom.className="x-dd-drag-proxy "+this.dropNotAllowed,this.dropStatus=this.dropNotAllowed,a&&this.ghost.update("")},update:function(a){typeof a=="string"?this.ghost.update(a):(this.ghost.update(""),a.style.margin="0",this.ghost.dom.appendChild(a));var b=this.ghost.dom.firstChild;b&&Ext.fly(b).setStyle("float","none")},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(a){this.el.hide(),a&&this.reset(!0)},stop:function(){this.anim&&this.anim.isAnimated&&this.anim.isAnimated()&&this.anim.stop()},show:function(){this.el.show()},sync:function(){this.el.sync()},repair:function(a,b,c){this.callback=b,this.scope=c,a&&this.animRepair!==!1?(this.el.addClass("x-dd-drag-repair"),this.el.hideUnders(!0),this.anim=this.el.shift({duration:this.repairDuration||.5,easing:"easeOut",xy:a,stopFx:!0,callback:this.afterRepair,scope:this})):this.afterRepair()},afterRepair:function(){this.hide(!0),typeof this.callback=="function"&&this.callback.call(this.scope||this),this.callback=null,this.scope=null},destroy:function(){Ext.destroy(this.ghost,this.el)}},Ext.dd.DragSource=function(a,b){this.el=Ext.get(a),this.dragData||(this.dragData={}),Ext.apply(this,b),this.proxy||(this.proxy=new Ext.dd.StatusProxy),Ext.dd.DragSource.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:!1,isTarget:!1,scroll:this.scroll===!0}),this.dragging=!1},Ext.extend(Ext.dd.DragSource,Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",getDragData:function(a){return this.dragData},onDragEnter:function(a,b){var c=Ext.dd.DragDropMgr.getDDById(b);this.cachedTarget=c;if(this.beforeDragEnter(c,a,b)!==!1){if(c.isNotifyTarget){var d=c.notifyEnter(this,a,this.dragData);this.proxy.setStatus(d)}else this.proxy.setStatus(this.dropAllowed);this.afterDragEnter&&this.afterDragEnter(c,a,b)}},beforeDragEnter:function(a,b,c){return!0},alignElWithMouse:function(){Ext.dd.DragSource.superclass.alignElWithMouse.apply(this,arguments),this.proxy.sync()},onDragOver:function(a,b){var c=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(b);if(this.beforeDragOver(c,a,b)!==!1){if(c.isNotifyTarget){var d=c.notifyOver(this,a,this.dragData);this.proxy.setStatus(d)}this.afterDragOver&&this.afterDragOver(c,a,b)}},beforeDragOver:function(a,b,c){return!0},onDragOut:function(a,b){var c=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(b);this.beforeDragOut(c,a,b)!==!1&&(c.isNotifyTarget&&c.notifyOut(this,a,this.dragData),this.proxy.reset(),this.afterDragOut&&this.afterDragOut(c,a,b)),this.cachedTarget=null},beforeDragOut:function(a,b,c){return!0},onDragDrop:function(a,b){var c=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(b);this.beforeDragDrop(c,a,b)!==!1&&(c.isNotifyTarget?c.notifyDrop(this,a,this.dragData)?this.onValidDrop(c,a,b):this.onInvalidDrop(c,a,b):this.onValidDrop(c,a,b),this.afterDragDrop&&this.afterDragDrop(c,a,b)),delete this.cachedTarget},beforeDragDrop:function(a,b,c){return!0},onValidDrop:function(a,b,c){this.hideProxy(),this.afterValidDrop&&this.afterValidDrop(a,b,c)},getRepairXY:function(a,b){return this.el.getXY()},onInvalidDrop:function(a,b,c){this.beforeInvalidDrop(a,b,c),this.cachedTarget&&(this.cachedTarget.isNotifyTarget&&this.cachedTarget.notifyOut(this,b,this.dragData),this.cacheTarget=null),this.proxy.repair(this.getRepairXY(b,this.dragData),this.afterRepair,this),this.afterInvalidDrop&&this.afterInvalidDrop(b,c)},afterRepair:function(){Ext.enableFx&&this.el.highlight(this.hlColor||"c3daf9"),this.dragging=!1},beforeInvalidDrop:function(a,b,c){return!0},handleMouseDown:function(a){if(this.dragging)return;var b=this.getDragData(a);b&&this.onBeforeDrag(b,a)!==!1&&(this.dragData=b,this.proxy.stop(),Ext.dd.DragSource.superclass.handleMouseDown.apply(this,arguments))},onBeforeDrag:function(a,b){return!0},onStartDrag:Ext.emptyFn,startDrag:function(a,b){this.proxy.reset(),this.dragging=!0,this.proxy.update(""),this.onInitDrag(a,b),this.proxy.show()},onInitDrag:function(a,b){var c=this.el.dom.cloneNode(!0);return c.id=Ext.id(),this.proxy.update(c),this.onStartDrag(a,b),!0},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide(),this.proxy.reset(!0),this.dragging=!1},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(a){},endDrag:function(a){this.onEndDrag(this.dragData,a)},onEndDrag:function(a,b){},autoOffset:function(a,b){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DragSource.superclass.destroy.call(this),Ext.destroy(this.proxy)}}),Ext.dd.DropTarget=Ext.extend(Ext.dd.DDTarget,{constructor:function(a,b){this.el=Ext.get(a),Ext.apply(this,b),this.containerScroll&&Ext.dd.ScrollManager.register(this.el),Ext.dd.DropTarget.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:!0})},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",isTarget:!0,isNotifyTarget:!0,notifyEnter:function(a,b,c){return this.overClass&&this.el.addClass(this.overClass),this.dropAllowed},notifyOver:function(a,b,c){return this.dropAllowed},notifyOut:function(a,b,c){this.overClass&&this.el.removeClass(this.overClass)},notifyDrop:function(a,b,c){return!1},destroy:function(){Ext.dd.DropTarget.superclass.destroy.call(this),this.containerScroll&&Ext.dd.ScrollManager.unregister(this.el)}}),Ext.dd.DragZone=Ext.extend(Ext.dd.DragSource,{constructor:function(a,b){Ext.dd.DragZone.superclass.constructor.call(this,a,b),this.containerScroll&&Ext.dd.ScrollManager.register(this.el)},getDragData:function(a){return Ext.dd.Registry.getHandleFromEvent(a)},onInitDrag:function(a,b){return this.proxy.update(this.dragData.ddel.cloneNode(!0)),this.onStartDrag(a,b),!0},afterRepair:function(){Ext.enableFx&&Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9"),this.dragging=!1},getRepairXY:function(a){return Ext.Element.fly(this.dragData.ddel).getXY()},destroy:function(){Ext.dd.DragZone.superclass.destroy.call(this),this.containerScroll&&Ext.dd.ScrollManager.unregister(this.el)}}),Ext.dd.DropZone=function(a,b){Ext.dd.DropZone.superclass.constructor.call(this,a,b)},Ext.extend(Ext.dd.DropZone,Ext.dd.DropTarget,{getTargetFromEvent:function(a){return Ext.dd.Registry.getTargetFromEvent(a)},onNodeEnter:function(a,b,c,d){},onNodeOver:function(a,b,c,d){return this.dropAllowed},onNodeOut:function(a,b,c,d){},onNodeDrop:function(a,b,c,d){return!1},onContainerOver:function(a,b,c){return this.dropNotAllowed},onContainerDrop:function(a,b,c){return!1},notifyEnter:function(a,b,c){return this.dropNotAllowed},notifyOver:function(a,b,c){var d=this.getTargetFromEvent(b);return d?(this.lastOverNode!=d&&(this.lastOverNode&&this.onNodeOut(this.lastOverNode,a,b,c),this.onNodeEnter(d,a,b,c),this.lastOverNode=d),this.onNodeOver(d,a,b,c)):(this.lastOverNode&&(this.onNodeOut(this.lastOverNode,a,b,c),this.lastOverNode=null),this.onContainerOver(a,b,c))},notifyOut:function(a,b,c){this.lastOverNode&&(this.onNodeOut(this.lastOverNode,a,b,c),this.lastOverNode=null)},notifyDrop:function(a,b,c){this.lastOverNode&&(this.onNodeOut(this.lastOverNode,a,b,c),this.lastOverNode=null);var d=this.getTargetFromEvent(b);return d?this.onNodeDrop(d,a,b,c):this.onContainerDrop(a,b,c)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}}),Ext.Element.addMethods({initDD:function(a,b,c){var d=new Ext.dd.DD(Ext.id(this.dom),a,b);return Ext.apply(d,c)},initDDProxy:function(a,b,c){var d=new Ext.dd.DDProxy(Ext.id(this.dom),a,b);return Ext.apply(d,c)},initDDTarget:function(a,b,c){var d=new Ext.dd.DDTarget(Ext.id(this.dom),a,b);return Ext.apply(d,c)}}),Ext.data.Api=function(){var a={};return{actions:{create:"create",read:"read",update:"update",destroy:"destroy"},restActions:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"},isAction:function(a){return Ext.data.Api.actions[a]?!0:!1},getVerb:function(b){if(a[b])return a[b];for(var c in this.actions)if(this.actions[c]===b){a[b]=c;break}return a[b]!==undefined?a[b]:null},isValid:function(a){var b=[],c=this.actions;for(var d in a)d in c||b.push(d);return b.length?b:!0},hasUniqueUrl:function(a,b){var c=a.api[b]?a.api[b].url:null,d=!0;for(var e in a.api)if((d=e===b?!0:a.api[e].url!=c?!0:!1)==0)break;return d},prepare:function(a){a.api||(a.api={});for(var b in this.actions){var c=this.actions[b];a.api[c]=a.api[c]||a.url||a.directFn,typeof a.api[c]=="string"&&(a.api[c]={url:a.api[c],method:a.restful===!0?Ext.data.Api.restActions[c]:undefined})}},restify:function(a){a.restful=!0;for(var b in this.restActions)a.api[this.actions[b]].method||(a.api[this.actions[b]].method=this.restActions[b]);a.onWrite=a.onWrite.createInterceptor(function(a,b,c,d){var e=b.reader,f=new Ext.data.Response({action:a,raw:c});switch(c.status){case 200:return!0;case 201:if(!Ext.isEmpty(f.raw.responseText))return!0;f.success=!0;break;case 204:f.success=!0,f.data=null;break;default:return!0}return f.success===!0?this.fireEvent("write",this,a,f.data,f,d,b.request.arg):this.fireEvent("exception",this,"remote",a,b,f,d),b.request.callback.call(b.request.scope,f.data,f,f.success),!1},a)}}}(),Ext.data.Response=function(a,b){Ext.apply(this,a,{raw:b})},Ext.data.Response.prototype={message:null,success:!1,status:null,root:null,raw:null,getMessage:function(){return this.message},getSuccess:function(){return this.success},getStatus:function(){return this.status},getRoot:function(){return this.root},getRawResponse:function(){return this.raw}},Ext.data.Api.Error=Ext.extend(Ext.Error,{constructor:function(a,b){this.arg=b,Ext.Error.call(this,a)},name:"Ext.data.Api"}),Ext.apply(Ext.data.Api.Error.prototype,{lang:{"action-url-undefined":"No fallback url defined for this action.  When defining a DataProxy api, please be sure to define an url for each CRUD action in Ext.data.Api.actions or define a default url in addition to your api-configuration."
,invalid:"received an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions defined in Ext.data.Api.actions","invalid-url":"Invalid url.  Please review your proxy configuration.",execute:'Attempted to execute an unknown action.  Valid API actions are defined in Ext.data.Api.actions"'}}),Ext.data.SortTypes={none:function(a){return a},stripTagsRE:/<\/?[^>]+>/gi,asText:function(a){return String(a).replace(this.stripTagsRE,"")},asUCText:function(a){return String(a).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(a){return String(a).toUpperCase()},asDate:function(a){return a?Ext.isDate(a)?a.getTime():Date.parse(String(a)):0},asFloat:function(a){var b=parseFloat(String(a).replace(/,/g,""));return isNaN(b)?0:b},asInt:function(a){var b=parseInt(String(a).replace(/,/g,""),10);return isNaN(b)?0:b}},Ext.data.Record=function(a,b){this.id=b||b===0?b:Ext.data.Record.id(this),this.data=a||{}},Ext.data.Record.create=function(a){var b=Ext.extend(Ext.data.Record,{}),c=b.prototype;c.fields=new Ext.util.MixedCollection(!1,function(a){return a.name});for(var d=0,e=a.length;d<e;d++)c.fields.add(new Ext.data.Field(a[d]));return b.getField=function(a){return c.fields.get(a)},b},Ext.data.Record.PREFIX="ext-record",Ext.data.Record.AUTO_ID=1,Ext.data.Record.EDIT="edit",Ext.data.Record.REJECT="reject",Ext.data.Record.COMMIT="commit",Ext.data.Record.id=function(a){return a.phantom=!0,[Ext.data.Record.PREFIX,"-",Ext.data.Record.AUTO_ID++].join("")},Ext.data.Record.prototype={dirty:!1,editing:!1,error:null,modified:null,phantom:!1,join:function(a){this.store=a},set:function(a,b){var c=Ext.isPrimitive(b)?String:Ext.encode;if(c(this.data[a])==c(b))return;this.dirty=!0,this.modified||(this.modified={}),this.modified[a]===undefined&&(this.modified[a]=this.data[a]),this.data[a]=b,this.editing||this.afterEdit()},afterEdit:function(){this.store!=undefined&&typeof this.store.afterEdit=="function"&&this.store.afterEdit(this)},afterReject:function(){this.store&&this.store.afterReject(this)},afterCommit:function(){this.store&&this.store.afterCommit(this)},get:function(a){return this.data[a]},beginEdit:function(){this.editing=!0,this.modified=this.modified||{}},cancelEdit:function(){this.editing=!1,delete this.modified},endEdit:function(){this.editing=!1,this.dirty&&this.afterEdit()},reject:function(a){var b=this.modified;for(var c in b)typeof b[c]!="function"&&(this.data[c]=b[c]);this.dirty=!1,delete this.modified,this.editing=!1,a!==!0&&this.afterReject()},commit:function(a){this.dirty=!1,delete this.modified,this.editing=!1,a!==!0&&this.afterCommit()},getChanges:function(){var a=this.modified,b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=this.data[c]);return b},hasError:function(){return this.error!==null},clearError:function(){this.error=null},copy:function(a){return new this.constructor(Ext.apply({},this.data),a||this.id)},isModified:function(a){return!!this.modified&&!!this.modified.hasOwnProperty(a)},isValid:function(){return this.fields.find(function(a){return a.allowBlank===!1&&Ext.isEmpty(this.data[a.name])?!0:!1},this)?!1:!0},markDirty:function(){this.dirty=!0,this.modified||(this.modified={}),this.fields.each(function(a){this.modified[a.name]=this.data[a.name]},this)}},Ext.StoreMgr=Ext.apply(new Ext.util.MixedCollection,{register:function(){for(var a=0,b;b=arguments[a];a++)this.add(b)},unregister:function(){for(var a=0,b;b=arguments[a];a++)this.remove(this.lookup(b))},lookup:function(a){if(Ext.isArray(a)){var b=["field1"],c=!Ext.isArray(a[0]);if(!c)for(var d=2,e=a[0].length;d<=e;++d)b.push("field"+d);return new Ext.data.ArrayStore({fields:b,data:a,expandData:c,autoDestroy:!0,autoCreated:!0})}return Ext.isObject(a)?a.events?a:Ext.create(a,"store"):this.get(a)},getKey:function(a){return a.storeId}}),Ext.data.Store=Ext.extend(Ext.util.Observable,{writer:undefined,remoteSort:!1,autoDestroy:!1,pruneModifiedRecords:!1,lastOptions:null,autoSave:!0,batch:!0,restful:!1,paramNames:undefined,defaultParamNames:{start:"start",limit:"limit",sort:"sort",dir:"dir"},isDestroyed:!1,hasMultiSort:!1,batchKey:"_ext_batch_",constructor:function(a){this.data=new Ext.util.MixedCollection(!1),this.data.getKey=function(a){return a.id},this.removed=[],a&&a.data&&(this.inlineData=a.data,delete a.data),Ext.apply(this,a),this.baseParams=Ext.isObject(this.baseParams)?this.baseParams:{},this.paramNames=Ext.applyIf(this.paramNames||{},this.defaultParamNames),(this.url||this.api)&&!this.proxy&&(this.proxy=new Ext.data.HttpProxy({url:this.url,api:this.api})),this.restful===!0&&this.proxy&&(this.batch=!1,Ext.data.Api.restify(this.proxy)),this.reader&&(this.recordType||(this.recordType=this.reader.recordType),this.reader.onMetaChange&&(this.reader.onMetaChange=this.reader.onMetaChange.createSequence(this.onMetaChange,this)),this.writer&&(this.writer instanceof Ext.data.DataWriter==0&&(this.writer=this.buildWriter(this.writer)),this.writer.meta=this.reader.meta,this.pruneModifiedRecords=!0)),this.recordType&&(this.fields=this.recordType.prototype.fields),this.modified=[],this.addEvents("datachanged","metachange","add","remove","update","clear","exception","beforeload","load","loadexception","beforewrite","write","beforesave","save"),this.proxy&&this.relayEvents(this.proxy,["loadexception","exception"]),this.writer&&this.on({scope:this,add:this.createRecords,remove:this.destroyRecord,update:this.updateRecord,clear:this.onClear}),this.sortToggle={},this.sortField?this.setDefaultSort(this.sortField,this.sortDir):this.sortInfo&&this.setDefaultSort(this.sortInfo.field,this.sortInfo.direction),Ext.data.Store.superclass.constructor.call(this),this.id&&(this.storeId=this.id,delete this.id),this.storeId&&Ext.StoreMgr.register(this),this.inlineData?(this.loadData(this.inlineData),delete this.inlineData):this.autoLoad&&this.load.defer(10,this,[typeof this.autoLoad=="object"?this.autoLoad:undefined]),this.batchCounter=0,this.batches={}},buildWriter:function(a){var b=undefined,c=(a.format||"json").toLowerCase();switch(c){case"json":b=Ext.data.JsonWriter;break;case"xml":b=Ext.data.XmlWriter;break;default:b=Ext.data.JsonWriter}return new b(a)},destroy:function(){this.isDestroyed||(this.storeId&&Ext.StoreMgr.unregister(this),this.clearData(),this.data=null,Ext.destroy(this.proxy),this.reader=this.writer=null,this.purgeListeners(),this.isDestroyed=!0)},add:function(a){var b,c,d,e;a=[].concat(a);if(a.length<1)return;for(b=0,c=a.length;b<c;b++)d=a[b],d.join(this),(d.dirty||d.phantom)&&this.modified.push(d);e=this.data.length,this.data.addAll(a),this.snapshot&&this.snapshot.addAll(a),this.fireEvent("add",this,a,e)},addSorted:function(a){var b=this.findInsertIndex(a);this.insert(b,a)},doUpdate:function(a){this.data.replace(a.id,a),this.snapshot&&this.snapshot.replace(a.id,a),this.fireEvent("update",this,a,Ext.data.Record.COMMIT)},remove:function(a){if(Ext.isArray(a)){Ext.each(a,function(a){this.remove(a)},this);return}var b=this.data.indexOf(a);b>-1&&(a.join(null),this.data.removeAt(b)),this.pruneModifiedRecords&&this.modified.remove(a),this.snapshot&&this.snapshot.remove(a),b>-1&&this.fireEvent("remove",this,a,b)},removeAt:function(a){this.remove(this.getAt(a))},removeAll:function(a){var b=[];this.each(function(a){b.push(a)}),this.clearData(),this.snapshot&&this.snapshot.clear(),this.pruneModifiedRecords&&(this.modified=[]),a!==!0&&this.fireEvent("clear",this,b)},onClear:function(a,b){Ext.each(b,function(a,b){this.destroyRecord(this,a,b)},this)},insert:function(a,b){var c,d,e;b=[].concat(b);for(c=0,d=b.length;c<d;c++)e=b[c],this.data.insert(a+c,e),e.join(this),(e.dirty||e.phantom)&&this.modified.push(e);this.snapshot&&this.snapshot.addAll(b),this.fireEvent("add",this,b,a)},indexOf:function(a){return this.data.indexOf(a)},indexOfId:function(a){return this.data.indexOfKey(a)},getById:function(a){return(this.snapshot||this.data).key(a)},getAt:function(a){return this.data.itemAt(a)},getRange:function(a,b){return this.data.getRange(a,b)},storeOptions:function(a){a=Ext.apply({},a),delete a.callback,delete a.scope,this.lastOptions=a},clearData:function(){this.data.each(function(a){a.join(null)}),this.data.clear()},load:function(a){a=Ext.apply({},a),this.storeOptions(a);if(this.sortInfo&&this.remoteSort){var b=this.paramNames;a.params=Ext.apply({},a.params),a.params[b.sort]=this.sortInfo.field,a.params[b.dir]=this.sortInfo.direction}try{return this.execute("read",null,a)}catch(c){return this.handleException(c),!1}},updateRecord:function(a,b,c){c==Ext.data.Record.EDIT&&this.autoSave===!0&&(!b.phantom||b.phantom&&b.isValid())&&this.save()},createRecords:function(a,b,c){var d=this.modified,e=b.length,f,g;for(g=0;g<e;g++)f=b[g],f.phantom&&f.isValid()&&(f.markDirty(),d.indexOf(f)==-1&&d.push(f));this.autoSave===!0&&this.save()},destroyRecord:function(a,b,c){this.modified.indexOf(b)!=-1&&this.modified.remove(b),b.phantom||(this.removed.push(b),b.lastIndex=c,this.autoSave===!0&&this.save())},execute:function(a,b,c,d){if(!Ext.data.Api.isAction(a))throw new Ext.data.Api.Error("execute",a);c=Ext.applyIf(c||{},{params:{}}),d!==undefined&&this.addToBatch(d);var e=!0;return a==="read"?(e=this.fireEvent("beforeload",this,c),Ext.applyIf(c.params,this.baseParams)):(this.writer.listful===!0&&this.restful!==!0?b=Ext.isArray(b)?b:[b]:Ext.isArray(b)&&b.length==1&&(b=b.shift()),(e=this.fireEvent("beforewrite",this,a,b,c))!==!1&&this.writer.apply(c.params,this.baseParams,a,b)),e!==!1&&(this.writer&&this.proxy.url&&!this.proxy.restful&&!Ext.data.Api.hasUniqueUrl(this.proxy,a)&&(c.params.xaction=a),this.proxy.request(Ext.data.Api.actions[a],b,c.params,this.reader,this.createCallback(a,b,d),this,c)),e},save:function(){if(!this.writer)throw new Ext.data.Store.Error("writer-undefined");var a=[],b,c,d,e={},f;this.removed.length&&a.push(["destroy",this.removed]);var g=[].concat(this.getModifiedRecords());if(g.length){var h=[];for(f=g.length-1;f>=0;f--)if(g[f].phantom===!0){var i=g.splice(f,1).shift();i.isValid()&&h.push(i)}else g[f].isValid()||g.splice(f,1);h.length&&a.push(["create",h]),g.length&&a.push(["update",g])}b=a.length;if(b){d=++this.batchCounter;for(f=0;f<b;++f)c=a[f],e[c[0]]=c[1];if(this.fireEvent("beforesave",this,e)!==!1){for(f=0;f<b;++f)c=a[f],this.doTransaction(c[0],c[1],d);return d}}return-1},doTransaction:function(a,b,c){function d(b){try{this.execute(a,b,undefined,c)}catch(d){this.handleException(d)}}if(this.batch===!1)for(var e=0,f=b.length;e<f;e++)d.call(this,b[e]);else d.call(this,b)},addToBatch:function(a){var b=this.batches,c=this.batchKey+a,d=b[c];d||(b[c]=d={id:a,count:0,data:{}}),++d.count},removeFromBatch:function(a,b,c){var d=this.batches,e=this.batchKey+a,f=d[e],g;f&&(g=f.data[b]||[],f.data[b]=g.concat(c),f.count===1?(c=f.data,delete d[e],this.fireEvent("save",this,a,c)):--f.count)},createCallback:function(a,b,c){var d=Ext.data.Api.actions;return a=="read"?this.loadRecords:function(d,e,f){this["on"+Ext.util.Format.capitalize(a)+"Records"](f,b,[].concat(d)),f===!0&&this.fireEvent("write",this,a,d,e,b),this.removeFromBatch(c,a,d)}},clearModified:function(a){if(Ext.isArray(a))for(var b=a.length-1;b>=0;b--)this.modified.splice(this.modified.indexOf(a[b]),1);else this.modified.splice(this.modified.indexOf(a),1)},reMap:function(a){if(Ext.isArray(a))for(var b=0,c=a.length;b<c;b++)this.reMap(a[b]);else{delete this.data.map[a._phid],this.data.map[a.id]=a;var d=this.data.keys.indexOf(a._phid);this.data.keys.splice(d,1,a.id),delete a._phid}},onCreateRecords:function(a,b,c){if(a===!0)try{this.reader.realize(b,c),this.reMap(b)}catch(d){this.handleException(d),Ext.isArray(b)&&this.onCreateRecords(a,b,c)}},onUpdateRecords:function(a,b,c){if(a===!0)try{this.reader.update(b,c)}catch(d){this.handleException(d),Ext.isArray(b)&&this.onUpdateRecords(a,b,c)}},onDestroyRecords:function(a,b,c){b=b instanceof Ext.data.Record?[b]:[].concat(b);for(var d=0,e=b.length;d<e;d++)this.removed.splice(this.removed.indexOf(b[d]),1);if(a===!1)for(d=b.length-1;d>=0;d--)this.insert(b[d].lastIndex,b[d])},handleException:function(a){Ext.handleError(a)},reload:function(a){this.load(Ext.applyIf(a||{},this.lastOptions))},loadRecords:function(a,b,c){var d,e;if(this.isDestroyed===!0)return;if(!a||c===!1){c!==!1&&this.fireEvent("load",this,[],b),b.callback&&b.callback.call(b.scope||this,[],b,!1,a);return}var f=a.records,g=a.totalRecords||f.length;if(!b||b.add!==!0){this.pruneModifiedRecords&&(this.modified=[]);for(d=0,e=f.length;d<e;d++)f[d].join(this);this.snapshot&&(this.data=this.snapshot,delete this.snapshot),this.clearData(),this.data.addAll(f),this.totalLength=g,this.applySort(),this.fireEvent("datachanged",this)}else{var h=[],i,j=0;for(d=0,e=f.length;d<e;++d)i=f[d],this.indexOfId(i.id)>-1?this.doUpdate(i):(h.push(i),++j);this.totalLength=Math.max(g,this.data.length+j),this.add(h)}this.fireEvent("load",this,f,b),b.callback&&b.callback.call(b.scope||this,f,b,!0)},loadData:function(a,b){var c=this.reader.readRecords(a);this.loadRecords(c,{add:b},!0)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalLength||0},getSortState:function(){return this.sortInfo},applySort:function(){(this.sortInfo||this.multiSortInfo)&&!this.remoteSort&&this.sortData()},sortData:function(){var a=this.hasMultiSort?this.multiSortInfo:this.sortInfo,b=a.direction||"ASC",c=a.sorters,d=[];this.hasMultiSort||(c=[{direction:b,field:a.field}]);for(var e=0,f=c.length;e<f;e++)d.push(this.createSortFunction(c[e].field,c[e].direction));if(d.length==0)return;var g=b.toUpperCase()=="DESC"?-1:1,h=function(a,b){var c=d[0].call(this,a,b);if(d.length>1)for(var e=1,f=d.length;e<f;e++)c=c||d[e].call(this,a,b);return g*c};this.data.sort(b,h),this.snapshot&&this.snapshot!=this.data&&this.snapshot.sort(b,h)},createSortFunction:function(a,b){b=b||"ASC";var c=b.toUpperCase()=="DESC"?-1:1,d=this.fields.get(a).sortType;return function(b,e){var f=d(b.data[a]),g=d(e.data[a]);return c*(f>g?1:f<g?-1:0)}},setDefaultSort:function(a,b){b=b?b.toUpperCase():"ASC",this.sortInfo={field:a,direction:b},this.sortToggle[a]=b},sort:function(a,b){return Ext.isArray(arguments[0])?this.multiSort.call(this,a,b):this.singleSort(a,b)},singleSort:function(a,b){var c=this.fields.get(a);if(!c)return!1;var d=c.name,e=this.sortInfo||null,f=this.sortToggle?this.sortToggle[d]:null;return b||(e&&e.field==d?b=(this.sortToggle[d]||"ASC").toggle("ASC","DESC"):b=c.sortDir),this.sortToggle[d]=b,this.sortInfo={field:d,direction:b},this.hasMultiSort=!1,this.remoteSort?this.load(this.lastOptions)||(f&&(this.sortToggle[d]=f),e&&(this.sortInfo=e)):(this.applySort(),this.fireEvent("datachanged",this)),!0},multiSort:function(a,b){this.hasMultiSort=!0,b=b||"ASC",this.multiSortInfo&&b==this.multiSortInfo.direction&&(b=b.toggle("ASC","DESC")),this.multiSortInfo={sorters:a,direction:b},this.remoteSort?this.singleSort(a[0].field,a[0].direction):(this.applySort(),this.fireEvent("datachanged",this))},each:function(a,b){this.data.each(a,b)},getModifiedRecords:function(){return this.modified},sum:function(a,b,c){var d=this.data.items,e=0;b=b||0,c=c||c===0?c:d.length-1;for(var f=b;f<=c;f++)e+=d[f].data[a]||0;return e},createFilterFn:function(a,b,c,d,e){return Ext.isEmpty(b,!1)?!1:(b=this.data.createValueMatcher(b,c,d,e),function(c){return b.test(c.data[a])})},createMultipleFilterFn:function(a){return function(b){var c=!0;for(var d=0,e=a.length;d<e;d++){var f=a[d],g=f.fn,h=f.scope;c=c&&g.call(h,b)}return c}},filter:function(a,b,c,d,e){var f;Ext.isObject(a)&&(a=[a]);if(Ext.isArray(a)){var g=[];for(var h=0,i=a.length;h<i;h++){var j=a[h],k=j.fn,l=j.scope||this;Ext.isFunction(k)||(k=this.createFilterFn(j.property,j.value,j.anyMatch,j.caseSensitive,j.exactMatch)),g.push({fn:k,scope:l})}f=this.createMultipleFilterFn(g)}else f=this.createFilterFn(a,b,c,d,e);return f?this.filterBy(f):this.clearFilter()},filterBy:function(a,b){this.snapshot=this.snapshot||this.data,this.data=this.queryBy(a,b||this),this.fireEvent("datachanged",this)},clearFilter:function(a){this.isFiltered()&&(this.data=this.snapshot,delete this.snapshot,a!==!0&&this.fireEvent("datachanged",this))},isFiltered:function(){return!!this.snapshot&&this.snapshot!=this.data},query:function(a,b,c,d){var e=this.createFilterFn(a,b,c,d);return e?this.queryBy(e):this.data.clone()},queryBy:function(a,b){var c=this.snapshot||this.data;return c.filterBy(a,b||this)},find:function(a,b,c,d,e){var f=this.createFilterFn(a,b,d,e);return f?this.data.findIndexBy(f,null,c):-1},findExact:function(a,b,c){return this.data.findIndexBy(function(c){return c.get(a)===b},this,c)},findBy:function(a,b,c){return this.data.findIndexBy(a,b,c)},collect:function(a,b,c){var d=c===!0&&this.snapshot?this.snapshot.items:this.data.items,e,f,g=[],h={};for(var i=0,j=d.length;i<j;i++)e=d[i].data[a],f=String(e),(b||!Ext.isEmpty(e))&&!h[f]&&(h[f]=!0,g[g.length]=e);return g},afterEdit:function(a){this.modified.indexOf(a)==-1&&this.modified.push(a),this.fireEvent("update",this,a,Ext.data.Record.EDIT)},afterReject:function(a){this.modified.remove(a),this.fireEvent("update",this,a,Ext.data.Record.REJECT)},afterCommit:function(a){this.modified.remove(a),this.fireEvent("update",this,a,Ext.data.Record.COMMIT)},commitChanges:function(){var a=this.modified.slice(0),b=a.length,c;for(c=0;c<b;c++)a[c].commit();this.modified=[],this.removed=[]},rejectChanges:function(){var a=this.modified.slice(0),b=this.removed.slice(0).reverse(),c=a.length,d=b.length,e;for(e=0;e<c;e++)a[e].reject();for(e=0;e<d;e++)this.insert(b[e].lastIndex||0,b[e]),b[e].reject();this.modified=[],this.removed=[]},onMetaChange:function(a){this.recordType=this.reader.recordType,this.fields=this.recordType.prototype.fields,delete this.snapshot,this.reader.meta.sortInfo?this.sortInfo=this.reader.meta.sortInfo:this.sortInfo&&!this.fields.get(this.sortInfo.field)&&delete this.sortInfo,this.writer&&(this.writer.meta=this.reader.meta),this.modified=[],this.fireEvent("metachange",this,this.reader.meta)},findInsertIndex:function(a){this.suspendEvents();var b=this.data.clone();this.data.add(a),this.applySort();var c=this.data.indexOf(a);return this.data=b,this.resumeEvents(),c},setBaseParam:function(a,b){this.baseParams=this.baseParams||{},this.baseParams[a]=b}}),Ext.reg("store",Ext.data.Store),Ext.data.Store.Error=Ext.extend(Ext.Error,{name:"Ext.data.Store"}),Ext.apply(Ext.data.Store.Error.prototype,{lang:{"writer-undefined":"Attempted to execute a write-action without a DataWriter installed."}}),Ext.data.Field=Ext.extend(Object,{constructor:function(a){Ext.isString(a)&&(a={name:a}),Ext.apply(this,a);var b=Ext.data.Types,c=this.sortType,d;this.type?Ext.isString(this.type)&&(this.type=Ext.data.Types[this.type.toUpperCase()]||b.AUTO):this.type=b.AUTO,Ext.isString(c)?this.sortType=Ext.data.SortTypes[c]:Ext.isEmpty(c)&&(this.sortType=this.type.sortType),this.convert||(this.convert=this.type.convert)},dateFormat:null,useNull:!1,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC",allowBlank:!0}),Ext.data.DataReader=function(a,b){this.meta=a,this.recordType=Ext.isArray(b)?Ext.data.Record.create(b):b,this.recordType&&this.buildExtractors()},Ext.data.DataReader.prototype={getTotal:Ext.emptyFn,getRoot:Ext.emptyFn,getMessage:Ext.emptyFn,getSuccess:Ext.emptyFn,getId:Ext.emptyFn,buildExtractors:Ext.emptyFn,extractValues:Ext.emptyFn,realize:function(a,b){if(Ext.isArray(a))for(var c=a.length-1;c>=0;c--)Ext.isArray(b)?this.realize(a.splice(c,1).shift(),b.splice(c,1).shift()):this.realize(a.splice(c,1).shift(),b);else{Ext.isArray(b)&&b.length==1&&(b=b.shift());if(!this.isData(b))throw new Ext.data.DataReader.Error("realize",a);a.phantom=!1,a._phid=a.id,a.id=this.getId(b),a.data=b,a.commit()}},update:function(a,b){if(Ext.isArray(a))for(var c=a.length-1;c>=0;c--)Ext.isArray(b)?this.update(a.splice(c,1).shift(),b.splice(c,1).shift()):this.update(a.splice(c,1).shift(),b);else Ext.isArray(b)&&b.length==1&&(b=b.shift()),this.isData(b)&&(a.data=Ext.apply(a.data,b)),a.commit()},extractData:function(a,b){var c=this instanceof Ext.data.JsonReader?"json":"node",d=[];this.isData(a)&&!(this instanceof Ext.data.XmlReader)&&(a=[a]);var e=this.recordType.prototype.fields,f=e.items,g=e.length,d=[];if(b===!0){var h=this.recordType;for(var i=0;i<a.length;i++){var j=a[i],k=new h(this.extractValues(j,f,g),this.getId(j));k[c]=j,d.push(k)}}else for(var i=0;i<a.length;i++){var l=this.extractValues(a[i],f,g);l[this.meta.idProperty]=this.getId(a[i]),d.push(l)}return d},isData:function(a){return a&&Ext.isObject(a)&&!Ext.isEmpty(this.getId(a))?!0:!1},onMetaChange:function(a){delete this.ef,this.meta=a,this.recordType=Ext.data.Record.create(a.fields),this.buildExtractors()}},Ext.data.DataReader.Error=Ext.extend(Ext.Error,{constructor:function(a,b){this.arg=b,Ext.Error.call(this,a)},name:"Ext.data.DataReader"}),Ext.apply(Ext.data.DataReader.Error.prototype,{lang:{update:"#update received invalid data from server.  Please see docs for DataReader#update and review your DataReader configuration.",realize:"#realize was called with invalid remote-data.  Please see the docs for DataReader#realize and review your DataReader configuration.","invalid-response":"#readResponse received an invalid response from the server."}}),Ext.data.DataWriter=function(a){Ext.apply(this,a)},Ext.data.DataWriter.prototype={writeAllFields:!1,listful:!1,apply:function(a,b,c,d){var e=[],f=c+"Record";Ext.isArray(d)?Ext.each(d,function(a){e.push(this[f](a))},this):d instanceof Ext.data.Record&&(e=this[f](d)),this.render(a,b,e)},render:Ext.emptyFn,updateRecord:Ext.emptyFn,createRecord:Ext.emptyFn,destroyRecord:Ext.emptyFn,toHash:function(a,b){var c=a.fields.map,d={},e=this.writeAllFields===!1&&a.phantom===!1?a.getChanges():a.data,f;return Ext.iterate(e,function(a,b){if(f=c[a])d[f.mapping?f.mapping:f.name]=b}),a.phantom?a.fields.containsKey(this.meta.idProperty)&&Ext.isEmpty(a.data[this.meta.idProperty])&&delete d[this.meta.idProperty]:d[this.meta.idProperty]=a.id,d},toArray:function(a){var b=[];return Ext.iterate(a,function(a,c){b.push({name:a,value:c})},this),b}},Ext.data.DataProxy=function(a){a=a||{},this.api=a.api,this.url=a.url,this.restful=a.restful,this.listeners=a.listeners,this.prettyUrls=a.prettyUrls,this.addEvents("exception","beforeload","load","loadexception","beforewrite","write"),Ext.data.DataProxy.superclass.constructor.call(this);try{Ext.data.Api.prepare(this)}catch(b){b instanceof Ext.data.Api.Error&&b.toConsole()}Ext.data.DataProxy.relayEvents(this,["beforewrite","write","exception"])},Ext.extend(Ext.data.DataProxy,Ext.util.Observable,{restful:!1,setApi:function(){if(arguments.length==1){var a=Ext.data.Api.isValid(arguments[0]);if(a!==!0)throw new Ext.data.Api.Error("invalid",a);this.api=arguments[0]}else if(arguments.length==2){if(!Ext.data.Api.isAction(arguments[0]))throw new Ext.data.Api.Error("invalid",arguments[0]);this.api[arguments[0]]=arguments[1]}Ext.data.Api.prepare(this)},isApiAction:function(a){return this.api[a]?!0:!1},request:function(a,b,c,d,e,f,g){if(!this.api[a]&&!this.load)throw new Ext.data.DataProxy.Error("action-undefined",a);c=c||{},(a===Ext.data.Api.actions.read?this.fireEvent("beforeload",this,c):this.fireEvent("beforewrite",this,a,b,c)!==!1)?this.doRequest.apply(this,arguments):e.call(f||this,null,g,!1)},load:null,doRequest:function(a,b,c,d,e,f,g){this.load(c,d,e,f,g)},onRead:Ext.emptyFn,onWrite:Ext.emptyFn,buildUrl:function(a,b){b=b||null;var c=this.conn&&this.conn.url?this.conn.url:this.api[a]?this.api[a].url:this.url;if(!c)throw new Ext.data.Api.Error("invalid-url",a);var d=null,e=c.match(/(.*)(\.json|\.xml|\.html)$/);return e&&(d=e[2],c=e[1]),(this.restful===!0||this.prettyUrls===!0)&&b instanceof Ext.data.Record&&!b.phantom&&(c+="/"+b.id),d===null?c:c+d},destroy:function(){this.purgeListeners()}}),Ext.apply(Ext.data.DataProxy,Ext.util.Observable.prototype),Ext.util.Observable.call(Ext.data.DataProxy),Ext.data.DataProxy.Error=Ext.extend(Ext.Error,{constructor:function(a,b){this.arg=b,Ext.Error.call(this,a)},name:"Ext.data.DataProxy"}),Ext.apply(Ext.data.DataProxy.Error.prototype,{lang:{"action-undefined":"DataProxy attempted to execute an API-action but found an undefined url / function.  Please review your Proxy url/api-configuration.","api-invalid":"Recieved an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions from Ext.data.Api.actions."}}),Ext.data.Request=function(a){Ext.apply(this,a)},Ext.data.Request.prototype={action:undefined,rs:undefined,params:undefined,callback:Ext.emptyFn,scope:undefined,reader:undefined},Ext.data.Response=function(a){Ext.apply(this,a)},Ext.data.Response.prototype={action:undefined,success:undefined,message:undefined,data:undefined,raw:undefined,records:undefined},Ext.data.ScriptTagProxy=function(a){Ext.apply(this,a),Ext.data.ScriptTagProxy.superclass.constructor.call(this,a),this.head=document.getElementsByTagName("head")[0]},Ext.data.ScriptTagProxy.TRANS_ID=1e3,Ext.extend(Ext.data.ScriptTagProxy,Ext.data.DataProxy,{timeout:3e4,callbackParam:"callback",nocache:!0,doRequest:function(a,b,c,d,e,f,g){var h=Ext.urlEncode(Ext.apply(c,this.extraParams)),i=this.buildUrl(a,b);if(!i)throw new Ext.data.Api.Error("invalid-url",i);i=Ext.urlAppend(i,h),this.nocache&&(i=Ext.urlAppend(i,"_dc="+(new Date).getTime()));var j=++Ext.data.ScriptTagProxy.TRANS_ID,k={id:j,action:a,cb:"stcCallback"+j,scriptId:"stcScript"+j,params:c,arg:g,url:i,callback:e,scope:f,reader:d};window[k.cb]=this.createCallback(a,b,k),i+=String.format("&{0}={1}",this.callbackParam,k.cb),this.autoAbort!==!1&&this.abort(),k.timeoutId=this.handleFailure.defer(this.timeout,this,[k]);var l=document.createElement("script");l.setAttribute("src",i),l.setAttribute("type","text/javascript"),l.setAttribute("id",k.scriptId),this.head.appendChild(l),this.trans=k},createCallback:function(a,b,c){var d=this;return function(e){d.trans=!1,d.destroyTrans(c,!0),a===Ext.data.Api.actions.read?d.onRead.call(d,a,c,e):d.onWrite.call(d,a,c,e,b)}},onRead:function(a,b,c){var d;try{d=b.reader.readRecords(c)}catch(e){this.fireEvent("loadexception",this,b,c,e),this.fireEvent("exception",this,"response",a,b,c,e),b.callback.call(b.scope||window,null,b.arg,!1);return}d.success===!1?(this.fireEvent("loadexception",this,b,c),this.fireEvent("exception",this,"remote",a,b,c,null)):this.fireEvent("load",this,c,b.arg),b.callback.call(b.scope||window,d,b.arg,d.success)},onWrite:function(a,b,c,d){var e=b.reader;try{var f=e.readResponse(a,c)}catch(g){this.fireEvent("exception",this,"response",a,b,f,g),b.callback.call(b.scope||window,null,f,!1);return}if(!f.success==1){this.fireEvent("exception",this,"remote",a,b,f,d),b.callback.call(b.scope||window,null,f,!1);return}this.fireEvent("write",this,a,f.data,f,d,b.arg),b.callback.call(b.scope||window,f.data,f,!0)},isLoading:function(){return this.trans?!0:!1},abort:function(){this.isLoading()&&this.destroyTrans(this.trans)},destroyTrans:function(a,b){this.head.removeChild(document.getElementById(a.scriptId)),clearTimeout(a.timeoutId);if(b){window[a.cb]=undefined;try{delete window[a.cb]}catch(c){}}else window[a.cb]=function(){window[a.cb]=undefined;try{delete window[a.cb]}catch(b){}}},handleFailure:function(a){this.trans=!1,this.destroyTrans(a,!1),a.action===Ext.data.Api.actions.read&&this.fireEvent("loadexception",this,null,a.arg),this.fireEvent("exception",this,"response",a.action,{response:null,options:a.arg}),a.callback.call(a.scope||window,null,a.arg,!1)},destroy:function(){this.abort(),Ext.data.ScriptTagProxy.superclass.destroy.call(this)}}),Ext.data.HttpProxy=function(a){Ext.data.HttpProxy.superclass.constructor.call(this,a),this.conn=a,this.conn.url=null,this.useAjax=!a||!a.events;var b=Ext.data.Api.actions;this.activeRequest={};for(var c in b)this.activeRequest[b[c]]=undefined},Ext.extend(Ext.data.HttpProxy,Ext.data.DataProxy,{getConnection:function(){return this.useAjax?Ext.Ajax:this.conn},setUrl:function(a,b){this.conn.url=a,b===!0&&(this.url=a,this.api=null,Ext.data.Api.prepare(this))},doRequest:function(a,b,c,d,e,f,g){var h={method:this.api[a]?this.api[a].method:undefined,request:{callback:e,scope:f,arg:g},reader:d,callback:this.createCallback(a,b),scope:this};c.jsonData?h.jsonData=c.jsonData:c.xmlData?h.xmlData=c.xmlData:h.params=c||{},this.conn.url=this.buildUrl(a,b),this.useAjax?(Ext.applyIf(h,this.conn),!this.activeRequest[a],this.activeRequest[a]=Ext.Ajax.request(h)):this.conn.request(h),this.conn.url=null},createCallback:function(a,b){return function(c,d,e){this.activeRequest[a]=undefined;if(!d){a===Ext.data.Api.actions.read&&this.fireEvent("loadexception",this,c,e),this.fireEvent("exception",this,"response",a,c,e),c.request.callback.call(c.request.scope,null,c.request.arg,!1);return}a===Ext.data.Api.actions.read?this.onRead(a,c,e):this.onWrite(a,c,e,b)}},onRead:function(a,b,c){var d;try{d=b.reader.read(c)}catch(e){this.fireEvent("loadexception",this,b,c,e),this.fireEvent("exception",this,"response",a,b,c,e),b.request.callback.call(b.request.scope,null,b.request.arg,!1);return}if(d.success===!1){this.fireEvent("loadexception",this,b,c);var f=b.reader.readResponse(a,c);this.fireEvent("exception",this,"remote",a,b,f,null)}else this.fireEvent("load",this,b,b.request.arg);b.request.callback.call(b.request.scope,d,b.request.arg,d.success)},onWrite:function(a,b,c,d){var e=b.reader,f;try{f=e.readResponse(a,c)}catch(g){this.fireEvent("exception",this,"response",a,b,c,g),b.request.callback.call(b.request.scope,null,b.request.arg,!1);return}f.success===!0?this.fireEvent("write",this,a,f.data,f,d,b.request.arg):this.fireEvent("exception",this,"remote",a,b,f,d),b.request.callback.call(b.request.scope,f.data,f,f.success)},destroy:function(){if(!this.useAjax)this.conn.abort();else if(this.activeRequest){var a=Ext.data.Api.actions;for(var b in a)this.activeRequest[a[b]]&&Ext.Ajax.abort(this.activeRequest[a[b]])}Ext.data.HttpProxy.superclass.destroy.call(this)}}),Ext.data.MemoryProxy=function(a){var b={};b[Ext.data.Api.actions.read]=!0,Ext.data.MemoryProxy.superclass.constructor.call(this,{api:b}),this.data=a},Ext.extend(Ext.data.MemoryProxy,Ext.data.DataProxy,{doRequest:function(a,b,c,d,e,f,g){c=c||{};var h;try{h=d.readRecords(this.data)}catch(i){this.fireEvent("loadexception",this,null,g,i),this.fireEvent("exception",this,"response",a,g,null,i),e.call(f,null,g,!1);return}e.call(f,h,g,!0)}}),Ext.data.Types=new function(){var a=Ext.data.SortTypes;Ext.apply(this,{stripRe:/[\$,%]/g,AUTO:{convert:function(a){return a},sortType:a.none,type:"auto"},STRING:{convert:function(a){return a===undefined||a===null?"":String(a)},sortType:a.asUCString,type:"string"},INT:{convert:function(a){return a!==undefined&&a!==null&&a!==""?parseInt(String(a).replace(Ext.data.Types.stripRe,""),10):this.useNull?null:0},sortType:a.none,type:"int"},FLOAT:{convert:function(a){return a!==undefined&&a!==null&&a!==""?parseFloat(String(a).replace(Ext.data.Types.stripRe,""),10):this.useNull?null:0},sortType:a.none,type:"float"},BOOL:{convert:function(a){return a===!0||a==="true"||a==1},sortType:a.none,type:"bool"},DATE:{convert:function(a){var b=this.dateFormat;if(!a)return null;if(Ext.isDate(a))return a;if(b)return b=="timestamp"?new Date(a*1e3):b=="time"?new Date(parseInt(a,10)):Date.parseDate(a,b);var c=Date.parse(a);return c?new Date(c):null},sortType:a.asDate,type:"date"}}),Ext.apply(this,{BOOLEAN:this.BOOL,INTEGER:this.INT,NUMBER:this.FLOAT})},Ext.data.JsonWriter=Ext.extend(Ext.data.DataWriter,{encode:!0,encodeDelete:!1,constructor:function(a){Ext.data.JsonWriter.superclass.constructor.call(this,a)},render:function(a,b,c){if(this.encode===!0)Ext.apply(a,b),a[this.meta.root]=Ext.encode(c);else{var d=Ext.apply({},b);d[this.meta.root]=c,a.jsonData=d}},createRecord:function(a){return this.toHash(a)},updateRecord:function(a){return this.toHash(a)},destroyRecord:function(a){if(this.encodeDelete){var b={};return b[this.meta.idProperty]=a.id,b}return a.id}}),Ext.data.JsonReader=function(a,b){a=a||{},Ext.applyIf(a,{idProperty:"id",successProperty:"success",totalProperty:"total"}),Ext.data.JsonReader.superclass.constructor.call(this,a,b||a.fields)},Ext.extend(Ext.data.JsonReader,Ext.data.DataReader,{read:function(a){var b=a.responseText,c=Ext.decode(b);if(!c)throw{message:"JsonReader.read: Json object not found"};return this.readRecords(c)},readResponse:function(a,b){var c=b.responseText!==undefined?Ext.decode(b.responseText):b;if(!c)throw new Ext.data.JsonReader.Error("response");var d=this.getRoot(c);if(a===Ext.data.Api.actions.create){var e=Ext.isDefined(d);if(e&&Ext.isEmpty(d))throw new Ext.data.JsonReader.Error("root-empty",this.meta.root);if(!e)throw new Ext.data.JsonReader.Error("root-undefined-response",this.meta.root)}var f=new Ext.data.Response({action:a,success:this.getSuccess(c),data:d?this.extractData(d,!1):[],message:this.getMessage(c),raw:c});if(Ext.isEmpty(f.success))throw new Ext.data.JsonReader.Error("successProperty-response",this.meta
.successProperty);return f},readRecords:function(a){this.jsonData=a,a.metaData&&this.onMetaChange(a.metaData);var b=this.meta,c=this.recordType,d=c.prototype.fields,e=d.items,f=d.length,g,h=this.getRoot(a),i=h.length,j=i,k=!0;b.totalProperty&&(g=parseInt(this.getTotal(a),10),isNaN(g)||(j=g));if(b.successProperty){g=this.getSuccess(a);if(g===!1||g==="false")k=!1}return{success:k,records:this.extractData(h,!0),totalRecords:j}},buildExtractors:function(){if(this.ef)return;var a=this.meta,b=this.recordType,c=b.prototype.fields,d=c.items,e=c.length;a.totalProperty&&(this.getTotal=this.createAccessor(a.totalProperty)),a.successProperty&&(this.getSuccess=this.createAccessor(a.successProperty)),a.messageProperty&&(this.getMessage=this.createAccessor(a.messageProperty)),this.getRoot=a.root?this.createAccessor(a.root):function(a){return a};if(a.id||a.idProperty){var f=this.createAccessor(a.id||a.idProperty);this.getId=function(a){var b=f(a);return b===undefined||b===""?null:b}}else this.getId=function(){return null};var g=[];for(var h=0;h<e;h++){c=d[h];var i=c.mapping!==undefined&&c.mapping!==null?c.mapping:c.name;g.push(this.createAccessor(i))}this.ef=g},simpleAccess:function(a,b){return a[b]},createAccessor:function(){var a=/[\[\.]/;return function(b){if(Ext.isEmpty(b))return Ext.emptyFn;if(Ext.isFunction(b))return b;var c=String(b).search(a);return c>=0?new Function("obj","return obj"+(c>0?".":"")+b):function(a){return a[b]}}}(),extractValues:function(a,b,c){var d,e={};for(var f=0;f<c;f++){d=b[f];var g=this.ef[f](a);e[d.name]=d.convert(g!==undefined?g:d.defaultValue,a)}return e}}),Ext.data.JsonReader.Error=Ext.extend(Ext.Error,{constructor:function(a,b){this.arg=b,Ext.Error.call(this,a)},name:"Ext.data.JsonReader"}),Ext.apply(Ext.data.JsonReader.Error.prototype,{lang:{response:"An error occurred while json-decoding your server response","successProperty-response":'Could not locate your "successProperty" in your server response.  Please review your JsonReader config to ensure the config-property "successProperty" matches the property in your server-response.  See the JsonReader docs.',"root-undefined-config":'Your JsonReader was configured without a "root" property.  Please review your JsonReader config and make sure to define the root property.  See the JsonReader docs.',"idProperty-undefined":'Your JsonReader was configured without an "idProperty"  Please review your JsonReader configuration and ensure the "idProperty" is set (e.g.: "id").  See the JsonReader docs.',"root-empty":'Data was expected to be returned by the server in the "root" property of the response.  Please review your JsonReader configuration to ensure the "root" property matches that returned in the server-response.  See JsonReader docs.'}}),Ext.data.ArrayReader=Ext.extend(Ext.data.JsonReader,{readRecords:function(a){this.arrayData=a;var b=this.meta,c=b?Ext.num(b.idIndex,b.id):null,d=this.recordType,e=d.prototype.fields,f=[],g=!0,h,i=this.getRoot(a);for(var j=0,k=i.length;j<k;j++){var l=i[j],m={},n=!c&&c!==0||l[c]===undefined||l[c]===""?null:l[c];for(var o=0,p=e.length;o<p;o++){var q=e.items[o],r=q.mapping!==undefined&&q.mapping!==null?q.mapping:o;h=l[r]!==undefined?l[r]:q.defaultValue,h=q.convert(h,l),m[q.name]=h}var s=new d(m,n);s.json=l,f[f.length]=s}var t=f.length;b.totalProperty&&(h=parseInt(this.getTotal(a),10),isNaN(h)||(t=h));if(b.successProperty){h=this.getSuccess(a);if(h===!1||h==="false")g=!1}return{success:g,records:f,totalRecords:t}}}),Ext.data.ArrayStore=Ext.extend(Ext.data.Store,{constructor:function(a){Ext.data.ArrayStore.superclass.constructor.call(this,Ext.apply(a,{reader:new Ext.data.ArrayReader(a)}))},loadData:function(a,b){if(this.expandData===!0){var c=[];for(var d=0,e=a.length;d<e;d++)c[c.length]=[a[d]];a=c}Ext.data.ArrayStore.superclass.loadData.call(this,a,b)}}),Ext.reg("arraystore",Ext.data.ArrayStore),Ext.data.SimpleStore=Ext.data.ArrayStore,Ext.reg("simplestore",Ext.data.SimpleStore),Ext.data.JsonStore=Ext.extend(Ext.data.Store,{constructor:function(a){Ext.data.JsonStore.superclass.constructor.call(this,Ext.apply(a,{reader:new Ext.data.JsonReader(a)}))}}),Ext.reg("jsonstore",Ext.data.JsonStore),Ext.data.XmlWriter=function(a){Ext.data.XmlWriter.superclass.constructor.apply(this,arguments),this.tpl=typeof this.tpl=="string"?(new Ext.XTemplate(this.tpl)).compile():this.tpl.compile()},Ext.extend(Ext.data.XmlWriter,Ext.data.DataWriter,{documentRoot:"xrequest",forceDocumentRoot:!1,root:"records",xmlVersion:"1.0",xmlEncoding:"ISO-8859-15",tpl:'<tpl for="."><?xml version="{version}" encoding="{encoding}"?><tpl if="documentRoot"><{documentRoot}><tpl for="baseParams"><tpl for="."><{name}>{value}</{name}></tpl></tpl></tpl><tpl if="records.length&gt;1"><{root}></tpl><tpl for="records"><{parent.record}><tpl for="."><{name}>{value}</{name}></tpl></{parent.record}></tpl><tpl if="records.length&gt;1"></{root}></tpl><tpl if="documentRoot"></{documentRoot}></tpl></tpl>',render:function(a,b,c){b=this.toArray(b),a.xmlData=this.tpl.applyTemplate({version:this.xmlVersion,encoding:this.xmlEncoding,documentRoot:b.length>0||this.forceDocumentRoot===!0?this.documentRoot:!1,record:this.meta.record,root:this.root,baseParams:b,records:Ext.isArray(c[0])?c:[c]})},createRecord:function(a){return this.toArray(this.toHash(a))},updateRecord:function(a){return this.toArray(this.toHash(a))},destroyRecord:function(a){var b={};return b[this.meta.idProperty]=a.id,this.toArray(b)}}),Ext.data.XmlReader=function(a,b){a=a||{},Ext.applyIf(a,{idProperty:a.idProperty||a.idPath||a.id,successProperty:a.successProperty||a.success}),Ext.data.XmlReader.superclass.constructor.call(this,a,b||a.fields)},Ext.extend(Ext.data.XmlReader,Ext.data.DataReader,{read:function(a){var b=a.responseXML;if(!b)throw{message:"XmlReader.read: XML Document not available"};return this.readRecords(b)},readRecords:function(a){this.xmlData=a;var b=a.documentElement||a,c=Ext.DomQuery,d=0,e=!0;this.meta.totalProperty&&(d=this.getTotal(b,0)),this.meta.successProperty&&(e=this.getSuccess(b));var f=this.extractData(c.select(this.meta.record,b),!0);return{success:e,records:f,totalRecords:d||f.length}},readResponse:function(a,b){var c=Ext.DomQuery,d=b.responseXML,e=d.documentElement||d,f=new Ext.data.Response({action:a,success:this.getSuccess(e),message:this.getMessage(e),data:this.extractData(c.select(this.meta.record,e)||c.select(this.meta.root,e),!1),raw:d});if(Ext.isEmpty(f.success))throw new Ext.data.DataReader.Error("successProperty-response",this.meta.successProperty);if(a===Ext.data.Api.actions.create){var g=Ext.isDefined(f.data);if(g&&Ext.isEmpty(f.data))throw new Ext.data.JsonReader.Error("root-empty",this.meta.root);if(!g)throw new Ext.data.JsonReader.Error("root-undefined-response",this.meta.root)}return f},getSuccess:function(){return!0},buildExtractors:function(){if(this.ef)return;var a=this.meta,b=this.recordType,c=b.prototype.fields,d=c.items,e=c.length;a.totalProperty&&(this.getTotal=this.createAccessor(a.totalProperty)),a.successProperty&&(this.getSuccess=this.createAccessor(a.successProperty)),a.messageProperty&&(this.getMessage=this.createAccessor(a.messageProperty)),this.getRoot=function(a){return Ext.isEmpty(a[this.meta.record])?a[this.meta.root]:a[this.meta.record]};if(a.idPath||a.idProperty){var f=this.createAccessor(a.idPath||a.idProperty);this.getId=function(a){var b=f(a)||a.id;return b===undefined||b===""?null:b}}else this.getId=function(){return null};var g=[];for(var h=0;h<e;h++){c=d[h];var i=c.mapping!==undefined&&c.mapping!==null?c.mapping:c.name;g.push(this.createAccessor(i))}this.ef=g},createAccessor:function(){var a=Ext.DomQuery;return function(b){if(Ext.isFunction(b))return b;switch(b){case this.meta.totalProperty:return function(c,d){return a.selectNumber(b,c,d)};case this.meta.successProperty:return function(c,d){var e=a.selectValue(b,c,!0),f=e!==!1&&e!=="false";return f};default:return function(c,d){return a.selectValue(b,c,d)}}}}(),extractValues:function(a,b,c){var d,e={};for(var f=0;f<c;f++){d=b[f];var g=this.ef[f](a);e[d.name]=d.convert(g!==undefined?g:d.defaultValue,a)}return e}}),Ext.data.XmlStore=Ext.extend(Ext.data.Store,{constructor:function(a){Ext.data.XmlStore.superclass.constructor.call(this,Ext.apply(a,{reader:new Ext.data.XmlReader(a)}))}}),Ext.reg("xmlstore",Ext.data.XmlStore),Ext.data.GroupingStore=Ext.extend(Ext.data.Store,{constructor:function(a){a=a||{},this.hasMultiSort=!0,this.multiSortInfo=this.multiSortInfo||{sorters:[]};var b=this.multiSortInfo.sorters,c=a.groupField||this.groupField,d=a.sortInfo||this.sortInfo,e=a.groupDir||this.groupDir;c&&b.push({field:c,direction:e}),d&&b.push(d),Ext.data.GroupingStore.superclass.constructor.call(this,a),this.addEvents("groupchange"),this.applyGroupField()},remoteGroup:!1,groupOnSort:!1,groupDir:"ASC",clearGrouping:function(){this.groupField=!1;if(this.remoteGroup){this.baseParams&&(delete this.baseParams.groupBy,delete this.baseParams.groupDir);var a=this.lastOptions;a&&a.params&&(delete a.params.groupBy,delete a.params.groupDir),this.reload()}else this.sort(),this.fireEvent("datachanged",this)},groupBy:function(a,b,c){c=c?String(c).toUpperCase()=="DESC"?"DESC":"ASC":this.groupDir;if(this.groupField==a&&this.groupDir==c&&!b)return;var d=this.multiSortInfo.sorters;d.length>0&&d[0].field==this.groupField&&d.shift(),this.groupField=a,this.groupDir=c,this.applyGroupField();var e=function(){this.fireEvent("groupchange",this,this.getGroupState())};if(this.groupOnSort){this.sort(a,c),e.call(this);return}this.remoteGroup?(this.on("load",e,this,{single:!0}),this.reload()):(this.sort(d),e.call(this))},sort:function(a,b){if(this.remoteSort)return Ext.data.GroupingStore.superclass.sort.call(this,a,b);var c=[];if(Ext.isArray(arguments[0]))c=arguments[0];else if(a==undefined)c=this.sortInfo?[this.sortInfo]:[];else{var d=this.fields.get(a);if(!d)return!1;var e=d.name,f=this.sortInfo||null,g=this.sortToggle?this.sortToggle[e]:null;b||(f&&f.field==e?b=(this.sortToggle[e]||"ASC").toggle("ASC","DESC"):b=d.sortDir),this.sortToggle[e]=b,this.sortInfo={field:e,direction:b},c=[this.sortInfo]}return this.groupField&&c.unshift({direction:this.groupDir,field:this.groupField}),this.multiSort.call(this,c,b)},applyGroupField:function(){if(this.remoteGroup){this.baseParams||(this.baseParams={}),Ext.apply(this.baseParams,{groupBy:this.groupField,groupDir:this.groupDir});var a=this.lastOptions;a&&a.params&&(a.params.groupDir=this.groupDir,delete a.params.groupBy)}},applyGrouping:function(a){return this.groupField!==!1?(this.groupBy(this.groupField,!0,this.groupDir),!0):(a===!0&&this.fireEvent("datachanged",this),!1)},getGroupState:function(){return this.groupOnSort&&this.groupField!==!1?this.sortInfo?this.sortInfo.field:undefined:this.groupField}}),Ext.reg("groupingstore",Ext.data.GroupingStore),Ext.data.DirectProxy=function(a){Ext.apply(this,a),typeof this.paramOrder=="string"&&(this.paramOrder=this.paramOrder.split(/[\s,|]/)),Ext.data.DirectProxy.superclass.constructor.call(this,a)},Ext.extend(Ext.data.DirectProxy,Ext.data.DataProxy,{paramOrder:undefined,paramsAsHash:!0,directFn:undefined,doRequest:function(a,b,c,d,e,f,g){var h=[],i=this.api[a]||this.directFn;switch(a){case Ext.data.Api.actions.create:h.push(c.jsonData);break;case Ext.data.Api.actions.read:if(i.directCfg.method.len>0)if(this.paramOrder)for(var j=0,k=this.paramOrder.length;j<k;j++)h.push(c[this.paramOrder[j]]);else this.paramsAsHash&&h.push(c);break;case Ext.data.Api.actions.update:h.push(c.jsonData);break;case Ext.data.Api.actions.destroy:h.push(c.jsonData)}var l={params:c||{},request:{callback:e,scope:f,arg:g},reader:d};h.push(this.createCallback(a,b,l),this),i.apply(window,h)},createCallback:function(a,b,c){var d=this;return function(e,f){if(!f.status){a===Ext.data.Api.actions.read&&d.fireEvent("loadexception",d,c,f,null),d.fireEvent("exception",d,"remote",a,c,f,null),c.request.callback.call(c.request.scope,null,c.request.arg,!1);return}a===Ext.data.Api.actions.read?d.onRead(a,c,e,f):d.onWrite(a,c,e,f,b)}},onRead:function(a,b,c,d){var e;try{e=b.reader.readRecords(c)}catch(f){this.fireEvent("loadexception",this,b,d,f),this.fireEvent("exception",this,"response",a,b,d,f),b.request.callback.call(b.request.scope,null,b.request.arg,!1);return}this.fireEvent("load",this,d,b.request.arg),b.request.callback.call(b.request.scope,e,b.request.arg,!0)},onWrite:function(a,b,c,d,e){var f=b.reader.extractData(b.reader.getRoot(c),!1),g=b.reader.getSuccess(c);g=g!==!1,g?this.fireEvent("write",this,a,f,d,e,b.request.arg):this.fireEvent("exception",this,"remote",a,b,c,e),b.request.callback.call(b.request.scope,f,d,g)}}),Ext.data.DirectStore=Ext.extend(Ext.data.Store,{constructor:function(a){var b=Ext.apply({},{batchTransactions:!1},a);Ext.data.DirectStore.superclass.constructor.call(this,Ext.apply(b,{proxy:Ext.isDefined(b.proxy)?b.proxy:new Ext.data.DirectProxy(Ext.copyTo({},b,"paramOrder,paramsAsHash,directFn,api")),reader:!Ext.isDefined(b.reader)&&b.fields?new Ext.data.JsonReader(Ext.copyTo({},b,"totalProperty,root,idProperty"),b.fields):b.reader}))}}),Ext.reg("directstore",Ext.data.DirectStore),Ext.Direct=Ext.extend(Ext.util.Observable,{exceptions:{TRANSPORT:"xhr",PARSE:"parse",LOGIN:"login",SERVER:"exception"},constructor:function(){this.addEvents("event","exception"),this.transactions={},this.providers={}},addProvider:function(a){var b=arguments;if(b.length>1){for(var c=0,d=b.length;c<d;c++)this.addProvider(b[c]);return}return a.events||(a=new Ext.Direct.PROVIDERS[a.type](a)),a.id=a.id||Ext.id(),this.providers[a.id]=a,a.on("data",this.onProviderData,this),a.on("exception",this.onProviderException,this),a.isConnected()||a.connect(),a},getProvider:function(a){return this.providers[a]},removeProvider:function(a){var b=a.id?a:this.providers[a];return b.un("data",this.onProviderData,this),b.un("exception",this.onProviderException,this),delete this.providers[b.id],b},addTransaction:function(a){return this.transactions[a.tid]=a,a},removeTransaction:function(a){return delete this.transactions[a.tid||a],a},getTransaction:function(a){return this.transactions[a.tid||a]},onProviderData:function(a,b){if(Ext.isArray(b)){for(var c=0,d=b.length;c<d;c++)this.onProviderData(a,b[c]);return}b.name&&b.name!="event"&&b.name!="exception"?this.fireEvent(b.name,b):b.type=="exception"&&this.fireEvent("exception",b),this.fireEvent("event",b,a)},createEvent:function(a,b){return new Ext.Direct.eventTypes[a.type](Ext.apply(a,b))}}),Ext.Direct=new Ext.Direct,Ext.Direct.TID=1,Ext.Direct.PROVIDERS={},Ext.Direct.Transaction=function(a){Ext.apply(this,a),this.tid=++Ext.Direct.TID,this.retryCount=0},Ext.Direct.Transaction.prototype={send:function(){this.provider.queueTransaction(this)},retry:function(){this.retryCount++,this.send()},getProvider:function(){return this.provider}},Ext.Direct.Event=function(a){Ext.apply(this,a)},Ext.Direct.Event.prototype={status:!0,getData:function(){return this.data}},Ext.Direct.RemotingEvent=Ext.extend(Ext.Direct.Event,{type:"rpc",getTransaction:function(){return this.transaction||Ext.Direct.getTransaction(this.tid)}}),Ext.Direct.ExceptionEvent=Ext.extend(Ext.Direct.RemotingEvent,{status:!1,type:"exception"}),Ext.Direct.eventTypes={rpc:Ext.Direct.RemotingEvent,event:Ext.Direct.Event,exception:Ext.Direct.ExceptionEvent},Ext.direct.Provider=Ext.extend(Ext.util.Observable,{priority:1,constructor:function(a){Ext.apply(this,a),this.addEvents("connect","disconnect","data","exception"),Ext.direct.Provider.superclass.constructor.call(this,a)},isConnected:function(){return!1},connect:Ext.emptyFn,disconnect:Ext.emptyFn}),Ext.direct.JsonProvider=Ext.extend(Ext.direct.Provider,{parseResponse:function(a){return Ext.isEmpty(a.responseText)?null:typeof a.responseText=="object"?a.responseText:Ext.decode(a.responseText)},getEvents:function(a){var b=null;try{b=this.parseResponse(a)}catch(c){var d=new Ext.Direct.ExceptionEvent({data:c,xhr:a,code:Ext.Direct.exceptions.PARSE,message:"Error parsing json response: \n\n "+b});return[d]}var e=[];if(Ext.isArray(b))for(var f=0,g=b.length;f<g;f++)e.push(Ext.Direct.createEvent(b[f]));else e.push(Ext.Direct.createEvent(b));return e}}),Ext.direct.PollingProvider=Ext.extend(Ext.direct.JsonProvider,{priority:3,interval:3e3,constructor:function(a){Ext.direct.PollingProvider.superclass.constructor.call(this,a),this.addEvents("beforepoll","poll")},isConnected:function(){return!!this.pollTask},connect:function(){if(this.url&&!this.pollTask)this.pollTask=Ext.TaskMgr.start({run:function(){this.fireEvent("beforepoll",this)!==!1&&(typeof this.url=="function"?this.url(this.baseParams):Ext.Ajax.request({url:this.url,callback:this.onData,scope:this,params:this.baseParams}))},interval:this.interval,scope:this}),this.fireEvent("connect",this);else if(!this.url)throw"Error initializing PollingProvider, no url configured."},disconnect:function(){this.pollTask&&(Ext.TaskMgr.stop(this.pollTask),delete this.pollTask,this.fireEvent("disconnect",this))},onData:function(a,b,c){if(b){var d=this.getEvents(c);for(var e=0,f=d.length;e<f;e++){var g=d[e];this.fireEvent("data",this,g)}}else{var g=new Ext.Direct.ExceptionEvent({data:g,code:Ext.Direct.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:c});this.fireEvent("data",this,g)}}}),Ext.Direct.PROVIDERS.polling=Ext.direct.PollingProvider,Ext.direct.RemotingProvider=Ext.extend(Ext.direct.JsonProvider,{enableBuffer:10,maxRetries:1,timeout:undefined,constructor:function(a){Ext.direct.RemotingProvider.superclass.constructor.call(this,a),this.addEvents("beforecall","call"),this.namespace=Ext.isString(this.namespace)?Ext.ns(this.namespace):this.namespace||window,this.transactions={},this.callBuffer=[]},initAPI:function(){var a=this.actions;for(var b in a){var c=this.namespace[b]||(this.namespace[b]={}),d=a[b];for(var e=0,f=d.length;e<f;e++){var g=d[e];c[g.name]=this.createMethod(b,g)}}},isConnected:function(){return!!this.connected},connect:function(){if(this.url)this.initAPI(),this.connected=!0,this.fireEvent("connect",this);else if(!this.url)throw"Error initializing RemotingProvider, no url configured."},disconnect:function(){this.connected&&(this.connected=!1,this.fireEvent("disconnect",this))},onData:function(a,b,c){if(b){var d=this.getEvents(c);for(var e=0,f=d.length;e<f;e++){var g=d[e],h=this.getTransaction(g);this.fireEvent("data",this,g),h&&(this.doCallback(h,g,!0),Ext.Direct.removeTransaction(h))}}else{var i=[].concat(a.ts);for(var e=0,f=i.length;e<f;e++){var h=this.getTransaction(i[e]);if(h&&h.retryCount<this.maxRetries)h.retry();else{var g=new Ext.Direct.ExceptionEvent({data:g,transaction:h,code:Ext.Direct.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:c});this.fireEvent("data",this,g),h&&(this.doCallback(h,g,!1),Ext.Direct.removeTransaction(h))}}}},getCallData:function(a){return{action:a.action,method:a.method,data:a.data,type:"rpc",tid:a.tid}},doSend:function(a){var b={url:this.url,callback:this.onData,scope:this,ts:a,timeout:this.timeout},c;if(Ext.isArray(a)){c=[];for(var d=0,e=a.length;d<e;d++)c.push(this.getCallData(a[d]))}else c=this.getCallData(a);if(this.enableUrlEncode){var f={};f[Ext.isString(this.enableUrlEncode)?this.enableUrlEncode:"data"]=Ext.encode(c),b.params=f}else b.jsonData=c;Ext.Ajax.request(b)},combineAndSend:function(){var a=this.callBuffer.length;a>0&&(this.doSend(a==1?this.callBuffer[0]:this.callBuffer),this.callBuffer=[])},queueTransaction:function(a){if(a.form){this.processForm(a);return}this.callBuffer.push(a),this.enableBuffer?(this.callTask||(this.callTask=new Ext.util.DelayedTask(this.combineAndSend,this)),this.callTask.delay(Ext.isNumber(this.enableBuffer)?this.enableBuffer:10)):this.combineAndSend()},doCall:function(a,b,c){var d=null,e=c[b.len],f=c[b.len+1];b.len!==0&&(d=c.slice(0,b.len));var g=new Ext.Direct.Transaction({provider:this,args:c,action:a,method:b.name,data:d,cb:f&&Ext.isFunction(e)?e.createDelegate(f):e});this.fireEvent("beforecall",this,g,b)!==!1&&(Ext.Direct.addTransaction(g),this.queueTransaction(g),this.fireEvent("call",this,g,b))},doForm:function(a,b,c,d,e){var f=new Ext.Direct.Transaction({provider:this,action:a,method:b.name,args:[c,d,e],cb:e&&Ext.isFunction(d)?d.createDelegate(e):d,isForm:!0});if(this.fireEvent("beforecall",this,f,b)!==!1){Ext.Direct.addTransaction(f);var g=String(c.getAttribute("enctype")).toLowerCase()=="multipart/form-data",h={extTID:f.tid,extAction:a,extMethod:b.name,extType:"rpc",extUpload:String(g)};Ext.apply(f,{form:Ext.getDom(c),isUpload:g,params:d&&Ext.isObject(d.params)?Ext.apply(h,d.params):h}),this.fireEvent("call",this,f,b),this.processForm(f)}},processForm:function(a){Ext.Ajax.request({url:this.url,params:a.params,callback:this.onData,scope:this,form:a.form,isUpload:a.isUpload,ts:a})},createMethod:function(a,b){var c;return b.formHandler?c=function(c,e,f){this.doForm(a,b,c,e,f)}.createDelegate(this):c=function(){this.doCall(a,b,Array.prototype.slice.call(arguments,0))}.createDelegate(this),c.directCfg={action:a,method:b},c},getTransaction:function(a){return a&&a.tid?Ext.Direct.getTransaction(a.tid):null},doCallback:function(a,b){var c=b.status?"success":"failure";if(a&&a.cb){var d=a.cb,e=Ext.isDefined(b.result)?b.result:b.data;Ext.isFunction(d)?d(e,b):(Ext.callback(d[c],d.scope,[e,b]),Ext.callback(d.callback,d.scope,[e,b]))}}}),Ext.Direct.PROVIDERS.remoting=Ext.direct.RemotingProvider,Ext.Resizable=Ext.extend(Ext.util.Observable,{constructor:function(a,b){this.el=Ext.get(a);if(b&&b.wrap){b.resizeChild=this.el,this.el=this.el.wrap(typeof b.wrap=="object"?b.wrap:{cls:"xresizable-wrap"}),this.el.id=this.el.dom.id=b.resizeChild.id+"-rzwrap",this.el.setStyle("overflow","hidden"),this.el.setPositioning(b.resizeChild.getPositioning()),b.resizeChild.clearPositioning();if(!b.width||!b.height){var c=b.resizeChild.getSize();this.el.setSize(c.width,c.height)}b.pinned&&!b.adjustments&&(b.adjustments="auto")}this.proxy=this.el.createProxy({tag:"div",cls:"x-resizable-proxy",id:this.el.id+"-rzproxy"},Ext.getBody()),this.proxy.unselectable(),this.proxy.enableDisplayMode("block"),Ext.apply(this,b),this.pinned&&(this.disableTrackOver=!0,this.el.addClass("x-resizable-pinned"));var d=this.el.getStyle("position");d!="absolute"&&d!="fixed"&&this.el.setStyle("position","relative"),this.handles||(this.handles="s,e,se",this.multiDirectional&&(this.handles+=",n,w")),this.handles=="all"&&(this.handles="n s e w ne nw se sw");var e=this.handles.split(/\s*?[,;]\s*?| /),f=Ext.Resizable.positions;for(var g=0,h=e.length;g<h;g++)if(e[g]&&f[e[g]]){var i=f[e[g]];this[i]=new Ext.Resizable.Handle(this,i,this.disableTrackOver,this.transparent,this.handleCls)}this.corner=this.southeast;if(this.handles.indexOf("n")!=-1||this.handles.indexOf("w")!=-1)this.updateBox=!0;this.activeHandle=null,this.resizeChild&&(typeof this.resizeChild=="boolean"?this.resizeChild=Ext.get(this.el.dom.firstChild,!0):this.resizeChild=Ext.get(this.resizeChild,!0));if(this.adjustments=="auto"){var j=this.resizeChild,k=this.west,l=this.east,m=this.north,e=this.south;j&&(k||m)&&(j.position("relative"),j.setLeft(k?k.el.getWidth():0),j.setTop(m?m.el.getHeight():0)),this.adjustments=[(l?-l.el.getWidth():0)+(k?-k.el.getWidth():0),(m?-m.el.getHeight():0)+(e?-e.el.getHeight():0)-1]}this.draggable&&(this.dd=this.dynamic?this.el.initDD(null):this.el.initDDProxy(null,{dragElId:this.proxy.id}),this.dd.setHandleElId(this.resizeChild?this.resizeChild.id:this.el.id),this.constrainTo&&this.dd.constrainTo(this.constrainTo)),this.addEvents("beforeresize","resize"),this.width!==null&&this.height!==null?this.resizeTo(this.width,this.height):this.updateChildSize(),Ext.isIE&&(this.el.dom.style.zoom=1),Ext.Resizable.superclass.constructor.call(this)},adjustments:[0,0],animate:!1,disableTrackOver:!1,draggable:!1,duration:.35,dynamic:!1,easing:"easeOutStrong",enabled:!0,handles:!1,multiDirectional:!1,height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:5,minWidth:5,maxHeight:1e4,maxWidth:1e4,minX:0,minY:0,pinned:!1,preserveRatio:!1,resizeChild:!1,transparent:!1,resizeTo:function(a,b){this.el.setSize(a,b),this.updateChildSize(),this.fireEvent("resize",this,a,b,null)},startSizing:function(a,b){this.fireEvent("beforeresize",this,a);if(this.enabled){this.overlay||(this.overlay=this.el.createProxy({tag:"div",cls:"x-resizable-overlay",html:"&#160;"},Ext.getBody()),this.overlay.unselectable(),this.overlay.enableDisplayMode("block"),this.overlay.on({scope:this,mousemove:this.onMouseMove,mouseup:this.onMouseUp})),this.overlay.setStyle("cursor",b.el.getStyle("cursor")),this.resizing=!0,this.startBox=this.el.getBox(),this.startPoint=a.getXY(),this.offsets=[this.startBox.x+this.startBox.width-this.startPoint[0],this.startBox.y+this.startBox.height-this.startPoint[1]],this.overlay.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.overlay.show();if(this.constrainTo){var c=Ext.get(this.constrainTo);this.resizeRegion=c.getRegion().adjust(c.getFrameWidth("t"),c.getFrameWidth("l"),-c.getFrameWidth("b"),-c.getFrameWidth("r"))}this.proxy.setStyle("visibility","hidden"),this.proxy.show(),this.proxy.setBox(this.startBox),this.dynamic||this.proxy.setStyle("visibility","visible")}},onMouseDown:function(a,b){this.enabled&&(b.stopEvent(),this.activeHandle=a,this.startSizing(b,a))},onMouseUp:function(a){this.activeHandle=null;var b=this.resizeElement();this.resizing=!1,this.handleOut(),this.overlay.hide(),this.proxy.hide(),this.fireEvent("resize",this,b.width,b.height,a)},updateChildSize:function(){if(this.resizeChild){var a=this.el,b=this.resizeChild,c=this.adjustments;if(a.dom.offsetWidth){var d=a.getSize(!0);b.setSize(d.width+c[0],d.height+c[1])}Ext.isIE&&setTimeout(function(){if(a.dom.offsetWidth){var d=a.getSize(!0);b.setSize(d.width+c[0],d.height+c[1])}},10)}},snap:function(a,b,c){if(!b||!a)return a;var d=a,e=a%b;return e>0&&(e>b/2?d=a+(b-e):d=a-e),Math.max(c,d)},resizeElement:function(){var a=this.proxy.getBox();return this.updateBox?this.el.setBox(a,!1,this.animate,this.duration,null,this.easing):this.el.setSize(a.width,a.height,this.animate,this.duration,null,this.easing),this.updateChildSize(),this.dynamic||this.proxy.hide(),this.draggable&&this.constrainTo&&(this.dd.resetConstraints(),this.dd.constrainTo(this.constrainTo)),a},constrain:function(a,b,c,d){return a-b<c?b=a-c:a-b>d&&(b=a-d),b},onMouseMove:function(a){if(this.enabled&&this.activeHandle)try{if(this.resizeRegion&&!this.resizeRegion.contains(a.getPoint()))return;var b=this.curSize||this.startBox,c=this.startBox.x,d=this.startBox.y,e=c,f=d,g=b.width,h=b.height,i=g,j=h,k=this.minWidth,l=this.minHeight,m=this.maxWidth,n=this.maxHeight,o=this.widthIncrement,p=this.heightIncrement,q=a.getXY(),r=-(this.startPoint[0]-Math.max(this.minX,q[0])),s=-(this.startPoint[1]-Math.max(this.minY,q[1])),t=this.activeHandle.position,u,v;switch(t){case"east":g+=r,g=Math.min(Math.max(k,g),m);break;case"south":h+=s,h=Math.min(Math.max(l,h),n);break;case"southeast":g+=r,h+=s,g=Math.min(Math.max(k,g),m),h=Math.min(Math.max(l,h),n);break;case"north":s=this.constrain(h,s,l,n),d+=s,h-=s;break;case"west":r=this.constrain(g,r,k,m),c+=r,g-=r;break;case"northeast":g+=r,g=Math.min(Math.max(k,g),m),s=this.constrain(h,s,l,n),d+=s,h-=s;break;case"northwest":r=this.constrain(g,r,k,m),s=this.constrain(h,s,l,n),d+=s,h-=s,c+=r,g-=r;break;case"southwest":r=this.constrain(g,r,k,m),h+=s,h=Math.min(Math.max(l,h),n),c+=r,g-=r}var w=this.snap(g,o,k),x=this.snap(h,p,l);if(w!=g||x!=h){switch(t){case"northeast":d-=x-h;break;case"north":d-=x-h;break;case"southwest":c-=w-g;break;case"west":c-=w-g;break;case"northwest":c-=w-g,d-=x-h}g=w,h=x}if(this.preserveRatio)switch(t){case"southeast":case"east":h=j*(g/i),h=Math.min(Math.max(l,h),n),g=i*(h/j);break;case"south":g=i*(h/j),g=Math.min(Math.max(k,g),m),h=j*(g/i);break;case"northeast":g=i*(h/j),g=Math.min(Math.max(k,g),m),h=j*(g/i);break;case"north":u=g,g=i*(h/j),g=Math.min(Math.max(k,g),m),h=j*(g/i),c+=(u-g)/2;break;case"southwest":h=j*(g/i),h=Math.min(Math.max(l,h),n),u=g,g=i*(h/j),c+=u-g;break;case"west":v=h,h=j*(g/i),h=Math.min(Math.max(l,h),n),d+=(v-h)/2,u=g,g=i*(h/j),c+=u-g;break;case"northwest":u=g,v=h,h=j*(g/i),h=Math.min(Math.max(l,h),n),g=i*(h/j),d+=v-h,c+=u-g}this.proxy.setBounds(c,d,g,h),this.dynamic&&this.resizeElement()}catch(y){}},handleOver:function(){this.enabled&&this.el.addClass("x-resizable-over")},handleOut:function(){this.resizing||this.el.removeClass("x-resizable-over")},getEl:function(){return this.el},getResizeChild:function(){return this.resizeChild},destroy:function(a){Ext.destroy(this.dd,this.overlay,this.proxy),this.overlay=null,this.proxy=null;var b=Ext.Resizable.positions;for(var c in b)typeof b[c]!="function"&&this[b[c]]&&this[b[c]].destroy();a&&(this.el.update(""),Ext.destroy(this.el),this.el=null),this.purgeListeners()},syncHandleHeight:function(){var a=this.el.getHeight(!0);this.west&&this.west.el.setHeight(a),this.east&&this.east.el.setHeight(a)}}),Ext.Resizable.positions={n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},Ext.Resizable.Handle=Ext.extend(Object,{constructor:function(a,b,c,d,e){if(!this.tpl){var f=Ext.DomHelper.createTemplate({tag:"div",cls:"x-resizable-handle x-resizable-handle-{0}"});f.compile(),Ext.Resizable.Handle.prototype.tpl=f}this.position=b,this.rz=a,this.el=this.tpl.append(a.el.dom,[this.position],!0),this.el.unselectable(),d&&this.el.setOpacity(0),Ext.isEmpty(e)||this.el.addClass(e),this.el.on("mousedown",this.onMouseDown,this),c||this.el.on({scope:this,mouseover:this.onMouseOver,mouseout:this.onMouseOut})},afterResize:function(a){},onMouseDown:function(a){this.rz.onMouseDown(this,a)},onMouseOver:function(a){this.rz.handleOver(this,a)},onMouseOut:function(a){this.rz.handleOut(this,a)},destroy:function(){Ext.destroy(this.el),this.el=null}}),Ext.Window=Ext.extend(Ext.Panel,{baseCls:"x-window",resizable:!0,draggable:!0,closable:!0,closeAction:"close",constrain:!1,constrainHeader:!1,plain:!1,minimizable:!1,maximizable:!1,minHeight:100,minWidth:200,expandOnShow:!0,showAnimDuration:.25,hideAnimDuration:.25,collapsible:!1,initHidden:undefined,hidden:!0,elements:"header,body",frame:!0,floating:!0,initComponent:function(){this.initTools(),Ext.Window.superclass.initComponent.call(this),this.addEvents("resize","maximize","minimize","restore"),Ext.isDefined(this.initHidden)&&(this.hidden=this.initHidden),this.hidden===!1&&(this.hidden=!0,this.show())},getState:function(){return Ext.apply(Ext.Window.superclass.getState.call(this)||{},this.getBox(!0))},onRender:function(a,b){Ext.Window.superclass.onRender.call(this,a,b),this.plain&&this.el.addClass("x-window-plain"),this.focusEl=this.el.createChild({tag:"a",href:"#",cls:"x-dlg-focus",tabIndex:"-1",html:"&#160;"}),this.focusEl.swallowEvent("click",!0),this.proxy=this.el.createProxy("x-window-proxy"),this.proxy.enableDisplayMode("block"),this.modal&&(this.mask=this.container.createChild({cls:"ext-el-mask"},this.el.dom),this.mask.enableDisplayMode("block"),this.mask.hide(),this.mon(this.mask,"click",this.focus,this)),this.maximizable&&this.mon(this.header,"dblclick",this.toggleMaximize,this)},initEvents:function(){Ext.Window.superclass.initEvents.call(this),this.animateTarget&&this.setAnimateTarget(this.animateTarget),this.resizable&&(this.resizer=new Ext.Resizable(this.el,{minWidth:this.minWidth,minHeight:this.minHeight,handles:this.resizeHandles||"all",pinned:!0,resizeElement:this.resizerAction,handleCls:"x-window-handle"}),this.resizer.window=this,this.mon(this.resizer,"beforeresize",this.beforeResize,this)),this.draggable&&this.header.addClass("x-window-draggable"),this.mon(this.el,"mousedown",this.toFront,this),this.manager=this.manager||Ext.WindowMgr,this.manager.register(this),this.maximized&&(this.maximized=!1,this.maximize());if(this.closable){var a=this.getKeyMap();a.on(27,this.onEsc,this),a.disable()}},initDraggable:function(){this.dd=new Ext.Window.DD(this)},onEsc:function(a,b){b.stopEvent(),this[this.closeAction]()},beforeDestroy:function(){this.rendered&&(this.hide(),this.clearAnchor(),Ext.destroy(this.focusEl,this.resizer,this.dd,this.proxy,this.mask)),Ext.Window.superclass.beforeDestroy.call(this)},onDestroy:function(){this.manager&&this.manager.unregister(this),Ext.Window.superclass.onDestroy.call(this)},initTools:function(){this.minimizable&&this.addTool({id:"minimize",handler:this.minimize.createDelegate(this,[])}),this.maximizable&&(this.addTool({id:"maximize",handler:this.maximize.createDelegate(this,[])}),this.addTool({id:"restore",handler:this.restore.createDelegate(this,[]),hidden:!0})),this.closable&&this.addTool({id:"close",handler:this[this.closeAction].createDelegate(this,[])})},resizerAction:function(){var a=this.proxy.getBox();return this.proxy.hide(),this.window.handleResize(a),a},beforeResize:function(){this.resizer.minHeight=Math.max(this.minHeight,this.getFrameHeight()+40),this
.resizer.minWidth=Math.max(this.minWidth,this.getFrameWidth()+40),this.resizeBox=this.el.getBox()},updateHandles:function(){Ext.isIE&&this.resizer&&(this.resizer.syncHandleHeight(),this.el.repaint())},handleResize:function(a){var b=this.resizeBox;b.x!=a.x||b.y!=a.y?this.updateBox(a):(this.setSize(a),Ext.isIE6&&Ext.isStrict&&this.doLayout()),this.focus(),this.updateHandles(),this.saveState()},focus:function(){var a=this.focusEl,b=this.defaultButton,c=typeof b,d,e;if(Ext.isDefined(b)){Ext.isNumber(b)&&this.fbar?a=this.fbar.items.get(b):Ext.isString(b)?a=Ext.getCmp(b):a=b,d=a.getEl(),e=Ext.getDom(this.container);if(d&&e&&e!=document.body&&!Ext.lib.Region.getRegion(e).contains(Ext.lib.Region.getRegion(d.dom)))return}a=a||this.focusEl,a.focus.defer(10,a)},setAnimateTarget:function(a){a=Ext.get(a),this.animateTarget=a},beforeShow:function(){delete this.el.lastXY,delete this.el.lastLT;if(this.x===undefined||this.y===undefined){var a=this.el.getAlignToXY(this.container,"c-c"),b=this.el.translatePoints(a[0],a[1]);this.x=this.x===undefined?b.left:this.x,this.y=this.y===undefined?b.top:this.y}this.el.setLeftTop(this.x,this.y),this.expandOnShow&&this.expand(!1),this.modal&&(Ext.getBody().addClass("x-body-masked"),this.mask.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.mask.show())},show:function(a,b,c){return this.rendered||this.render(Ext.getBody()),this.hidden===!1?(this.toFront(),this):this.fireEvent("beforeshow",this)===!1?this:(b&&this.on("show",b,c,{single:!0}),this.hidden=!1,Ext.isDefined(a)&&this.setAnimateTarget(a),this.beforeShow(),this.animateTarget?this.animShow():this.afterShow(),this)},afterShow:function(a){if(this.isDestroyed)return!1;this.proxy.hide(),this.el.setStyle("display","block"),this.el.show(),this.maximized&&this.fitContainer(),Ext.isMac&&Ext.isGecko2&&this.cascade(this.setAutoScroll),(this.monitorResize||this.modal||this.constrain||this.constrainHeader)&&Ext.EventManager.onWindowResize(this.onWindowResize,this),this.doConstrain(),this.doLayout(),this.keyMap&&this.keyMap.enable(),this.toFront(),this.updateHandles();if(a&&(Ext.isIE||Ext.isWebKit)){var b=this.getSize();this.onResize(b.width,b.height)}this.onShow(),this.fireEvent("show",this)},animShow:function(){this.proxy.show(),this.proxy.setBox(this.animateTarget.getBox()),this.proxy.setOpacity(0);var a=this.getBox();this.el.setStyle("display","none"),this.proxy.shift(Ext.apply(a,{callback:this.afterShow.createDelegate(this,[!0],!1),scope:this,easing:"easeNone",duration:this.showAnimDuration,opacity:.5}))},hide:function(a,b,c){return this.hidden||this.fireEvent("beforehide",this)===!1?this:(b&&this.on("hide",b,c,{single:!0}),this.hidden=!0,a!==undefined&&this.setAnimateTarget(a),this.modal&&(this.mask.hide(),Ext.getBody().removeClass("x-body-masked")),this.animateTarget?this.animHide():(this.el.hide(),this.afterHide()),this)},afterHide:function(){this.proxy.hide(),(this.monitorResize||this.modal||this.constrain||this.constrainHeader)&&Ext.EventManager.removeResizeListener(this.onWindowResize,this),this.keyMap&&this.keyMap.disable(),this.onHide(),this.fireEvent("hide",this)},animHide:function(){this.proxy.setOpacity(.5),this.proxy.show();var a=this.getBox(!1);this.proxy.setBox(a),this.el.hide(),this.proxy.shift(Ext.apply(this.animateTarget.getBox(),{callback:this.afterHide,scope:this,duration:this.hideAnimDuration,easing:"easeNone",opacity:0}))},onShow:Ext.emptyFn,onHide:Ext.emptyFn,onWindowResize:function(){this.maximized&&this.fitContainer();if(this.modal){this.mask.setSize("100%","100%");var a=this.mask.dom.offsetHeight;this.mask.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0))}this.doConstrain()},doConstrain:function(){if(this.constrain||this.constrainHeader){var a;if(this.constrain)a={right:this.el.shadowOffset,left:this.el.shadowOffset,bottom:this.el.shadowOffset};else{var b=this.getSize();a={right:-(b.width-100),bottom:-(b.height-25)}}var c=this.el.getConstrainToXY(this.container,!0,a);c&&this.setPosition(c[0],c[1])}},ghost:function(a){var b=this.createGhost(a),c=this.getBox(!0);return b.setLeftTop(c.x,c.y),b.setWidth(c.width),this.el.hide(),this.activeGhost=b,b},unghost:function(a,b){if(!this.activeGhost)return;a!==!1&&(this.el.show(),this.focus.defer(10,this),Ext.isMac&&Ext.isGecko2&&this.cascade(this.setAutoScroll)),b!==!1&&this.setPosition(this.activeGhost.getLeft(!0),this.activeGhost.getTop(!0)),this.activeGhost.hide(),this.activeGhost.remove(),delete this.activeGhost},minimize:function(){return this.fireEvent("minimize",this),this},close:function(){this.fireEvent("beforeclose",this)!==!1&&(this.hidden?this.doClose():this.hide(null,this.doClose,this))},doClose:function(){this.fireEvent("close",this),this.destroy()},maximize:function(){return this.maximized||(this.expand(!1),this.restoreSize=this.getSize(),this.restorePos=this.getPosition(!0),this.maximizable&&(this.tools.maximize.hide(),this.tools.restore.show()),this.maximized=!0,this.el.disableShadow(),this.dd&&this.dd.lock(),this.collapsible&&this.tools.toggle.hide(),this.el.addClass("x-window-maximized"),this.container.addClass("x-window-maximized-ct"),this.setPosition(0,0),this.fitContainer(),this.fireEvent("maximize",this)),this},restore:function(){if(this.maximized){var a=this.tools;this.el.removeClass("x-window-maximized"),a.restore&&a.restore.hide(),a.maximize&&a.maximize.show(),this.setPosition(this.restorePos[0],this.restorePos[1]),this.setSize(this.restoreSize.width,this.restoreSize.height),delete this.restorePos,delete this.restoreSize,this.maximized=!1,this.el.enableShadow(!0),this.dd&&this.dd.unlock(),this.collapsible&&a.toggle&&a.toggle.show(),this.container.removeClass("x-window-maximized-ct"),this.doConstrain(),this.fireEvent("restore",this)}return this},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},fitContainer:function(){var a=this.container.getViewSize(!1);this.setSize(a.width,a.height)},setZIndex:function(a){this.modal&&this.mask.setStyle("z-index",a),this.el.setZIndex(++a),a+=5,this.resizer&&this.resizer.proxy.setStyle("z-index",++a),this.lastZIndex=a},alignTo:function(a,b,c){var d=this.el.getAlignToXY(a,b,c);return this.setPagePosition(d[0],d[1]),this},anchorTo:function(a,b,c,d){this.clearAnchor(),this.anchorTarget={el:a,alignment:b,offsets:c},Ext.EventManager.onWindowResize(this.doAnchor,this);var e=typeof d;return e!="undefined"&&Ext.EventManager.on(window,"scroll",this.doAnchor,this,{buffer:e=="number"?d:50}),this.doAnchor()},doAnchor:function(){var a=this.anchorTarget;return this.alignTo(a.el,a.alignment,a.offsets),this},clearAnchor:function(){return this.anchorTarget&&(Ext.EventManager.removeResizeListener(this.doAnchor,this),Ext.EventManager.un(window,"scroll",this.doAnchor,this),delete this.anchorTarget),this},toFront:function(a){return this.manager.bringToFront(this)&&(!a||!a.getTarget().focus)&&this.focus(),this},setActive:function(a){a?(this.maximized||this.el.enableShadow(!0),this.fireEvent("activate",this)):(this.el.disableShadow(),this.fireEvent("deactivate",this))},toBack:function(){return this.manager.sendToBack(this),this},center:function(){var a=this.el.getAlignToXY(this.container,"c-c");return this.setPagePosition(a[0],a[1]),this}}),Ext.reg("window",Ext.Window),Ext.Window.DD=Ext.extend(Ext.dd.DD,{constructor:function(a){this.win=a,Ext.Window.DD.superclass.constructor.call(this,a.el.id,"WindowDD-"+a.id),this.setHandleElId(a.header.id),this.scroll=!1},moveOnly:!0,headerOffsets:[100,25],startDrag:function(){var a=this.win;this.proxy=a.ghost(a.initialConfig.cls);if(a.constrain!==!1){var b=a.el.shadowOffset;this.constrainTo(a.container,{right:b,left:b,bottom:b})}else if(a.constrainHeader!==!1){var c=this.proxy.getSize();this.constrainTo(a.container,{right:-(c.width-this.headerOffsets[0]),bottom:-(c.height-this.headerOffsets[1])})}},b4Drag:Ext.emptyFn,onDrag:function(a){this.alignElWithMouse(this.proxy,a.getPageX(),a.getPageY())},endDrag:function(a){this.win.unghost(),this.win.saveState()}}),Ext.WindowGroup=function(){var a={},b=[],c=null,d=function(a,b){return!a._lastAccess||a._lastAccess<b._lastAccess?-1:1},e=function(){var a=b,c=a.length;if(c>0){a.sort(d);var e=a[0].manager.zseed;for(var f=0;f<c;f++){var h=a[f];h&&!h.hidden&&h.setZIndex(e+f*10)}}g()},f=function(a){a!=c&&(c&&c.setActive(!1),c=a,a&&a.setActive(!0))},g=function(){for(var a=b.length-1;a>=0;--a)if(!b[a].hidden){f(b[a]);return}f(null)};return{zseed:9e3,register:function(c){c.manager&&c.manager.unregister(c),c.manager=this,a[c.id]=c,b.push(c),c.on("hide",g)},unregister:function(c){delete c.manager,delete a[c.id],c.un("hide",g),b.remove(c)},get:function(b){return typeof b=="object"?b:a[b]},bringToFront:function(a){return a=this.get(a),a!=c?(a._lastAccess=(new Date).getTime(),e(),!0):!1},sendToBack:function(a){return a=this.get(a),a._lastAccess=-(new Date).getTime(),e(),a},hideAll:function(){for(var b in a)a[b]&&typeof a[b]!="function"&&a[b].isVisible()&&a[b].hide()},getActive:function(){return c},getBy:function(a,c){var d=[];for(var e=b.length-1;e>=0;--e){var f=b[e];a.call(c||f,f)!==!1&&d.push(f)}return d},each:function(b,c){for(var d in a)if(a[d]&&typeof a[d]!="function"&&b.call(c||a[d],a[d])===!1)return}}},Ext.WindowMgr=new Ext.WindowGroup,Ext.MessageBox=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p="",q="",r=["ok","yes","no","cancel"],s=function(c){m[c].blur(),a.isVisible()&&(a.hide(),t(),Ext.callback(b.fn,b.scope||window,[c,n.dom.value,b],1))},t=function(){b&&b.cls&&a.el.removeClass(b.cls),i.reset()},u=function(c,d,e){b&&b.closable!==!1&&(a.hide(),t()),e&&e.stopEvent()},v=function(b){var c=0,d;return b?(a.footer.dom.style.display="",Ext.iterate(m,function(a,e){d=b[a],d?(e.show(),e.setText(Ext.isString(d)?d:Ext.MessageBox.buttonText[a]),c+=e.getEl().getWidth()+15):e.hide()}),c):(Ext.each(r,function(a){m[a].hide()}),c)};return{getDialog:function(d){if(!a){var j=[];m={},Ext.each(r,function(a){j.push(m[a]=new Ext.Button({text:this.buttonText[a],handler:s.createCallback(a),hideMode:"offsets"}))},this),a=new Ext.Window({autoCreate:!0,title:d,resizable:!1,constrain:!0,constrainHeader:!0,minimizable:!1,maximizable:!1,stateful:!1,modal:!0,shim:!0,buttonAlign:"center",width:400,height:100,minHeight:80,plain:!0,footer:!0,closable:!0,close:function(){b&&b.buttons&&b.buttons.no&&!b.buttons.cancel?s("no"):s("cancel")},fbar:new Ext.Toolbar({items:j,enableOverflow:!1})}),a.render(document.body),a.getEl().addClass("x-window-dlg"),c=a.mask,e=a.body.createChild({html:'<div class="ext-mb-icon"></div><div class="ext-mb-content"><span class="ext-mb-text"></span><br /><div class="ext-mb-fix-cursor"><input type="text" class="ext-mb-input" /><textarea class="ext-mb-textarea"></textarea></div></div>'}),k=Ext.get(e.dom.firstChild);var l=e.dom.childNodes[1];f=Ext.get(l.firstChild),g=Ext.get(l.childNodes[2].firstChild),g.enableDisplayMode(),g.addKeyListener([10,13],function(){a.isVisible()&&b&&b.buttons&&(b.buttons.ok?s("ok"):b.buttons.yes&&s("yes"))}),h=Ext.get(l.childNodes[2].childNodes[1]),h.enableDisplayMode(),i=new Ext.ProgressBar({renderTo:e}),e.createChild({cls:"x-clear"})}return a},updateText:function(c){!a.isVisible()&&!b.width&&a.setSize(this.maxWidth,100),f.update(c?c+" ":"&#160;");var d=q!=""?k.getWidth()+k.getMargins("lr"):0,e=f.getWidth()+f.getMargins("lr"),g=a.getFrameWidth("lr"),h=a.body.getFrameWidth("lr"),j;return j=Math.max(Math.min(b.width||d+e+g+h,b.maxWidth||this.maxWidth),Math.max(b.minWidth||this.minWidth,o||0)),b.prompt===!0&&n.setWidth(j-d-g-h),(b.progress===!0||b.wait===!0)&&i.setSize(j-d-g-h),Ext.isIE&&j==o&&(j+=4),f.update(c||"&#160;"),a.setSize(j,"auto").center(),this},updateProgress:function(a,b,c){return i.updateProgress(a,b),c&&this.updateText(c),this},isVisible:function(){return a&&a.isVisible()},hide:function(){var b=a?a.activeGhost:null;if(this.isVisible()||b)a.hide(),t(),b&&a.unghost(!1,!1);return this},show:function(d){this.isVisible()&&this.hide(),b=d;var e=this.getDialog(b.title||"&#160;");e.setTitle(b.title||"&#160;");var f=b.closable!==!1&&b.progress!==!0&&b.wait!==!0;e.tools.close.setDisplayed(f),n=g,b.prompt=b.prompt||(b.multiline?!0:!1),b.prompt?b.multiline?(g.hide(),h.show(),h.setHeight(Ext.isNumber(b.multiline)?b.multiline:this.defaultTextHeight),n=h):(g.show(),h.hide()):(g.hide(),h.hide()),n.dom.value=b.value||"";if(b.prompt)e.focusEl=n;else{var j=b.buttons,k=null;j&&j.ok?k=m.ok:j&&j.yes&&(k=m.yes),k&&(e.focusEl=k)}return Ext.isDefined(b.iconCls)&&e.setIconClass(b.iconCls),this.setIcon(Ext.isDefined(b.icon)?b.icon:p),o=v(b.buttons),i.setVisible(b.progress===!0||b.wait===!0),this.updateProgress(0,b.progressText),this.updateText(b.msg),b.cls&&e.el.addClass(b.cls),e.proxyDrag=b.proxyDrag===!0,e.modal=b.modal!==!1,e.mask=b.modal!==!1?c:!1,e.isVisible()||(document.body.appendChild(a.el.dom),e.setAnimateTarget(b.animEl),e.on("show",function(){f===!0?e.keyMap.enable():e.keyMap.disable()},this,{single:!0}),e.show(b.animEl)),b.wait===!0&&i.wait(b.waitConfig),this},setIcon:function(b){if(!a){p=b;return}return p=undefined,b&&b!=""?(k.removeClass("x-hidden"),k.replaceClass(q,b),e.addClass("x-dlg-icon"),q=b):(k.replaceClass(q,"x-hidden"),e.removeClass("x-dlg-icon"),q=""),this},progress:function(a,b,c){return this.show({title:a,msg:b,buttons:!1,progress:!0,closable:!1,minWidth:this.minProgressWidth,progressText:c}),this},wait:function(a,b,c){return this.show({title:b,msg:a,buttons:!1,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:c}),this},alert:function(a,b,c,d){return this.show({title:a,msg:b,buttons:this.OK,fn:c,scope:d,minWidth:this.minWidth}),this},confirm:function(a,b,c,d){return this.show({title:a,msg:b,buttons:this.YESNO,fn:c,scope:d,icon:this.QUESTION,minWidth:this.minWidth}),this},prompt:function(a,b,c,d,e,f){return this.show({title:a,msg:b,buttons:this.OKCANCEL,fn:c,minWidth:this.minPromptWidth,scope:d,prompt:!0,multiline:e,value:f}),this},OK:{ok:!0},CANCEL:{cancel:!0},OKCANCEL:{ok:!0,cancel:!0},YESNO:{yes:!0,no:!0},YESNOCANCEL:{yes:!0,no:!0,cancel:!0},INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"}}}(),Ext.Msg=Ext.MessageBox,Ext.dd.PanelProxy=Ext.extend(Object,{constructor:function(a,b){this.panel=a,this.id=this.panel.id+"-ddproxy",Ext.apply(this,b)},insertProxy:!0,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){this.ghost&&(this.proxy&&(this.proxy.remove(),delete this.proxy),this.panel.el.dom.style.display="",this.ghost.remove(),delete this.ghost)},show:function(){this.ghost||(this.ghost=this.panel.createGhost(this.panel.initialConfig.cls,undefined,Ext.getBody()),this.ghost.setXY(this.panel.el.getXY()),this.insertProxy&&(this.proxy=this.panel.el.insertSibling({cls:"x-panel-dd-spacer"}),this.proxy.setSize(this.panel.getSize())),this.panel.el.dom.style.display="none")},repair:function(a,b,c){this.hide(),typeof b=="function"&&b.call(c||this)},moveProxy:function(a,b){this.proxy&&a.insertBefore(this.proxy.dom,b)}}),Ext.Panel.DD=Ext.extend(Ext.dd.DragSource,{constructor:function(a,b){this.panel=a,this.dragData={panel:a},this.proxy=new Ext.dd.PanelProxy(a,b),Ext.Panel.DD.superclass.constructor.call(this,a.el,b);var c=a.header,d=a.body;c&&(this.setHandleElId(c.id),d=a.header),d.setStyle("cursor","move"),this.scroll=!1},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(a,b){this.proxy.show()},b4MouseDown:function(a){var b=a.getPageX(),c=a.getPageY();this.autoOffset(b,c)},onInitDrag:function(a,b){return this.onStartDrag(a,b),!0},createFrame:Ext.emptyFn,getDragEl:function(a){return this.proxy.ghost.dom},endDrag:function(a){this.proxy.hide(),this.panel.saveState()},autoOffset:function(a,b){a-=this.startPageX,b-=this.startPageY,this.setDelta(a,b)}}),Ext.state.Provider=Ext.extend(Ext.util.Observable,{constructor:function(){this.addEvents("statechange"),this.state={},Ext.state.Provider.superclass.constructor.call(this)},get:function(a,b){return typeof this.state[a]=="undefined"?b:this.state[a]},clear:function(a){delete this.state[a],this.fireEvent("statechange",this,a,null)},set:function(a,b){this.state[a]=b,this.fireEvent("statechange",this,a,b)},decodeValue:function(a){var b=/^(a|n|d|b|s|o|e)\:(.*)$/,c=b.exec(unescape(a)),d,e,f,g;if(!c||!c[1])return;e=c[1],f=c[2];switch(e){case"e":return null;case"n":return parseFloat(f);case"d":return new Date(Date.parse(f));case"b":return f=="1";case"a":return d=[],f!=""&&Ext.each(f.split("^"),function(a){d.push(this.decodeValue(a))},this),d;case"o":return d={},f!=""&&Ext.each(f.split("^"),function(a){g=a.split("="),d[g[0]]=this.decodeValue(g[1])},this),d;default:return f}},encodeValue:function(a){var b,c="",d=0,e,f;if(a==null)return"e:1";if(typeof a=="number")b="n:"+a;else if(typeof a=="boolean")b="b:"+(a?"1":"0");else if(Ext.isDate(a))b="d:"+a.toGMTString();else if(Ext.isArray(a)){for(e=a.length;d<e;d++)c+=this.encodeValue(a[d]),d!=e-1&&(c+="^");b="a:"+c}else if(typeof a=="object"){for(f in a)typeof a[f]!="function"&&a[f]!==undefined&&(c+=f+"="+this.encodeValue(a[f])+"^");b="o:"+c.substring(0,c.length-1)}else b="s:"+a;return escape(b)}}),Ext.state.Manager=function(){var a=new Ext.state.Provider;return{setProvider:function(b){a=b},get:function(b,c){return a.get(b,c)},set:function(b,c){a.set(b,c)},clear:function(b){a.clear(b)},getProvider:function(){return a}}}(),Ext.state.CookieProvider=Ext.extend(Ext.state.Provider,{constructor:function(a){Ext.state.CookieProvider.superclass.constructor.call(this),this.path="/",this.expires=new Date((new Date).getTime()+6048e5),this.domain=null,this.secure=!1,Ext.apply(this,a),this.state=this.readCookies()},set:function(a,b){if(typeof b=="undefined"||b===null){this.clear(a);return}this.setCookie(a,b),Ext.state.CookieProvider.superclass.set.call(this,a,b)},clear:function(a){this.clearCookie(a),Ext.state.CookieProvider.superclass.clear.call(this,a)},readCookies:function(){var a={},b=document.cookie+";",c=/\s?(.*?)=(.*?);/g,d,e,f;while((d=c.exec(b))!=null)e=d[1],f=d[2],e&&e.substring(0,3)=="ys-"&&(a[e.substr(3)]=this.decodeValue(f));return a},setCookie:function(a,b){document.cookie="ys-"+a+"="+this.encodeValue(b)+(this.expires==null?"":"; expires="+this.expires.toGMTString())+(this.path==null?"":"; path="+this.path)+(this.domain==null?"":"; domain="+this.domain)+(this.secure==1?"; secure":"")},clearCookie:function(a){document.cookie="ys-"+a+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+(this.path==null?"":"; path="+this.path)+(this.domain==null?"":"; domain="+this.domain)+(this.secure==1?"; secure":"")}}),Ext.DataView=Ext.extend(Ext.BoxComponent,{selectedClass:"x-view-selected",emptyText:"",deferEmptyText:!0,trackOver:!1,blockRefresh:!1,last:!1,initComponent:function(){Ext.DataView.superclass.initComponent.call(this);if(Ext.isString(this.tpl)||Ext.isArray(this.tpl))this.tpl=new Ext.XTemplate(this.tpl);this.addEvents("beforeclick","click","mouseenter","mouseleave","containerclick","dblclick","contextmenu","containercontextmenu","selectionchange","beforeselect"),this.store=Ext.StoreMgr.lookup(this.store),this.all=new Ext.CompositeElementLite,this.selected=new Ext.CompositeElementLite},afterRender:function(){Ext.DataView.superclass.afterRender.call(this),this.mon(this.getTemplateTarget(),{click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu,scope:this}),(this.overClass||this.trackOver)&&this.mon(this.getTemplateTarget(),{mouseover:this.onMouseOver,mouseout:this.onMouseOut,scope:this}),this.store&&this.bindStore(this.store,!0)},refresh:function(){this.clearSelections(!1,!0);var a=this.getTemplateTarget(),b=this.store.getRange();a.update(""),b.length<1?((!this.deferEmptyText||this.hasSkippedEmptyText)&&a.update(this.emptyText),this.all.clear()):(this.tpl.overwrite(a,this.collectData(b,0)),this.all.fill(Ext.query(this.itemSelector,a.dom)),this.updateIndexes(0)),this.hasSkippedEmptyText=!0},getTemplateTarget:function(){return this.el},prepareData:function(a){return a},collectData:function(a,b){var c=[],d=0,e=a.length;for(;d<e;d++)c[c.length]=this.prepareData(a[d].data,b+d,a[d]);return c},bufferRender:function(a,b){var c=document.createElement("div");return this.tpl.overwrite(c,this.collectData(a,b)),Ext.query(this.itemSelector,c)},onUpdate:function(a,b){var c=this.store.indexOf(b);if(c>-1){var d=this.isSelected(c),e=this.all.elements[c],f=this.bufferRender([b],c)[0];this.all.replaceElement(c,f,!0),d&&(this.selected.replaceElement(e,f),this.all.item(c).addClass(this.selectedClass)),this.updateIndexes(c,c)}},onAdd:function(a,b,c){if(this.all.getCount()===0){this.refresh();return}var d=this.bufferRender(b,c),e,f=this.all.elements;c<this.all.getCount()?(e=this.all.item(c).insertSibling(d,"before",!0),f.splice.apply(f,[c,0].concat(d))):(e=this.all.last().insertSibling(d,"after",!0),f.push.apply(f,d)),this.updateIndexes(c)},onRemove:function(a,b,c){this.deselect(c),this.all.removeElement(c,!0),this.updateIndexes(c),this.store.getCount()===0&&this.refresh()},refreshNode:function(a){this.onUpdate(this.store,this.store.getAt(a))},updateIndexes:function(a,b){var c=this.all.elements;a=a||0,b=b||(b===0?0:c.length-1);for(var d=a;d<=b;d++)c[d].viewIndex=d},getStore:function(){return this.store},bindStore:function(a,b){!b&&this.store&&(a!==this.store&&this.store.autoDestroy?this.store.destroy():(this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("datachanged",this.onDataChanged,this),this.store.un("add",this.onAdd,this),this.store.un("remove",this.onRemove,this),this.store.un("update",this.onUpdate,this),this.store.un("clear",this.refresh,this)),a||(this.store=null)),a&&(a=Ext.StoreMgr.lookup(a),a.on({scope:this,beforeload:this.onBeforeLoad,datachanged:this.onDataChanged,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,clear:this.refresh})),this.store=a,a&&this.refresh()},onDataChanged:function(){this.blockRefresh!==!0&&this.refresh.apply(this,arguments)},findItemFromChild:function(a){return Ext.fly(a).findParent(this.itemSelector,this.getTemplateTarget())},onClick:function(a){var b=a.getTarget(this.itemSelector,this.getTemplateTarget()),c;b?(c=this.indexOf(b),this.onItemClick(b,c,a)!==!1&&this.fireEvent("click",this,c,b,a)):this.fireEvent("containerclick",this,a)!==!1&&this.onContainerClick(a)},onContainerClick:function(a){this.clearSelections()},onContextMenu:function(a){var b=a.getTarget(this.itemSelector,this.getTemplateTarget());b?this.fireEvent("contextmenu",this,this.indexOf(b),b,a):this.fireEvent("containercontextmenu",this,a)},onDblClick:function(a){var b=a.getTarget(this.itemSelector,this.getTemplateTarget());b&&this.fireEvent("dblclick",this,this.indexOf(b),b,a)},onMouseOver:function(a){var b=a.getTarget(this.itemSelector,this.getTemplateTarget());b&&b!==this.lastItem&&(this.lastItem=b,Ext.fly(b).addClass(this.overClass),this.fireEvent("mouseenter",this,this.indexOf(b),b,a))},onMouseOut:function(a){this.lastItem&&(a.within(this.lastItem,!0,!0)||(Ext.fly(this.lastItem).removeClass(this.overClass),this.fireEvent("mouseleave",this,this.indexOf(this.lastItem),this.lastItem,a),delete this.lastItem))},onItemClick:function(a,b,c){return this.fireEvent("beforeclick",this,b,a,c)===!1?!1:(this.multiSelect?(this.doMultiSelection(a,b,c),c.preventDefault()):this.singleSelect&&(this.doSingleSelection(a,b,c),c.preventDefault()),!0)},doSingleSelection:function(a,b,c){c.ctrlKey&&this.isSelected(b)?this.deselect(b):this.select(b,!1)},doMultiSelection:function(a,b,c){if(c.shiftKey&&this.last!==!1){var d=this.last;this.selectRange(d,b,c.ctrlKey),this.last=d}else(c.ctrlKey||this.simpleSelect)&&this.isSelected(b)?this.deselect(b):this.select(b,c.ctrlKey||c.shiftKey||this.simpleSelect)},getSelectionCount:function(){return this.selected.getCount()},getSelectedNodes:function(){return this.selected.elements},getSelectedIndexes:function(){var a=[],b=this.selected.elements,c=0,d=b.length;for(;c<d;c++)a.push(b[c].viewIndex);return a},getSelectedRecords:function(){return this.getRecords(this.selected.elements)},getRecords:function(a){var b=[],c=0,d=a.length;for(;c<d;c++)b[b.length]=this.store.getAt(a[c].viewIndex);return b},getRecord:function(a){return this.store.getAt(a.viewIndex)},clearSelections:function(a,b){(this.multiSelect||this.singleSelect)&&this.selected.getCount()>0&&(b||this.selected.removeClass(this.selectedClass),this.selected.clear(),this.last=!1,a||this.fireEvent("selectionchange",this,this.selected.elements))},isSelected:function(a){return this.selected.contains(this.getNode(a))},deselect:function(a){this.isSelected(a)&&(a=this.getNode(a),this.selected.removeElement(a),this.last==a.viewIndex&&(this.last=!1),Ext.fly(a).removeClass(this.selectedClass),this.fireEvent("selectionchange",this,this.selected.elements))},select:function(a,b,c){if(Ext.isArray(a)){b||this.clearSelections(!0);for(var d=0,e=a.length;d<e;d++)this.select(a[d],!0,!0);c||this.fireEvent("selectionchange",this,this.selected.elements)}else{var f=this.getNode(a);b||this.clearSelections(!0),f&&!this.isSelected(f)&&this.fireEvent("beforeselect",this,f,this.selected.elements)!==!1&&(Ext.fly(f).addClass(this.selectedClass),this.selected.add(f),this.last=f.viewIndex,c||this.fireEvent("selectionchange",this,this.selected.elements))}},selectRange:function(a,b,c){c||this.clearSelections(!0),this.select(this.getNodes(a,b),!0)},getNode:function(a){if(Ext.isString(a))return document.getElementById(a);if(Ext.isNumber(a))return this.all.elements[a];if(a instanceof Ext.data.Record){var b=this.store.indexOf(a);return this.all.elements[b]}return a},getNodes:function(a,b){var c=this.all.elements,d=[],e;a=a||0,b=Ext.isDefined(b)?b:Math.max(c.length-1,0);if(a<=b)for(e=a;e<=b&&c[e];e++)d.push(c[e]);else for(e=a;e>=b&&c[e];e--)d.push(c[e]);return d},indexOf:function(a){return a=this.getNode(a),Ext.isNumber(a.viewIndex)?a.viewIndex:this.all.indexOf(a)},onBeforeLoad:function(){this.loadingText&&(this.clearSelections(!1,!0),this.getTemplateTarget().update('<div class="loading-indicator">'+this.loadingText+"</div>"),this.all.clear())},onDestroy:function(){this.all.clear(),this.selected.clear(),Ext.DataView.superclass.onDestroy.call(this),this.bindStore(null)}}),Ext.DataView.prototype.setStore=Ext.DataView.prototype.bindStore,Ext.reg("dataview",Ext.DataView),Ext.list.ListView=Ext.extend(Ext.DataView,{itemSelector:"dl",selectedClass:"x-list-selected",overClass:"x-list-over",scrollOffset:undefined,columnResize:!0,columnSort:!0,maxColumnWidth:Ext.isIE?99:100,initComponent:function(){this.columnResize&&(this.colResizer=new Ext.list.ColumnResizer(this.colResizer),this.colResizer.init(this)),this.columnSort&&(this.colSorter=new Ext.list.Sorter(this.columnSort),this.colSorter.init(this)),this.internalTpl||(this.internalTpl=new Ext.XTemplate('<div class="x-list-header"><div class="x-list-header-inner">','<tpl for="columns">','<div style="width:{[values.width*100]}%;text-align:{align};"><em unselectable="on" id="',this.id,'-xlhd-{#}">',"{header}","</em></div>","</tpl>",'<div class="x-clear"></div>',"</div></div>",'<div class="x-list-body"><div class="x-list-body-inner">',"</div></div>")),this.tpl||(this.tpl=new Ext.XTemplate('<tpl for="rows">',"<dl>",'<tpl for="parent.columns">','<dt style="width:{[values.width*100]}%;text-align:{align};">','<em unselectable="on"<tpl if="cls"> class="{cls}</tpl>">',"{[values.tpl.apply(parent)]}","</em></dt>","</tpl>",'<div class="x-clear"></div>',"</dl>","</tpl>"));var a=this.columns,b=0,c=0,d=a.length,e=[];for(var f=0;f<d;f++){var g=a[f];g.isColumn||(g.xtype=g.xtype?/^lv/.test(g.xtype)?g.xtype:"lv"+g.xtype:"lvcolumn",g=Ext.create(g)),g.width&&(b+=g.width*100,b>this.maxColumnWidth&&(g.width-=(b-this.maxColumnWidth)/100),c++),e.push(g)}a=this.columns=e;if(c<d){var h=d-c;if(b<this.maxColumnWidth){var i=(this.maxColumnWidth-b)/h/100;for(var j=0;j<d;j++){var g=a[j];g.width||(g.width=i)}}}Ext.list.ListView.superclass.initComponent.call(this)},onRender:function(){this.autoEl={cls:"x-list-wrap"},Ext.list.ListView.superclass.onRender.apply(this,arguments),this.internalTpl.overwrite(this.el,{columns:this.columns}),this.innerBody=Ext.get(this.el.dom.childNodes[1].firstChild),this.innerHd=Ext.get(this.el.dom.firstChild.firstChild),this.hideHeaders&&(this.el.dom.firstChild.style.display="none")},getTemplateTarget:function(){return this.innerBody},collectData:function(){var a=Ext.list.ListView.superclass.collectData.apply(this,arguments);return{columns:this.columns,rows:a}},verifyInternalSize:function(){this.lastSize&&this.onResize(this.lastSize.width,this.lastSize.height)},onResize:function(a,b){var c=this.innerBody.dom,d=this.innerHd.dom,e=a-Ext.num(this.scrollOffset,Ext.getScrollBarWidth())+"px",f;if(!c)return;f=c.parentNode,Ext.isNumber(a)&&(this.reserveScrollOffset||f.offsetWidth-f.clientWidth>10?(c.style.width=e,d.style.width=e):(c.style.width=a+"px",d.style.width=a+"px",setTimeout(function(){f.offsetWidth-f.clientWidth>10&&(c.style.width=e,d.style.width=e)},10))),Ext.isNumber(b)&&(f.style.height=Math.max(0,b-d.parentNode.offsetHeight)+"px")},updateIndexes:function(){Ext.list.ListView.superclass.updateIndexes.apply(this,arguments),this.verifyInternalSize()},findHeaderIndex:function(a){a=a.dom||a;var b=a.parentNode,c=b.parentNode.childNodes,d=0,e;for(;e=c[d];d++)if(e==b)return d;return-1},setHdWidths:function(){var a=this.innerHd.dom.getElementsByTagName("div"),b=0,c=this.columns,d=c.length;for(;b<d;b++)a[b].style.width=c[b].width*100+"%"}}),Ext.reg("listview",Ext.list.ListView),Ext.ListView=Ext.list.ListView,Ext.list.Column=Ext.extend(Object,{isColumn:!0,align:"left",header:"",width:null,cls:"",constructor:function(a){a.tpl?Ext.isString(a.tpl)&&(a.tpl=new Ext.XTemplate(a.tpl)):a.tpl=new Ext.XTemplate("{"+a.dataIndex+"}"),Ext.apply(this,a)}}),Ext.reg("lvcolumn",Ext.list.Column),Ext.list.NumberColumn=Ext.extend(Ext.list.Column,{format:"0,000.00",constructor:function(a){a.tpl=a.tpl||new Ext.XTemplate("{"+a.dataIndex+':number("'+(a.format||this.format)+'")}'),Ext.list.NumberColumn.superclass.constructor.call(this,a)}}),Ext.reg("lvnumbercolumn",Ext.list.NumberColumn),Ext.list.DateColumn=Ext.extend(Ext.list.Column,{format:"m/d/Y",constructor:function(a){a.tpl=a.tpl||new Ext.XTemplate("{"+a.dataIndex+':date("'+(a.format||this.format)+'")}'),Ext.list.DateColumn.superclass.constructor.call(this,a)}}),Ext.reg("lvdatecolumn",Ext.list.DateColumn),Ext.list.BooleanColumn=Ext.extend(Ext.list.Column,{trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(a){a.tpl=a.tpl||new Ext.XTemplate("{"+a.dataIndex+":this.format}");var b=this.trueText,c=this.falseText,d=this.undefinedText;a.tpl.format=function(a){return a===undefined?d:!a||a==="false"?c:b},Ext.list.DateColumn.superclass.constructor.call(this,a)}}),Ext.reg("lvbooleancolumn",Ext.list.BooleanColumn),Ext.list.ColumnResizer=Ext.extend(Ext.util.Observable,{minPct:.05,constructor:function(a){Ext.apply(this,a),Ext.list.ColumnResizer.superclass.constructor.call(this)},init:function(a){this.view=a,a.on("render",this.initEvents,this)},initEvents:function(a){a.mon(a.innerHd,"mousemove",this.handleHdMove,this),this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeStart.createDelegate(this),onStart:this.onStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onEnd.createDelegate(this),tolerance:3,autoStart:300}),this.tracker.initEl(a.innerHd),a.on("beforedestroy",this.tracker.destroy,this.tracker)},handleHdMove:function(a,b){var c=5,d=a.getPageX(),e=a.getTarget("em",3,!0);if(e){var f=e.getRegion(),g=e.dom.style,h=e.dom.parentNode;d-f.left<=c&&h!=h.parentNode.firstChild?(this.activeHd=Ext.get(h.previousSibling.firstChild),g.cursor=Ext.isWebKit?"e-resize":"col-resize"):f.right-d<=c&&h!=h.parentNode.lastChild.previousSibling?(this.activeHd=e,g.cursor=Ext.isWebKit?"w-resize":"col-resize"):(delete this.activeHd,g.cursor="")}},onBeforeStart:function(a){return this.dragHd=this.activeHd,!!this.dragHd},onStart:function(a){var b=this,c=b.view,d=b.dragHd,e=b.tracker.getXY()[0];b.proxy=c.el.createChild({cls:"x-list-resizer"}),b.dragX=d.getX(),b.headerIndex=c.findHeaderIndex(d),b.headersDisabled=c.disableHeaders,c.disableHeaders=!0,b.proxy.setHeight(c.el.getHeight()),b.proxy.setX(b.dragX),b.proxy.setWidth(e-b.dragX),this.setBoundaries()},setBoundaries:function(a){var b=this.view,c=this.headerIndex,d=b.innerHd.getWidth(),a=b.innerHd.getX(),e=Math.ceil(d*this.minPct),f=d-e,g=b.columns.length,h=b.innerHd.select("em",!0),i=e+a,j=f+a,k;g==2?(this.minX=i,this.maxX=j):(k=h.item(c+2),this.minX=h.item(c).getX()+e,this.maxX=k?k.getX()-e:j,c==0?this.minX=i:c==g-2&&(this.maxX=j))},onDrag:function(a){var b=this,c=b.tracker.getXY()[0].
constrain(b.minX,b.maxX);b.proxy.setWidth(c-this.dragX)},onEnd:function(a){var b=this.proxy.getWidth(),c=this.headerIndex,d=this.view,e=d.columns,f=d.innerHd.getWidth(),g=Math.ceil(b*d.maxColumnWidth/f)/100,h=this.headersDisabled,i=e[c],j=e[c+1],k=i.width+j.width;this.proxy.remove(),i.width=g,j.width=k-g,delete this.dragHd,d.setHdWidths(),d.refresh(),setTimeout(function(){d.disableHeaders=h},100)}}),Ext.ListView.ColumnResizer=Ext.list.ColumnResizer,Ext.list.Sorter=Ext.extend(Ext.util.Observable,{sortClasses:["sort-asc","sort-desc"],constructor:function(a){Ext.apply(this,a),Ext.list.Sorter.superclass.constructor.call(this)},init:function(a){this.view=a,a.on("render",this.initEvents,this)},initEvents:function(a){a.mon(a.innerHd,"click",this.onHdClick,this),a.innerHd.setStyle("cursor","pointer"),a.mon(a.store,"datachanged",this.updateSortState,this),this.updateSortState.defer(10,this,[a.store])},updateSortState:function(a){var b=a.getSortState();if(!b)return;this.sortState=b;var c=this.view.columns,d=-1;for(var e=0,f=c.length;e<f;e++)if(c[e].dataIndex==b.field){d=e;break}if(d!=-1){var g=b.direction;this.updateSortIcon(d,g)}},updateSortIcon:function(a,b){var c=this.sortClasses,d=this.view.innerHd.select("em").removeClass(c);d.item(a).addClass(c[b=="DESC"?1:0])},onHdClick:function(a){var b=a.getTarget("em",3);if(b&&!this.view.disableHeaders){var c=this.view.findHeaderIndex(b);this.view.store.sort(this.view.columns[c].dataIndex)}}}),Ext.ListView.Sorter=Ext.list.Sorter,Ext.TabPanel=Ext.extend(Ext.Panel,{deferredRender:!0,tabWidth:120,minTabWidth:30,resizeTabs:!1,enableTabScroll:!1,scrollIncrement:0,scrollRepeatInterval:400,scrollDuration:.35,animScroll:!0,tabPosition:"top",baseCls:"x-tab-panel",autoTabs:!1,autoTabSelector:"div.x-tab",activeTab:undefined,tabMargin:2,plain:!1,wheelIncrement:20,idDelimiter:"__",itemCls:"x-tab-item",elements:"body",headerAsText:!1,frame:!1,hideBorders:!0,initComponent:function(){this.frame=!1,Ext.TabPanel.superclass.initComponent.call(this),this.addEvents("beforetabchange","tabchange","contextmenu"),this.setLayout(new Ext.layout.CardLayout(Ext.apply({layoutOnCardChange:this.layoutOnTabChange,deferredRender:this.deferredRender},this.layoutConfig))),this.tabPosition=="top"?(this.elements+=",header",this.stripTarget="header"):(this.elements+=",footer",this.stripTarget="footer"),this.stack||(this.stack=Ext.TabPanel.AccessStack()),this.initItems()},onRender:function(a,b){Ext.TabPanel.superclass.onRender.call(this,a,b);if(this.plain){var c=this.tabPosition=="top"?"header":"footer";this[c].addClass("x-tab-panel-"+c+"-plain")}var d=this[this.stripTarget];this.stripWrap=d.createChild({cls:"x-tab-strip-wrap",cn:{tag:"ul",cls:"x-tab-strip x-tab-strip-"+this.tabPosition}});var e=this.tabPosition=="bottom"?this.stripWrap:null;d.createChild({cls:"x-tab-strip-spacer"},e),this.strip=new Ext.Element(this.stripWrap.dom.firstChild),this.edge=this.strip.createChild({tag:"li",cls:"x-tab-edge",cn:[{tag:"span",cls:"x-tab-strip-text",cn:"&#160;"}]}),this.strip.createChild({cls:"x-clear"}),this.body.addClass("x-tab-panel-body-"+this.tabPosition);if(!this.itemTpl){var f=new Ext.Template('<li class="{cls}" id="{id}"><a class="x-tab-strip-close"></a>','<a class="x-tab-right" href="#"><em class="x-tab-left">','<span class="x-tab-strip-inner"><span class="x-tab-strip-text {iconCls}">{text}</span></span>',"</em></a></li>");f.disableFormats=!0,f.compile(),Ext.TabPanel.prototype.itemTpl=f}this.items.each(this.initTab,this)},afterRender:function(){Ext.TabPanel.superclass.afterRender.call(this),this.autoTabs&&this.readTabs(!1);if(this.activeTab!==undefined){var a=Ext.isObject(this.activeTab)?this.activeTab:this.items.get(this.activeTab);delete this.activeTab,this.setActiveTab(a)}},initEvents:function(){Ext.TabPanel.superclass.initEvents.call(this),this.mon(this.strip,{scope:this,mousedown:this.onStripMouseDown,contextmenu:this.onStripContextMenu}),this.enableTabScroll&&this.mon(this.strip,"mousewheel",this.onWheel,this)},findTargets:function(a){var b=null,c=a.getTarget("li:not(.x-tab-edge)",this.strip);if(c){b=this.getComponent(c.id.split(this.idDelimiter)[1]);if(b.disabled)return{close:null,item:null,el:null}}return{close:a.getTarget(".x-tab-strip-close",this.strip),item:b,el:c}},onStripMouseDown:function(a){if(a.button!==0)return;a.preventDefault();var b=this.findTargets(a);if(b.close){b.item.fireEvent("beforeclose",b.item)!==!1&&(b.item.fireEvent("close",b.item),this.remove(b.item));return}b.item&&b.item!=this.activeTab&&this.setActiveTab(b.item)},onStripContextMenu:function(a){a.preventDefault();var b=this.findTargets(a);b.item&&this.fireEvent("contextmenu",this,b.item,a)},readTabs:function(a){a===!0&&this.items.each(function(a){this.remove(a)},this);var b=this.el.query(this.autoTabSelector);for(var c=0,d=b.length;c<d;c++){var e=b[c],f=e.getAttribute("title");e.removeAttribute("title"),this.add({title:f,contentEl:e})}},initTab:function(a,b){var c=this.strip.dom.childNodes[b],d=this.getTemplateArgs(a),e=c?this.itemTpl.insertBefore(c,d):this.itemTpl.append(this.strip,d),f="x-tab-strip-over",g=Ext.get(e);g.hover(function(){a.disabled||g.addClass(f)},function(){g.removeClass(f)}),a.tabTip&&(g.child("span.x-tab-strip-text",!0).qtip=a.tabTip),a.tabEl=e,g.select("a").on("click",function(a){a.getPageX()||this.onStripMouseDown(a)},this,{preventDefault:!0}),a.on({scope:this,disable:this.onItemDisabled,enable:this.onItemEnabled,titlechange:this.onItemTitleChanged,iconchange:this.onItemIconChanged,beforeshow:this.onBeforeShowItem})},getTemplateArgs:function(a){var b=a.closable?"x-tab-strip-closable":"";return a.disabled&&(b+=" x-item-disabled"),a.iconCls&&(b+=" x-tab-with-icon"),a.tabCls&&(b+=" "+a.tabCls),{id:this.id+this.idDelimiter+a.getItemId(),text:a.title,cls:b,iconCls:a.iconCls||""}},onAdd:function(a){Ext.TabPanel.superclass.onAdd.call(this,a);if(this.rendered){var b=this.items;this.initTab(a,b.indexOf(a)),this.delegateUpdates()}},onBeforeAdd:function(a){var b=a.events?this.items.containsKey(a.getItemId())?a:null:this.items.get(a);if(b)return this.setActiveTab(a),!1;Ext.TabPanel.superclass.onBeforeAdd.apply(this,arguments);var c=a.elements;a.elements=c?c.replace(",header",""):c,a.border=a.border===!0},onRemove:function(a){var b=Ext.get(a.tabEl);b&&(b.select("a").removeAllListeners(),Ext.destroy(b)),Ext.TabPanel.superclass.onRemove.call(this,a),this.stack.remove(a),delete a.tabEl,a.un("disable",this.onItemDisabled,this),a.un("enable",this.onItemEnabled,this),a.un("titlechange",this.onItemTitleChanged,this),a.un("iconchange",this.onItemIconChanged,this),a.un("beforeshow",this.onBeforeShowItem,this);if(a==this.activeTab){var c=this.stack.next();c?this.setActiveTab(c):this.items.getCount()>0?this.setActiveTab(0):this.setActiveTab(null)}this.destroying||this.delegateUpdates()},onBeforeShowItem:function(a){if(a!=this.activeTab)return this.setActiveTab(a),!1},onItemDisabled:function(a){var b=this.getTabEl(a);b&&Ext.fly(b).addClass("x-item-disabled"),this.stack.remove(a)},onItemEnabled:function(a){var b=this.getTabEl(a);b&&Ext.fly(b).removeClass("x-item-disabled")},onItemTitleChanged:function(a){var b=this.getTabEl(a);b&&(Ext.fly(b).child("span.x-tab-strip-text",!0).innerHTML=a.title)},onItemIconChanged:function(a,b,c){var d=this.getTabEl(a);d&&(d=Ext.get(d),d.child("span.x-tab-strip-text").replaceClass(c,b),d[Ext.isEmpty(b)?"removeClass":"addClass"]("x-tab-with-icon"))},getTabEl:function(a){var b=this.getComponent(a);return b?b.tabEl:null},onResize:function(){Ext.TabPanel.superclass.onResize.apply(this,arguments),this.delegateUpdates()},beginUpdate:function(){this.suspendUpdates=!0},endUpdate:function(){this.suspendUpdates=!1,this.delegateUpdates()},hideTabStripItem:function(a){a=this.getComponent(a);var b=this.getTabEl(a);b&&(b.style.display="none",this.delegateUpdates()),this.stack.remove(a)},unhideTabStripItem:function(a){a=this.getComponent(a);var b=this.getTabEl(a);b&&(b.style.display="",this.delegateUpdates())},delegateUpdates:function(){var a=this.rendered;if(this.suspendUpdates)return;this.resizeTabs&&a&&this.autoSizeTabs(),this.enableTabScroll&&a&&this.autoScrollTabs()},autoSizeTabs:function(){var a=this.items.length,b=this.tabPosition!="bottom"?"header":"footer",c=this[b].dom.offsetWidth,d=this[b].dom.clientWidth;if(!this.resizeTabs||a<1||!d)return;var e=Math.max(Math.min(Math.floor((d-4)/a)-this.tabMargin,this.tabWidth),this.minTabWidth);this.lastTabWidth=e;var f=this.strip.query("li:not(.x-tab-edge)");for(var g=0,h=f.length;g<h;g++){var i=f[g],j=Ext.fly(i).child(".x-tab-strip-inner",!0),k=i.offsetWidth,l=j.offsetWidth;j.style.width=e-(k-l)+"px"}},adjustBodyWidth:function(a){return this.header&&this.header.setWidth(a),this.footer&&this.footer.setWidth(a),a},setActiveTab:function(a){a=this.getComponent(a);if(this.fireEvent("beforetabchange",this,a,this.activeTab)===!1)return;if(!this.rendered){this.activeTab=a;return}if(this.activeTab!=a){if(this.activeTab){var b=this.getTabEl(this.activeTab);b&&Ext.fly(b).removeClass("x-tab-strip-active")}this.activeTab=a;if(a){var c=this.getTabEl(a);Ext.fly(c).addClass("x-tab-strip-active"),this.stack.add(a),this.layout.setActiveItem(a),this.delegateUpdates(),this.scrolling&&this.scrollToTab(a,this.animScroll)}this.fireEvent("tabchange",this,a)}},getActiveTab:function(){return this.activeTab||null},getItem:function(a){return this.getComponent(a)},autoScrollTabs:function(){this.pos=this.tabPosition=="bottom"?this.footer:this.header;var a=this.items.length,b=this.pos.dom.offsetWidth,c=this.pos.dom.clientWidth,d=this.stripWrap,e=d.dom,f=e.offsetWidth,g=this.getScrollPos(),h=this.edge.getOffsetsTo(this.stripWrap)[0]+g;if(!this.enableTabScroll||f<20)return;if(a==0||h<=c){e.scrollLeft=0,d.setWidth(c);if(this.scrolling){this.scrolling=!1,this.pos.removeClass("x-tab-scrolling"),this.scrollLeft.hide(),this.scrollRight.hide();if(Ext.isAir||Ext.isWebKit)e.style.marginLeft="",e.style.marginRight=""}}else{if(!this.scrolling){this.pos.addClass("x-tab-scrolling");if(Ext.isAir||Ext.isWebKit)e.style.marginLeft="18px",e.style.marginRight="18px"}c-=d.getMargins("lr"),d.setWidth(c>20?c:20),this.scrolling||(this.scrollLeft?(this.scrollLeft.show(),this.scrollRight.show()):this.createScrollers()),this.scrolling=!0,g>h-c?e.scrollLeft=h-c:this.scrollToTab(this.activeTab,!1),this.updateScrollButtons()}},createScrollers:function(){this.pos.addClass("x-tab-scrolling-"+this.tabPosition);var a=this.stripWrap.dom.offsetHeight,b=this.pos.insertFirst({cls:"x-tab-scroller-left"});b.setHeight(a),b.addClassOnOver("x-tab-scroller-left-over"),this.leftRepeater=new Ext.util.ClickRepeater(b,{interval:this.scrollRepeatInterval,handler:this.onScrollLeft,scope:this}),this.scrollLeft=b;var c=this.pos.insertFirst({cls:"x-tab-scroller-right"});c.setHeight(a),c.addClassOnOver("x-tab-scroller-right-over"),this.rightRepeater=new Ext.util.ClickRepeater(c,{interval:this.scrollRepeatInterval,handler:this.onScrollRight,scope:this}),this.scrollRight=c},getScrollWidth:function(){return this.edge.getOffsetsTo(this.stripWrap)[0]+this.getScrollPos()},getScrollPos:function(){return parseInt(this.stripWrap.dom.scrollLeft,10)||0},getScrollArea:function(){return parseInt(this.stripWrap.dom.clientWidth,10)||0},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},getScrollIncrement:function(){return this.scrollIncrement||(this.resizeTabs?this.lastTabWidth+2:100)},scrollToTab:function(a,b){if(!a)return;var c=this.getTabEl(a),d=this.getScrollPos(),e=this.getScrollArea(),f=Ext.fly(c).getOffsetsTo(this.stripWrap)[0]+d,g=f+c.offsetWidth;f<d?this.scrollTo(f,b):g>d+e&&this.scrollTo(g-e,b)},scrollTo:function(a,b){this.stripWrap.scrollTo("left",a,b?this.getScrollAnim():!1),b||this.updateScrollButtons()},onWheel:function(a){var b=a.getWheelDelta()*this.wheelIncrement*-1;a.stopEvent();var c=this.getScrollPos(),d=c+b,e=this.getScrollWidth()-this.getScrollArea(),f=Math.max(0,Math.min(e,d));f!=c&&this.scrollTo(f,!1)},onScrollRight:function(){var a=this.getScrollWidth()-this.getScrollArea(),b=this.getScrollPos(),c=Math.min(a,b+this.getScrollIncrement());c!=b&&this.scrollTo(c,this.animScroll)},onScrollLeft:function(){var a=this.getScrollPos(),b=Math.max(0,a-this.getScrollIncrement());b!=a&&this.scrollTo(b,this.animScroll)},updateScrollButtons:function(){var a=this.getScrollPos();this.scrollLeft[a===0?"addClass":"removeClass"]("x-tab-scroller-left-disabled"),this.scrollRight[a>=this.getScrollWidth()-this.getScrollArea()?"addClass":"removeClass"]("x-tab-scroller-right-disabled")},beforeDestroy:function(){Ext.destroy(this.leftRepeater,this.rightRepeater),this.deleteMembers("strip","edge","scrollLeft","scrollRight","stripWrap"),this.activeTab=null,Ext.TabPanel.superclass.beforeDestroy.apply(this)}}),Ext.reg("tabpanel",Ext.TabPanel),Ext.TabPanel.prototype.activate=Ext.TabPanel.prototype.setActiveTab,Ext.TabPanel.AccessStack=function(){var a=[];return{add:function(b){a.push(b),a.length>10&&a.shift()},remove:function(b){var c=[];for(var d=0,e=a.length;d<e;d++)a[d]!=b&&c.push(a[d]);a=c},next:function(){return a.pop()}}},Ext.Button=Ext.extend(Ext.BoxComponent,{hidden:!1,disabled:!1,pressed:!1,enableToggle:!1,menuAlign:"tl-bl?",type:"button",menuClassTarget:"tr:nth(2)",clickEvent:"click",handleMouseEvents:!0,tooltipType:"qtip",buttonSelector:"button:first-child",scale:"small",iconAlign:"left",arrowAlign:"right",initComponent:function(){this.menu&&(this.menu=Ext.menu.MenuMgr.get(this.menu),this.menu.ownerCt=this),Ext.Button.superclass.initComponent.call(this),this.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout"),this.menu&&(this.menu.ownerCt=undefined),Ext.isString(this.toggleGroup)&&(this.enableToggle=!0)},getTemplateArgs:function(){return[this.type,"x-btn-"+this.scale+" x-btn-icon-"+this.scale+"-"+this.iconAlign,this.getMenuClass(),this.cls,this.id]},setButtonClass:function(){this.useSetClass&&(Ext.isEmpty(this.oldCls)||this.el.removeClass([this.oldCls,"x-btn-pressed"]),this.oldCls=this.iconCls||this.icon?this.text?"x-btn-text-icon":"x-btn-icon":"x-btn-noicon",this.el.addClass([this.oldCls,this.pressed?"x-btn-pressed":null]))},getMenuClass:function(){return this.menu?this.arrowAlign!="bottom"?"x-btn-arrow":"x-btn-arrow-bottom":""},onRender:function(a,b){this.template||(Ext.Button.buttonTemplate||(Ext.Button.buttonTemplate=new Ext.Template('<table id="{4}" cellspacing="0" class="x-btn {3}"><tbody class="{1}">','<tr><td class="x-btn-tl"><i>&#160;</i></td><td class="x-btn-tc"></td><td class="x-btn-tr"><i>&#160;</i></td></tr>','<tr><td class="x-btn-ml"><i>&#160;</i></td><td class="x-btn-mc"><em class="{2}" unselectable="on"><button type="{0}"></button></em></td><td class="x-btn-mr"><i>&#160;</i></td></tr>','<tr><td class="x-btn-bl"><i>&#160;</i></td><td class="x-btn-bc"></td><td class="x-btn-br"><i>&#160;</i></td></tr>',"</tbody></table>"),Ext.Button.buttonTemplate.compile()),this.template=Ext.Button.buttonTemplate);var c,d=this.getTemplateArgs();b?c=this.template.insertBefore(b,d,!0):c=this.template.append(a,d,!0),this.btnEl=c.child(this.buttonSelector),this.mon(this.btnEl,{scope:this,focus:this.onFocus,blur:this.onBlur}),this.initButtonEl(c,this.btnEl),Ext.ButtonToggleMgr.register(this)},initButtonEl:function(a,b){this.el=a,this.setIcon(this.icon),this.setText(this.text),this.setIconClass(this.iconCls),Ext.isDefined(this.tabIndex)&&(b.dom.tabIndex=this.tabIndex),this.tooltip&&this.setTooltip(this.tooltip,!0),this.handleMouseEvents&&this.mon(a,{scope:this,mouseover:this.onMouseOver,mousedown:this.onMouseDown}),this.menu&&this.mon(this.menu,{scope:this,show:this.onMenuShow,hide:this.onMenuHide});if(this.repeat){var c=new Ext.util.ClickRepeater(a,Ext.isObject(this.repeat)?this.repeat:{});this.mon(c,"click",this.onRepeatClick,this)}else this.mon(a,this.clickEvent,this.onClick,this)},afterRender:function(){Ext.Button.superclass.afterRender.call(this),this.useSetClass=!0,this.setButtonClass(),this.doc=Ext.getDoc(),this.doAutoWidth()},setIconClass:function(a){return this.iconCls=a,this.el&&(this.btnEl.dom.className="",this.btnEl.addClass(["x-btn-text",a||""]),this.setButtonClass()),this},setTooltip:function(a,b){return this.rendered?(b||this.clearTip(),Ext.isObject(a)?(Ext.QuickTips.register(Ext.apply({target:this.btnEl.id},a)),this.tooltip=a):this.btnEl.dom[this.tooltipType]=a):this.tooltip=a,this},clearTip:function(){Ext.isObject(this.tooltip)&&Ext.QuickTips.unregister(this.btnEl)},beforeDestroy:function(){this.rendered&&this.clearTip(),this.menu&&this.destroyMenu!==!1&&Ext.destroy(this.btnEl,this.menu),Ext.destroy(this.repeater)},onDestroy:function(){this.rendered&&(this.doc.un("mouseover",this.monitorMouseOver,this),this.doc.un("mouseup",this.onMouseUp,this),delete this.doc,delete this.btnEl,Ext.ButtonToggleMgr.unregister(this)),Ext.Button.superclass.onDestroy.call(this)},doAutoWidth:function(){if(this.autoWidth!==!1&&this.el&&this.text&&this.width===undefined){this.el.setWidth("auto");if(Ext.isIE7&&Ext.isStrict){var a=this.btnEl;a&&a.getWidth()>20&&(a.clip(),a.setWidth(Ext.util.TextMetrics.measure(a,this.text).width+a.getFrameWidth("lr")))}this.minWidth&&this.el.getWidth()<this.minWidth&&this.el.setWidth(this.minWidth)}},setHandler:function(a,b){return this.handler=a,this.scope=b,this},setText:function(a){return this.text=a,this.el&&(this.btnEl.update(a||"&#160;"),this.setButtonClass()),this.doAutoWidth(),this},setIcon:function(a){return this.icon=a,this.el&&(this.btnEl.setStyle("background-image",a?"url("+a+")":""),this.setButtonClass()),this},getText:function(){return this.text},toggle:function(a,b){return a=a===undefined?!this.pressed:!!a,a!=this.pressed&&(this.rendered&&this.el[a?"addClass":"removeClass"]("x-btn-pressed"),this.pressed=a,b||(this.fireEvent("toggle",this,a),this.toggleHandler&&this.toggleHandler.call(this.scope||this,this,a))),this},onDisable:function(){this.onDisableChange(!0)},onEnable:function(){this.onDisableChange(!1)},onDisableChange:function(a){this.el&&((!Ext.isIE6||!this.text)&&this.el[a?"addClass":"removeClass"](this.disabledClass),this.el.dom.disabled=a),this.disabled=a},showMenu:function(){return this.rendered&&this.menu&&(this.tooltip&&Ext.QuickTips.getQuickTip().cancelShow(this.btnEl),this.menu.isVisible()&&this.menu.hide(),this.menu.ownerCt=this,this.menu.show(this.el,this.menuAlign)),this},hideMenu:function(){return this.hasVisibleMenu()&&this.menu.hide(),this},hasVisibleMenu:function(){return this.menu&&this.menu.ownerCt==this&&this.menu.isVisible()},onRepeatClick:function(a,b){this.onClick(b)},onClick:function(a){a&&a.preventDefault();if(a.button!==0)return;this.disabled||(this.doToggle(),this.menu&&!this.hasVisibleMenu()&&!this.ignoreNextClick&&this.showMenu(),this.fireEvent("click",this,a),this.handler&&this.handler.call(this.scope||this,this,a))},doToggle:function(){this.enableToggle&&(this.allowDepress!==!1||!this.pressed)&&this.toggle()},isMenuTriggerOver:function(a,b){return this.menu&&!b},isMenuTriggerOut:function(a,b){return this.menu&&!b},onMouseOver:function(a){if(!this.disabled){var b=a.within(this.el,!0);b||(this.el.addClass("x-btn-over"),this.monitoringMouseOver||(this.doc.on("mouseover",this.monitorMouseOver,this),this.monitoringMouseOver=!0),this.fireEvent("mouseover",this,a)),this.isMenuTriggerOver(a,b)&&this.fireEvent("menutriggerover",this,this.menu,a)}},monitorMouseOver:function(a){a.target!=this.el.dom&&!a.within(this.el)&&(this.monitoringMouseOver&&(this.doc.un("mouseover",this.monitorMouseOver,this),this.monitoringMouseOver=!1),this.onMouseOut(a))},onMouseOut:function(a){var b=a.within(this.el)&&a.target!=this.el.dom;this.el.removeClass("x-btn-over"),this.fireEvent("mouseout",this,a),this.isMenuTriggerOut(a,b)&&this.fireEvent("menutriggerout",this,this.menu,a)},focus:function(){this.btnEl.focus()},blur:function(){this.btnEl.blur()},onFocus:function(a){this.disabled||this.el.addClass("x-btn-focus")},onBlur:function(a){this.el.removeClass("x-btn-focus")},getClickEl:function(a,b){return this.el},onMouseDown:function(a){!this.disabled&&a.button===0&&(this.getClickEl(a).addClass("x-btn-click"),this.doc.on("mouseup",this.onMouseUp,this))},onMouseUp:function(a){a.button===0&&(this.getClickEl(a,!0).removeClass("x-btn-click"),this.doc.un("mouseup",this.onMouseUp,this))},onMenuShow:function(a){this.menu.ownerCt==this&&(this.menu.ownerCt=this,this.ignoreNextClick=0,this.el.addClass("x-btn-menu-active"),this.fireEvent("menushow",this,this.menu))},onMenuHide:function(a){this.menu.ownerCt==this&&(this.el.removeClass("x-btn-menu-active"),this.ignoreNextClick=this.restoreClick.defer(250,this),this.fireEvent("menuhide",this,this.menu),delete this.menu.ownerCt)},restoreClick:function(){this.ignoreNextClick=0}}),Ext.reg("button",Ext.Button),Ext.ButtonToggleMgr=function(){function b(b,c){if(c){var d=a[b.toggleGroup];for(var e=0,f=d.length;e<f;e++)d[e]!=b&&d[e].toggle(!1)}}var a={};return{register:function(c){if(!c.toggleGroup)return;var d=a[c.toggleGroup];d||(d=a[c.toggleGroup]=[]),d.push(c),c.on("toggle",b)},unregister:function(c){if(!c.toggleGroup)return;var d=a[c.toggleGroup];d&&(d.remove(c),c.un("toggle",b))},getPressed:function(b){var c=a[b];if(c)for(var d=0,e=c.length;d<e;d++)if(c[d].pressed===!0)return c[d];return null}}}(),Ext.SplitButton=Ext.extend(Ext.Button,{arrowSelector:"em",split:!0,initComponent:function(){Ext.SplitButton.superclass.initComponent.call(this),this.addEvents("arrowclick")},onRender:function(){Ext.SplitButton.superclass.onRender.apply(this,arguments),this.arrowTooltip&&(this.el.child(this.arrowSelector).dom[this.tooltipType]=this.arrowTooltip)},setArrowHandler:function(a,b){this.arrowHandler=a,this.scope=b},getMenuClass:function(){return"x-btn-split"+(this.arrowAlign=="bottom"?"-bottom":"")},isClickOnArrow:function(a){if(this.arrowAlign!="bottom"){var b=this.el.child("em.x-btn-split"),c=b.getRegion().right-b.getPadding("r");return a.getPageX()>c}return a.getPageY()>this.btnEl.getRegion().bottom},onClick:function(a,b){a.preventDefault(),this.disabled||(this.isClickOnArrow(a)?(this.menu&&!this.menu.isVisible()&&!this.ignoreNextClick&&this.showMenu(),this.fireEvent("arrowclick",this,a),this.arrowHandler&&this.arrowHandler.call(this.scope||this,this,a)):(this.doToggle(),this.fireEvent("click",this,a),this.handler&&this.handler.call(this.scope||this,this,a)))},isMenuTriggerOver:function(a){return this.menu&&a.target.tagName==this.arrowSelector},isMenuTriggerOut:function(a,b){return this.menu&&a.target.tagName!=this.arrowSelector}}),Ext.reg("splitbutton",Ext.SplitButton),Ext.CycleButton=Ext.extend(Ext.SplitButton,{getItemText:function(a){if(a&&this.showText===!0){var b="";return this.prependText&&(b+=this.prependText),b+=a.text,b}return undefined},setActiveItem:function(a,b){Ext.isObject(a)||(a=this.menu.getComponent(a));if(a){if(!this.rendered)this.text=this.getItemText(a),this.iconCls=a.iconCls;else{var c=this.getItemText(a);c&&this.setText(c),this.setIconClass(a.iconCls)}this.activeItem=a,a.checked||a.setChecked(!0,!1),this.forceIcon&&this.setIconClass(this.forceIcon),b||this.fireEvent("change",this,a)}},getActiveItem:function(){return this.activeItem},initComponent:function(){this.addEvents("change"),this.changeHandler&&(this.on("change",this.changeHandler,this.scope||this),delete this.changeHandler),this.itemCount=this.items.length,this.menu={cls:"x-cycle-menu",items:[]};var a=0;Ext.each(this.items,function(b,c){Ext.apply(b,{group:b.group||this.id,itemIndex:c,checkHandler:this.checkHandler,scope:this,checked:b.checked||!1}),this.menu.items.push(b),b.checked&&(a=c)},this),Ext.CycleButton.superclass.initComponent.call(this),this.on("click",this.toggleSelected,this),this.setActiveItem(a,!0)},checkHandler:function(a,b){b&&this.setActiveItem(a)},toggleSelected:function(){var a=this.menu;a.render(),a.hasLayout||a.doLayout();var b,c;for(var d=1;d<this.itemCount;d++){b=(this.activeItem.itemIndex+d)%this.itemCount,c=a.items.itemAt(b);if(!c.disabled){c.setChecked(!0);break}}}}),Ext.reg("cycle",Ext.CycleButton),Ext.Toolbar=function(a){Ext.isArray(a)?a={items:a,layout:"toolbar"}:(a=Ext.apply({layout:"toolbar"},a),a.buttons&&(a.items=a.buttons)),Ext.Toolbar.superclass.constructor.call(this,a)},function(){var a=Ext.Toolbar;Ext.extend(a,Ext.Container,{defaultType:"button",enableOverflow:!1,trackMenus:!0,internalDefaults:{removeMode:"container",hideParent:!0},toolbarCls:"x-toolbar",initComponent:function(){a.superclass.initComponent.call(this),this.addEvents("overflowchange")},onRender:function(a,b){this.el||(this.autoCreate||(this.autoCreate={cls:this.toolbarCls+" x-small-editor"}),this.el=a.createChild(Ext.apply({id:this.id},this.autoCreate),b),Ext.Toolbar.superclass.onRender.apply(this,arguments))},lookupComponent:function(b){return Ext.isString(b)?(b=="-"?b=new a.Separator:b==" "?b=new a.Spacer:b=="->"?b=new a.Fill:b=new a.TextItem(b),this.applyDefaults(b)):b.isFormField||b.render?b=this.createComponent(b):b.tag?b=new a.Item({autoEl:b}):b.tagName?b=new a.Item({el:b}):Ext.isObject(b)&&(b=b.xtype?this.createComponent(b):this.constructButton(b)),b},applyDefaults:function(a){if(!Ext.isString(a)){a=Ext.Toolbar.superclass.applyDefaults.call(this,a);var b=this.internalDefaults;a.events?(Ext.applyIf(a.initialConfig,b),Ext.apply(a,b)):Ext.applyIf(a,b)}return a},addSeparator:function(){return this.add(new a.Separator)},addSpacer:function(){return this.add(new a.Spacer)},addFill:function(){this.add(new a.Fill)},addElement:function(b){return this.addItem(new a.Item({el:b}))},addItem:function(a){return this.add.apply(this,arguments)},addButton:function(a){if(Ext.isArray(a)){var b=[];for(var c=0,d=a.length;c<d;c++)b.push(this.addButton(a[c]));return b}return this.add(this.constructButton(a))},addText:function(b){return this.addItem(new a.TextItem(b))},addDom:function(b){return this.add(new a.Item({autoEl:b}))},addField:function(a){return this.add(a)},insertButton:function(a,b){if(Ext.isArray(b)){var c=[];for(var d=0,e=b.length;d<e;d++)c.push(this.insertButton(a+d,b[d]));return c}return Ext.Toolbar.superclass.insert.call(this,a,b)},trackMenu:function(a,b){if(this.trackMenus&&a.menu){var c=b?"mun":"mon";this[c](a,"menutriggerover",this.onButtonTriggerOver,this),this[c](a,"menushow",this.onButtonMenuShow,this),this[c](a,"menuhide",this.onButtonMenuHide,this)}},constructButton:function(a){var b=a.events?a:this.createComponent(a,a.split?"splitbutton":this.defaultType);return b},onAdd:function(a){Ext.Toolbar.superclass.onAdd.call(this),this.trackMenu(a),this.disabled&&a.disable()},onRemove:function(a){Ext.Toolbar.superclass.onRemove.call(this),a==this.activeMenuBtn&&delete this.activeMenuBtn,this.trackMenu(a,!0)},onDisable:function(){this.items.each(function(a){a.disable&&a.disable()})},onEnable:function(){this.items.each(function(a){a.enable&&a.enable()})},onButtonTriggerOver:function(a){this.activeMenuBtn&&this.activeMenuBtn!=a&&(this.activeMenuBtn.hideMenu(),a.showMenu(),this.activeMenuBtn=a)},onButtonMenuShow:function(a){this.activeMenuBtn=a},onButtonMenuHide:function(a){delete this.activeMenuBtn}}),Ext.reg("toolbar",Ext.Toolbar),a.Item=Ext.extend(Ext.BoxComponent,{hideParent:!0,enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn}),Ext.reg("tbitem",a.Item),a.Separator=Ext.extend(a.Item,{onRender:function(a,b){this.el=a.createChild({tag:"span",cls:"xtb-sep"},b)}}),Ext.reg("tbseparator",a.Separator),a.Spacer=Ext.extend(a.Item,{onRender:function(a,b){this.el=a.createChild({tag:"div",cls:"xtb-spacer",style:this.width?"width:"+this.width+"px":""},b)}}),Ext.reg("tbspacer",a.Spacer),a.Fill=Ext.extend(a.Item,{render:Ext.emptyFn,isFill:!0}),Ext.reg("tbfill",a.Fill),a.TextItem=Ext.extend(a.Item,{constructor:function(b){a.TextItem.superclass.constructor.call(this,Ext.isString(b)?{text:b}:b)},onRender:function(b,c){this.autoEl={cls:"xtb-text",html:this.text||""},a.TextItem.superclass.onRender.call(this,b,c)},setText:function(a){this.rendered?this.el.update(a):this.text=a}}),Ext.reg("tbtext",a.TextItem),a.Button=Ext.extend(Ext.Button,{}),a.SplitButton=Ext.extend(Ext.SplitButton,{}),Ext.reg("tbbutton",a.Button),Ext.reg("tbsplit",a.SplitButton)}(),Ext.ButtonGroup=Ext.extend(Ext.Panel,{baseCls:"x-btn-group",layout:"table",defaultType:"button",frame:!0,internalDefaults:{removeMode:"container",hideParent:!0},initComponent:function(){this.layoutConfig=this.layoutConfig||{},Ext.applyIf(this.layoutConfig,{columns:this.columns}),this.title||this.addClass("x-btn-group-notitle"),this.on("afterlayout",this.onAfterLayout,this),Ext.ButtonGroup.superclass.initComponent.call(this)},applyDefaults:function(a){a=Ext.ButtonGroup.superclass.applyDefaults.call(this,a);var b=this.internalDefaults;return a.events?(Ext.applyIf(a.initialConfig,b),Ext.apply(a,b)):Ext.applyIf(a,b),a},onAfterLayout:function(){var a=this.body.getFrameWidth("lr")+this.body.dom.firstChild.offsetWidth;this.body.setWidth(a),this.el.setWidth(a+this.getFrameWidth())}}),Ext.reg("buttongroup",Ext.ButtonGroup),function(){var a=Ext.Toolbar;Ext.PagingToolbar=Ext.extend(Ext.Toolbar,{pageSize:20,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",initComponent:function(){var b=[this.first=new a.Button({tooltip:this.firstText,overflowText:this.firstText,iconCls:"x-tbar-page-first",disabled:!0,handler:this.moveFirst,scope:this}),this.prev=new a.Button({tooltip:this.prevText,overflowText:this.prevText,iconCls:"x-tbar-page-prev",disabled:!0,handler:this.movePrevious,scope:this}),"-",this.beforePageText,this.inputItem=new Ext.form.NumberField({cls:"x-tbar-page-number",allowDecimals:!1,allowNegative:!1,enableKeyEvents:!0,selectOnFocus:!0,submitValue:!1,listeners:{scope:this,keydown:this.onPagingKeyDown,blur:this.onPagingBlur}}),this.afterTextItem=new a.TextItem({text:String.format(this.afterPageText,1)}),"-",this.next=new a.Button({tooltip:this.nextText,overflowText:this.nextText,iconCls:"x-tbar-page-next",disabled:!0,handler:this.moveNext,scope:this}),this.last=new a.Button({tooltip:this.lastText,overflowText:this.lastText,iconCls:"x-tbar-page-last",disabled:!0,handler:this.moveLast,scope:this}),"-",this.refresh=new a.Button({tooltip:this.refreshText,overflowText:this.refreshText,iconCls:"x-tbar-loading",handler:this.doRefresh,scope:this})],c=this.items||this.buttons||[];this.prependButtons?this.items=c.concat(b):this.items=b.concat(c),delete this.buttons,this.displayInfo&&(this.items.push("->"),this.items.push(this.displayItem=new a.TextItem({}))),Ext.PagingToolbar.superclass.initComponent.call(this),this.addEvents("change","beforechange"),this.on("afterlayout",this.onFirstLayout,this,{single:!0}),this.cursor=0,this.bindStore(this.store,!0)},onFirstLayout:function(){this.dsLoaded&&this.onLoad.apply(this,this.dsLoaded)},updateInfo:function(){if(this.displayItem){var a=this.store.getCount(),b=a==0?this.emptyMsg:String.format(this.displayMsg,this.cursor+1,this.cursor+a,this.store.getTotalCount());this.displayItem.setText(b)}},onLoad:function(a,b,c){if(!this.rendered){this.dsLoaded=[a,b,c];return}var d=this.getParams();this.cursor=c.params&&c.params[d.start]?c.params[d.start]:0;var e=this.getPageData(),f=e.activePage,g=e.pages;this.afterTextItem.setText(String.format(this.afterPageText,e.pages)),this.inputItem.setValue(f),this.first.setDisabled(f==1),this.prev.setDisabled(f==1),this.next.setDisabled(f==g),this.last.setDisabled(f==g),this.refresh.enable(),this.updateInfo(),this.fireEvent("change",this,e)},getPageData:function(){var a=this.store.getTotalCount();return{total:a,activePage:Math.ceil((this.cursor+this.pageSize)/this.pageSize),pages:a<this.pageSize?1:Math.ceil(a/this.pageSize)}},changePage:function(a){this.doLoad(((a-1)*this.pageSize).constrain(0,this.store.getTotalCount()))},onLoadError:function(){if(!this.rendered)return;this.refresh.enable()},readPage:function(a){var b=this.inputItem.getValue(),c;return!b||isNaN(c=parseInt(b,10))?(this.inputItem.setValue(a.activePage),!1):c},onPagingFocus:function(){this.inputItem.select()},onPagingBlur:function(a){this.inputItem.setValue(this.getPageData().activePage)},onPagingKeyDown:function(a,b){var c=b.getKey(),d=this.getPageData(),e;if(c==b.RETURN)b.stopEvent(),e=this.readPage(d),e!==!1&&(e=Math.min(Math.max(1,e),d.pages)-1,this.doLoad(e*this.pageSize));else if(c==b.HOME||c==b.END)b.stopEvent(),e=c==b.HOME?1:d.pages,a.setValue(e);else if(c==b.UP||c==b.PAGEUP||c==b.DOWN||c==b.PAGEDOWN){b.stopEvent();if(e=this.readPage(d)){var f=b.shiftKey?10:1;if(c==b.DOWN||c==b.PAGEDOWN)f*=-1;e+=f,e>=1&e<=d.pages&&a.setValue(e)}}},getParams:function(){return this.paramNames||this.store.paramNames},beforeLoad:function(){this.rendered&&this.refresh&&this.refresh.disable()},doLoad:function(a){var b={},c=this.getParams
();b[c.start]=a,b[c.limit]=this.pageSize,this.fireEvent("beforechange",this,b)!==!1&&this.store.load({params:b})},moveFirst:function(){this.doLoad(0)},movePrevious:function(){this.doLoad(Math.max(0,this.cursor-this.pageSize))},moveNext:function(){this.doLoad(this.cursor+this.pageSize)},moveLast:function(){var a=this.store.getTotalCount(),b=a%this.pageSize;this.doLoad(b?a-b:a-this.pageSize)},doRefresh:function(){this.doLoad(this.cursor)},bindStore:function(a,b){var c;!b&&this.store&&(a!==this.store&&this.store.autoDestroy?this.store.destroy():(this.store.un("beforeload",this.beforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("exception",this.onLoadError,this)),a||(this.store=null)),a&&(a=Ext.StoreMgr.lookup(a),a.on({scope:this,beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}),c=!0),this.store=a,c&&this.onLoad(a,null,{})},unbind:function(a){this.bindStore(null)},bind:function(a){this.bindStore(a)},onDestroy:function(){this.bindStore(null),Ext.PagingToolbar.superclass.onDestroy.call(this)}})}(),Ext.reg("paging",Ext.PagingToolbar),Ext.History=function(){function e(){var a=location.href,b=a.indexOf("#");return b>=0?a.substr(b+1):null}function f(){b.value=d}function g(a){d=a,Ext.History.fireEvent("change",a)}function h(b){var c=['<html><body><div id="state">',Ext.util.Format.htmlEncode(b),"</div></body></html>"].join("");try{var d=a.contentWindow.document;return d.open(),d.write(c),d.close(),!0}catch(e){return!1}}function i(){if(!a.contentWindow||!a.contentWindow.document){setTimeout(i,10);return}var b=a.contentWindow.document,d=b.getElementById("state"),j=d?d.innerText:null,k=e();setInterval(function(){b=a.contentWindow.document,d=b.getElementById("state");var c=d?d.innerText:null,i=e();c!==j?(j=c,g(j),top.location.hash=j,k=j,f()):i!==k&&(k=i,h(i))},50),c=!0,Ext.History.fireEvent("ready",Ext.History)}function j(){d=b.value?b.value:e();if(Ext.isIE)i();else{var a=e();setInterval(function(){var b=e();b!==a&&(a=b,g(a),f())},50),c=!0,Ext.History.fireEvent("ready",Ext.History)}}var a,b,c=!1,d;return{fieldId:"x-history-field",iframeId:"x-history-frame",events:{},init:function(d,e){if(c){Ext.callback(d,e,[this]);return}if(!Ext.isReady){Ext.onReady(function(){Ext.History.init(d,e)});return}b=Ext.getDom(Ext.History.fieldId),Ext.isIE&&(a=Ext.getDom(Ext.History.iframeId)),this.addEvents("ready","change"),d&&this.on("ready",d,e,{single:!0}),j()},add:function(a,b){return b!==!1&&this.getToken()==a?!0:Ext.isIE?h(a):(top.location.hash=a,!0)},back:function(){history.go(-1)},forward:function(){history.go(1)},getToken:function(){return c?d:e()}}}(),Ext.apply(Ext.History,new Ext.util.Observable),Ext.Tip=Ext.extend(Ext.Panel,{minWidth:40,maxWidth:300,shadow:"sides",defaultAlign:"tl-bl?",autoRender:!0,quickShowInterval:250,frame:!0,hidden:!0,baseCls:"x-tip",floating:{shadow:!0,shim:!0,useDisplay:!0,constrain:!1},autoHeight:!0,closeAction:"hide",initComponent:function(){Ext.Tip.superclass.initComponent.call(this),this.closable&&!this.title&&(this.elements+=",header")},afterRender:function(){Ext.Tip.superclass.afterRender.call(this),this.closable&&this.addTool({id:"close",handler:this[this.closeAction],scope:this})},showAt:function(a){Ext.Tip.superclass.show.call(this),this.measureWidth!==!1&&(!this.initialConfig||typeof this.initialConfig.width!="number")&&this.doAutoWidth(),this.constrainPosition&&(a=this.el.adjustForConstraints(a)),this.setPagePosition(a[0],a[1])},doAutoWidth:function(a){a=a||0;var b=this.body.getTextWidth();this.title&&(b=Math.max(b,this.header.child("span").getTextWidth(this.title))),b+=this.getFrameWidth()+(this.closable?20:0)+this.body.getPadding("lr")+a,this.setWidth(b.constrain(this.minWidth,this.maxWidth)),Ext.isIE7&&!this.repainted&&(this.el.repaint(),this.repainted=!0)},showBy:function(a,b){this.rendered||this.render(Ext.getBody()),this.showAt(this.el.getAlignToXY(a,b||this.defaultAlign))},initDraggable:function(){this.dd=new Ext.Tip.DD(this,typeof this.draggable=="boolean"?null:this.draggable),this.header.addClass("x-tip-draggable")}}),Ext.reg("tip",Ext.Tip),Ext.Tip.DD=function(a,b){Ext.apply(this,b),this.tip=a,Ext.Tip.DD.superclass.constructor.call(this,a.el.id,"WindowDD-"+a.id),this.setHandleElId(a.header.id),this.scroll=!1},Ext.extend(Ext.Tip.DD,Ext.dd.DD,{moveOnly:!0,scroll:!1,headerOffsets:[100,25],startDrag:function(){this.tip.el.disableShadow()},endDrag:function(a){this.tip.el.enableShadow(!0)}}),Ext.ToolTip=Ext.extend(Ext.Tip,{showDelay:500,hideDelay:200,dismissDelay:5e3,trackMouse:!1,anchorToTarget:!0,anchorOffset:0,targetCounter:0,constrainPosition:!1,initComponent:function(){Ext.ToolTip.superclass.initComponent.call(this),this.lastActive=new Date,this.initTarget(this.target),this.origAnchor=this.anchor},onRender:function(a,b){Ext.ToolTip.superclass.onRender.call(this,a,b),this.anchorCls="x-tip-anchor-"+this.getAnchorPosition(),this.anchorEl=this.el.createChild({cls:"x-tip-anchor "+this.anchorCls})},afterRender:function(){Ext.ToolTip.superclass.afterRender.call(this),this.anchorEl.setStyle("z-index",this.el.getZIndex()+1).setVisibilityMode(Ext.Element.DISPLAY)},initTarget:function(a){var b;if(b=Ext.get(a)){if(this.target){var c=Ext.get(this.target);this.mun(c,"mouseover",this.onTargetOver,this),this.mun(c,"mouseout",this.onTargetOut,this),this.mun(c,"mousemove",this.onMouseMove,this)}this.mon(b,{mouseover:this.onTargetOver,mouseout:this.onTargetOut,mousemove:this.onMouseMove,scope:this}),this.target=b}this.anchor&&(this.anchorTarget=this.target)},onMouseMove:function(a){var b=this.delegate?a.getTarget(this.delegate):this.triggerElement=!0;b?(this.targetXY=a.getXY(),b===this.triggerElement?!this.hidden&&this.trackMouse&&this.setPagePosition(this.getTargetXY()):(this.hide(),this.lastActive=new Date(0),this.onTargetOver(a))):!this.closable&&this.isVisible()&&this.hide()},getTargetXY:function(){this.delegate&&(this.anchorTarget=this.triggerElement);if(this.anchor){this.targetCounter++;var a=this.getOffsets(),b=this.anchorToTarget&&!this.trackMouse?this.el.getAlignToXY(this.anchorTarget,this.getAnchorAlign()):this.targetXY,c=Ext.lib.Dom.getViewWidth()-5,d=Ext.lib.Dom.getViewHeight()-5,e=document.documentElement,f=document.body,g=(e.scrollLeft||f.scrollLeft||0)+5,h=(e.scrollTop||f.scrollTop||0)+5,i=[b[0]+a[0],b[1]+a[1]],j=this.getSize();this.anchorEl.removeClass(this.anchorCls);if(this.targetCounter<2){if(i[0]<g)return this.anchorToTarget&&(this.defaultAlign="l-r",this.mouseOffset&&(this.mouseOffset[0]*=-1)),this.anchor="left",this.getTargetXY();if(i[0]+j.width>c)return this.anchorToTarget&&(this.defaultAlign="r-l",this.mouseOffset&&(this.mouseOffset[0]*=-1)),this.anchor="right",this.getTargetXY();if(i[1]<h)return this.anchorToTarget&&(this.defaultAlign="t-b",this.mouseOffset&&(this.mouseOffset[1]*=-1)),this.anchor="top",this.getTargetXY();if(i[1]+j.height>d)return this.anchorToTarget&&(this.defaultAlign="b-t",this.mouseOffset&&(this.mouseOffset[1]*=-1)),this.anchor="bottom",this.getTargetXY()}return this.anchorCls="x-tip-anchor-"+this.getAnchorPosition(),this.anchorEl.addClass(this.anchorCls),this.targetCounter=0,i}var k=this.getMouseOffset();return[this.targetXY[0]+k[0],this.targetXY[1]+k[1]]},getMouseOffset:function(){var a=this.anchor?[0,0]:[15,18];return this.mouseOffset&&(a[0]+=this.mouseOffset[0],a[1]+=this.mouseOffset[1]),a},getAnchorPosition:function(){if(this.anchor)this.tipAnchor=this.anchor.charAt(0);else{var a=this.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!a)throw"AnchorTip.defaultAlign is invalid";this.tipAnchor=a[1].charAt(0)}switch(this.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var a,b=this.getAnchorPosition().charAt(0);if(this.anchorToTarget&&!this.trackMouse)switch(b){case"t":a=[0,9];break;case"b":a=[0,-13];break;case"r":a=[-13,0];break;default:a=[9,0]}else switch(b){case"t":a=[-15-this.anchorOffset,30];break;case"b":a=[-19-this.anchorOffset,-13-this.el.dom.offsetHeight];break;case"r":a=[-15-this.el.dom.offsetWidth,-13-this.anchorOffset];break;default:a=[25,-13-this.anchorOffset]}var c=this.getMouseOffset();return a[0]+=c[0],a[1]+=c[1],a},onTargetOver:function(a){if(this.disabled||a.within(this.target.dom,!0))return;var b=a.getTarget(this.delegate);b&&(this.triggerElement=b,this.clearTimer("hide"),this.targetXY=a.getXY(),this.delayShow())},delayShow:function(){this.hidden&&!this.showTimer?this.lastActive.getElapsed()<this.quickShowInterval?this.show():this.showTimer=this.show.defer(this.showDelay,this):!this.hidden&&this.autoHide!==!1&&this.show()},onTargetOut:function(a){if(this.disabled||a.within(this.target.dom,!0))return;this.clearTimer("show"),this.autoHide!==!1&&this.delayHide()},delayHide:function(){!this.hidden&&!this.hideTimer&&(this.hideTimer=this.hide.defer(this.hideDelay,this))},hide:function(){this.clearTimer("dismiss"),this.lastActive=new Date,this.anchorEl&&this.anchorEl.hide(),Ext.ToolTip.superclass.hide.call(this),delete this.triggerElement},show:function(){this.anchor&&(this.showAt([-1e3,-1e3]),this.origConstrainPosition=this.constrainPosition,this.constrainPosition=!1,this.anchor=this.origAnchor),this.showAt(this.getTargetXY()),this.anchor?(this.anchorEl.show(),this.syncAnchor(),this.constrainPosition=this.origConstrainPosition):this.anchorEl.hide()},showAt:function(a){this.lastActive=new Date,this.clearTimers(),Ext.ToolTip.superclass.showAt.call(this,a),this.dismissDelay&&this.autoHide!==!1&&(this.dismissTimer=this.hide.defer(this.dismissDelay,this)),this.anchor&&!this.anchorEl.isVisible()?(this.syncAnchor(),this.anchorEl.show()):this.anchorEl.hide()},syncAnchor:function(){var a,b,c;switch(this.tipAnchor.charAt(0)){case"t":a="b",b="tl",c=[20+this.anchorOffset,2];break;case"r":a="l",b="tr",c=[-2,11+this.anchorOffset];break;case"b":a="t",b="bl",c=[20+this.anchorOffset,-2];break;default:a="r",b="tl",c=[2,11+this.anchorOffset]}this.anchorEl.alignTo(this.el,a+"-"+b,c)},setPagePosition:function(a,b){Ext.ToolTip.superclass.setPagePosition.call(this,a,b),this.anchor&&this.syncAnchor()},clearTimer:function(a){a+="Timer",clearTimeout(this[a]),delete this[a]},clearTimers:function(){this.clearTimer("show"),this.clearTimer("dismiss"),this.clearTimer("hide")},onShow:function(){Ext.ToolTip.superclass.onShow.call(this),Ext.getDoc().on("mousedown",this.onDocMouseDown,this)},onHide:function(){Ext.ToolTip.superclass.onHide.call(this),Ext.getDoc().un("mousedown",this.onDocMouseDown,this)},onDocMouseDown:function(a){this.autoHide!==!0&&!this.closable&&!a.within(this.el.dom)&&(this.disable(),this.doEnable.defer(100,this))},doEnable:function(){this.isDestroyed||this.enable()},onDisable:function(){this.clearTimers(),this.hide()},adjustPosition:function(a,b){if(this.contstrainPosition){var c=this.targetXY[1],d=this.getSize().height;b<=c&&b+d>=c&&(b=c-d-5)}return{x:a,y:b}},beforeDestroy:function(){this.clearTimers(),Ext.destroy(this.anchorEl),delete this.anchorEl,delete this.target,delete this.anchorTarget,delete this.triggerElement,Ext.ToolTip.superclass.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this),Ext.ToolTip.superclass.onDestroy.call(this)}}),Ext.reg("tooltip",Ext.ToolTip),Ext.QuickTip=Ext.extend(Ext.ToolTip,{interceptTitles:!1,tagConfig:{namespace:"ext",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor"},initComponent:function(){this.target=this.target||Ext.getDoc(),this.targets=this.targets||{},Ext.QuickTip.superclass.initComponent.call(this)},register:function(a){var b=Ext.isArray(a)?a:arguments;for(var c=0,d=b.length;c<d;c++){var e=b[c],f=e.target;if(f)if(Ext.isArray(f))for(var g=0,h=f.length;g<h;g++)this.targets[Ext.id(f[g])]=e;else this.targets[Ext.id(f)]=e}},unregister:function(a){delete this.targets[Ext.id(a)]},cancelShow:function(a){var b=this.activeTarget;a=Ext.get(a).dom,this.isVisible()?b&&b.el==a&&this.hide():b&&b.el==a&&this.clearTimer("show")},getTipCfg:function(a){var b=a.getTarget(),c,d;return this.interceptTitles&&b.title&&Ext.isString(b.title)?(c=b.title,b.qtip=c,b.removeAttribute("title"),a.preventDefault()):(d=this.tagConfig,c=b.qtip||Ext.fly(b).getAttribute(d.attribute,d.namespace)),c},onTargetOver:function(a){if(this.disabled)return;this.targetXY=a.getXY();var b=a.getTarget();if(!b||b.nodeType!==1||b==document||b==document.body)return;if(this.activeTarget&&(b==this.activeTarget.el||Ext.fly(this.activeTarget.el).contains(b))){this.clearTimer("hide"),this.show();return}if(b&&this.targets[b.id]){this.activeTarget=this.targets[b.id],this.activeTarget.el=b,this.anchor=this.activeTarget.anchor,this.anchor&&(this.anchorTarget=b),this.delayShow();return}var c,d=Ext.fly(b),e=this.tagConfig,f=e.namespace;if(c=this.getTipCfg(a)){var g=d.getAttribute(e.hide,f);this.activeTarget={el:b,text:c,width:d.getAttribute(e.width,f),autoHide:g!="user"&&g!=="false",title:d.getAttribute(e.title,f),cls:d.getAttribute(e.cls,f),align:d.getAttribute(e.align,f)},this.anchor=d.getAttribute(e.anchor,f),this.anchor&&(this.anchorTarget=b),this.delayShow()}},onTargetOut:function(a){if(this.activeTarget&&a.within(this.activeTarget.el)&&!this.getTipCfg(a))return;this.clearTimer("show"),this.autoHide!==!1&&this.delayHide()},showAt:function(a){var b=this.activeTarget;b&&(this.rendered||(this.render(Ext.getBody()),this.activeTarget=b),b.width?(this.setWidth(b.width),this.body.setWidth(this.adjustBodyWidth(b.width-this.getFrameWidth())),this.measureWidth=!1):this.measureWidth=!0,this.setTitle(b.title||""),this.body.update(b.text),this.autoHide=b.autoHide,this.dismissDelay=b.dismissDelay||this.dismissDelay,this.lastCls&&(this.el.removeClass(this.lastCls),delete this.lastCls),b.cls&&(this.el.addClass(b.cls),this.lastCls=b.cls),this.anchor?this.constrainPosition=!1:b.align?(a=this.el.getAlignToXY(b.el,b.align),this.constrainPosition=!1):this.constrainPosition=!0),Ext.QuickTip.superclass.showAt.call(this,a)},hide:function(){delete this.activeTarget,Ext.QuickTip.superclass.hide.call(this)}}),Ext.reg("quicktip",Ext.QuickTip),Ext.QuickTips=function(){var a,b=!1;return{init:function(c){if(!a){if(!Ext.isReady){Ext.onReady(function(){Ext.QuickTips.init(c)});return}a=new Ext.QuickTip({elements:"header,body",disabled:b}),c!==!1&&a.render(Ext.getBody())}},ddDisable:function(){a&&!b&&a.disable()},ddEnable:function(){a&&!b&&a.enable()},enable:function(){a&&a.enable(),b=!1},disable:function(){a&&a.disable(),b=!0},isEnabled:function(){return a!==undefined&&!a.disabled},getQuickTip:function(){return a},register:function(){a.register.apply(a,arguments)},unregister:function(){a.unregister.apply(a,arguments)},tips:function(){a.register.apply(a,arguments)}}}(),Ext.slider.Tip=Ext.extend(Ext.Tip,{minWidth:10,offsets:[0,-10],init:function(a){a.on({scope:this,dragstart:this.onSlide,drag:this.onSlide,dragend:this.hide,destroy:this.destroy})},onSlide:function(a,b,c){this.show(),this.body.update(this.getText(c)),this.doAutoWidth(),this.el.alignTo(c.el,"b-t?",this.offsets)},getText:function(a){return String(a.value)}}),Ext.ux.SliderTip=Ext.slider.Tip,Ext.tree.TreePanel=Ext.extend(Ext.Panel,{rootVisible:!0,animate:Ext.enableFx,lines:!0,enableDD:!1,hlDrop:Ext.enableFx,pathSeparator:"/",bubbleEvents:[],initComponent:function(){Ext.tree.TreePanel.superclass.initComponent.call(this),this.eventModel||(this.eventModel=new Ext.tree.TreeEventModel(this));var a=this.loader;a?Ext.isObject(a)&&!a.load&&(a=new Ext.tree.TreeLoader(a)):a=new Ext.tree.TreeLoader({dataUrl:this.dataUrl,requestMethod:this.requestMethod}),this.loader=a,this.nodeHash={};if(this.root){var b=this.root;delete this.root,this.setRootNode(b)}this.addEvents("append","remove","movenode","insert","beforeappend","beforeremove","beforemovenode","beforeinsert","beforeload","load","textchange","beforeexpandnode","beforecollapsenode","expandnode","disabledchange","collapsenode","beforeclick","click","containerclick","checkchange","beforedblclick","dblclick","containerdblclick","contextmenu","containercontextmenu","beforechildrenrendered","startdrag","enddrag","dragdrop","beforenodedrop","nodedrop","nodedragover"),this.singleExpand&&this.on("beforeexpandnode",this.restrictExpand,this)},proxyNodeEvent:function(a,b,c,d,e,f,g){if(a=="collapse"||a=="expand"||a=="beforecollapse"||a=="beforeexpand"||a=="move"||a=="beforemove")a+="node";return this.fireEvent(a,b,c,d,e,f,g)},getRootNode:function(){return this.root},setRootNode:function(a){this.destroyRoot(),a.render||(a=this.loader.createNode(a)),this.root=a,a.ownerTree=this,a.isRoot=!0,this.registerNode(a);if(!this.rootVisible){var b=a.attributes.uiProvider;a.ui=b?new b(a):new Ext.tree.RootTreeNodeUI(a)}return this.innerCt&&(this.clearInnerCt(),this.renderRoot()),a},clearInnerCt:function(){this.innerCt.update("")},renderRoot:function(){this.root.render(),this.rootVisible||this.root.renderChildren()},getNodeById:function(a){return this.nodeHash[a]},registerNode:function(a){this.nodeHash[a.id]=a},unregisterNode:function(a){delete this.nodeHash[a.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"},restrictExpand:function(a){var b=a.parentNode;b&&(b.expandedChild&&b.expandedChild.parentNode==b&&b.expandedChild.collapse(),b.expandedChild=a)},getChecked:function(a,b){b=b||this.root;var c=[],d=function(){this.attributes.checked&&c.push(a?a=="id"?this.id:this.attributes[a]:this)};return b.cascade(d),c},getLoader:function(){return this.loader},expandAll:function(){this.root.expand(!0)},collapseAll:function(){this.root.collapse(!0)},getSelectionModel:function(){return this.selModel||(this.selModel=new Ext.tree.DefaultSelectionModel),this.selModel},expandPath:function(a,b,c){if(Ext.isEmpty(a)){c&&c(!1,undefined);return}b=b||"id";var d=a.split(this.pathSeparator),e=this.root;if(e.attributes[b]!=d[1]){c&&c(!1,null);return}var f=1,g=function(){if(++f==d.length){c&&c(!0,e);return}var a=e.findChild(b,d[f]);if(!a){c&&c(!1,e);return}e=a,a.expand(!1,!1,g)};e.expand(!1,!1,g)},selectPath:function(a,b,c){if(Ext.isEmpty(a)){c&&c(!1,undefined);return}b=b||"id";var d=a.split(this.pathSeparator),e=d.pop();if(d.length>1){var f=function(a,d){if(a&&d){var f=d.findChild(b,e);f?(f.select(),c&&c(!0,f)):c&&c(!1,f)}else c&&c(!1,f)};this.expandPath(d.join(this.pathSeparator),b,f)}else this.root.select(),c&&c(!0,this.root)},getTreeEl:function(){return this.body},onRender:function(a,b){Ext.tree.TreePanel.superclass.onRender.call(this,a,b),this.el.addClass("x-tree"),this.innerCt=this.body.createChild({tag:"ul",cls:"x-tree-root-ct "+(this.useArrows?"x-tree-arrows":this.lines?"x-tree-lines":"x-tree-no-lines")})},initEvents:function(){Ext.tree.TreePanel.superclass.initEvents.call(this),this.containerScroll&&Ext.dd.ScrollManager.register(this.body),(this.enableDD||this.enableDrop)&&!this.dropZone&&(this.dropZone=new Ext.tree.TreeDropZone(this,this.dropConfig||{ddGroup:this.ddGroup||"TreeDD",appendOnly:this.ddAppendOnly===!0})),(this.enableDD||this.enableDrag)&&!this.dragZone&&(this.dragZone=new Ext.tree.TreeDragZone(this,this.dragConfig||{ddGroup:this.ddGroup||"TreeDD",scroll:this.ddScroll})),this.getSelectionModel().init(this)},afterRender:function(){Ext.tree.TreePanel.superclass.afterRender.call(this),this.renderRoot()},beforeDestroy:function(){this.rendered&&(Ext.dd.ScrollManager.unregister(this.body),Ext.destroy(this.dropZone,this.dragZone)),this.destroyRoot(),Ext.destroy(this.loader),this.nodeHash=this.root=this.loader=null,Ext.tree.TreePanel.superclass.beforeDestroy.call(this)},destroyRoot:function(){this.root&&this.root.destroy&&this.root.destroy(!0)}}),Ext.tree.TreePanel.nodeTypes={},Ext.reg("treepanel",Ext.tree.TreePanel),Ext.tree.TreeEventModel=function(a){this.tree=a,this.tree.on("render",this.initEvents,this)},Ext.tree.TreeEventModel.prototype={initEvents:function(){var a=this.tree;a.trackMouseOver!==!1&&a.mon(a.innerCt,{scope:this,mouseover:this.delegateOver,mouseout:this.delegateOut}),a.mon(a.getTreeEl(),{scope:this,click:this.delegateClick,dblclick:this.delegateDblClick,contextmenu:this.delegateContextMenu})},getNode:function(a){var b;if(b=a.getTarget(".x-tree-node-el",10)){var c=Ext.fly(b,"_treeEvents").getAttribute("tree-node-id","ext");if(c)return this.tree.getNodeById(c)}return null},getNodeTarget:function(a){var b=a.getTarget(".x-tree-node-icon",1);return b||(b=a.getTarget(".x-tree-node-el",6)),b},delegateOut:function(a,b){if(!this.beforeEvent(a))return;if(a.getTarget(".x-tree-ec-icon",1)){var c=this.getNode(a);this.onIconOut(a,c),c==this.lastEcOver&&delete this.lastEcOver}(b=this.getNodeTarget(a))&&!a.within(b,!0)&&this.onNodeOut(a,this.getNode(a))},delegateOver:function(a,b){if(!this.beforeEvent(a))return;Ext.isGecko&&!this.trackingDoc&&(Ext.getBody().on("mouseover",this.trackExit,this),this.trackingDoc=!0),this.lastEcOver&&(this.onIconOut(a,this.lastEcOver),delete this.lastEcOver),a.getTarget(".x-tree-ec-icon",1)&&(this.lastEcOver=this.getNode(a),this.onIconOver(a,this.lastEcOver)),(b=this.getNodeTarget(a))&&this.onNodeOver(a,this.getNode(a))},trackExit:function(a){this.lastOverNode&&(this.lastOverNode.ui&&!a.within(this.lastOverNode.ui.getEl())&&this.onNodeOut(a,this.lastOverNode),delete this.lastOverNode,Ext.getBody().un("mouseover",this.trackExit,this),this.trackingDoc=!1)},delegateClick:function(a,b){this.beforeEvent(a)?a.getTarget("input[type=checkbox]",1)?this.onCheckboxClick(a,this.getNode(a)):a.getTarget(".x-tree-ec-icon",1)?this.onIconClick(a,this.getNode(a)):this.getNodeTarget(a)&&this.onNodeClick(a,this.getNode(a)):this.checkContainerEvent(a,"click")},delegateDblClick:function(a,b){this.beforeEvent(a)?this.getNodeTarget(a)&&this.onNodeDblClick(a,this.getNode(a)):this.checkContainerEvent(a,"dblclick")},delegateContextMenu:function(a,b){this.beforeEvent(a)?this.getNodeTarget(a)&&this.onNodeContextMenu(a,this.getNode(a)):this.checkContainerEvent(a,"contextmenu")},checkContainerEvent:function(a,b){if(this.disabled)return a.stopEvent(),!1;this.onContainerEvent(a,b)},onContainerEvent:function(a,b){this.tree.fireEvent("container"+b,this.tree,a)},onNodeClick:function(a,b){b.ui.onClick(a)},onNodeOver:function(a,b){this.lastOverNode=b,b.ui.onOver(a)},onNodeOut:function(a,b){b.ui.onOut(a)},onIconOver:function(a,b){b.ui.addClass("x-tree-ec-over")},onIconOut:function(a,b){b.ui.removeClass("x-tree-ec-over")},onIconClick:function(a,b){b.ui.ecClick(a)},onCheckboxClick:function(a,b){b.ui.onCheckChange(a)},onNodeDblClick:function(a,b){b.ui.onDblClick(a)},onNodeContextMenu:function(a,b){b.ui.onContextMenu(a)},beforeEvent:function(a){var b=this.getNode(a);return this.disabled||!b||!b.ui?(a.stopEvent(),!1):!0},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}},Ext.tree.DefaultSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(a){this.selNode=null,this.addEvents("selectionchange","beforeselect"),Ext.apply(this,a),Ext.tree.DefaultSelectionModel.superclass.constructor.call(this)},init:function(a){this.tree=a,a.mon(a.getTreeEl(),"keydown",this.onKeyDown,this),a.on("click",this.onNodeClick,this)},onNodeClick:function(a,b){this.select(a)},select:function(a,b){if(!Ext.fly(a.ui.wrap).isVisible()&&b)return b.call(this,a);var c=this.selNode;return a==c?a.ui.onSelectedChange(!0):this.fireEvent("beforeselect",this,a,c)!==!1&&(c&&c.ui&&c.ui.onSelectedChange(!1),this.selNode=a,a.ui.onSelectedChange(!0),this.fireEvent("selectionchange",this,a,c)),a},unselect:function(a,b){this.selNode==a&&this.clearSelections(b)},clearSelections:function(a){var b=this.selNode;return b&&(b.ui.onSelectedChange(!1),this.selNode=null,a!==!0&&this.fireEvent("selectionchange",this,null)),b},getSelectedNode:function(){return this.selNode},isSelected:function(a){return this.selNode==a},selectPrevious:function(a){if(!(a=a||this.selNode||this.lastSelNode))return null;var b=a.previousSibling;if(b){if(!b.isExpanded()||b.childNodes.length<1)return this.select(b,this.selectPrevious);var c=b.lastChild;while(c&&c.isExpanded()&&Ext.fly(c.ui.wrap).isVisible()&&c.childNodes.length>0)c=c.lastChild;return this.select(c,this.selectPrevious)}return a.parentNode&&(this.tree.rootVisible||!a.parentNode.isRoot)?this.select(a.parentNode,this.selectPrevious):null},selectNext:function(a){if(!(a=a||this.selNode||this.lastSelNode))return null;if(a.firstChild&&a.isExpanded()&&Ext.fly(a.ui.wrap).isVisible())return this.select(a.firstChild,this.selectNext);if(a.nextSibling)return this.select(a.nextSibling,this.selectNext);if(a.parentNode){var b=null;return a.parentNode.bubble(function(){if(this.nextSibling)return b=this.getOwnerTree().selModel.select(this.nextSibling,this.selectNext),!1}),b}return null},onKeyDown:function(a){var b=this.selNode||this.lastSelNode,c=this;if(!b)return;var d=a.getKey();switch(d){case a.DOWN:a.stopEvent(),this.selectNext();break;case a.UP:a.stopEvent(),this.selectPrevious();break;case a.RIGHT:a.preventDefault(),b.hasChildNodes()&&(b.isExpanded()?b.firstChild&&this.select(b.firstChild,a):b.expand());break;case a.LEFT:a.preventDefault(),b.hasChildNodes()&&b.isExpanded()?b.collapse():b.parentNode&&(this.tree.rootVisible||b.parentNode!=this.tree.getRootNode())&&this.select(b.parentNode,a)}}}),Ext.tree.MultiSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(a){this.selNodes=[],this.selMap={},this.addEvents("selectionchange"),Ext.apply(this,a),Ext.tree.MultiSelectionModel.superclass.constructor.call(this)},init:function(a){this.tree=a,a.mon(a.getTreeEl(),"keydown",this.onKeyDown,this),a.on("click",this.onNodeClick,this)},onNodeClick:function(a,b){b.ctrlKey&&this.isSelected(a)?this.unselect(a):this.select(a,b,b.ctrlKey)},select:function(a,b,c){return c!==!0&&this.clearSelections(!0),this.isSelected(a)?(this.lastSelNode=a,a):(this.selNodes.push(a),this.selMap[a.id]=a,this.lastSelNode=a,a.ui.onSelectedChange(!0),this.fireEvent("selectionchange",this,this.selNodes),a)},unselect:function(a){if(this.selMap[a.id]){a.ui.onSelectedChange(!1);var b=this.selNodes,c=b.indexOf(a);c!=-1&&this.selNodes.splice(c,1),delete this.selMap[a.id],this.fireEvent("selectionchange",this,this.selNodes)}},clearSelections:function(a){var b=this.selNodes;if(b.length>0){for(var c=0,d=b.length;c<d;c++)b[c].ui.onSelectedChange(!1);this.selNodes=[],this.selMap={},a!==!0&&this.fireEvent("selectionchange",this,this.selNodes)}},isSelected:function(a){return this.selMap[a.id]?!0:!1},getSelectedNodes:function(){return this.selNodes.concat([])},onKeyDown:Ext.tree.DefaultSelectionModel.prototype.onKeyDown,selectNext:Ext.tree.DefaultSelectionModel.prototype.selectNext,selectPrevious:Ext.tree.DefaultSelectionModel.prototype.selectPrevious}),Ext.data.Tree=Ext.extend(Ext.util.Observable,{constructor:function(a){this.nodeHash={},this.root=null,a&&this.setRootNode(a),this.addEvents("append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert"),Ext.data.Tree.superclass.constructor.call(this)},pathSeparator:"/",proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},setRootNode:function(a){return this.root=a,a.ownerTree=this,a.isRoot=!0,this.registerNode(a),a},getNodeById:function(a){return this.nodeHash[a]},registerNode:function(a){this.nodeHash[a.id]=a},unregisterNode:function(a){delete this.nodeHash[a.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"}}),Ext.data.Node=Ext.extend(Ext.util.Observable,{constructor:function(a){this.attributes=a||{},this.leaf=this.attributes.leaf,this.id=this.attributes.id,this.id||(this.id=Ext.id(null,"xnode-"),this.attributes.id=this.id),this.childNodes=[],this.parentNode=null,this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null,this.addEvents({append:!0,remove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0}),this.listeners=this.attributes.listeners,Ext.data.Node.superclass.constructor.call(this)},fireEvent:function(a){if(Ext.data.Node.superclass.fireEvent.apply(this,arguments)===!1)return!1;var b=this.getOwnerTree();return b&&b.proxyNodeEvent.apply(b,arguments)===!1?!1:!0},isLeaf:function(){return this.leaf===!0},setFirstChild:function(a){this.firstChild=a},setLastChild:function(a){this.lastChild=a},isLast:function(){return this.parentNode?this.parentNode.lastChild==this:!0},isFirst:function(){return this.parentNode?this.parentNode.firstChild==this:!0},hasChildNodes:function(){return!this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){return this.attributes.expandable||this.hasChildNodes()},appendChild:function(a){var b=!1;Ext.isArray(a)?b=a:arguments.length>1&&(b=arguments);if(!b){if(this.fireEvent("beforeappend",this.ownerTree,this,a)===!1)return!1;var e=this.childNodes.length,f=a.parentNode;if(f){if(a.fireEvent("beforemove",a.getOwnerTree(),a,f,this,e)===!1)return!1;f.removeChild(a)}e=this.childNodes.length,e===0&&this.setFirstChild(a),this.childNodes.push(a),a.parentNode=this;var g=this.childNodes[e-1];return g?(a.previousSibling=g,g.nextSibling=a):a.previousSibling=null,a.nextSibling=null,this.setLastChild(a),a.setOwnerTree(this.getOwnerTree()),this.fireEvent("append",this.ownerTree,this,a,e),f&&a.fireEvent("move",this.ownerTree,a,f,this,e),a}for(var c=0,d=b.length;c<d;c++)this.appendChild(b[c])},removeChild:function(a,b){var c=this.childNodes.indexOf(a);return c==-1?!1:this.fireEvent("beforeremove",this.ownerTree,this,a)===!1?!1:(this.childNodes.splice(c,1),a.previousSibling&&(a.previousSibling.nextSibling=a.nextSibling),a.nextSibling&&(a.nextSibling.previousSibling=a.previousSibling),this.firstChild==a&&this.setFirstChild(a.nextSibling),this.lastChild==a&&this.setLastChild(a.previousSibling),this.fireEvent("remove",this.ownerTree,this,a),b?a.destroy(!0):a.clear(),a)},clear:function(a){this.setOwnerTree(null,a),this.parentNode=this.previousSibling=this.nextSibling=null,a&&(this.firstChild=this.lastChild=null)},destroy:function(a){a===!0?(this.purgeListeners(),this.clear(!0),Ext.each(this.childNodes,function(a){a.destroy(!0)}),this.childNodes=null):this.remove(!0)},insertBefore:function(a,b){if(!b)return this.appendChild(a);if(a==b)return!1;if(this.fireEvent("beforeinsert",this.ownerTree,this,a,b)===!1)return!1;var c=this.childNodes.indexOf(b),d=a.parentNode,e=c;d==this&&this.childNodes.indexOf(a)<c&&e--;if(d){if(a.fireEvent("beforemove",a.getOwnerTree(),a,d,this,c,b)===!1)return!1;d.removeChild(a)}e===0&&this.setFirstChild(a),this.childNodes.splice(e,0,a),a.parentNode=this;var f=this.childNodes[e-1];return f?(a.previousSibling=f,f.nextSibling=a):a.previousSibling=null,a.nextSibling=b,b.previousSibling=a,a.setOwnerTree(this.getOwnerTree()),this.fireEvent("insert",this.ownerTree,this,a,b),d&&a.fireEvent("move",this.ownerTree,a,d,this,e,b),a},remove:function(a){return this.parentNode&&this.parentNode.removeChild(this,a),this},removeAll:function(a){var b=this.childNodes,c;while(c=b[0])this.removeChild(c,a);return this},item:function(a){return this.childNodes[a]},replaceChild:function(a,b){var c=b?b.nextSibling:null;return this.removeChild(b),this.insertBefore(a,c),b},indexOf:function(a){return this.childNodes.indexOf(a)},getOwnerTree:function(){if(!this.ownerTree){var a=this;while(a){if(a.ownerTree){this.ownerTree=a.ownerTree;break}a=a.parentNode}}return this.ownerTree},getDepth:function(){var a=0,b=this;while(b.parentNode)++a,b=b.parentNode;return a},setOwnerTree:function(a,b){a!=this.ownerTree&&(this.ownerTree&&this.ownerTree.unregisterNode(this),this.ownerTree=a,b!==!0&&Ext.each(this.childNodes,function(b){b.setOwnerTree(a)}),a&&a.registerNode(this))},setId:function(a){if(a!==this.id){var b=this.ownerTree;b&&b.unregisterNode(this),this.id=this.attributes.id=a,b&&b.registerNode(this),this.onIdChange(a)}},onIdChange:Ext.emptyFn,getPath:function(a){a=a||"id";var b=this.parentNode,c=[this.attributes[a]];while(b)c.unshift(b.attributes[a]),b=b.parentNode;var d=this.getOwnerTree().pathSeparator;return d+c.join(d)},bubble:function(a,b,c){var d=this;while(d){if(a.apply(b||d,c||[d])===!1)break;d=d.parentNode}},cascade:function(a,b,c){if(a.apply(b||this,c||[this])!==!1){var d=this.childNodes;for(var e=0,f=d.length;e<f;e++)d[e].cascade(a,b,c)}},eachChild:function(a,b,c){var d=this.childNodes;for(var e=0,f=d.length;e<f;e++)if(a.apply(b||d[e],c||[d[e]])===!1)break},findChild:function(a,b,c){return this.findChildBy(function(){return this.attributes[a]==b},null,c)},findChildBy:function(a,b,c){var d=this.childNodes,e=d.length,f=0,g,h;for(;f<e;f++){g=d[f];if(a.call(b||g,g)===!0)return g;if(c){h=g.findChildBy(a,b,c);if(h!=null)return h}}return null},sort:function(a,b){var c=this.childNodes,d=c.length;if(d>0){var e=b?function(){a.apply(b,arguments)}:a;c.sort(e);for(var f=0;f<d;f++){var g=c[f];g.previousSibling=c[f-1],g.nextSibling=
c[f+1],f===0&&this.setFirstChild(g),f==d-1&&this.setLastChild(g)}}},contains:function(a){return a.isAncestor(this)},isAncestor:function(a){var b=this.parentNode;while(b){if(b==a)return!0;b=b.parentNode}return!1},toString:function(){return"[Node"+(this.id?" "+this.id:"")+"]"}}),Ext.tree.TreeNode=Ext.extend(Ext.data.Node,{constructor:function(a){a=a||{},Ext.isString(a)&&(a={text:a}),this.childrenRendered=!1,this.rendered=!1,Ext.tree.TreeNode.superclass.constructor.call(this,a),this.expanded=a.expanded===!0,this.isTarget=a.isTarget!==!1,this.draggable=a.draggable!==!1&&a.allowDrag!==!1,this.allowChildren=a.allowChildren!==!1&&a.allowDrop!==!1,this.text=a.text,this.disabled=a.disabled===!0,this.hidden=a.hidden===!0,this.addEvents("textchange","beforeexpand","beforecollapse","expand","disabledchange","collapse","beforeclick","click","checkchange","beforedblclick","dblclick","contextmenu","beforechildrenrendered");var b=this.attributes.uiProvider||this.defaultUI||Ext.tree.TreeNodeUI;this.ui=new b(this)},preventHScroll:!0,isExpanded:function(){return this.expanded},getUI:function(){return this.ui},getLoader:function(){var a;return this.loader||((a=this.getOwnerTree())&&a.loader?a.loader:this.loader=new Ext.tree.TreeLoader)},setFirstChild:function(a){var b=this.firstChild;Ext.tree.TreeNode.superclass.setFirstChild.call(this,a),this.childrenRendered&&b&&a!=b&&b.renderIndent(!0,!0),this.rendered&&this.renderIndent(!0,!0)},setLastChild:function(a){var b=this.lastChild;Ext.tree.TreeNode.superclass.setLastChild.call(this,a),this.childrenRendered&&b&&a!=b&&b.renderIndent(!0,!0),this.rendered&&this.renderIndent(!0,!0)},appendChild:function(a){!a.render&&!Ext.isArray(a)&&(a=this.getLoader().createNode(a));var b=Ext.tree.TreeNode.superclass.appendChild.call(this,a);return b&&this.childrenRendered&&b.render(),this.ui.updateExpandIcon(),b},removeChild:function(a,b){this.ownerTree.getSelectionModel().unselect(a),Ext.tree.TreeNode.superclass.removeChild.apply(this,arguments);if(!b){var c=a.ui.rendered;c&&a.ui.remove(),c&&this.childNodes.length<1?this.collapse(!1,!1):this.ui.updateExpandIcon(),!this.firstChild&&!this.isHiddenRoot()&&(this.childrenRendered=!1)}return a},insertBefore:function(a,b){a.render||(a=this.getLoader().createNode(a));var c=Ext.tree.TreeNode.superclass.insertBefore.call(this,a,b);return c&&b&&this.childrenRendered&&a.render(),this.ui.updateExpandIcon(),c},setText:function(a){var b=this.text;this.text=this.attributes.text=a,this.rendered&&this.ui.onTextChange(this,a,b),this.fireEvent("textchange",this,a,b)},setIconCls:function(a){var b=this.attributes.iconCls;this.attributes.iconCls=a,this.rendered&&this.ui.onIconClsChange(this,a,b)},setTooltip:function(a,b){this.attributes.qtip=a,this.attributes.qtipTitle=b,this.rendered&&this.ui.onTipChange(this,a,b)},setIcon:function(a){this.attributes.icon=a,this.rendered&&this.ui.onIconChange(this,a)},setHref:function(a,b){this.attributes.href=a,this.attributes.hrefTarget=b,this.rendered&&this.ui.onHrefChange(this,a,b)},setCls:function(a){var b=this.attributes.cls;this.attributes.cls=a,this.rendered&&this.ui.onClsChange(this,a,b)},select:function(){var a=this.getOwnerTree();a&&a.getSelectionModel().select(this)},unselect:function(a){var b=this.getOwnerTree();b&&b.getSelectionModel().unselect(this,a)},isSelected:function(){var a=this.getOwnerTree();return a?a.getSelectionModel().isSelected(this):!1},expand:function(a,b,c,d){if(!this.expanded){if(this.fireEvent("beforeexpand",this,a,b)===!1)return;this.childrenRendered||this.renderChildren(),this.expanded=!0;if(!this.isHiddenRoot()&&this.getOwnerTree().animate&&b!==!1||b){this.ui.animExpand(function(){this.fireEvent("expand",this),this.runCallback(c,d||this,[this]),a===!0&&this.expandChildNodes(!0,!0)}.createDelegate(this));return}this.ui.expand(),this.fireEvent("expand",this),this.runCallback(c,d||this,[this])}else this.runCallback(c,d||this,[this]);a===!0&&this.expandChildNodes(!0)},runCallback:function(a,b,c){Ext.isFunction(a)&&a.apply(b,c)},isHiddenRoot:function(){return this.isRoot&&!this.getOwnerTree().rootVisible},collapse:function(a,b,c,d){if(this.expanded&&!this.isHiddenRoot()){if(this.fireEvent("beforecollapse",this,a,b)===!1)return;this.expanded=!1;if(this.getOwnerTree().animate&&b!==!1||b){this.ui.animCollapse(function(){this.fireEvent("collapse",this),this.runCallback(c,d||this,[this]),a===!0&&this.collapseChildNodes(!0)}.createDelegate(this));return}this.ui.collapse(),this.fireEvent("collapse",this),this.runCallback(c,d||this,[this])}else this.expanded||this.runCallback(c,d||this,[this]);if(a===!0){var e=this.childNodes;for(var f=0,g=e.length;f<g;f++)e[f].collapse(!0,!1)}},delayedExpand:function(a){this.expandProcId||(this.expandProcId=this.expand.defer(a,this))},cancelExpand:function(){this.expandProcId&&clearTimeout(this.expandProcId),this.expandProcId=!1},toggle:function(){this.expanded?this.collapse():this.expand()},ensureVisible:function(a,b){var c=this.getOwnerTree();c.expandPath(this.parentNode?this.parentNode.getPath():this.getPath(),!1,function(){var d=c.getNodeById(this.id);c.getTreeEl().scrollChildIntoView(d.ui.anchor),this.runCallback(a,b||this,[this])}.createDelegate(this))},expandChildNodes:function(a,b){var c=this.childNodes,d,e=c.length;for(d=0;d<e;d++)c[d].expand(a,b)},collapseChildNodes:function(a){var b=this.childNodes;for(var c=0,d=b.length;c<d;c++)b[c].collapse(a)},disable:function(){this.disabled=!0,this.unselect(),this.rendered&&this.ui.onDisableChange&&this.ui.onDisableChange(this,!0),this.fireEvent("disabledchange",this,!0)},enable:function(){this.disabled=!1,this.rendered&&this.ui.onDisableChange&&this.ui.onDisableChange(this,!1),this.fireEvent("disabledchange",this,!1)},renderChildren:function(a){a!==!1&&this.fireEvent("beforechildrenrendered",this);var b=this.childNodes;for(var c=0,d=b.length;c<d;c++)b[c].render(!0);this.childrenRendered=!0},sort:function(a,b){Ext.tree.TreeNode.superclass.sort.apply(this,arguments);if(this.childrenRendered){var c=this.childNodes;for(var d=0,e=c.length;d<e;d++)c[d].render(!0)}},render:function(a){this.ui.render(a),this.rendered||(this.getOwnerTree().registerNode(this),this.rendered=!0,this.expanded&&(this.expanded=!1,this.expand(!1,!1)))},renderIndent:function(a,b){b&&(this.ui.childIndent=null),this.ui.renderIndent();if(a===!0&&this.childrenRendered){var c=this.childNodes;for(var d=0,e=c.length;d<e;d++)c[d].renderIndent(!0,b)}},beginUpdate:function(){this.childrenRendered=!1},endUpdate:function(){this.expanded&&this.rendered&&this.renderChildren()},destroy:function(a){a===!0&&this.unselect(!0),Ext.tree.TreeNode.superclass.destroy.call(this,a),Ext.destroy(this.ui,this.loader),this.ui=this.loader=null},onIdChange:function(a){this.ui.onIdChange(a)}}),Ext.tree.TreePanel.nodeTypes.node=Ext.tree.TreeNode,Ext.tree.AsyncTreeNode=function(a){this.loaded=a&&a.loaded===!0,this.loading=!1,Ext.tree.AsyncTreeNode.superclass.constructor.apply(this,arguments),this.addEvents("beforeload","load")},Ext.extend(Ext.tree.AsyncTreeNode,Ext.tree.TreeNode,{expand:function(a,b,c,d){if(this.loading){var e,f=function(){this.loading||(clearInterval(e),this.expand(a,b,c,d))}.createDelegate(this);e=setInterval(f,200);return}if(!this.loaded){if(this.fireEvent("beforeload",this)===!1)return;this.loading=!0,this.ui.beforeLoad(this);var g=this.loader||this.attributes.loader||this.getOwnerTree().getLoader();if(g){g.load(this,this.loadComplete.createDelegate(this,[a,b,c,d]),this);return}}Ext.tree.AsyncTreeNode.superclass.expand.call(this,a,b,c,d)},isLoading:function(){return this.loading},loadComplete:function(a,b,c,d){this.loading=!1,this.loaded=!0,this.ui.afterLoad(this),this.fireEvent("load",this),this.expand(a,b,c,d)},isLoaded:function(){return this.loaded},hasChildNodes:function(){return!this.isLeaf()&&!this.loaded?!0:Ext.tree.AsyncTreeNode.superclass.hasChildNodes.call(this)},reload:function(a,b){this.collapse(!1,!1);while(this.firstChild)this.removeChild(this.firstChild).destroy();this.childrenRendered=!1,this.loaded=!1,this.isHiddenRoot()&&(this.expanded=!1),this.expand(!1,!1,a,b)}}),Ext.tree.TreePanel.nodeTypes.async=Ext.tree.AsyncTreeNode,Ext.tree.TreeNodeUI=Ext.extend(Object,{constructor:function(a){Ext.apply(this,{node:a,rendered:!1,animating:!1,wasLeaf:!0,ecc:"x-tree-ec-icon x-tree-elbow",emptyIcon:Ext.BLANK_IMAGE_URL})},removeChild:function(a){this.rendered&&this.ctNode.removeChild(a.ui.getEl())},beforeLoad:function(){this.addClass("x-tree-node-loading")},afterLoad:function(){this.removeClass("x-tree-node-loading")},onTextChange:function(a,b,c){this.rendered&&(this.textNode.innerHTML=b)},onIconClsChange:function(a,b,c){this.rendered&&Ext.fly(this.iconNode).replaceClass(c,b)},onIconChange:function(a,b){if(this.rendered){var c=Ext.isEmpty(b);this.iconNode.src=c?this.emptyIcon:b,Ext.fly(this.iconNode)[c?"removeClass":"addClass"]("x-tree-node-inline-icon")}},onTipChange:function(a,b,c){if(this.rendered){var d=Ext.isDefined(c);this.textNode.setAttributeNS?(this.textNode.setAttributeNS("ext","qtip",b),d&&this.textNode.setAttributeNS("ext","qtitle",c)):(this.textNode.setAttribute("ext:qtip",b),d&&this.textNode.setAttribute("ext:qtitle",c))}},onHrefChange:function(a,b,c){this.rendered&&(this.anchor.href=this.getHref(b),Ext.isDefined(c)&&(this.anchor.target=c))},onClsChange:function(a,b,c){this.rendered&&Ext.fly(this.elNode).replaceClass(c,b)},onDisableChange:function(a,b){this.disabled=b,this.checkbox&&(this.checkbox.disabled=b),this[b?"addClass":"removeClass"]("x-tree-node-disabled")},onSelectedChange:function(a){a?(this.focus(),this.addClass("x-tree-selected")):this.removeClass("x-tree-selected")},onMove:function(a,b,c,d,e,f){this.childIndent=null;if(this.rendered){var g=d.ui.getContainer();if(!g){this.holder=document.createElement("div"),this.holder.appendChild(this.wrap);return}var h=f?f.ui.getEl():null;h?g.insertBefore(this.wrap,h):g.appendChild(this.wrap),this.node.renderIndent(!0,c!=d)}},addClass:function(a){this.elNode&&Ext.fly(this.elNode).addClass(a)},removeClass:function(a){this.elNode&&Ext.fly(this.elNode).removeClass(a)},remove:function(){this.rendered&&(this.holder=document.createElement("div"),this.holder.appendChild(this.wrap))},fireEvent:function(){return this.node.fireEvent.apply(this.node,arguments)},initEvents:function(){this.node.on("move",this.onMove,this),this.node.disabled&&this.onDisableChange(this.node,!0),this.node.hidden&&this.hide();var a=this.node.getOwnerTree(),b=a.enableDD||a.enableDrag||a.enableDrop;b&&(!this.node.isRoot||a.rootVisible)&&Ext.dd.Registry.register(this.elNode,{node:this.node,handles:this.getDDHandles(),isHandle:!1})},getDDHandles:function(){return[this.iconNode,this.textNode,this.elNode]},hide:function(){this.node.hidden=!0,this.wrap&&(this.wrap.style.display="none")},show:function(){this.node.hidden=!1,this.wrap&&(this.wrap.style.display="")},onContextMenu:function(a){if(this.node.hasListener("contextmenu")||this.node.getOwnerTree().hasListener("contextmenu"))a.preventDefault(),this.focus(),this.fireEvent("contextmenu",this.node,a)},onClick:function(a){if(this.dropping){a.stopEvent();return}if(this.fireEvent("beforeclick",this.node,a)!==!1){var b=a.getTarget("a");if(!this.disabled&&this.node.attributes.href&&b){this.fireEvent("click",this.node,a);return}b&&a.ctrlKey&&a.stopEvent(),a.preventDefault();if(this.disabled)return;this.node.attributes.singleClickExpand&&!this.animating&&this.node.isExpandable()&&this.node.toggle(),this.fireEvent("click",this.node,a)}else a.stopEvent()},onDblClick:function(a){a.preventDefault();if(this.disabled)return;this.fireEvent("beforedblclick",this.node,a)!==!1&&(this.checkbox&&this.toggleCheck(),!this.animating&&this.node.isExpandable()&&this.node.toggle(),this.fireEvent("dblclick",this.node,a))},onOver:function(a){this.addClass("x-tree-node-over")},onOut:function(a){this.removeClass("x-tree-node-over")},onCheckChange:function(){var a=this.checkbox.checked;this.checkbox.defaultChecked=a,this.node.attributes.checked=a,this.fireEvent("checkchange",this.node,a)},ecClick:function(a){!this.animating&&this.node.isExpandable()&&this.node.toggle()},startDrop:function(){this.dropping=!0},endDrop:function(){setTimeout(function(){this.dropping=!1}.createDelegate(this),50)},expand:function(){this.updateExpandIcon(),this.ctNode.style.display=""},focus:function(){if(!this.node.preventHScroll)try{this.anchor.focus()}catch(a){}else try{var b=this.node.getOwnerTree().getTreeEl().dom,c=b.scrollLeft;this.anchor.focus(),b.scrollLeft=c}catch(a){}},toggleCheck:function(a){var b=this.checkbox;b&&(b.checked=a===undefined?!b.checked:a,this.onCheckChange())},blur:function(){try{this.anchor.blur()}catch(a){}},animExpand:function(a){var b=Ext.get(this.ctNode);b.stopFx();if(!this.node.isExpandable()){this.updateExpandIcon(),this.ctNode.style.display="",Ext.callback(a);return}this.animating=!0,this.updateExpandIcon(),b.slideIn("t",{callback:function(){this.animating=!1,Ext.callback(a)},scope:this,duration:this.node.ownerTree.duration||.25})},highlight:function(){var a=this.node.getOwnerTree();Ext.fly(this.wrap).highlight(a.hlColor||"C3DAF9",{endColor:a.hlBaseColor})},collapse:function(){this.updateExpandIcon(),this.ctNode.style.display="none"},animCollapse:function(a){var b=Ext.get(this.ctNode);b.enableDisplayMode("block"),b.stopFx(),this.animating=!0,this.updateExpandIcon(),b.slideOut("t",{callback:function(){this.animating=!1,Ext.callback(a)},scope:this,duration:this.node.ownerTree.duration||.25})},getContainer:function(){return this.ctNode},getEl:function(){return this.wrap},appendDDGhost:function(a){a.appendChild(this.elNode.cloneNode(!0))},getDDRepairXY:function(){return Ext.lib.Dom.getXY(this.iconNode)},onRender:function(){this.render()},render:function(a){var b=this.node,c=b.attributes,d=b.parentNode?b.parentNode.ui.getContainer():b.ownerTree.innerCt.dom;this.rendered?a===!0&&d.appendChild(this.wrap):(this.rendered=!0,this.renderElements(b,c,d,a),c.qtip?this.onTipChange(b,c.qtip,c.qtipTitle):c.qtipCfg&&(c.qtipCfg.target=Ext.id(this.textNode),Ext.QuickTips.register(c.qtipCfg)),this.initEvents(),this.node.expanded||this.updateExpandIcon(!0))},renderElements:function(a,b,c,d){this.indentMarkup=a.parentNode?a.parentNode.ui.getChildIndent():"";var e=Ext.isBoolean(b.checked),f,g=this.getHref(b.href),h=['<li class="x-tree-node"><div ext:tree-node-id="',a.id,'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',b.cls,'" unselectable="on">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<img alt="" src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img alt="" src="',b.icon||this.emptyIcon,'" class="x-tree-node-icon',b.icon?" x-tree-node-inline-icon":"",b.iconCls?" "+b.iconCls:"",'" unselectable="on" />',e?'<input class="x-tree-node-cb" type="checkbox" '+(b.checked?'checked="checked" />':"/>"):"",'<a hidefocus="on" class="x-tree-node-anchor" href="',g,'" tabIndex="1" ',b.hrefTarget?' target="'+b.hrefTarget+'"':"",'><span unselectable="on">',a.text,"</span></a></div>",'<ul class="x-tree-node-ct" style="display:none;"></ul>',"</li>"].join("");d!==!0&&a.nextSibling&&(f=a.nextSibling.ui.getEl())?this.wrap=Ext.DomHelper.insertHtml("beforeBegin",f,h):this.wrap=Ext.DomHelper.insertHtml("beforeEnd",c,h),this.elNode=this.wrap.childNodes[0],this.ctNode=this.wrap.childNodes[1];var i=this.elNode.childNodes;this.indentNode=i[0],this.ecNode=i[1],this.iconNode=i[2];var j=3;e&&(this.checkbox=i[3],this.checkbox.defaultChecked=this.checkbox.checked,j++),this.anchor=i[j],this.textNode=i[j].firstChild},getHref:function(a){return Ext.isEmpty(a)?Ext.isGecko?"":"#":a},getAnchor:function(){return this.anchor},getTextEl:function(){return this.textNode},getIconEl:function(){return this.iconNode},isChecked:function(){return this.checkbox?this.checkbox.checked:!1},updateExpandIcon:function(){if(this.rendered){var a=this.node,b,c,d=a.isLast()?"x-tree-elbow-end":"x-tree-elbow",e=a.hasChildNodes();if(e||a.attributes.expandable){a.expanded?(d+="-minus",b="x-tree-node-collapsed",c="x-tree-node-expanded"):(d+="-plus",b="x-tree-node-expanded",c="x-tree-node-collapsed"),this.wasLeaf&&(this.removeClass("x-tree-node-leaf"),this.wasLeaf=!1);if(this.c1!=b||this.c2!=c)Ext.fly(this.elNode).replaceClass(b,c),this.c1=b,this.c2=c}else this.wasLeaf||(Ext.fly(this.elNode).replaceClass("x-tree-node-expanded","x-tree-node-collapsed"),delete this.c1,delete this.c2,this.wasLeaf=!0);var f="x-tree-ec-icon "+d;this.ecc!=f&&(this.ecNode.className=f,this.ecc=f)}},onIdChange:function(a){this.rendered&&this.elNode.setAttribute("ext:tree-node-id",a)},getChildIndent:function(){if(!this.childIndent){var a=[],b=this.node;while(b){if(!b.isRoot||b.isRoot&&b.ownerTree.rootVisible)b.isLast()?a.unshift('<img alt="" src="'+this.emptyIcon+'" class="x-tree-icon" />'):a.unshift('<img alt="" src="'+this.emptyIcon+'" class="x-tree-elbow-line" />');b=b.parentNode}this.childIndent=a.join("")}return this.childIndent},renderIndent:function(){if(this.rendered){var a="",b=this.node.parentNode;b&&(a=b.ui.getChildIndent()),this.indentMarkup!=a&&(this.indentNode.innerHTML=a,this.indentMarkup=a),this.updateExpandIcon()}},destroy:function(){this.elNode&&Ext.dd.Registry.unregister(this.elNode.id),Ext.each(["textnode","anchor","checkbox","indentNode","ecNode","iconNode","elNode","ctNode","wrap","holder"],function(a){this[a]&&(Ext.fly(this[a]).remove(),delete this[a])},this),delete this.node}}),Ext.tree.RootTreeNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{render:function(){if(!this.rendered){var a=this.node.ownerTree.innerCt.dom;this.node.expanded=!0,a.innerHTML='<div class="x-tree-root-node"></div>',this.wrap=this.ctNode=a.firstChild}},collapse:Ext.emptyFn,expand:Ext.emptyFn}),Ext.tree.TreeLoader=function(a){this.baseParams={},Ext.apply(this,a),this.addEvents("beforeload","load","loadexception"),Ext.tree.TreeLoader.superclass.constructor.call(this),Ext.isString(this.paramOrder)&&(this.paramOrder=this.paramOrder.split(/[\s,|]/))},Ext.extend(Ext.tree.TreeLoader,Ext.util.Observable,{uiProviders:{},clearOnLoad:!0,paramOrder:undefined,paramsAsHash:!1,nodeParameter:"node",directFn:undefined,load:function(a,b,c){if(this.clearOnLoad)while(a.firstChild)a.removeChild(a.firstChild);this.doPreload(a)?this.runCallback(b,c||a,[a]):(this.directFn||this.dataUrl||this.url)&&this.requestData(a,b,c||a)},doPreload:function(a){if(a.attributes.children){if(a.childNodes.length<1){var b=a.attributes.children;a.beginUpdate();for(var c=0,d=b.length;c<d;c++){var e=a.appendChild(this.createNode(b[c]));this.preloadChildren&&this.doPreload(e)}a.endUpdate()}return!0}return!1},getParams:function(a){var b=Ext.apply({},this.baseParams),c=this.nodeParameter,d=this.paramOrder;c&&(b[c]=a.id);if(this.directFn){var e=[a.id];if(d){c&&d.indexOf(c)>-1&&(e=[]);for(var f=0,g=d.length;f<g;f++)e.push(b[d[f]])}else this.paramsAsHash&&(e=[b]);return e}return b},requestData:function(a,b,c){if(this.fireEvent("beforeload",this,a,b)!==!1)if(this.directFn){var d=this.getParams(a);d.push(this.processDirectResponse.createDelegate(this,[{callback:b,node:a,scope:c}],!0)),this.directFn.apply(window,d)}else this.transId=Ext.Ajax.request({method:this.requestMethod,url:this.dataUrl||this.url,success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{callback:b,node:a,scope:c},params:this.getParams(a)});else this.runCallback(b,c||a,[])},processDirectResponse:function(a,b,c){b.status?this.handleResponse({responseData:Ext.isArray(a)?a:null,responseText:a,argument:c}):this.handleFailure({argument:c})},runCallback:function(a,b,c){Ext.isFunction(a)&&a.apply(b,c)},isLoading:function(){return!!this.transId},abort:function(){this.isLoading()&&Ext.Ajax.abort(this.transId)},createNode:function(attr){return this.baseAttrs&&Ext.applyIf(attr,this.baseAttrs),this.applyLoader!==!1&&!attr.loader&&(attr.loader=this),Ext.isString(attr.uiProvider)&&(attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider)),attr.nodeType?new Ext.tree.TreePanel.nodeTypes[attr.nodeType](attr):attr.leaf?new Ext.tree.TreeNode(attr):new Ext.tree.AsyncTreeNode(attr)},processResponse:function(a,b,c,d){var e=a.responseText;try{var f=a.responseData||Ext.decode(e);b.beginUpdate();for(var g=0,h=f.length;g<h;g++){var i=this.createNode(f[g]);i&&b.appendChild(i)}b.endUpdate(),this.runCallback(c,d||b,[b])}catch(j){this.handleFailure(a)}},handleResponse:function(a){this.transId=!1;var b=a.argument;this.processResponse(a,b.node,b.callback,b.scope),this.fireEvent("load",this,b.node,a)},handleFailure:function(a){this.transId=!1;var b=a.argument;this.fireEvent("loadexception",this,b.node,a),this.runCallback(b.callback,b.scope||b.node,[b.node])},destroy:function(){this.abort(),this.purgeListeners()}}),Ext.tree.TreeFilter=function(a,b){this.tree=a,this.filtered={},Ext.apply(this,b)},Ext.tree.TreeFilter.prototype={clearBlank:!1,reverse:!1,autoClear:!1,remove:!1,filter:function(a,b,c){b=b||"text";var d;if(typeof a=="string"){var e=a.length;if(e==0&&this.clearBlank){this.clear();return}a=a.toLowerCase(),d=function(c){return c.attributes[b].substr(0,e).toLowerCase()==a}}else{if(!a.exec)throw"Illegal filter type, must be string or regex";d=function(c){return a.test(c.attributes[b])}}this.filterBy(d,null,c)},filterBy:function(a,b,c){c=c||this.tree.root,this.autoClear&&this.clear();var d=this.filtered,e=this.reverse,f=function(f){if(f==c)return!0;if(d[f.id])return!1;var g=a.call(b||f,f);return!g||e?(d[f.id]=f,f.ui.hide(),!1):!0};c.cascade(f);if(this.remove)for(var g in d)if(typeof g!="function"){var h=d[g];h&&h.parentNode&&h.parentNode.removeChild(h)}},clear:function(){var a=this.tree,b=this.filtered;for(var c in b)if(typeof c!="function"){var d=b[c];d&&d.ui.show()}this.filtered={}}},Ext.tree.TreeSorter=Ext.extend(Object,{constructor:function(a,b){Ext.apply(this,b),a.on({scope:this,beforechildrenrendered:this.doSort,append:this.updateSort,insert:this.updateSort,textchange:this.updateSortParent});var c=this.dir&&this.dir.toLowerCase()=="desc",d=this.property||"text";sortType=this.sortType,folderSort=this.folderSort,caseSensitive=this.caseSensitive===!0,leafAttr=this.leafAttr||"leaf",Ext.isString(sortType)&&(sortType=Ext.data.SortTypes[sortType]),this.sortFn=function(a,b){var e=a.attributes,f=b.attributes;if(folderSort){if(e[leafAttr]&&!f[leafAttr])return 1;if(!e[leafAttr]&&f[leafAttr])return-1}var g=e[d],h=f[d],i=sortType?sortType(g):caseSensitive?g:g.toUpperCase();return v2=sortType?sortType(h):caseSensitive?h:h.toUpperCase(),i<v2?c?1:-1:i>v2?c?-1:1:0}},doSort:function(a){a.sort(this.sortFn)},updateSort:function(a,b){b.childrenRendered&&this.doSort.defer(1,this,[b])},updateSortParent:function(a){var b=a.parentNode;b&&b.childrenRendered&&this.doSort.defer(1,this,[b])}}),Ext.dd.DropZone&&(Ext.tree.TreeDropZone=function(a,b){this.allowParentInsert=b.allowParentInsert||!1,this.allowContainerDrop=b.allowContainerDrop||!1,this.appendOnly=b.appendOnly||!1,Ext.tree.TreeDropZone.superclass.constructor.call(this,a.getTreeEl(),b),this.tree=a,this.dragOverData={},this.lastInsertClass="x-tree-no-status"},Ext.extend(Ext.tree.TreeDropZone,Ext.dd.DropZone,{ddGroup:"TreeDD",expandDelay:1e3,expandNode:function(a){a.hasChildNodes()&&!a.isExpanded()&&a.expand(!1,null,this.triggerCacheRefresh.createDelegate(this))},queueExpand:function(a){this.expandProcId=this.expandNode.defer(this.expandDelay,this,[a])},cancelExpand:function(){this.expandProcId&&(clearTimeout(this.expandProcId),this.expandProcId=!1)},isValidDropPoint:function(a,b,c,d,e){if(!a||!e)return!1;var f=a.node,g=e.node;if(!(f&&f.isTarget&&b))return!1;if(b=="append"&&f.allowChildren===!1)return!1;if(b!="above"&&b!="below"||!f.parentNode||f.parentNode.allowChildren!==!1){if(g&&(f==g||g.contains(f)))return!1;var h=this.dragOverData;h.tree=this.tree,h.target=f,h.data=e,h.point=b,h.source=c,h.rawEvent=d,h.dropNode=g,h.cancel=!1;var i=this.tree.fireEvent("nodedragover",h);return h.cancel===!1&&i!==!1}return!1},getDropPoint:function(a,b,c){var d=b.node;if(d.isRoot)return d.allowChildren!==!1?"append":!1;var e=b.ddel,f=Ext.lib.Dom.getY(e),g=f+e.offsetHeight,h=Ext.lib.Event.getPageY(a),i=d.allowChildren===!1||d.isLeaf();if(this.appendOnly||d.parentNode.allowChildren===!1)return i?!1:"append";var j=!1;this.allowParentInsert||(j=d.hasChildNodes()&&d.isExpanded());var k=(g-f)/(i?2:3);return h>=f&&h<f+k?"above":!j&&(i||h>=g-k&&h<=g)?"below":"append"},onNodeEnter:function(a,b,c,d){this.cancelExpand()},onContainerOver:function(a,b,c){return this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",a,b,c)?this.dropAllowed:this.dropNotAllowed},onNodeOver:function(a,b,c,d){var e=this.getDropPoint(c,a,b),f=a.node;!this.expandProcId&&e=="append"&&f.hasChildNodes()&&!a.node.isExpanded()?this.queueExpand(f):e!="append"&&this.cancelExpand();var g=this.dropNotAllowed;if(this.isValidDropPoint(a,e,b,c,d)&&e){var h=a.ddel,i;e=="above"?(g=a.node.isFirst()?"x-tree-drop-ok-above":"x-tree-drop-ok-between",i="x-tree-drag-insert-above"):e=="below"?(g=a.node.isLast()?"x-tree-drop-ok-below":"x-tree-drop-ok-between",i="x-tree-drag-insert-below"):(g="x-tree-drop-ok-append",i="x-tree-drag-append"),this.lastInsertClass!=i&&(Ext.fly(h).replaceClass(this.lastInsertClass,i),this.lastInsertClass=i)}return g},onNodeOut:function(a,b,c,d){this.cancelExpand(),this.removeDropIndicators(a)},onNodeDrop:function(a,b,c,d){var e=this.getDropPoint(c,a,b),f=a.node;f.ui.startDrop();if(!this.isValidDropPoint(a,e,b,c,d))return f.ui.endDrop(),!1;var g=d.node||(b.getTreeNode?b.getTreeNode(d,f,e,c):null);return this.processDrop(f,d,e,b,c,g)},onContainerDrop:function(a,b,c){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",a,b,c)){var d=this.tree.getRootNode();d.ui.startDrop();var e=c.node||(a.getTreeNode?a.getTreeNode(c,d,"append",b):null);return this.processDrop(d,c,"append",a,b,e)}return!1},processDrop:function(a,b,c,d,e,f){var g={tree:this.tree,target:a,data:b,point:c,source:d,rawEvent:e,dropNode:f,cancel:!f,dropStatus:!1},h=this.tree.fireEvent("beforenodedrop",g);return h===!1||g.cancel===!0||!g.dropNode?(a.ui.endDrop(),g.dropStatus):(a=g.target,c=="append"&&!a.isExpanded()?a.expand(!1,null,function(){this.completeDrop(g)}.createDelegate(this)):this.completeDrop(g),!0)},completeDrop:function(a){var b=a.dropNode,c=a.point,d=a.target;Ext.isArray(b)||(b=[b]);var e;for(var f=0,g=b.length;f<g;f++)e=b[f],c=="above"?d.parentNode.insertBefore(e,d):c=="below"?d.parentNode.insertBefore(e,d.nextSibling):d.appendChild(e);e.ui.focus(),Ext.enableFx&&this.tree.hlDrop&&e.ui.highlight(),d.ui.endDrop(),this.tree.fireEvent("nodedrop",a)},afterNodeMoved:function(a,b,c,d,e){Ext.enableFx&&this.tree.hlDrop&&(e.ui.focus(),e.ui.highlight()),this.tree.fireEvent("nodedrop",this.tree,d,b,a,c)},getTree:function(){return this.tree},removeDropIndicators:function(a){if(a&&a.ddel){var b=a.ddel;Ext.fly(b).removeClass(["x-tree-drag-insert-above","x-tree-drag-insert-below","x-tree-drag-append"]),this.lastInsertClass="_noclass"}},beforeDragDrop:function(a,b,c){return this.cancelExpand(),!0},afterRepair:function(a){a&&Ext.enableFx&&a.node.ui.highlight(),this.hideProxy()}})),Ext.dd.DragZone&&(Ext.tree.TreeDragZone=function(a,b){Ext.tree.TreeDragZone.superclass.constructor.call(this,a.innerCt,b),this.tree=a},Ext.extend(Ext.tree.TreeDragZone,Ext.dd.DragZone,{ddGroup:"TreeDD",onBeforeDrag:function(a,b){var c=a.node;return c&&c.draggable&&!c.disabled},onInitDrag:function(a){var b=this.dragData;this.tree.getSelectionModel().select(b.node),this.tree.eventModel.disable(),this.proxy.update(""),b.node.ui.appendDDGhost(this.proxy.ghost.dom),this.tree.fireEvent("startdrag",this.tree,b.node,a)},getRepairXY:function(a,b){return b.node.ui.getDDRepairXY()},onEndDrag:function(a,b){this.tree.eventModel.enable.defer(100,this.tree.eventModel),this.tree.fireEvent("enddrag",this.tree,a.node,b)},onValidDrop:function(a,b,c){this.tree.fireEvent("dragdrop",this.tree,this.dragData.node,a,b),this.hideProxy()},beforeInvalidDrop:function(a,b){var c=this.tree.getSelectionModel();c.clearSelections(),c.select(this.dragData.node)},afterRepair:function(){Ext.enableFx&&this.tree.hlDrop&&Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9"),this.dragging=!1}})),Ext.tree.TreeEditor=function(a,b,c){b=b||{};var d=b.events?b:new Ext.form.TextField(b);Ext.tree.TreeEditor.superclass.constructor.call(this,d,c),this.tree=a,a.rendered?this.initEditor(a):a.on("render",this.initEditor,this)},Ext.extend(Ext.tree.TreeEditor,Ext.Editor,{alignment:"l-l",autoSize:!1,hideEl:!1,cls:"x-small-editor x-tree-editor",shim:!1,shadow:"frame",maxWidth:250,editDelay:350,initEditor:function(a){a.on({scope:this,beforeclick:this.beforeNodeClick,dblclick:this.onNodeDblClick}),this.on({scope:this,complete:this.updateNode,beforestartedit:this.fitToTree,specialkey:this.onSpecialKey}),this.on("startedit",this.bindScroll,this,{delay:10})},fitToTree:function(a,b){var c=this.tree.getTreeEl().dom,d=b.dom;c.scrollLeft>d.offsetLeft&&(c.scrollLeft=d.offsetLeft);var e=Math.min(this.maxWidth,(c.clientWidth>20?c.clientWidth:c.offsetWidth)-Math.max(0,d.offsetLeft-c.scrollLeft)-5);this.setSize(e,"")},triggerEdit:function(a,b){this.completeEdit();if(a.attributes.editable!==!1){this.editNode=a,this.tree.autoScroll&&Ext.fly(a.ui.getEl()).scrollIntoView(this.tree.body);var c=a.text||"";return!Ext.isGecko&&Ext.isEmpty(a.text)&&a.setText("&#160;"),this.autoEditTimer=this.startEdit.defer(this.editDelay,this,[a.ui.textNode,c]),!1}},bindScroll:function(){this.tree.getTreeEl().on("scroll",this.cancelEdit,this)},beforeNodeClick:function(a,b){clearTimeout(this.autoEditTimer);if(this.tree.getSelectionModel().isSelected(a))return b.stopEvent(),this.triggerEdit(a)},onNodeDblClick:function(a,b){clearTimeout(this.autoEditTimer)},updateNode:function(a,b){this.tree.getTreeEl().un("scroll",this.cancelEdit,this),this.editNode.setText(b)},onHide:function(){Ext.tree.TreeEditor.superclass.onHide.call(this),this.editNode&&this.editNode.ui.focus.defer(50,this.editNode.ui)},onSpecialKey:function(a,b){var c=b.getKey();c==b.ESC?(b.stopEvent(),this.cancelEdit()):c==b.ENTER&&!b.hasModifier()&&(b.stopEvent(),this.completeEdit())},onDestroy:function(){clearTimeout(this.autoEditTimer),Ext.tree.TreeEditor.superclass.onDestroy.call(this);var a=this.tree;a.un("beforeclick",this.beforeNodeClick,this),a.un("dblclick",this.onNodeDblClick,this)}});var swfobject=function(){function A(){if(t)return;try{var a=i.getElementsByTagName("body")[0].appendChild(Q("span"));a.parentNode.removeChild(a)}catch(b){return}t=!0;var c=l.length;for(var d=0;d<c;d++)l[d]()}function B(a){t?a():l[l.length]=a}function C(b){if(typeof h.addEventListener!=a)h.addEventListener("load",b,!1);else if(typeof i.addEventListener!=a)i.addEventListener("load",b,!1);else if(typeof h.attachEvent!=a)R(h,"onload",b);else if(typeof h.onload=="function"){var c=h.onload;h.onload=function(){c(),b()}}else h.onload=b}function D(){k?E():F()}function E(){var c=i.getElementsByTagName("body")[0],d=Q(b);d.setAttribute("type",e);var f=c.appendChild(d);if(f){var g=0;(function(){if(typeof f.GetVariable!=a){var b=f.GetVariable("$version");b&&(b=b.split(" ")[1].split(","),y.pv=[parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10)])}else if(g<10){g++,setTimeout(arguments.callee,10);return}c.removeChild(d),f=null,F()})()}else F()}function F(){var b=m.length;if(b>0)for(var c=0;c<b;c++){var d=m[c].id,e=m[c].callbackFn,f={success:!1,id:d};if(y.pv[0]>0){var g=P(d);if(g)if(S(m[c].swfVersion)&&!(y.wk&&y.wk<312))U(d,!0),e&&(f.success=!0,f.ref=G(d),e(f));else if(m[c].expressInstall&&H()){var h={};h.data=m[c].expressInstall,h.width=g.getAttribute("width")||"0",h.height=g.getAttribute("height")||"0",g.getAttribute("class")&&(h.styleclass=g.getAttribute("class")),g.getAttribute("align")&&(h.align=g.getAttribute("align"));var i={},j=g.getElementsByTagName("param"),k=j.length;for(var l=0;l<k;l++)j[l].getAttribute("name").toLowerCase()!="movie"&&(i[j[l].getAttribute("name")]=j[l].getAttribute("value"));I(h,i,d,e)}else J(g),e&&e(f)}else{U(d,!0);if(e){var n=G(d);n&&typeof n.SetVariable!=a&&(f.success=!0,f.ref=n),e(f)}}}}function G(c){var d=null,e=P(c);if(e&&e.nodeName=="OBJECT")if(typeof e.SetVariable!=a)d=e;else{var f=e.getElementsByTagName(b)[0];f&&(d=f)}return d}function H(){return!u&&S("6.0.65")&&(y.win||y.mac)&&!(y.wk&&y.wk<312)}function I(b,c,d,e){u=!0,r=e||null,s={success:!1,id:d};var g=P(d);if(g){g.nodeName=="OBJECT"?(p=K(g),q=null):(p=g,q=d),b.id=f;if(typeof b.width==a||!/%$/.test(b.width)&&parseInt(b.width,10)<310)b.width="310";if(typeof b.height==a||!/%$/.test(b.height)&&parseInt(b.height,10)<137)b.height="137";i.title=i.title.slice(0,47)+" - Flash Player Installation";var j=y.ie&&y.win?"ActiveX":"PlugIn",k="MMredirectURL="+h.location.toString().replace(/&/g,"%26")+"&MMplayerType="+
j+"&MMdoctitle="+i.title;typeof c.flashvars!=a?c.flashvars+="&"+k:c.flashvars=k;if(y.ie&&y.win&&g.readyState!=4){var l=Q("div");d+="SWFObjectNew",l.setAttribute("id",d),g.parentNode.insertBefore(l,g),g.style.display="none",function(){g.readyState==4?g.parentNode.removeChild(g):setTimeout(arguments.callee,10)}()}L(b,c,d)}}function J(a){if(y.ie&&y.win&&a.readyState!=4){var b=Q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(K(a),b),a.style.display="none",function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(K(a),a)}function K(a){var c=Q("div");if(y.win&&y.ie)c.innerHTML=a.innerHTML;else{var d=a.getElementsByTagName(b)[0];if(d){var e=d.childNodes;if(e){var f=e.length;for(var g=0;g<f;g++)(e[g].nodeType!=1||e[g].nodeName!="PARAM")&&e[g].nodeType!=8&&c.appendChild(e[g].cloneNode(!0))}}}return c}function L(c,d,f){var g,h=P(f);if(y.wk&&y.wk<312)return g;if(h){typeof c.id==a&&(c.id=f);if(y.ie&&y.win){var i="";for(var j in c)c[j]!=Object.prototype[j]&&(j.toLowerCase()=="data"?d.movie=c[j]:j.toLowerCase()=="styleclass"?i+=' class="'+c[j]+'"':j.toLowerCase()!="classid"&&(i+=" "+j+'="'+c[j]+'"'));var k="";for(var l in d)d[l]!=Object.prototype[l]&&(k+='<param name="'+l+'" value="'+d[l]+'" />');h.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+k+"</object>",n[n.length]=c.id,g=P(c.id)}else{var m=Q(b);m.setAttribute("type",e);for(var o in c)c[o]!=Object.prototype[o]&&(o.toLowerCase()=="styleclass"?m.setAttribute("class",c[o]):o.toLowerCase()!="classid"&&m.setAttribute(o,c[o]));for(var p in d)d[p]!=Object.prototype[p]&&p.toLowerCase()!="movie"&&M(m,p,d[p]);h.parentNode.replaceChild(m,h),g=m}}return g}function M(a,b,c){var d=Q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function N(a){var b=P(a);b&&b.nodeName=="OBJECT"&&(y.ie&&y.win?(b.style.display="none",function(){b.readyState==4?O(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function O(a){var b=P(a);if(b){for(var c in b)typeof b[c]=="function"&&(b[c]=null);b.parentNode.removeChild(b)}}function P(a){var b=null;try{b=i.getElementById(a)}catch(c){}return b}function Q(a){return i.createElement(a)}function R(a,b,c){a.attachEvent(b,c),o[o.length]=[a,b,c]}function S(a){var b=y.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function T(c,d,e,f){if(y.ie&&y.mac)return;var g=i.getElementsByTagName("head")[0];if(!g)return;var h=e&&typeof e=="string"?e:"screen";f&&(v=null,w=null);if(!v||w!=h){var j=Q("style");j.setAttribute("type","text/css"),j.setAttribute("media",h),v=g.appendChild(j),y.ie&&y.win&&typeof i.styleSheets!=a&&i.styleSheets.length>0&&(v=i.styleSheets[i.styleSheets.length-1]),w=h}y.ie&&y.win?v&&typeof v.addRule==b&&v.addRule(c,d):v&&typeof i.createTextNode!=a&&v.appendChild(i.createTextNode(c+" {"+d+"}"))}function U(a,b){if(!x)return;var c=b?"visible":"hidden";t&&P(a)?P(a).style.visibility=c:T("#"+a,"visibility:"+c)}function V(b){var c=/[\\\"<>\.;]/,d=c.exec(b)!=null;return d&&typeof encodeURIComponent!=a?encodeURIComponent(b):b}var a="undefined",b="object",c="Shockwave Flash",d="ShockwaveFlash.ShockwaveFlash",e="application/x-shockwave-flash",f="SWFObjectExprInst",g="onreadystatechange",h=window,i=document,j=navigator,k=!1,l=[D],m=[],n=[],o=[],p,q,r,s,t=!1,u=!1,v,w,x=!0,y=function(){var f=typeof i.getElementById!=a&&typeof i.getElementsByTagName!=a&&typeof i.createElement!=a,g=j.userAgent.toLowerCase(),l=j.platform.toLowerCase(),m=l?/win/.test(l):/win/.test(g),n=l?/mac/.test(l):/mac/.test(g),o=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!1,q=[0,0,0],r=null;if(typeof j.plugins!=a&&typeof j.plugins[c]==b)r=j.plugins[c].description,r&&(typeof j.mimeTypes==a||!j.mimeTypes[e]||!!j.mimeTypes[e].enabledPlugin)&&(k=!0,p=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),q[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),q[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),q[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof h.ActiveXObject!=a)try{var s=new ActiveXObject(d);s&&(r=s.GetVariable("$version"),r&&(p=!0,r=r.split(" ")[1].split(","),q=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]))}catch(t){}return{w3:f,pv:q,wk:o,ie:p,win:m,mac:n}}(),z=function(){if(!y.w3)return;(typeof i.readyState!=a&&i.readyState=="complete"||typeof i.readyState==a&&(i.getElementsByTagName("body")[0]||i.body))&&A(),t||(typeof i.addEventListener!=a&&i.addEventListener("DOMContentLoaded",A,!1),y.ie&&y.win&&(i.attachEvent(g,function(){i.readyState=="complete"&&(i.detachEvent(g,arguments.callee),A())}),h==top&&function(){if(t)return;try{i.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}A()}()),y.wk&&function(){if(t)return;if(!/loaded|complete/.test(i.readyState)){setTimeout(arguments.callee,0);return}A()}(),C(A))}(),W=function(){y.ie&&y.win&&window.attachEvent("onunload",function(){var a=o.length;for(var b=0;b<a;b++)o[b][0].detachEvent(o[b][1],o[b][2]);var c=n.length;for(var d=0;d<c;d++)N(n[d]);for(var e in y)y[e]=null;y=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}();return{registerObject:function(a,b,c,d){if(y.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,m[m.length]=e,U(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(y.w3)return G(a)},embedSWF:function(c,d,e,f,g,h,i,j,k,l){var m={success:!1,id:d};y.w3&&!(y.wk&&y.wk<312)&&c&&d&&e&&f&&g?(U(d,!1),B(function(){e+="",f+="";var n={};if(k&&typeof k===b)for(var o in k)n[o]=k[o];n.data=c,n.width=e,n.height=f;var p={};if(j&&typeof j===b)for(var q in j)p[q]=j[q];if(i&&typeof i===b)for(var r in i)typeof p.flashvars!=a?p.flashvars+="&"+r+"="+i[r]:p.flashvars=r+"="+i[r];if(S(g)){var s=L(n,p,d);n.id==d&&U(d,!0),m.success=!0,m.ref=s}else{if(h&&H()){n.data=h,I(n,p,d,l);return}U(d,!0)}l&&l(m)})):l&&l(m)},switchOffAutoHideShow:function(){x=!1},ua:y,getFlashPlayerVersion:function(){return{major:y.pv[0],minor:y.pv[1],release:y.pv[2]}},hasFlashPlayerVersion:S,createSWF:function(a,b,c){return y.w3?L(a,b,c):undefined},showExpressInstall:function(a,b,c,d){y.w3&&H()&&I(a,b,c,d)},removeSWF:function(a){y.w3&&N(a)},createCSS:function(a,b,c,d){y.w3&&T(a,b,c,d)},addDomLoadEvent:B,addLoadEvent:C,getQueryParamValue:function(a){var b=i.location.search||i.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return V(b);var c=b.split("&");for(var d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return V(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(u){var a=P(f);a&&p&&(a.parentNode.replaceChild(p,a),q&&(U(q,!0),y.ie&&y.win&&(p.style.display="block")),r&&r(s)),u=!1}}}}();Ext.FlashComponent=Ext.extend(Ext.BoxComponent,{flashVersion:"9.0.115",backgroundColor:"#ffffff",wmode:"opaque",flashVars:undefined,flashParams:undefined,url:undefined,swfId:undefined,swfWidth:"100%",swfHeight:"100%",expressInstall:!1,initComponent:function(){Ext.FlashComponent.superclass.initComponent.call(this),this.addEvents("initialize")},onRender:function(){Ext.FlashComponent.superclass.onRender.apply(this,arguments);var a=Ext.apply({allowScriptAccess:"always",bgcolor:this.backgroundColor,wmode:this.wmode},this.flashParams),b=Ext.apply({allowedDomain:document.location.hostname,YUISwfId:this.getId(),YUIBridgeCallback:"Ext.FlashEventProxy.onEvent"},this.flashVars);new swfobject.embedSWF(this.url,this.id,this.swfWidth,this.swfHeight,this.flashVersion,this.expressInstall?Ext.FlashComponent.EXPRESS_INSTALL_URL:undefined,b,a),this.swf=Ext.getDom(this.id),this.el=Ext.get(this.swf)},getSwfId:function(){return this.swfId||(this.swfId="extswf"+ ++Ext.Component.AUTO_ID)},getId:function(){return this.id||(this.id="extflashcmp"+ ++Ext.Component.AUTO_ID)},onFlashEvent:function(a){switch(a.type){case"swfReady":this.initSwf();return;case"log":return}a.component=this,this.fireEvent(a.type.toLowerCase().replace(/event$/,""),a)},initSwf:function(){this.onSwfReady(!!this.isInitialized),this.isInitialized=!0,this.fireEvent("initialize",this)},beforeDestroy:function(){this.rendered&&swfobject.removeSWF(this.swf.id),Ext.FlashComponent.superclass.beforeDestroy.call(this)},onSwfReady:Ext.emptyFn}),Ext.FlashComponent.EXPRESS_INSTALL_URL="http://swfobject.googlecode.com/svn/trunk/swfobject/expressInstall.swf",Ext.reg("flash",Ext.FlashComponent),Ext.FlashEventProxy={onEvent:function(a,b){var c=Ext.getCmp(a);c?c.onFlashEvent(b):arguments.callee.defer(10,this,[a,b])}},Ext.chart.Chart=Ext.extend(Ext.FlashComponent,{refreshBuffer:100,chartStyle:{padding:10,animationEnabled:!0,font:{name:"Tahoma",color:4473924,size:11},dataTip:{padding:5,border:{color:10075112,size:1},background:{color:14346230,alpha:.9},font:{name:"Tahoma",color:1393291,size:10,bold:!0}}},extraStyle:null,seriesStyles:null,disableCaching:Ext.isIE||Ext.isOpera,disableCacheParam:"_dc",initComponent:function(){Ext.chart.Chart.superclass.initComponent.call(this),this.url||(this.url=Ext.chart.Chart.CHART_URL),this.disableCaching&&(this.url=Ext.urlAppend(this.url,String.format("{0}={1}",this.disableCacheParam,(new Date).getTime()))),this.addEvents("itemmouseover","itemmouseout","itemclick","itemdoubleclick","itemdragstart","itemdrag","itemdragend","beforerefresh","refresh"),this.store=Ext.StoreMgr.lookup(this.store)},setStyle:function(a,b){this.swf.setStyle(a,Ext.encode(b))},setStyles:function(a){this.swf.setStyles(Ext.encode(a))},setSeriesStyles:function(a){this.seriesStyles=a;var b=[];Ext.each(a,function(a){b.push(Ext.encode(a))}),this.swf.setSeriesStyles(b)},setCategoryNames:function(a){this.swf.setCategoryNames(a)},setLegendRenderer:function(a,b){var c=this;b=b||c,c.removeFnProxy(c.legendFnName),c.legendFnName=c.createFnProxy(function(c){return a.call(b,c)}),c.swf.setLegendLabelFunction(c.legendFnName)},setTipRenderer:function(a,b){var c=this;b=b||c,c.removeFnProxy(c.tipFnName),c.tipFnName=c.createFnProxy(function(d,e,f){var g=c.store.getAt(e);return a.call(b,c,g,e,f)}),c.swf.setDataTipFunction(c.tipFnName)},setSeries:function(a){this.series=a,this.refresh()},bindStore:function(a,b){!b&&this.store&&(a!==this.store&&this.store.autoDestroy?this.store.destroy():(this.store.un("datachanged",this.refresh,this),this.store.un("add",this.delayRefresh,this),this.store.un("remove",this.delayRefresh,this),this.store.un("update",this.delayRefresh,this),this.store.un("clear",this.refresh,this))),a&&(a=Ext.StoreMgr.lookup(a),a.on({scope:this,datachanged:this.refresh,add:this.delayRefresh,remove:this.delayRefresh,update:this.delayRefresh,clear:this.refresh})),this.store=a,a&&!b&&this.refresh()},onSwfReady:function(a){Ext.chart.Chart.superclass.onSwfReady.call(this,a);var b;this.swf.setType(this.type),this.chartStyle&&this.setStyles(Ext.apply({},this.extraStyle,this.chartStyle)),this.categoryNames&&this.setCategoryNames(this.categoryNames),this.tipRenderer&&(b=this.getFunctionRef(this.tipRenderer),this.setTipRenderer(b.fn,b.scope)),this.legendRenderer&&(b=this.getFunctionRef(this.legendRenderer),this.setLegendRenderer(b.fn,b.scope)),a||this.bindStore(this.store,!0),this.refresh.defer(10,this)},delayRefresh:function(){this.refreshTask||(this.refreshTask=new Ext.util.DelayedTask(this.refresh,this)),this.refreshTask.delay(this.refreshBuffer)},refresh:function(){if(this.fireEvent("beforerefresh",this)!==!1){var a=!1,b=[],c=this.store.data.items;for(var d=0,e=c.length;d<e;d++)b[d]=c[d].data;var f=[],g=0,h=null,i=0;if(this.series){g=this.series.length;for(i=0;i<g;i++){h=this.series[i];var j={};for(var k in h)k=="style"&&h.style!==null?(j.style=Ext.encode(h.style),a=!0):j[k]=h[k];f.push(j)}}if(g>0)for(i=0;i<g;i++)h=f[i],h.type||(h.type=this.type),h.dataProvider=b;else f.push({type:this.type,dataProvider:b});this.swf.setDataProvider(f),this.seriesStyles&&this.setSeriesStyles(this.seriesStyles),this.fireEvent("refresh",this)}},createFnProxy:function(a){var b="extFnProxy"+ ++Ext.chart.Chart.PROXY_FN_ID;return Ext.chart.Chart.proxyFunction[b]=a,"Ext.chart.Chart.proxyFunction."+b},removeFnProxy:function(a){Ext.isEmpty(a)||(a=a.replace("Ext.chart.Chart.proxyFunction.",""),delete Ext.chart.Chart.proxyFunction[a])},getFunctionRef:function(a){return Ext.isFunction(a)?{fn:a,scope:this}:{fn:a.fn,scope:a.scope||this}},onDestroy:function(){this.refreshTask&&this.refreshTask.cancel&&this.refreshTask.cancel(),Ext.chart.Chart.superclass.onDestroy.call(this),this.bindStore(null),this.removeFnProxy(this.tipFnName),this.removeFnProxy(this.legendFnName)}}),Ext.reg("chart",Ext.chart.Chart),Ext.chart.Chart.PROXY_FN_ID=0,Ext.chart.Chart.proxyFunction={},Ext.chart.Chart.CHART_URL="http://yui.yahooapis.com/2.8.2/build/charts/assets/charts.swf",Ext.chart.PieChart=Ext.extend(Ext.chart.Chart,{type:"pie",onSwfReady:function(a){Ext.chart.PieChart.superclass.onSwfReady.call(this,a),this.setDataField(this.dataField),this.setCategoryField(this.categoryField)},setDataField:function(a){this.dataField=a,this.swf.setDataField(a)},setCategoryField:function(a){this.categoryField=a,this.swf.setCategoryField(a)}}),Ext.reg("piechart",Ext.chart.PieChart),Ext.chart.CartesianChart=Ext.extend(Ext.chart.Chart,{onSwfReady:function(a){Ext.chart.CartesianChart.superclass.onSwfReady.call(this,a),this.labelFn=[],this.xField&&this.setXField(this.xField),this.yField&&this.setYField(this.yField),this.xAxis&&this.setXAxis(this.xAxis),this.xAxes&&this.setXAxes(this.xAxes),this.yAxis&&this.setYAxis(this.yAxis),this.yAxes&&this.setYAxes(this.yAxes),Ext.isDefined(this.constrainViewport)&&this.swf.setConstrainViewport(this.constrainViewport)},setXField:function(a){this.xField=a,this.swf.setHorizontalField(a)},setYField:function(a){this.yField=a,this.swf.setVerticalField(a)},setXAxis:function(a){this.xAxis=this.createAxis("xAxis",a),this.swf.setHorizontalAxis(this.xAxis)},setXAxes:function(a){var b;for(var c=0;c<a.length;c++)b=this.createAxis("xAxis"+c,a[c]),this.swf.setHorizontalAxis(b)},setYAxis:function(a){this.yAxis=this.createAxis("yAxis",a),this.swf.setVerticalAxis(this.yAxis)},setYAxes:function(a){var b;for(var c=0;c<a.length;c++)b=this.createAxis("yAxis"+c,a[c]),this.swf.setVerticalAxis(b)},createAxis:function(a,b){var c=Ext.apply({},b),d,e;return this[a]&&(e=this[a].labelFunction,this.removeFnProxy(e),this.labelFn.remove(e)),c.labelRenderer&&(d=this.getFunctionRef(c.labelRenderer),c.labelFunction=this.createFnProxy(function(a){return d.fn.call(d.scope,a)}),delete c.labelRenderer,this.labelFn.push(c.labelFunction)),a.indexOf("xAxis")>-1&&c.position=="left"&&(c.position="bottom"),c},onDestroy:function(){Ext.chart.CartesianChart.superclass.onDestroy.call(this),Ext.each(this.labelFn,function(a){this.removeFnProxy(a)},this)}}),Ext.reg("cartesianchart",Ext.chart.CartesianChart),Ext.chart.LineChart=Ext.extend(Ext.chart.CartesianChart,{type:"line"}),Ext.reg("linechart",Ext.chart.LineChart),Ext.chart.ColumnChart=Ext.extend(Ext.chart.CartesianChart,{type:"column"}),Ext.reg("columnchart",Ext.chart.ColumnChart),Ext.chart.StackedColumnChart=Ext.extend(Ext.chart.CartesianChart,{type:"stackcolumn"}),Ext.reg("stackedcolumnchart",Ext.chart.StackedColumnChart),Ext.chart.BarChart=Ext.extend(Ext.chart.CartesianChart,{type:"bar"}),Ext.reg("barchart",Ext.chart.BarChart),Ext.chart.StackedBarChart=Ext.extend(Ext.chart.CartesianChart,{type:"stackbar"}),Ext.reg("stackedbarchart",Ext.chart.StackedBarChart),Ext.chart.Axis=function(a){Ext.apply(this,a)},Ext.chart.Axis.prototype={type:null,orientation:"horizontal",reverse:!1,labelFunction:null,hideOverlappingLabels:!0,labelSpacing:2},Ext.chart.NumericAxis=Ext.extend(Ext.chart.Axis,{type:"numeric",minimum:NaN,maximum:NaN,majorUnit:NaN,minorUnit:NaN,snapToUnits:!0,alwaysShowZero:!0,scale:"linear",roundMajorUnit:!0,calculateByLabelSize:!0,position:"left",adjustMaximumByMajorUnit:!0,adjustMinimumByMajorUnit:!0}),Ext.chart.TimeAxis=Ext.extend(Ext.chart.Axis,{type:"time",minimum:null,maximum:null,majorUnit:NaN,majorTimeUnit:null,minorUnit:NaN,minorTimeUnit:null,snapToUnits:!0,stackingEnabled:!1,calculateByLabelSize:!0}),Ext.chart.CategoryAxis=Ext.extend(Ext.chart.Axis,{type:"category",categoryNames:null,calculateCategoryCount:!1}),Ext.chart.Series=function(a){Ext.apply(this,a)},Ext.chart.Series.prototype={type:null,displayName:null},Ext.chart.CartesianSeries=Ext.extend(Ext.chart.Series,{xField:null,yField:null,showInLegend:!0,axis:"primary"}),Ext.chart.ColumnSeries=Ext.extend(Ext.chart.CartesianSeries,{type:"column"}),Ext.chart.LineSeries=Ext.extend(Ext.chart.CartesianSeries,{type:"line"}),Ext.chart.BarSeries=Ext.extend(Ext.chart.CartesianSeries,{type:"bar"}),Ext.chart.PieSeries=Ext.extend(Ext.chart.Series,{type:"pie",dataField:null,categoryField:null}),Ext.menu.Menu=Ext.extend(Ext.Container,{minWidth:120,shadow:"sides",subMenuAlign:"tl-tr?",defaultAlign:"tl-bl?",allowOtherMenus:!1,ignoreParentClicks:!1,enableScrolling:!0,maxHeight:null,scrollIncrement:24,showSeparator:!0,defaultOffsets:[0,0],plain:!1,floating:!0,zIndex:15e3,hidden:!0,layout:"menu",hideMode:"offsets",scrollerHeight:8,autoLayout:!0,defaultType:"menuitem",bufferResize:!1,initComponent:function(){Ext.isArray(this.initialConfig)&&Ext.apply(this,{items:this.initialConfig}),this.addEvents("click","mouseover","mouseout","itemclick"),Ext.menu.MenuMgr.register(this),this.floating?Ext.EventManager.onWindowResize(this.hide,this):(this.initialConfig.hidden!==!1&&(this.hidden=!1),this.internalDefaults={hideOnClick:!1}),Ext.menu.Menu.superclass.initComponent.call(this);if(this.autoLayout){var a=this.doLayout.createDelegate(this,[]);this.on({add:a,remove:a})}},getLayoutTarget:function(){return this.ul},onRender:function(a,b){a||(a=Ext.getBody());var c={id:this.getId(),cls:"x-menu "+(this.floating?"x-menu-floating x-layer ":"")+(this.cls||"")+(this.plain?" x-menu-plain":"")+(this.showSeparator?"":" x-menu-nosep"),style:this.style,cn:[{tag:"a",cls:"x-menu-focus",href:"#",onclick:"return false;",tabIndex:"-1"},{tag:"ul",cls:"x-menu-list"}]};this.floating?this.el=new Ext.Layer({shadow:this.shadow,dh:c,constrain:!1,parentEl:a,zindex:this.zIndex}):this.el=a.createChild(c),Ext.menu.Menu.superclass.onRender.call(this,a,b),this.keyNav||(this.keyNav=new Ext.menu.MenuNav(this)),this.focusEl=this.el.child("a.x-menu-focus"),this.ul=this.el.child("ul.x-menu-list"),this.mon(this.ul,{scope:this,click:this.onClick,mouseover:this.onMouseOver,mouseout:this.onMouseOut}),this.enableScrolling&&this.mon(this.el,{scope:this,delegate:".x-menu-scroller",click:this.onScroll,mouseover:this.deactivateActive})},findTargetItem:function(a){var b=a.getTarget(".x-menu-list-item",this.ul,!0);if(b&&b.menuItemId)return this.items.get(b.menuItemId)},onClick:function(a){var b=this.findTargetItem(a);b&&(b.isFormField?this.setActiveItem(b):b instanceof Ext.menu.BaseItem&&(b.menu&&this.ignoreParentClicks?(b.expandMenu(),a.preventDefault()):b.onClick&&(b.onClick(a),this.fireEvent("click",this,b,a))))},setActiveItem:function(a,b){a!=this.activeItem?(this.deactivateActive(),(this.activeItem=a).isFormField?a.focus():a.activate(b)):b&&a.expandMenu()},deactivateActive:function(){var a=this.activeItem;a&&(a.isFormField?a.collapse&&a.collapse():a.deactivate(),delete this.activeItem)},tryActivate:function(a,b){var c=this.items;for(var d=a,e=c.length;d>=0&&d<e;d+=b){var f=c.get(d);if(f.isVisible()&&!f.disabled&&(f.canActivate||f.isFormField))return this.setActiveItem(f,!1),f}return!1},onMouseOver:function(a){var b=this.findTargetItem(a);b&&b.canActivate&&!b.disabled&&this.setActiveItem(b,!0),this.over=!0,this.fireEvent("mouseover",this,a,b)},onMouseOut:function(a){var b=this.findTargetItem(a);b&&b==this.activeItem&&b.shouldDeactivate&&b.shouldDeactivate(a)&&(this.activeItem.deactivate(),delete this.activeItem),this.over=!1,this.fireEvent("mouseout",this,a,b)},onScroll:function(a,b){a&&a.stopEvent();var c=this.ul.dom,d=Ext.fly(b).is(".x-menu-scroller-top");c.scrollTop+=this.scrollIncrement*(d?-1:1),(d?c.scrollTop<=0:c.scrollTop+this.activeMax>=c.scrollHeight)&&this.onScrollerOut(null,b)},onScrollerIn:function(a,b){var c=this.ul.dom,d=Ext.fly(b).is(".x-menu-scroller-top");(d?c.scrollTop>0:c.scrollTop+this.activeMax<c.scrollHeight)&&Ext.fly(b).addClass(["x-menu-item-active","x-menu-scroller-active"])},onScrollerOut:function(a,b){Ext.fly(b).removeClass(["x-menu-item-active","x-menu-scroller-active"])},show:function(a,b,c){this.floating?(this.parentMenu=c,this.el||(this.render(),this.doLayout(!1,!0)),this.showAt(this.el.getAlignToXY(a,b||this.defaultAlign,this.defaultOffsets),c)):Ext.menu.Menu.superclass.show.call(this)},showAt:function(a,b){this.fireEvent("beforeshow",this)!==!1&&(this.parentMenu=b,this.el||this.render(),this.enableScrolling?(this.el.setXY(a),a[1]=this.constrainScroll(a[1]),a=[this.el.adjustForConstraints(a)[0],a[1]]):a=this.el.adjustForConstraints(a),this.el.setXY(a),this.el.show(),Ext.menu.Menu.superclass.onShow.call(this),Ext.isIE&&(this.fireEvent("autosize",this),Ext.isIE8||this.el.repaint()),this.hidden=!1,this.focus(),this.fireEvent("show",this))},constrainScroll:function(a){var b,c=this.ul.setHeight("auto").getHeight(),d=a,e,f,g,h;return this.floating?(f=Ext.fly(this.el.dom.parentNode),g=f.getScroll().top,h=f.getViewSize().height,e=a-g,b=this.maxHeight?this.maxHeight:h-e,c>h?(b=h,d=a-e):b<c&&(d=a-(c-b),b=c)):b=this.getHeight(),this.maxHeight&&(b=Math.min(this.maxHeight,b)),c>b&&b>0?(this.activeMax=b-this.scrollerHeight*2-this.el.getFrameWidth("tb")-Ext.num(this.el.shadowOffset,0),this.ul.setHeight(this.activeMax),this.createScrollers(),this.el.select(".x-menu-scroller").setDisplayed("")):(this.ul.setHeight(c),this.el.select(".x-menu-scroller").setDisplayed("none")),this.ul.dom.scrollTop=0,d},createScrollers:function(){this.scroller||(this.scroller={pos:0,top:this.el.insertFirst({tag:"div",cls:"x-menu-scroller x-menu-scroller-top",html:"&#160;"}),bottom:this.el.createChild({tag:"div",cls:"x-menu-scroller x-menu-scroller-bottom",html:"&#160;"})},this.scroller.top.hover(this.onScrollerIn,this.onScrollerOut,this),this.scroller.topRepeater=new Ext.util.ClickRepeater(this.scroller.top,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.top],!1)}}),this.scroller.bottom.hover(this.onScrollerIn,this.onScrollerOut,this),this.scroller.bottomRepeater=new Ext.util.ClickRepeater(this.scroller.bottom,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.bottom],!1)}}))},onLayout:function(){this.isVisible()&&(this.enableScrolling&&this.constrainScroll(this.el.getTop()),this.floating&&this.el.sync())},focus:function(){this.hidden||this.doFocus.defer(50,this)},doFocus:function(){this.hidden||this.focusEl.focus()},hide:function(a){this.isDestroyed||(this.deepHide=a,Ext.menu.Menu.superclass.hide.call(this),delete this.deepHide)},onHide:function(){Ext.menu.Menu.superclass.onHide.call(this),this.deactivateActive(),this.el&&this.floating&&this.el.hide();var a=this.parentMenu;this.deepHide===!0&&a&&(a.floating?a.hide(!0):a.deactivateActive())},lookupComponent:function(a){if(Ext.isString(a))a=a=="separator"||a=="-"?new Ext.menu.Separator:new Ext.menu.TextItem(a),this.applyDefaults(a);else if(Ext.isObject(a))a=this.getMenuItem(a);else if(a.tagName||a.el)a=new Ext.BoxComponent({el:a});return a},applyDefaults:function(a){if(!Ext.isString(a)){a=Ext.menu.Menu.superclass.applyDefaults.call(this,a);var b=this.internalDefaults;b&&(a.events?(Ext.applyIf(a.initialConfig,b),Ext.apply(a,b)):Ext.applyIf(a,b))}return a},getMenuItem:function(a){return a.isXType?a:!a.xtype&&Ext.isBoolean(a.checked)?new Ext.menu.CheckItem(a):Ext.create(a,this.defaultType)},addSeparator:function(){return this.add(new Ext.menu.Separator)},addElement:function(a){return this.add(new Ext.menu.BaseItem({el:a}))},addItem:function(a){return this.add(a)},addMenuItem:function(a){return this.add(this.getMenuItem(a))},addText:function(a){return this.add(new Ext.menu.TextItem(a))},onDestroy:function(){Ext.EventManager.removeResizeListener(this.hide,this);var a=this.parentMenu;a&&a.activeChild==this&&delete a.activeChild,delete this.parentMenu,Ext.menu.Menu.superclass.onDestroy.call(this),Ext.menu.MenuMgr.unregister(this),this.keyNav&&this.keyNav.disable();var b=this.scroller;b&&Ext.destroy(b.topRepeater,b.bottomRepeater,b.top,b.bottom),Ext.destroy(this.el,this.focusEl,this.ul)}}),Ext.reg("menu",Ext.menu.Menu),Ext.menu.MenuNav=Ext.extend(Ext.KeyNav,function(){function a(a,b){b.tryActivate(b.items.indexOf(b.activeItem)-1,-1)||b.tryActivate(b.items.length-1,-1)}function b(a,b){b.tryActivate(b.items.indexOf(b.activeItem)+1,1)||b.tryActivate(0,1)}return{constructor:function(a){Ext.menu.MenuNav.superclass.constructor.call(this,a.el),this.scope=this.menu=a},doRelay:function(a,b){var c=a.getKey();return this.menu.activeItem&&this.menu.activeItem.isFormField&&c!=a.TAB?!1:!this.menu.activeItem&&a.isNavKeyPress()&&c!=a.SPACE&&c!=a.RETURN?(this.menu.tryActivate(0,1),!1):b.call(this.scope||this,a,this.menu)},tab:function(c,d){c.stopEvent(),c.shiftKey?a(c,d):b(c,d)},up:a,down:b,right:function(a,b){b.activeItem&&b.activeItem.expandMenu(!0)},left:function(a,b){b.hide(),b.parentMenu&&b.parentMenu.activeItem&&b.parentMenu.activeItem.activate()},enter:function(a,b){if(b.activeItem)return a.stopPropagation(),b.activeItem.onClick(a),b.fireEvent("click",this,b.activeItem),!0}}}()),Ext.menu.MenuMgr=function(){function f(){a={},b=new Ext.util.MixedCollection,Ext.getDoc().addKeyListener(27,function(){b.length>0&&g()})}function g(){if(b&&b.length>0){var a=b.clone();return a.each(function(a){a.hide()}),!0}return!1}function h(a){b.remove(a),b.length<1&&(Ext.getDoc().un("mousedown",l),d=!1)}function i(a){var c=b.last();e=new Date,b.add(a),d||(Ext.getDoc().on("mousedown",l),d=!0),a.parentMenu?(a.getEl().setZIndex(parseInt(a.parentMenu.getEl().getStyle("z-index"),10)+3),a.parentMenu.activeChild=a):c&&!c.isDestroyed&&c.isVisible()&&a.getEl().setZIndex(parseInt(c.getEl().getStyle("z-index"),10)+3)}function j(a){a.activeChild&&a.activeChild.hide(),a.autoHideTimer&&(clearTimeout(a.autoHideTimer),delete a.autoHideTimer)}function k(a){var b=a.parentMenu;!b&&!a.allowOtherMenus?g():b&&b.activeChild&&b.activeChild.hide()}function l(a){e.getElapsed()>50&&b.length>0&&!a.getTarget(".x-menu")&&g()}var a,b,c={},d=!1,e=new Date;return{hideAll:function(){return g()},register:function(b){a||f(),a[b.id]=b,b.on({beforehide:j,hide:h,beforeshow:k,show:i})},get:function(b){return typeof b=="string"?a?a[b]:null:b.events?b:typeof b.length=="number"?new Ext.menu.Menu({items:b}):Ext.create(b,"menu")},unregister:function(b){delete a[b.id],b.un("beforehide",j),b.un("hide",h),b.un("beforeshow",k),b.un("show",i)},registerCheckable:function(a){var b=a.group;b&&(c[b]||(c[b]=[]),c[b].push(a))},unregisterCheckable:function(a){var b=a.group;b&&c[b].remove(a)},onCheckChange:function(a,b){if(a.group&&b){var d=c[a.group],e=0,f=d.length,g;for(;e<f;e++)g=d[e],g!=a&&g.setChecked(!1)}},getCheckedItem:function(a){var b=c[a];if(b)for(var d=0,e=b.length;d<e;d++)if(b[d].checked)return b[d];return null},setCheckedItem:function(a,b){var d=c[a];if(d)for(var e=0,f=d.length;e<f;e++)d[e].id==b&&d[e].setChecked(!0);return null}}}(),Ext.menu.BaseItem=Ext.extend(Ext.Component,{canActivate:!1,activeClass:"x-menu-item-active",hideOnClick:!0,clickHideDelay:1,ctype:"Ext.menu.BaseItem",actionMode:"container",initComponent:function(){Ext.menu.BaseItem.superclass.initComponent.call(this),this.addEvents("click","activate","deactivate"),this.handler&&this.on("click",this.handler,this.scope)},onRender:function(a,b){Ext.menu.BaseItem.superclass.onRender.apply(this,arguments),this.ownerCt&&this.ownerCt instanceof Ext.menu.Menu?this.parentMenu=this.ownerCt:(this.container.addClass("x-menu-list-item"),this.mon(this.el,{scope:this,click:this.onClick,mouseenter:this.activate,mouseleave:this.deactivate}))},setHandler:function(a,b){this.handler&&this.un("click",this.handler,this.scope),this.on("click",this.handler=a,this.scope=b)},onClick:function(a){!this.disabled&&this.fireEvent("click",this,a)!==!1&&this.parentMenu&&this.parentMenu.fireEvent("itemclick",this,a)!==!1?this.handleClick(a):a.stopEvent()},activate:function(){if(this.disabled)return!1;var a=this.container;return a.addClass(this.activeClass),this.region=a.getRegion().adjust(2,2,-2,-2),this.fireEvent("activate",this),!0},deactivate:function(){this.container.removeClass(this.activeClass),this.fireEvent("deactivate",this)},shouldDeactivate:function(a){return!this.region||!this.region.contains(a.getPoint())},handleClick:function(a){var b=this.parentMenu;this.hideOnClick&&(b.floating?b.hide.defer(this.clickHideDelay,b,[!0]):b.deactivateActive())},expandMenu:Ext.emptyFn,hideMenu:Ext.emptyFn}),Ext.reg("menubaseitem",Ext.menu.BaseItem),Ext.menu.TextItem=Ext.extend(Ext.menu.BaseItem,{hideOnClick:!1,itemCls:"x-menu-text",constructor:function(a){typeof a=="string"&&(a={text:a}),Ext.menu.TextItem.superclass.constructor.call(this,a)},onRender:function(){var a=document.createElement("span");a.className=this.itemCls,a.innerHTML=this.text,this.el=a,Ext.menu.TextItem.superclass.onRender.apply(this,arguments)}}),Ext.reg("menutextitem",Ext.menu.TextItem),Ext.menu.Separator=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-sep",hideOnClick:!1,activeClass:"",onRender:function(a){var b=document.createElement("span");b.className=this.itemCls,b.innerHTML="&#160;",this.el=b,a.addClass("x-menu-sep-li"),Ext.menu.Separator.superclass.onRender.apply(this,arguments)}}),Ext.reg("menuseparator",Ext.menu.Separator),Ext.menu.Item=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-item",canActivate:!0,showDelay:200,altText:"",hideDelay:200,ctype:"Ext.menu.Item",initComponent:function(){Ext.menu.Item.superclass.initComponent.call(this),this.menu&&(this.menu=Ext.menu.MenuMgr.get(this.menu),this.menu.ownerCt=this)},onRender:function(a,b){this.itemTpl||(this.itemTpl=Ext.menu.Item.prototype.itemTpl=new Ext.XTemplate('<a id="{id}" class="{cls}" hidefocus="true" unselectable="on" href="{href}"','<tpl if="hrefTarget">',' target="{hrefTarget}"',"</tpl>",">",'<img alt="{altText}" src="{icon}" class="x-menu-item-icon {iconCls}"/>','<span class="x-menu-item-text">{text}</span>',"</a>"));var c=this.getTemplateArgs();this.el=b?this.itemTpl.insertBefore(b,c,!0):this.itemTpl.append(a,c,!0),this.iconEl=this.el.child("img.x-menu-item-icon"),this.textEl=this.el.child(".x-menu-item-text"),this.href||this.mon(this.el,"click",Ext.emptyFn,null,{preventDefault:!0}),Ext.menu.Item.superclass.onRender.call(this,a,b)},getTemplateArgs:function(){return{id:this.id,cls:this.itemCls+(this.menu?" x-menu-item-arrow":"")+(this.cls?" "+this.cls:""),href:this.href||"#",hrefTarget:this.hrefTarget,icon:this.icon||Ext.BLANK_IMAGE_URL,iconCls:this.iconCls||"",text:this.itemText||this.text||"&#160;",altText:this.altText||""}},setText:function(a){this.text=a||"&#160;",this.rendered&&(this.textEl.update(this.text),this.parentMenu.layout.doAutoSize())},setIconClass:function(a){var b=this.iconCls;this.iconCls=a,this.rendered&&this.iconEl.replaceClass(b,this.iconCls)},beforeDestroy:function(){this.menu&&(delete this.menu.ownerCt,this.menu.destroy()),Ext.menu.Item.superclass.beforeDestroy.call(this)},handleClick:function(a){this.href||a.stopEvent(),Ext.menu.Item.superclass.handleClick.apply(this,arguments)},activate:function(a){return Ext.menu.Item.superclass.activate.apply(this,arguments)&&(this.focus(),a&&this.expandMenu()),!0},shouldDeactivate:function(a){return Ext.menu.Item.superclass.shouldDeactivate.call(this,a)?this.menu&&this.menu.isVisible()?!this.menu.getEl().getRegion().contains(a.getPoint()):!0:!1},deactivate:function(){Ext.menu.Item.superclass.deactivate.apply(this,arguments),this.hideMenu()},expandMenu:function(a){!this.disabled&&this.menu&&(clearTimeout(this.hideTimer),delete this.hideTimer,!this.menu.isVisible()&&!this.showTimer?this.showTimer=this.deferExpand.defer(this.showDelay,this,[a]):this.menu.isVisible()&&a&&this.menu.tryActivate(0,1))},deferExpand:function(a){delete this.showTimer,this.menu.show(this.container,this.parentMenu.subMenuAlign||"tl-tr?",this.parentMenu),a&&this.menu.tryActivate(0,1)},hideMenu:function(){clearTimeout(this.showTimer),delete this.showTimer,!this.hideTimer&&this.menu&&this.menu.isVisible()&&(this.hideTimer=this.deferHide.defer(this.hideDelay,this))},deferHide:function(){delete this.hideTimer,this.menu.over?this.parentMenu.setActiveItem(this,!1):this.menu.hide()}}),Ext.reg("menuitem",Ext.menu.Item),Ext.menu.CheckItem=Ext.extend(Ext.menu.Item,{itemCls:"x-menu-item x-menu-check-item",groupClass:"x-menu-group-item",checked:!1,ctype:"Ext.menu.CheckItem",initComponent:function(){Ext.menu.CheckItem.superclass.initComponent.call(this),this.addEvents("beforecheckchange","checkchange"),this.checkHandler&&this.on("checkchange",this.checkHandler,this.scope),Ext
.menu.MenuMgr.registerCheckable(this)},onRender:function(a){Ext.menu.CheckItem.superclass.onRender.apply(this,arguments),this.group&&this.el.addClass(this.groupClass),this.checked&&(this.checked=!1,this.setChecked(!0,!0))},destroy:function(){Ext.menu.MenuMgr.unregisterCheckable(this),Ext.menu.CheckItem.superclass.destroy.apply(this,arguments)},setChecked:function(a,b){var c=b===!0;this.checked!=a&&(c||this.fireEvent("beforecheckchange",this,a)!==!1)&&(Ext.menu.MenuMgr.onCheckChange(this,a),this.container&&this.container[a?"addClass":"removeClass"]("x-menu-item-checked"),this.checked=a,c||this.fireEvent("checkchange",this,a))},handleClick:function(a){!this.disabled&&(!this.checked||!this.group)&&this.setChecked(!this.checked),Ext.menu.CheckItem.superclass.handleClick.apply(this,arguments)}}),Ext.reg("menucheckitem",Ext.menu.CheckItem),Ext.menu.DateMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:!1,hideOnClick:!0,pickerId:null,cls:"x-date-menu",initComponent:function(){this.on("beforeshow",this.onBeforeShow,this),(this.strict=Ext.isIE7&&Ext.isStrict)&&this.on("show",this.onShow,this,{single:!0,delay:20}),Ext.apply(this,{plain:!0,showSeparator:!1,items:this.picker=new Ext.DatePicker(Ext.applyIf({internalRender:this.strict||!Ext.isIE,ctCls:"x-menu-date-item",id:this.pickerId},this.initialConfig))}),this.picker.purgeListeners(),Ext.menu.DateMenu.superclass.initComponent.call(this),this.relayEvents(this.picker,["select"]),this.on("show",this.picker.focus,this.picker),this.on("select",this.menuHide,this),this.handler&&this.on("select",this.handler,this.scope||this)},menuHide:function(){this.hideOnClick&&this.hide(!0)},onBeforeShow:function(){this.picker&&this.picker.hideMonthPicker(!0)},onShow:function(){var a=this.picker.getEl();a.setWidth(a.getWidth())}}),Ext.reg("datemenu",Ext.menu.DateMenu),Ext.menu.ColorMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:!1,hideOnClick:!0,cls:"x-color-menu",paletteId:null,initComponent:function(){Ext.apply(this,{plain:!0,showSeparator:!1,items:this.palette=new Ext.ColorPalette(Ext.applyIf({id:this.paletteId},this.initialConfig))}),this.palette.purgeListeners(),Ext.menu.ColorMenu.superclass.initComponent.call(this),this.relayEvents(this.palette,["select"]),this.on("select",this.menuHide,this),this.handler&&this.on("select",this.handler,this.scope||this)},menuHide:function(){this.hideOnClick&&this.hide(!0)}}),Ext.reg("colormenu",Ext.menu.ColorMenu),Ext.form.Field=Ext.extend(Ext.BoxComponent,{invalidClass:"x-form-invalid",invalidText:"The value in this field is invalid",focusClass:"x-form-focus",validationEvent:"keyup",validateOnBlur:!0,validationDelay:250,defaultAutoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off"},fieldClass:"x-form-field",msgTarget:"qtip",msgFx:"normal",readOnly:!1,disabled:!1,submitValue:!0,isFormField:!0,msgDisplay:"",hasFocus:!1,initComponent:function(){Ext.form.Field.superclass.initComponent.call(this),this.addEvents("focus","blur","specialkey","change","invalid","valid")},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:this.name||this.id||""},onRender:function(a,b){if(!this.el){var c=this.getAutoCreate();c.name||(c.name=this.name||this.id),this.inputType&&(c.type=this.inputType),this.autoEl=c}Ext.form.Field.superclass.onRender.call(this,a,b),this.submitValue===!1&&this.el.dom.removeAttribute("name");var d=this.el.dom.type;d&&(d=="password"&&(d="text"),this.el.addClass("x-form-"+d)),this.readOnly&&this.setReadOnly(!0),this.tabIndex!==undefined&&this.el.dom.setAttribute("tabIndex",this.tabIndex),this.el.addClass([this.fieldClass,this.cls])},getItemCt:function(){return this.itemCt},initValue:function(){this.value!==undefined?this.setValue(this.value):!Ext.isEmpty(this.el.dom.value)&&this.el.dom.value!=this.emptyText&&this.setValue(this.el.dom.value),this.originalValue=this.getValue()},isDirty:function(){return this.disabled||!this.rendered?!1:String(this.getValue())!==String(this.originalValue)},setReadOnly:function(a){this.rendered&&(this.el.dom.readOnly=a),this.readOnly=a},afterRender:function(){Ext.form.Field.superclass.afterRender.call(this),this.initEvents(),this.initValue()},fireKey:function(a){a.isSpecialKey()&&this.fireEvent("specialkey",this,a)},reset:function(){this.setValue(this.originalValue),this.clearInvalid()},initEvents:function(){this.mon(this.el,Ext.EventManager.getKeyEvent(),this.fireKey,this),this.mon(this.el,"focus",this.onFocus,this),this.mon(this.el,"blur",this.onBlur,this,this.inEditor?{buffer:10}:null)},preFocus:Ext.emptyFn,onFocus:function(){this.preFocus(),this.focusClass&&this.el.addClass(this.focusClass),this.hasFocus||(this.hasFocus=!0,this.startValue=this.getValue(),this.fireEvent("focus",this))},beforeBlur:Ext.emptyFn,onBlur:function(){this.beforeBlur(),this.focusClass&&this.el.removeClass(this.focusClass),this.hasFocus=!1,this.validationEvent!==!1&&(this.validateOnBlur||this.validationEvent=="blur")&&this.validate();var a=this.getValue();String(a)!==String(this.startValue)&&this.fireEvent("change",this,a,this.startValue),this.fireEvent("blur",this),this.postBlur()},postBlur:Ext.emptyFn,isValid:function(a){if(this.disabled)return!0;var b=this.preventMark;this.preventMark=a===!0;var c=this.validateValue(this.processValue(this.getRawValue()));return this.preventMark=b,c},validate:function(){return this.disabled||this.validateValue(this.processValue(this.getRawValue()))?(this.clearInvalid(),!0):!1},processValue:function(a){return a},validateValue:function(a){var b=this.getErrors(a)[0];return b==undefined?!0:(this.markInvalid(b),!1)},getErrors:function(){return[]},getActiveError:function(){return this.activeError||""},markInvalid:function(a){if(this.rendered&&!this.preventMark){a=a||this.invalidText;var b=this.getMessageHandler();if(b)b.mark(this,a);else if(this.msgTarget){this.el.addClass(this.invalidClass);var c=Ext.getDom(this.msgTarget);c&&(c.innerHTML=a,c.style.display=this.msgDisplay)}}this.setActiveError(a)},clearInvalid:function(){if(this.rendered&&!this.preventMark){this.el.removeClass(this.invalidClass);var a=this.getMessageHandler();if(a)a.clear(this);else if(this.msgTarget){this.el.removeClass(this.invalidClass);var b=Ext.getDom(this.msgTarget);b&&(b.innerHTML="",b.style.display="none")}}this.unsetActiveError()},setActiveError:function(a,b){this.activeError=a,b!==!0&&this.fireEvent("invalid",this,a)},unsetActiveError:function(a){delete this.activeError,a!==!0&&this.fireEvent("valid",this)},getMessageHandler:function(){return Ext.form.MessageTargets[this.msgTarget]},getErrorCt:function(){return this.el.findParent(".x-form-element",5,!0)||this.el.findParent(".x-form-field-wrap",5,!0)},alignErrorEl:function(){this.errorEl.setWidth(this.getErrorCt().getWidth(!0)-20)},alignErrorIcon:function(){this.errorIcon.alignTo(this.el,"tl-tr",[2,0])},getRawValue:function(){var a=this.rendered?this.el.getValue():Ext.value(this.value,"");return a===this.emptyText&&(a=""),a},getValue:function(){if(!this.rendered)return this.value;var a=this.el.getValue();if(a===this.emptyText||a===undefined)a="";return a},setRawValue:function(a){return this.rendered?this.el.dom.value=Ext.isEmpty(a)?"":a:""},setValue:function(a){return this.value=a,this.rendered&&(this.el.dom.value=Ext.isEmpty(a)?"":a,this.validate()),this},append:function(a){this.setValue([this.getValue(),a].join(""))}}),Ext.form.MessageTargets={qtip:{mark:function(a,b){a.el.addClass(a.invalidClass),a.el.dom.qtip=b,a.el.dom.qclass="x-form-invalid-tip",Ext.QuickTips&&Ext.QuickTips.enable()},clear:function(a){a.el.removeClass(a.invalidClass),a.el.dom.qtip=""}},title:{mark:function(a,b){a.el.addClass(a.invalidClass),a.el.dom.title=b},clear:function(a){a.el.dom.title=""}},under:{mark:function(a,b){a.el.addClass(a.invalidClass);if(!a.errorEl){var c=a.getErrorCt();if(!c){a.el.dom.title=b;return}a.errorEl=c.createChild({cls:"x-form-invalid-msg"}),a.on("resize",a.alignErrorEl,a),a.on("destroy",function(){Ext.destroy(this.errorEl)},a)}a.alignErrorEl(),a.errorEl.update(b),Ext.form.Field.msgFx[a.msgFx].show(a.errorEl,a)},clear:function(a){a.el.removeClass(a.invalidClass),a.errorEl?Ext.form.Field.msgFx[a.msgFx].hide(a.errorEl,a):a.el.dom.title=""}},side:{mark:function(a,b){a.el.addClass(a.invalidClass);if(!a.errorIcon){var c=a.getErrorCt();if(!c){a.el.dom.title=b;return}a.errorIcon=c.createChild({cls:"x-form-invalid-icon"}),a.ownerCt&&(a.ownerCt.on("afterlayout",a.alignErrorIcon,a),a.ownerCt.on("expand",a.alignErrorIcon,a)),a.on("resize",a.alignErrorIcon,a),a.on("destroy",function(){Ext.destroy(this.errorIcon)},a)}a.alignErrorIcon(),a.errorIcon.dom.qtip=b,a.errorIcon.dom.qclass="x-form-invalid-tip",a.errorIcon.show()},clear:function(a){a.el.removeClass(a.invalidClass),a.errorIcon?(a.errorIcon.dom.qtip="",a.errorIcon.hide()):a.el.dom.title=""}}},Ext.form.Field.msgFx={normal:{show:function(a,b){a.setDisplayed("block")},hide:function(a,b){a.setDisplayed(!1).update("")}},slide:{show:function(a,b){a.slideIn("t",{stopFx:!0})},hide:function(a,b){a.slideOut("t",{stopFx:!0,useDisplay:!0})}},slideRight:{show:function(a,b){a.fixDisplay(),a.alignTo(b.el,"tl-tr"),a.slideIn("l",{stopFx:!0})},hide:function(a,b){a.slideOut("l",{stopFx:!0,useDisplay:!0})}}},Ext.reg("field",Ext.form.Field),Ext.form.TextField=Ext.extend(Ext.form.Field,{grow:!1,growMin:30,growMax:800,vtype:null,maskRe:null,disableKeyFilter:!1,allowBlank:!0,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",selectOnFocus:!1,blankText:"This field is required",validator:null,regex:null,regexText:"",emptyText:null,emptyClass:"x-form-empty-field",initComponent:function(){Ext.form.TextField.superclass.initComponent.call(this),this.addEvents("autosize","keydown","keyup","keypress")},initEvents:function(){Ext.form.TextField.superclass.initEvents.call(this),this.validationEvent=="keyup"?(this.validationTask=new Ext.util.DelayedTask(this.validate,this),this.mon(this.el,"keyup",this.filterValidation,this)):this.validationEvent!==!1&&this.validationEvent!="blur"&&this.mon(this.el,this.validationEvent,this.validate,this,{buffer:this.validationDelay});if(this.selectOnFocus||this.emptyText)this.mon(this.el,"mousedown",this.onMouseDown,this),this.emptyText&&this.applyEmptyText();(this.maskRe||this.vtype&&this.disableKeyFilter!==!0&&(this.maskRe=Ext.form.VTypes[this.vtype+"Mask"]))&&this.mon(this.el,"keypress",this.filterKeys,this),this.grow&&(this.mon(this.el,"keyup",this.onKeyUpBuffered,this,{buffer:50}),this.mon(this.el,"click",this.autoSize,this)),this.enableKeyEvents&&this.mon(this.el,{scope:this,keyup:this.onKeyUp,keydown:this.onKeyDown,keypress:this.onKeyPress})},onMouseDown:function(a){this.hasFocus||this.mon(this.el,"mouseup",Ext.emptyFn,this,{single:!0,preventDefault:!0})},processValue:function(a){if(this.stripCharsRe){var b=a.replace(this.stripCharsRe,"");if(b!==a)return this.setRawValue(b),b}return a},filterValidation:function(a){a.isNavKeyPress()||this.validationTask.delay(this.validationDelay)},onDisable:function(){Ext.form.TextField.superclass.onDisable.call(this),Ext.isIE&&(this.el.dom.unselectable="on")},onEnable:function(){Ext.form.TextField.superclass.onEnable.call(this),Ext.isIE&&(this.el.dom.unselectable="")},onKeyUpBuffered:function(a){this.doAutoSize(a)&&this.autoSize()},doAutoSize:function(a){return!a.isNavKeyPress()},onKeyUp:function(a){this.fireEvent("keyup",this,a)},onKeyDown:function(a){this.fireEvent("keydown",this,a)},onKeyPress:function(a){this.fireEvent("keypress",this,a)},reset:function(){Ext.form.TextField.superclass.reset.call(this),this.applyEmptyText()},applyEmptyText:function(){this.rendered&&this.emptyText&&this.getRawValue().length<1&&!this.hasFocus&&(this.setRawValue(this.emptyText),this.el.addClass(this.emptyClass))},preFocus:function(){var a=this.el,b;this.emptyText&&(a.dom.value==this.emptyText&&(this.setRawValue(""),b=!0),a.removeClass(this.emptyClass)),(this.selectOnFocus||b)&&a.dom.select()},postBlur:function(){this.applyEmptyText()},filterKeys:function(a){if(a.ctrlKey)return;var b=a.getKey();if(Ext.isGecko&&(a.isNavKeyPress()||b==a.BACKSPACE||b==a.DELETE&&a.button==-1))return;var c=String.fromCharCode(a.getCharCode());if(!Ext.isGecko&&a.isSpecialKey()&&!c)return;this.maskRe.test(c)||a.stopEvent()},setValue:function(a){return this.emptyText&&this.el&&!Ext.isEmpty(a)&&this.el.removeClass(this.emptyClass),Ext.form.TextField.superclass.setValue.apply(this,arguments),this.applyEmptyText(),this.autoSize(),this},getErrors:function(a){var b=Ext.form.TextField.superclass.getErrors.apply(this,arguments);a=Ext.isDefined(a)?a:this.processValue(this.getRawValue());if(Ext.isFunction(this.validator)){var c=this.validator(a);c!==!0&&b.push(c)}if(a.length<1||a===this.emptyText){if(this.allowBlank)return b;b.push(this.blankText)}!this.allowBlank&&(a.length<1||a===this.emptyText)&&b.push(this.blankText),a.length<this.minLength&&b.push(String.format(this.minLengthText,this.minLength)),a.length>this.maxLength&&b.push(String.format(this.maxLengthText,this.maxLength));if(this.vtype){var d=Ext.form.VTypes;d[this.vtype](a,this)||b.push(this.vtypeText||d[this.vtype+"Text"])}return this.regex&&!this.regex.test(a)&&b.push(this.regexText),b},selectText:function(a,b){var c=this.getRawValue(),d=!1;if(c.length>0){a=a===undefined?0:a,b=b===undefined?c.length:b;var e=this.el.dom;if(e.setSelectionRange)e.setSelectionRange(a,b);else if(e.createTextRange){var f=e.createTextRange();f.moveStart("character",a),f.moveEnd("character",b-c.length),f.select()}d=Ext.isGecko||Ext.isOpera}else d=!0;d&&this.focus()},autoSize:function(){if(!this.grow||!this.rendered)return;this.metrics||(this.metrics=Ext.util.TextMetrics.createInstance(this.el));var a=this.el,b=a.dom.value,c=document.createElement("div");c.appendChild(document.createTextNode(b)),b=c.innerHTML,Ext.removeNode(c),c=null,b+="&#160;";var d=Math.min(this.growMax,Math.max(this.metrics.getWidth(b)+10,this.growMin));this.el.setWidth(d),this.fireEvent("autosize",this,d)},onDestroy:function(){this.validationTask&&(this.validationTask.cancel(),this.validationTask=null),Ext.form.TextField.superclass.onDestroy.call(this)}}),Ext.reg("textfield",Ext.form.TextField),Ext.form.TriggerField=Ext.extend(Ext.form.TextField,{defaultAutoCreate:{tag:"input",type:"text",size:"16",autocomplete:"off"},hideTrigger:!1,editable:!0,readOnly:!1,wrapFocusClass:"x-trigger-wrap-focus",autoSize:Ext.emptyFn,monitorTab:!0,deferHeight:!0,mimicing:!1,actionMode:"wrap",defaultTriggerWidth:17,onResize:function(a,b){Ext.form.TriggerField.superclass.onResize.call(this,a,b);var c=this.getTriggerWidth();Ext.isNumber(a)&&this.el.setWidth(a-c),this.wrap.setWidth(this.el.getWidth()+c)},getTriggerWidth:function(){var a=this.trigger.getWidth();return!this.hideTrigger&&!this.readOnly&&a===0&&(a=this.defaultTriggerWidth),a},alignErrorIcon:function(){this.wrap&&this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])},onRender:function(a,b){this.doc=Ext.isIE?Ext.getBody():Ext.getDoc(),Ext.form.TriggerField.superclass.onRender.call(this,a,b),this.wrap=this.el.wrap({cls:"x-form-field-wrap x-form-field-trigger-wrap"}),this.trigger=this.wrap.createChild(this.triggerConfig||{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.triggerClass}),this.initTrigger(),this.width||this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth()),this.resizeEl=this.positionEl=this.wrap},getWidth:function(){return this.el.getWidth()+this.trigger.getWidth()},updateEditState:function(){this.rendered&&(this.readOnly?(this.el.dom.readOnly=!0,this.el.addClass("x-trigger-noedit"),this.mun(this.el,"click",this.onTriggerClick,this),this.trigger.setDisplayed(!1)):(this.editable?(this.el.dom.readOnly=!1,this.el.removeClass("x-trigger-noedit"),this.mun(this.el,"click",this.onTriggerClick,this)):(this.el.dom.readOnly=!0,this.el.addClass("x-trigger-noedit"),this.mon(this.el,"click",this.onTriggerClick,this)),this.trigger.setDisplayed(!this.hideTrigger)),this.onResize(this.width||this.wrap.getWidth()))},setHideTrigger:function(a){a!=this.hideTrigger&&(this.hideTrigger=a,this.updateEditState())},setEditable:function(a){a!=this.editable&&(this.editable=a,this.updateEditState())},setReadOnly:function(a){a!=this.readOnly&&(this.readOnly=a,this.updateEditState())},afterRender:function(){Ext.form.TriggerField.superclass.afterRender.call(this),this.updateEditState()},initTrigger:function(){this.mon(this.trigger,"click",this.onTriggerClick,this,{preventDefault:!0}),this.trigger.addClassOnOver("x-form-trigger-over"),this.trigger.addClassOnClick("x-form-trigger-click")},onDestroy:function(){Ext.destroy(this.trigger,this.wrap),this.mimicing&&this.doc.un("mousedown",this.mimicBlur,this),delete this.doc,Ext.form.TriggerField.superclass.onDestroy.call(this)},onFocus:function(){Ext.form.TriggerField.superclass.onFocus.call(this),this.mimicing||(this.wrap.addClass(this.wrapFocusClass),this.mimicing=!0,this.doc.on("mousedown",this.mimicBlur,this,{delay:10}),this.monitorTab&&this.on("specialkey",this.checkTab,this))},checkTab:function(a,b){b.getKey()==b.TAB&&this.triggerBlur()},onBlur:Ext.emptyFn,mimicBlur:function(a){!this.isDestroyed&&!this.wrap.contains(a.target)&&this.validateBlur(a)&&this.triggerBlur()},triggerBlur:function(){this.mimicing=!1,this.doc.un("mousedown",this.mimicBlur,this),this.monitorTab&&this.el&&this.un("specialkey",this.checkTab,this),Ext.form.TriggerField.superclass.onBlur.call(this),this.wrap&&this.wrap.removeClass(this.wrapFocusClass)},beforeBlur:Ext.emptyFn,validateBlur:function(a){return!0},onTriggerClick:Ext.emptyFn}),Ext.form.TwinTriggerField=Ext.extend(Ext.form.TriggerField,{initComponent:function(){Ext.form.TwinTriggerField.superclass.initComponent.call(this),this.triggerConfig={tag:"span",cls:"x-form-twin-triggers",cn:[{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.trigger1Class},{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.trigger2Class}]}},getTrigger:function(a){return this.triggers[a]},afterRender:function(){Ext.form.TwinTriggerField.superclass.afterRender.call(this);var a=this.triggers,b=0,c=a.length;for(;b<c;++b)this["hideTrigger"+(b+1)]&&a[b].hide()},initTrigger:function(){var a=this.trigger.select(".x-form-trigger",!0),b=this;a.each(function(a,c,d){var e="Trigger"+(d+1);a.hide=function(){var a=b.wrap.getWidth();this.dom.style.display="none",b.el.setWidth(a-b.trigger.getWidth()),b["hidden"+e]=!0},a.show=function(){var a=b.wrap.getWidth();this.dom.style.display="",b.el.setWidth(a-b.trigger.getWidth()),b["hidden"+e]=!1},this.mon(a,"click",this["on"+e+"Click"],this,{preventDefault:!0}),a.addClassOnOver("x-form-trigger-over"),a.addClassOnClick("x-form-trigger-click")},this),this.triggers=a.elements},getTriggerWidth:function(){var a=0;return Ext.each(this.triggers,function(b,c){var d="Trigger"+(c+1),e=b.getWidth();e===0&&!this["hidden"+d]?a+=this.defaultTriggerWidth:a+=e},this),a},onDestroy:function(){Ext.destroy(this.triggers),Ext.form.TwinTriggerField.superclass.onDestroy.call(this)},onTrigger1Click:Ext.emptyFn,onTrigger2Click:Ext.emptyFn}),Ext.reg("trigger",Ext.form.TriggerField),Ext.form.TextArea=Ext.extend(Ext.form.TextField,{growMin:60,growMax:1e3,growAppend:"&#160;\n&#160;",enterIsSpecial:!1,preventScrollbars:!1,onRender:function(a,b){this.el||(this.defaultAutoCreate={tag:"textarea",style:"width:100px;height:60px;",autocomplete:"off"}),Ext.form.TextArea.superclass.onRender.call(this,a,b),this.grow&&(this.textSizeEl=Ext.DomHelper.append(document.body,{tag:"pre",cls:"x-form-grow-sizer"}),this.preventScrollbars&&this.el.setStyle("overflow","hidden"),this.el.setHeight(this.growMin))},onDestroy:function(){Ext.removeNode(this.textSizeEl),Ext.form.TextArea.superclass.onDestroy.call(this)},fireKey:function(a){a.isSpecialKey()&&(this.enterIsSpecial||a.getKey()!=a.ENTER||a.hasModifier())&&this.fireEvent("specialkey",this,a)},doAutoSize:function(a){return!a.isNavKeyPress()||a.getKey()==a.ENTER},filterValidation:function(a){(!a.isNavKeyPress()||!this.enterIsSpecial&&a.keyCode==a.ENTER)&&this.validationTask.delay(this.validationDelay)},autoSize:function(){if(!this.grow||!this.textSizeEl)return;var a=this.el,b=Ext.util.Format.htmlEncode(a.dom.value),c=this.textSizeEl,d;Ext.fly(c).setWidth(this.el.getWidth()),b.length<1?b="&#160;&#160;":(b+=this.growAppend,Ext.isIE&&(b=b.replace(/\n/g,"&#160;<br />"))),c.innerHTML=b,d=Math.min(this.growMax,Math.max(c.offsetHeight,this.growMin)),d!=this.lastHeight&&(this.lastHeight=d,this.el.setHeight(d),this.fireEvent("autosize",this,d))}}),Ext.reg("textarea",Ext.form.TextArea),Ext.form.NumberField=Ext.extend(Ext.form.TextField,{fieldClass:"x-form-field x-form-num-field",allowDecimals:!0,decimalSeparator:".",decimalPrecision:2,allowNegative:!0,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",baseChars:"0123456789",autoStripChars:!1,initEvents:function(){var a=this.baseChars+"";this.allowDecimals&&(a+=this.decimalSeparator),this.allowNegative&&(a+="-"),a=Ext.escapeRe(a),this.maskRe=new RegExp("["+a+"]"),this.autoStripChars&&(this.stripCharsRe=new RegExp("[^"+a+"]","gi")),Ext.form.NumberField.superclass.initEvents.call(this)},getErrors:function(a){var b=Ext.form.NumberField.superclass.getErrors.apply(this,arguments);a=Ext.isDefined(a)?a:this.processValue(this.getRawValue());if(a.length<1)return b;a=String(a).replace(this.decimalSeparator,"."),isNaN(a)&&b.push(String.format(this.nanText,a));var c=this.parseValue(a);return c<this.minValue&&b.push(String.format(this.minText,this.minValue)),c>this.maxValue&&b.push(String.format(this.maxText,this.maxValue)),b},getValue:function(){return this.fixPrecision(this.parseValue(Ext.form.NumberField.superclass.getValue.call(this)))},setValue:function(a){return a=this.fixPrecision(a),a=Ext.isNumber(a)?a:parseFloat(String(a).replace(this.decimalSeparator,".")),a=isNaN(a)?"":String(a).replace(".",this.decimalSeparator),Ext.form.NumberField.superclass.setValue.call(this,a)},setMinValue:function(a){this.minValue=Ext.num(a,Number.NEGATIVE_INFINITY)},setMaxValue:function(a){this.maxValue=Ext.num(a,Number.MAX_VALUE)},parseValue:function(a){return a=parseFloat(String(a).replace(this.decimalSeparator,".")),isNaN(a)?"":a},fixPrecision:function(a){var b=isNaN(a);return!this.allowDecimals||this.decimalPrecision==-1||b||!a?b?"":a:parseFloat(parseFloat(a).toFixed(this.decimalPrecision))},beforeBlur:function(){var a=this.parseValue(this.getRawValue());Ext.isEmpty(a)||this.setValue(a)}}),Ext.reg("numberfield",Ext.form.NumberField),Ext.form.DateField=Ext.extend(Ext.form.TriggerField,{format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerClass:"x-form-date-trigger",showToday:!0,startDay:0,defaultAutoCreate:{tag:"input",type:"text",size:"10",autocomplete:"off"},initTime:"12",initTimeFormat:"H",safeParse:function(a,b){if(/[gGhH]/.test(b.replace(/(\\.)/g,"")))return Date.parseDate(a,b);var c=Date.parseDate(a+" "+this.initTime,b+" "+this.initTimeFormat);if(c)return c.clearTime()},initComponent:function(){Ext.form.DateField.superclass.initComponent.call(this),this.addEvents("select"),Ext.isString(this.minValue)&&(this.minValue=this.parseDate(this.minValue)),Ext.isString(this.maxValue)&&(this.maxValue=this.parseDate(this.maxValue)),this.disabledDatesRE=null,this.initDisabledDays()},initEvents:function(){Ext.form.DateField.superclass.initEvents.call(this),this.keyNav=new Ext.KeyNav(this.el,{down:function(a){this.onTriggerClick()},scope:this,forceKeyDown:!0})},initDisabledDays:function(){if(this.disabledDates){var a=this.disabledDates,b=a.length-1,c="(?:";Ext.each(a,function(d,e){c+=Ext.isDate(d)?"^"+Ext.escapeRe(d.dateFormat(this.format))+"$":a[e],e!=b&&(c+="|")},this),this.disabledDatesRE=new RegExp(c+")")}},setDisabledDates:function(a){this.disabledDates=a,this.initDisabledDays(),this.menu&&this.menu.picker.setDisabledDates(this.disabledDatesRE)},setDisabledDays:function(a){this.disabledDays=a,this.menu&&this.menu.picker.setDisabledDays(a)},setMinValue:function(a){this.minValue=Ext.isString(a)?this.parseDate(a):a,this.menu&&this.menu.picker.setMinDate(this.minValue)},setMaxValue:function(a){this.maxValue=Ext.isString(a)?this.parseDate(a):a,this.menu&&this.menu.picker.setMaxDate(this.maxValue)},getErrors:function(a){var b=Ext.form.DateField.superclass.getErrors.apply(this,arguments);a=this.formatDate(a||this.processValue(this.getRawValue()));if(a.length<1)return b;var c=a;a=this.parseDate(a);if(!a)return b.push(String.format(this.invalidText,c,this.format)),b;var d=a.getTime();this.minValue&&d<this.minValue.clearTime().getTime()&&b.push(String.format(this.minText,this.formatDate(this.minValue))),this.maxValue&&d>this.maxValue.clearTime().getTime()&&b.push(String.format(this.maxText,this.formatDate(this.maxValue)));if(this.disabledDays){var e=a.getDay();for(var f=0;f<this.disabledDays.length;f++)if(e===this.disabledDays[f]){b.push(this.disabledDaysText);break}}var g=this.formatDate(a);return this.disabledDatesRE&&this.disabledDatesRE.test(g)&&b.push(String.format(this.disabledDatesText,g)),b},validateBlur:function(){return!this.menu||!this.menu.isVisible()},getValue:function(){return this.parseDate(Ext.form.DateField.superclass.getValue.call(this))||""},setValue:function(a){return Ext.form.DateField.superclass.setValue.call(this,this.formatDate(this.parseDate(a)))},parseDate:function(a){if(!a||Ext.isDate(a))return a;var b=this.safeParse(a,this.format),c=this.altFormats,d=this.altFormatsArray;if(!b&&c){d=d||c.split("|");for(var e=0,f=d.length;e<f&&!b;e++)b=this.safeParse(a,d[e])}return b},onDestroy:function(){Ext.destroy(this.menu,this.keyNav),Ext.form.DateField.superclass.onDestroy.call(this)},formatDate:function(a){return Ext.isDate(a)?a.dateFormat(this.format):a},onTriggerClick:function(){if(this.disabled)return;this.menu==null&&(this.menu=new Ext.menu.DateMenu({hideOnClick:!1,focusOnSelect:!1})),this.onFocus(),Ext.apply(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.disabledDatesRE,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,showToday:this.showToday,startDay:this.startDay,minText:String.format(this.minText,this.formatDate(this.minValue)),maxText:String.format(this.maxText,this.formatDate(this.maxValue))}),this.menu.picker.setValue(this.getValue()||new Date),this.menu.show(this.el,"tl-bl?"),this.menuEvents("on")},menuEvents:function(a){this.menu[a]("select",this.onSelect,this),this.menu[a]("hide",this.onMenuHide,this),this.menu[a]("show",this.onFocus,this)},onSelect:function(a,b){this.setValue(b),this.fireEvent("select",this,b),this.menu.hide()},onMenuHide:function(){this.focus(!1,60),this.menuEvents("un")},beforeBlur:function(){var a=this.parseDate(this.getRawValue());a&&this.setValue(a)}}),Ext.reg("datefield",Ext.form.DateField),Ext.form.DisplayField=Ext.extend(Ext.form.Field,{validationEvent:!1,validateOnBlur:!1,defaultAutoCreate:{tag:"div"},fieldClass:"x-form-display-field",htmlEncode:!1,initEvents:Ext.emptyFn,isValid:function(){return!0},validate:function(){return!0},getRawValue:function(){var a=this.rendered?this.el.dom.innerHTML:Ext.value(this.value,"");return a===this.emptyText&&(a=""),this.htmlEncode&&(a=Ext.util.Format.htmlDecode(a)),a},getValue:function(){return this.getRawValue()},getName:function(){return this.name},setRawValue:function(a){return this.htmlEncode&&(a=Ext.util.Format.htmlEncode(a)),this.rendered?this.el.dom.innerHTML=Ext.isEmpty(a)?"":a:this.value=a},setValue:function(a){return this.setRawValue(a),this}}),Ext.reg("displayfield",Ext.form.DisplayField),Ext.form.ComboBox=Ext.extend(Ext.form.TriggerField,{defaultAutoCreate:{tag:"input",type:"text",size:"24",autocomplete:"off"},listClass:"",selectedClass:"x-combo-selected",listEmptyText:"",triggerClass:"x-form-arrow-trigger",shadow:"sides",listAlign:"tl-bl?",maxHeight:300,minHeight:90,triggerAction:"query",minChars:4,autoSelect:!0,typeAhead:!1,queryDelay:500,pageSize:0,selectOnFocus:!1,queryParam:"query",loadingText:"Loading...",resizable:!1,handleHeight:8,allQuery:"",mode:"remote",minListWidth:70,forceSelection:!1,typeAheadDelay:250,lazyInit:!0,clearFilterOnReset:!0,submitValue:undefined,initComponent:function(){Ext.form.ComboBox.superclass.initComponent.call(this),this.addEvents("expand","collapse","beforeselect","select","beforequery");if(this.transform){var a=Ext.getDom(this.transform);this.hiddenName||(this.hiddenName=a.name);if(!this.store){this.mode="local";var b=[],c=a.options;for(var d=0,e=c.length;d<e;d++){var f=c[d],g=(f.hasAttribute?f.hasAttribute("value"):f.getAttributeNode("value").specified)?f.value:f.text;f.selected&&Ext.isEmpty(this.value,!0)&&(this.value=g),b.push([g,f.text])}this.store=new Ext.data.ArrayStore({idIndex:0,fields:["value","text"],data:b,autoDestroy:!0}),this.valueField="value",this.displayField="text"}a.name=Ext.id(),this.lazyRender||(this.target=!0,this.el=Ext.DomHelper.insertBefore(a,this.autoCreate||this.defaultAutoCreate),this.render(this.el.parentNode,a)),Ext.removeNode(a)}else this.store&&(this.store=Ext.StoreMgr.lookup(this.store),this.store.autoCreated&&(this.displayField=this.valueField="field1",this.store.expandData||(this.displayField="field2"),this.mode="local"));this.selectedIndex=-1,this.mode=="local"&&(Ext.isDefined(this.initialConfig.queryDelay)||(this.queryDelay=10),Ext.isDefined(this.initialConfig.minChars)||(this.minChars=0))},onRender:function(a,b){this.hiddenName&&!Ext.isDefined(this.submitValue)&&(this.submitValue=!1),Ext.form.ComboBox.superclass.onRender.call(this,a,b),this.hiddenName&&(this.hiddenField=this.el.insertSibling({tag:"input",type:"hidden",name:this.hiddenName,id:this.hiddenId||Ext.id()},"before",!0)),Ext.isGecko&&this.el.dom.setAttribute("autocomplete","off"),this.lazyInit?this.on("focus",this.initList,this,{single:!0}):this.initList()},initValue:function(){Ext.form.ComboBox.superclass.initValue.call(this),this.hiddenField&&(this.hiddenField.value=Ext.value(Ext.isDefined(this.hiddenValue)?this.hiddenValue:this.value,""))},getParentZIndex:function(){var a;return this.ownerCt&&this.findParentBy(function(b){return a=parseInt(b.getPositionEl().getStyle("z-index"),10),!!a}),a},getZIndex:function(a){a=a||Ext.getDom(this.getListParent()||Ext.getBody());var b=parseInt(Ext.fly(a).getStyle("z-index"),10);return b||(b=this.getParentZIndex()),(b||12e3)+5},initList:function(){if(!this.list){var a="x-combo-list",b=Ext.getDom(this.getListParent()||Ext.getBody());this.list=new Ext.Layer({parentEl:b,shadow:this.shadow,cls:[a,this.listClass].join(" "),constrain:!1,zindex:this.getZIndex(b)});var c=this.listWidth||Math.max(this.wrap.getWidth(),this.minListWidth);this.list.setSize(c,0),this.list.swallowEvent("mousewheel"),this.assetHeight=0,this.syncFont!==!1&&this.list.setStyle("font-size",this.el.getStyle("font-size")),this.title&&(this.header=this.list.createChild({cls:a+"-hd",html:this.title}),this.assetHeight+=this.header.getHeight()),this.innerList=this.list.createChild({cls:a+"-inner"}),this.mon(this.innerList,"mouseover",this.onViewOver,this),this.mon(this.innerList,"mousemove",this.onViewMove,this),this.innerList.setWidth(c-this.list.getFrameWidth("lr")),this.pageSize&&(this.footer=this.list.createChild({cls:a+"-ft"}),this.pageTb=new Ext.PagingToolbar({store:this.store,pageSize:this.pageSize,renderTo:this.footer}),this.assetHeight+=this.footer.getHeight()),this.tpl||(this.tpl='<tpl for="."><div class="'+a+'-item">{'+this.displayField+"}</div></tpl>"),this.view=new Ext.DataView({applyTo:this.innerList,tpl:this.tpl,singleSelect:!0,selectedClass:this.selectedClass,itemSelector:this.itemSelector||"."+a+"-item",emptyText:this.listEmptyText,deferEmptyText:!1}),this.mon(this.view,{containerclick:this.onViewClick,click:this.onViewClick,scope:this}),this.bindStore(this.store,!0),this.resizable&&(this.resizer=new Ext.Resizable(this.list,{pinned:!0,handles:"se"}),this.mon(this.resizer,"resize",function(a,b,c){this.maxHeight=c-this.handleHeight-this.list.getFrameWidth("tb")-this.assetHeight,this.listWidth=b,this.innerList.setWidth(b-this.list.getFrameWidth("lr")),this.restrictHeight()},this),this[this.pageSize?"footer":"innerList"].setStyle("margin-bottom",this.handleHeight+"px"))}},getListParent:function(){return document.body},getStore:function(){return this.store},bindStore:function(a,b){this.store&&!b&&(this.store!==a&&this.store.autoDestroy?this.store.destroy():(this.store.un("beforeload"
,this.onBeforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("exception",this.collapse,this)),a||(this.store=null,this.view&&this.view.bindStore(null),this.pageTb&&this.pageTb.bindStore(null))),a&&(b||(this.lastQuery=null,this.pageTb&&this.pageTb.bindStore(a)),this.store=Ext.StoreMgr.lookup(a),this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.collapse}),this.view&&this.view.bindStore(a))},reset:function(){this.clearFilterOnReset&&this.mode=="local"&&this.store.clearFilter(),Ext.form.ComboBox.superclass.reset.call(this)},initEvents:function(){Ext.form.ComboBox.superclass.initEvents.call(this),this.keyNav=new Ext.KeyNav(this.el,{up:function(a){this.inKeyMode=!0,this.selectPrev()},down:function(a){this.isExpanded()?(this.inKeyMode=!0,this.selectNext()):this.onTriggerClick()},enter:function(a){this.onViewClick()},esc:function(a){this.collapse()},tab:function(a){return this.forceSelection===!0?this.collapse():this.onViewClick(!1),!0},scope:this,doRelay:function(a,b,c){if(c=="down"||this.scope.isExpanded()){var d=Ext.KeyNav.prototype.doRelay.apply(this,arguments);return!Ext.isIE&&Ext.EventManager.useKeydown&&this.scope.fireKey(a),d}return!0},forceKeyDown:!0,defaultEventAction:"stopEvent"}),this.queryDelay=Math.max(this.queryDelay||10,this.mode=="local"?10:250),this.dqTask=new Ext.util.DelayedTask(this.initQuery,this),this.typeAhead&&(this.taTask=new Ext.util.DelayedTask(this.onTypeAhead,this)),this.enableKeyEvents||this.mon(this.el,"keyup",this.onKeyUp,this)},onDestroy:function(){this.dqTask&&(this.dqTask.cancel(),this.dqTask=null),this.bindStore(null),Ext.destroy(this.resizer,this.view,this.pageTb,this.list),Ext.destroyMembers(this,"hiddenField"),Ext.form.ComboBox.superclass.onDestroy.call(this)},fireKey:function(a){this.isExpanded()||Ext.form.ComboBox.superclass.fireKey.call(this,a)},onResize:function(a,b){Ext.form.ComboBox.superclass.onResize.apply(this,arguments),!isNaN(a)&&this.isVisible()&&this.list?this.doResize(a):this.bufferSize=a},doResize:function(a){if(!Ext.isDefined(this.listWidth)){var b=Math.max(a,this.minListWidth);this.list.setWidth(b),this.innerList.setWidth(b-this.list.getFrameWidth("lr"))}},onEnable:function(){Ext.form.ComboBox.superclass.onEnable.apply(this,arguments),this.hiddenField&&(this.hiddenField.disabled=!1)},onDisable:function(){Ext.form.ComboBox.superclass.onDisable.apply(this,arguments),this.hiddenField&&(this.hiddenField.disabled=!0)},onBeforeLoad:function(){if(!this.hasFocus)return;this.innerList.update(this.loadingText?'<div class="loading-indicator">'+this.loadingText+"</div>":""),this.restrictHeight(),this.selectedIndex=-1},onLoad:function(){if(!this.hasFocus)return;this.store.getCount()>0||this.listEmptyText?(this.expand(),this.restrictHeight(),this.lastQuery==this.allQuery?(this.editable&&this.el.dom.select(),this.autoSelect!==!1&&!this.selectByValue(this.value,!0)&&this.select(0,!0)):(this.autoSelect!==!1&&this.selectNext(),this.typeAhead&&this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE&&this.taTask.delay(this.typeAheadDelay))):this.collapse()},onTypeAhead:function(){if(this.store.getCount()>0){var a=this.store.getAt(0),b=a.data[this.displayField],c=b.length,d=this.getRawValue().length;d!=c&&(this.setRawValue(b),this.selectText(d,b.length))}},assertValue:function(){var a=this.getRawValue(),b;this.valueField&&Ext.isDefined(this.value)&&(b=this.findRecord(this.valueField,this.value));if(!b||b.get(this.displayField)!=a)b=this.findRecord(this.displayField,a);if(!b&&this.forceSelection)a.length>0&&a!=this.emptyText?(this.el.dom.value=Ext.value(this.lastSelectionText,""),this.applyEmptyText()):this.clearValue();else{if(b&&this.valueField){if(this.value==a)return;a=b.get(this.valueField||this.displayField)}this.setValue(a)}},onSelect:function(a,b){this.fireEvent("beforeselect",this,a,b)!==!1&&(this.setValue(a.data[this.valueField||this.displayField]),this.collapse(),this.fireEvent("select",this,a,b))},getName:function(){var a=this.hiddenField;return a&&a.name?a.name:this.hiddenName||Ext.form.ComboBox.superclass.getName.call(this)},getValue:function(){return this.valueField?Ext.isDefined(this.value)?this.value:"":Ext.form.ComboBox.superclass.getValue.call(this)},clearValue:function(){this.hiddenField&&(this.hiddenField.value=""),this.setRawValue(""),this.lastSelectionText="",this.applyEmptyText(),this.value=""},setValue:function(a){var b=a;if(this.valueField){var c=this.findRecord(this.valueField,a);c?b=c.data[this.displayField]:Ext.isDefined(this.valueNotFoundText)&&(b=this.valueNotFoundText)}return this.lastSelectionText=b,this.hiddenField&&(this.hiddenField.value=Ext.value(a,"")),Ext.form.ComboBox.superclass.setValue.call(this,b),this.value=a,this},findRecord:function(a,b){var c;return this.store.getCount()>0&&this.store.each(function(d){if(d.data[a]==b)return c=d,!1}),c},onViewMove:function(a,b){this.inKeyMode=!1},onViewOver:function(a,b){if(this.inKeyMode)return;var c=this.view.findItemFromChild(b);if(c){var d=this.view.indexOf(c);this.select(d,!1)}},onViewClick:function(a){var b=this.view.getSelectedIndexes()[0],c=this.store,d=c.getAt(b);d?this.onSelect(d,b):this.collapse(),a!==!1&&this.el.focus()},restrictHeight:function(){this.innerList.dom.style.height="";var a=this.innerList.dom,b=this.list.getFrameWidth("tb")+(this.resizable?this.handleHeight:0)+this.assetHeight,c=Math.max(a.clientHeight,a.offsetHeight,a.scrollHeight),d=this.getPosition()[1]-Ext.getBody().getScroll().top,e=Ext.lib.Dom.getViewHeight()-d-this.getSize().height,f=Math.max(d,e,this.minHeight||0)-this.list.shadowOffset-b-5;c=Math.min(c,f,this.maxHeight),this.innerList.setHeight(c),this.list.beginUpdate(),this.list.setHeight(c+b),this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign)),this.list.endUpdate()},isExpanded:function(){return this.list&&this.list.isVisible()},selectByValue:function(a,b){if(!Ext.isEmpty(a,!0)){var c=this.findRecord(this.valueField||this.displayField,a);if(c)return this.select(this.store.indexOf(c),b),!0}return!1},select:function(a,b){this.selectedIndex=a,this.view.select(a);if(b!==!1){var c=this.view.getNode(a);c&&this.innerList.scrollChildIntoView(c,!1)}},selectNext:function(){var a=this.store.getCount();a>0&&(this.selectedIndex==-1?this.select(0):this.selectedIndex<a-1&&this.select(this.selectedIndex+1))},selectPrev:function(){var a=this.store.getCount();a>0&&(this.selectedIndex==-1?this.select(0):this.selectedIndex!==0&&this.select(this.selectedIndex-1))},onKeyUp:function(a){var b=a.getKey();this.editable!==!1&&this.readOnly!==!0&&(b==a.BACKSPACE||!a.isSpecialKey())&&(this.lastKey=b,this.dqTask.delay(this.queryDelay)),Ext.form.ComboBox.superclass.onKeyUp.call(this,a)},validateBlur:function(){return!this.list||!this.list.isVisible()},initQuery:function(){this.doQuery(this.getRawValue())},beforeBlur:function(){this.assertValue()},postBlur:function(){Ext.form.ComboBox.superclass.postBlur.call(this),this.collapse(),this.inKeyMode=!1},doQuery:function(a,b){a=Ext.isEmpty(a)?"":a;var c={query:a,forceAll:b,combo:this,cancel:!1};if(this.fireEvent("beforequery",c)===!1||c.cancel)return!1;a=c.query,b=c.forceAll;if(b===!0||a.length>=this.minChars)this.lastQuery!==a?(this.lastQuery=a,this.mode=="local"?(this.selectedIndex=-1,b?this.store.clearFilter():this.store.filter(this.displayField,a),this.onLoad()):(this.store.baseParams[this.queryParam]=a,this.store.load({params:this.getParams(a)}),this.expand())):(this.selectedIndex=-1,this.onLoad())},getParams:function(a){var b={},c=this.store.paramNames;return this.pageSize&&(b[c.start]=0,b[c.limit]=this.pageSize),b},collapse:function(){if(!this.isExpanded())return;this.list.hide(),Ext.getDoc().un("mousewheel",this.collapseIf,this),Ext.getDoc().un("mousedown",this.collapseIf,this),this.fireEvent("collapse",this)},collapseIf:function(a){!this.isDestroyed&&!a.within(this.wrap)&&!a.within(this.list)&&this.collapse()},expand:function(){if(this.isExpanded()||!this.hasFocus)return;if(this.title||this.pageSize)this.assetHeight=0,this.title&&(this.assetHeight+=this.header.getHeight()),this.pageSize&&(this.assetHeight+=this.footer.getHeight());this.bufferSize&&(this.doResize(this.bufferSize),delete this.bufferSize),this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign)),this.list.setZIndex(this.getZIndex()),this.list.show(),Ext.isGecko2&&this.innerList.setOverflow("auto"),this.mon(Ext.getDoc(),{scope:this,mousewheel:this.collapseIf,mousedown:this.collapseIf}),this.fireEvent("expand",this)},onTriggerClick:function(){if(this.readOnly||this.disabled)return;this.isExpanded()?(this.collapse(),this.el.focus()):(this.onFocus({}),this.triggerAction=="all"?this.doQuery(this.allQuery,!0):this.doQuery(this.getRawValue()),this.el.focus())}}),Ext.reg("combo",Ext.form.ComboBox),Ext.form.Checkbox=Ext.extend(Ext.form.Field,{focusClass:undefined,fieldClass:"x-form-field",checked:!1,boxLabel:"&#160;",defaultAutoCreate:{tag:"input",type:"checkbox",autocomplete:"off"},actionMode:"wrap",initComponent:function(){Ext.form.Checkbox.superclass.initComponent.call(this),this.addEvents("check")},onResize:function(){Ext.form.Checkbox.superclass.onResize.apply(this,arguments),!this.boxLabel&&!this.fieldLabel&&this.el.alignTo(this.wrap,"c-c")},initEvents:function(){Ext.form.Checkbox.superclass.initEvents.call(this),this.mon(this.el,{scope:this,click:this.onClick,change:this.onClick})},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,onRender:function(a,b){Ext.form.Checkbox.superclass.onRender.call(this,a,b),this.inputValue!==undefined&&(this.el.dom.value=this.inputValue),this.wrap=this.el.wrap({cls:"x-form-check-wrap"}),this.boxLabel&&this.wrap.createChild({tag:"label",htmlFor:this.el.id,cls:"x-form-cb-label",html:this.boxLabel}),this.checked?this.setValue(!0):this.checked=this.el.dom.checked,Ext.isIE&&!Ext.isStrict&&this.wrap.repaint(),this.resizeEl=this.positionEl=this.wrap},onDestroy:function(){Ext.destroy(this.wrap),Ext.form.Checkbox.superclass.onDestroy.call(this)},initValue:function(){this.originalValue=this.getValue()},getValue:function(){return this.rendered?this.el.dom.checked:this.checked},onClick:function(){this.el.dom.checked!=this.checked&&this.setValue(this.el.dom.checked)},setValue:function(a){var b=this.checked,c=this.inputValue;return this.checked=a===!0||a==="true"||a=="1"||(c?a==c:String(a).toLowerCase()=="on"),this.rendered&&(this.el.dom.checked=this.checked,this.el.dom.defaultChecked=this.checked),b!=this.checked&&(this.fireEvent("check",this,this.checked),this.handler&&this.handler.call(this.scope||this,this,this.checked)),this}}),Ext.reg("checkbox",Ext.form.Checkbox),Ext.form.CheckboxGroup=Ext.extend(Ext.form.Field,{columns:"auto",vertical:!1,allowBlank:!0,blankText:"You must select at least one item in this group",defaultType:"checkbox",groupCls:"x-form-check-group",initComponent:function(){this.addEvents("change"),this.on("change",this.validate,this),Ext.form.CheckboxGroup.superclass.initComponent.call(this)},onRender:function(a,b){if(!this.el){var c={autoEl:{id:this.id},cls:this.groupCls,layout:"column",renderTo:a,bufferResize:!1},d={xtype:"container",defaultType:this.defaultType,layout:"form",defaults:{hideLabel:!0,anchor:"100%"}};if(this.items[0].items){Ext.apply(c,{layoutConfig:{columns:this.items.length},defaults:this.defaults,items:this.items});for(var e=0,f=this.items.length;e<f;e++)Ext.applyIf(this.items[e],d)}else{var g,h=[];typeof this.columns=="string"&&(this.columns=this.items.length);if(!Ext.isArray(this.columns)){var i=[];for(var e=0;e<this.columns;e++)i.push(100/this.columns*.01);this.columns=i}g=this.columns.length;for(var e=0;e<g;e++){var j=Ext.apply({items:[]},d);j[this.columns[e]<=1?"columnWidth":"width"]=this.columns[e],this.defaults&&(j.defaults=Ext.apply(j.defaults||{},this.defaults)),h.push(j)}if(this.vertical){var k=Math.ceil(this.items.length/g),l=0;for(var e=0,f=this.items.length;e<f;e++)e>0&&e%k==0&&l++,this.items[e].fieldLabel&&(this.items[e].hideLabel=!1),h[l].items.push(this.items[e])}else for(var e=0,f=this.items.length;e<f;e++){var m=e%g;this.items[e].fieldLabel&&(this.items[e].hideLabel=!1),h[m].items.push(this.items[e])}Ext.apply(c,{layoutConfig:{columns:g},items:h})}this.panel=new Ext.Container(c),this.panel.ownerCt=this,this.el=this.panel.getEl();if(this.forId&&this.itemCls){var n=this.el.up(this.itemCls).child("label",!0);n&&n.setAttribute("htmlFor",this.forId)}var o=this.panel.findBy(function(a){return a.isFormField},this);this.items=new Ext.util.MixedCollection,this.items.addAll(o)}Ext.form.CheckboxGroup.superclass.onRender.call(this,a,b)},initValue:function(){this.value&&(this.setValue.apply(this,this.buffered?this.value:[this.value]),delete this.buffered,delete this.value)},afterRender:function(){Ext.form.CheckboxGroup.superclass.afterRender.call(this),this.eachItem(function(a){a.on("check",this.fireChecked,this),a.inGroup=!0})},doLayout:function(){this.rendered&&(this.panel.forceLayout=this.ownerCt.forceLayout,this.panel.doLayout())},fireChecked:function(){var a=[];this.eachItem(function(b){b.checked&&a.push(b)}),this.fireEvent("change",this,a)},getErrors:function(){var a=Ext.form.CheckboxGroup.superclass.getErrors.apply(this,arguments);if(!this.allowBlank){var b=!0;this.eachItem(function(a){if(a.checked)return b=!1}),b&&a.push(this.blankText)}return a},isDirty:function(){if(this.disabled||!this.rendered)return!1;var a=!1;return this.eachItem(function(b){if(b.isDirty())return a=!0,!1}),a},setReadOnly:function(a){this.rendered&&this.eachItem(function(b){b.setReadOnly(a)}),this.readOnly=a},onDisable:function(){this.eachItem(function(a){a.disable()})},onEnable:function(){this.eachItem(function(a){a.enable()})},onResize:function(a,b){this.panel.setSize(a,b),this.panel.doLayout()},reset:function(){this.originalValue?(this.eachItem(function(a){a.setValue&&(a.setValue(!1),a.originalValue=a.getValue())}),this.resetOriginal=!0,this.setValue(this.originalValue),delete this.resetOriginal):this.eachItem(function(a){a.reset&&a.reset()}),function(){this.clearInvalid()}.defer(50,this)},setValue:function(){return this.rendered?this.onSetValue.apply(this,arguments):(this.buffered=!0,this.value=arguments),this},onSetValue:function(a,b){if(arguments.length==1)if(Ext.isArray(a))Ext.each(a,function(a,b){if(Ext.isObject(a)&&a.setValue)a.setValue(!0),this.resetOriginal===!0&&(a.originalValue=a.getValue());else{var c=this.items.itemAt(b);c&&c.setValue(a)}},this);else if(Ext.isObject(a))for(var c in a){var d=this.getBox(c);d&&d.setValue(a[c])}else this.setValueForItem(a);else{var d=this.getBox(a);d&&d.setValue(b)}},beforeDestroy:function(){Ext.destroy(this.panel),this.rendered||Ext.destroy(this.items),Ext.form.CheckboxGroup.superclass.beforeDestroy.call(this)},setValueForItem:function(a){a=String(a).split(","),this.eachItem(function(b){a.indexOf(b.inputValue)>-1&&b.setValue(!0)})},getBox:function(a){var b=null;return this.eachItem(function(c){if(a==c||c.dataIndex==a||c.id==a||c.getName()==a)return b=c,!1}),b},getValue:function(){var a=[];return this.eachItem(function(b){b.checked&&a.push(b)}),a},eachItem:function(a,b){this.items&&this.items.each&&this.items.each(a,b||this)},getRawValue:Ext.emptyFn,setRawValue:Ext.emptyFn}),Ext.reg("checkboxgroup",Ext.form.CheckboxGroup),Ext.form.CompositeField=Ext.extend(Ext.form.Field,{defaultMargins:"0 5 0 0",skipLastItemMargin:!0,isComposite:!0,combineErrors:!0,labelConnector:", ",initComponent:function(){var a=[],b=this.items,c;for(var d=0,e=b.length;d<e;d++)c=b[d],Ext.isEmpty(c.ref)||(c.ref="../"+c.ref),a.push(c.fieldLabel),Ext.applyIf(c,this.defaults),(d!=e-1||!this.skipLastItemMargin)&&Ext.applyIf(c,{margins:this.defaultMargins});this.fieldLabel=this.fieldLabel||this.buildLabel(a),this.fieldErrors=new Ext.util.MixedCollection(!0,function(a){return a.field}),this.fieldErrors.on({scope:this,add:this.updateInvalidMark,remove:this.updateInvalidMark,replace:this.updateInvalidMark}),Ext.form.CompositeField.superclass.initComponent.apply(this,arguments),this.innerCt=new Ext.Container({layout:"hbox",items:this.items,cls:"x-form-composite",defaultMargins:"0 3 0 0",ownerCt:this}),this.innerCt.ownerCt=undefined;var f=this.innerCt.findBy(function(a){return a.isFormField},this);this.items=new Ext.util.MixedCollection,this.items.addAll(f)},onRender:function(a,b){if(!this.el){var c=this.innerCt;c.render(a),this.el=c.getEl(),this.combineErrors&&this.eachItem(function(a){Ext.apply(a,{markInvalid:this.onFieldMarkInvalid.createDelegate(this,[a],0),clearInvalid:this.onFieldClearInvalid.createDelegate(this,[a],0)})});var d=this.el.parent().parent().child("label",!0);d&&d.setAttribute("for",this.items.items[0].id)}Ext.form.CompositeField.superclass.onRender.apply(this,arguments)},onFieldMarkInvalid:function(a,b){var c=a.getName(),d={field:c,errorName:a.fieldLabel||c,error:b};this.fieldErrors.replace(c,d),a.el.addClass(a.invalidClass)},onFieldClearInvalid:function(a){this.fieldErrors.removeKey(a.getName()),a.el.removeClass(a.invalidClass)},updateInvalidMark:function(){var a=Ext.isIE6&&Ext.isStrict;if(this.fieldErrors.length==0)this.clearInvalid(),a&&this.clearInvalid.defer(50,this);else{var b=this.buildCombinedErrorMessage(this.fieldErrors.items);this.sortErrors(),this.markInvalid(b),a&&this.markInvalid(b)}},validateValue:function(){var a=!0;return this.eachItem(function(b){b.isValid()||(a=!1)}),a},buildCombinedErrorMessage:function(a){var b=[],c;for(var d=0,e=a.length;d<e;d++)c=a[d],b.push(String.format("{0}: {1}",c.errorName,c.error));return b.join("<br />")},sortErrors:function(){var a=this.items;this.fieldErrors.sort("ASC",function(b,c){var d=function(a){return function(b){return b.getName()==a}},e=a.findIndexBy(d(b.field)),f=a.findIndexBy(d(c.field));return e<f?-1:1})},reset:function(){this.eachItem(function(a){a.reset()}),function(){this.clearInvalid()}.defer(50,this)},clearInvalidChildren:function(){this.eachItem(function(a){a.clearInvalid()})},buildLabel:function(a){return Ext.clean(a).join(this.labelConnector)},isDirty:function(){if(this.disabled||!this.rendered)return!1;var a=!1;return this.eachItem(function(b){if(b.isDirty())return a=!0,!1}),a},eachItem:function(a,b){this.items&&this.items.each&&this.items.each(a,b||this)},onResize:function(a,b,c,d){var e=this.innerCt;this.rendered&&e.rendered&&e.setSize(a,b),Ext.form.CompositeField.superclass.onResize.apply(this,arguments)},doLayout:function(a,b){if(this.rendered){var c=this.innerCt;c.forceLayout=this.ownerCt.forceLayout,c.doLayout(a,b)}},beforeDestroy:function(){Ext.destroy(this.innerCt),Ext.form.CompositeField.superclass.beforeDestroy.call(this)},setReadOnly:function(a){a==undefined&&(a=!0),a=!!a,this.rendered&&this.eachItem(function(b){b.setReadOnly(a)}),this.readOnly=a},onShow:function(){Ext.form.CompositeField.superclass.onShow.call(this),this.doLayout()},onDisable:function(){this.eachItem(function(a){a.disable()})},onEnable:function(){this.eachItem(function(a){a.enable()})}}),Ext.reg("compositefield",Ext.form.CompositeField),Ext.form.Radio=Ext.extend(Ext.form.Checkbox,{inputType:"radio",markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,getGroupValue:function(){var a=this.el.up("form")||Ext.getBody(),b=a.child("input[name="+this.el.dom.name+"]:checked",!0);return b?b.value:null},setValue:function(a){var b,c,d;return typeof a=="boolean"?Ext.form.Radio.superclass.setValue.call(this,a):this.rendered&&(b=this.getCheckEl(),d=b.child("input[name="+this.el.dom.name+"][value="+a+"]",!0),d&&Ext.getCmp(d.id).setValue(!0)),this.rendered&&this.checked&&(b=b||this.getCheckEl(),c=this.getCheckEl().select("input[name="+this.el.dom.name+"]"),c.each(function(a){a.dom.id!=this.id&&Ext.getCmp(a.dom.id).setValue(!1)},this)),this},getCheckEl:function(){return this.inGroup?this.el.up(".x-form-radio-group"):this.el.up("form")||Ext.getBody()}}),Ext.reg("radio",Ext.form.Radio),Ext.form.RadioGroup=Ext.extend(Ext.form.CheckboxGroup,{allowBlank:!0,blankText:"You must select one item in this group",defaultType:"radio",groupCls:"x-form-radio-group",getValue:function(){var a=null;return this.eachItem(function(b){if(b.checked)return a=b,!1}),a},onSetValue:function(a,b){if(arguments.length>1){var c=this.getBox(a);c&&(c.setValue(b),c.checked&&this.eachItem(function(a){a!==c&&a.setValue(!1)}))}else this.setValueForItem(a)},setValueForItem:function(a){a=String(a).split(",")[0],this.eachItem(function(b){b.setValue(a==b.inputValue)})},fireChecked:function(){this.checkTask||(this.checkTask=new Ext.util.DelayedTask(this.bufferChecked,this)),this.checkTask.delay(10)},bufferChecked:function(){var a=null;this.eachItem(function(b){if(b.checked)return a=b,!1}),this.fireEvent("change",this,a)},onDestroy:function(){this.checkTask&&(this.checkTask.cancel(),this.checkTask=null),Ext.form.RadioGroup.superclass.onDestroy.call(this)}}),Ext.reg("radiogroup",Ext.form.RadioGroup),Ext.form.Hidden=Ext.extend(Ext.form.Field,{inputType:"hidden",shouldLayout:!1,onRender:function(){Ext.form.Hidden.superclass.onRender.apply(this,arguments)},initEvents:function(){this.originalValue=this.getValue()},setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn}),Ext.reg("hidden",Ext.form.Hidden),Ext.form.BasicForm=Ext.extend(Ext.util.Observable,{constructor:function(a,b){Ext.apply(this,b),Ext.isString(this.paramOrder)&&(this.paramOrder=this.paramOrder.split(/[\s,|]/)),this.items=new Ext.util.MixedCollection(!1,function(a){return a.getItemId()}),this.addEvents("beforeaction","actionfailed","actioncomplete"),a&&this.initEl(a),Ext.form.BasicForm.superclass.constructor.call(this)},timeout:30,paramOrder:undefined,paramsAsHash:!1,waitTitle:"Please Wait...",activeAction:null,trackResetOnLoad:!1,initEl:function(a){this.el=Ext.get(a),this.id=this.el.id||Ext.id(),this.standardSubmit||this.el.on("submit",this.onSubmit,this),this.el.addClass("x-form")},getEl:function(){return this.el},onSubmit:function(a){a.stopEvent()},destroy:function(a){a!==!0&&(this.items.each(function(a){Ext.destroy(a)}),Ext.destroy(this.el)),this.items.clear(),this.purgeListeners()},isValid:function(){var a=!0;return this.items.each(function(b){b.validate()||(a=!1)}),a},isDirty:function(){var a=!1;return this.items.each(function(b){if(b.isDirty())return a=!0,!1}),a},doAction:function(a,b){return Ext.isString(a)&&(a=new Ext.form.Action.ACTION_TYPES[a](this,b)),this.fireEvent("beforeaction",this,a)!==!1&&(this.beforeAction(a),a.run.defer(100,a)),this},submit:function(a){a=a||{};if(this.standardSubmit){var b=a.clientValidation===!1||this.isValid();if(b){var c=this.el.dom;this.url&&Ext.isEmpty(c.action)&&(c.action=this.url),c.submit()}return b}var d=String.format("{0}submit",this.api?"direct":"");return this.doAction(d,a),this},load:function(a){var b=String.format("{0}load",this.api?"direct":"");return this.doAction(b,a),this},updateRecord:function(a){a.beginEdit();var b=a.fields,c,d;return b.each(function(b){c=this.findField(b.name),c&&(d=c.getValue(),typeof d!=undefined&&d.getGroupValue?d=d.getGroupValue():c.eachItem&&(d=[],c.eachItem(function(a){d.push(a.getValue())})),a.set(b.name,d))},this),a.endEdit(),this},loadRecord:function(a){return this.setValues(a.data),this},beforeAction:function(a){this.items.each(function(a){a.isFormField&&a.syncValue&&a.syncValue()});var b=a.options;b.waitMsg&&(this.waitMsgTarget===!0?this.el.mask(b.waitMsg,"x-mask-loading"):this.waitMsgTarget?(this.waitMsgTarget=Ext.get(this.waitMsgTarget),this.waitMsgTarget.mask(b.waitMsg,"x-mask-loading")):Ext.MessageBox.wait(b.waitMsg,b.waitTitle||this.waitTitle))},afterAction:function(a,b){this.activeAction=null;var c=a.options;c.waitMsg&&(this.waitMsgTarget===!0?this.el.unmask():this.waitMsgTarget?this.waitMsgTarget.unmask():(Ext.MessageBox.updateProgress(1),Ext.MessageBox.hide())),b?(c.reset&&this.reset(),Ext.callback(c.success,c.scope,[this,a]),this.fireEvent("actioncomplete",this,a)):(Ext.callback(c.failure,c.scope,[this,a]),this.fireEvent("actionfailed",this,a))},findField:function(a){var b=this.items.get(a);if(!Ext.isObject(b)){var c=function(d){if(d.isFormField){if(d.dataIndex==a||d.id==a||d.getName()==a)return b=d,!1;if(d.isComposite)return d.items.each(c);if(d instanceof Ext.form.CheckboxGroup&&d.rendered)return d.eachItem(c)}};this.items.each(c)}return b||null},markInvalid:function(a){if(Ext.isArray(a))for(var b=0,c=a.length;b<c;b++){var d=a[b],e=this.findField(d.id);e&&e.markInvalid(d.msg)}else{var f,g;for(g in a)!Ext.isFunction(a[g])&&(f=this.findField(g))&&f.markInvalid(a[g])}return this},setValues:function(a){if(Ext.isArray(a))for(var b=0,c=a.length;b<c;b++){var d=a[b],e=this.findField(d.id);e&&(e.setValue(d.value),this.trackResetOnLoad&&(e.originalValue=e.getValue()))}else{var f,g;for(g in a)!Ext.isFunction(a[g])&&(f=this.findField(g))&&(f.setValue(a[g]),this.trackResetOnLoad&&(f.originalValue=f.getValue()))}return this},getValues:function(a){var b=Ext.lib.Ajax.serializeForm(this.el.dom);return a===!0?b:Ext.urlDecode(b)},getFieldValues:function(a){var b={},c,d,e;return this.items.each(function(f){!f.disabled&&(a!==!0||f.isDirty())&&(c=f.getName(),d=b[c],e=f.getValue(),Ext.isDefined(d)?Ext.isArray(d)?b[c].push(e):b[c]=[d,e]:b[c]=e)}),b},clearInvalid:function(){return this.items.each(function(a){a.clearInvalid()}),this},reset:function(){return this.items.each(function(a){a.reset()}),this},add:function(){return this.items.addAll(Array.prototype.slice.call(arguments,0)),this},remove:function(a){return this.items.remove(a),this},cleanDestroyed:function(){this.items.filterBy(function(a){return!!a.isDestroyed}).each(this.remove,this)},render:function(){return this.items.each(function(a){a.isFormField&&!a.rendered&&document.getElementById(a.id)&&a.applyToMarkup(a.id)}),this},applyToFields:function(a){return this.items.each(function(b){Ext.apply(b,a)}),this},applyIfToFields:function(a){return this.items.each(function(b){Ext.applyIf(b,a)}),this},callFieldMethod:function(a,b){return b=b||[],this.items.each(function(c){Ext.isFunction(c[a])&&c[a].apply(c,b)}),this}}),Ext.BasicForm=Ext.form.BasicForm,Ext.FormPanel=Ext.extend(Ext.Panel,{minButtonWidth:75,labelAlign:"left",monitorValid:!1,monitorPoll:200,layout:"form",initComponent:function(){this.form=this.createForm(),Ext.FormPanel.superclass.initComponent.call(this),this.bodyCfg={tag:"form",cls:this.baseCls+"-body",method:this.method||"POST",id:this.formId||Ext.id()},this.fileUpload&&(this.bodyCfg.enctype="multipart/form-data"),this.initItems(),this.addEvents("clientvalidation"),this.relayEvents(this.form,["beforeaction","actionfailed","actioncomplete"])},createForm:function(){var a=Ext.applyIf({listeners:{}},this.initialConfig);return new Ext.form.BasicForm(null,a)},initFields:function(){var a=this.form,b=this,c=function(d){b.isField(d)?a.add(d):d.findBy&&d!=b&&(b.applySettings(d),d.items&&d.items.each&&d.items.each(c,this))};this.items.each(c,this)},applySettings:function(a){var b=a.ownerCt;Ext.applyIf(a,{labelAlign:b.labelAlign,labelWidth:b.labelWidth,itemCls:b.itemCls})},getLayoutTarget:function(){return this.form.el},getForm:function(){return this.form},onRender:function(a,b){this.initFields(),Ext.FormPanel.superclass.onRender.call(this,a,b),this.form.initEl(this.body)},beforeDestroy:function(){this.stopMonitoring(),this.form.destroy(!0),Ext.FormPanel.superclass.beforeDestroy.call(this)},isField:function(a){return!!a.setValue&&!!a.getValue&&!!a.markInvalid&&!!a.clearInvalid},initEvents:function(){Ext.FormPanel.superclass.initEvents.call(this),this.on({scope:this,add:this.onAddEvent,remove:this.onRemoveEvent}),this.monitorValid&&this.startMonitoring()},onAdd:function(a){Ext.FormPanel.superclass.onAdd.call(this,a),this.processAdd(a)},onAddEvent:function(a,b){a!==this&&this.processAdd(b)},processAdd:function(a){this.isField(a)?this.form.add(a):a.findBy&&(this.applySettings(a),this.form.add.apply(this.form,a.findBy(this.isField)))},onRemove:function(a){Ext.FormPanel.superclass.onRemove.call(this,a),this.processRemove(a)},onRemoveEvent:function(a,b){a!==this&&this.processRemove(b)},processRemove:function(a){this.destroying||(this.isField(a)?this.form.remove(a):a.findBy&&(Ext.each(a.findBy(this.isField),this.form.remove,this.form),this.form.cleanDestroyed()))},startMonitoring:function(){this.validTask||(this.validTask=new Ext.util.TaskRunner,this.validTask.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this}))},stopMonitoring:function(){this.validTask&&(this.validTask.stopAll(),this.validTask=null)},load:function(){this.form.load.apply(this.form,arguments)},onDisable:function(){Ext.FormPanel.superclass.onDisable.call(this),this.form&&this.form.items.each(function(){this.disable()})},onEnable:function(){Ext.FormPanel.superclass.onEnable.call(this),this.form&&this.form.items.each(function(){this.enable()})},bindHandler:function(){var a=!0;this.form.items.each(function(b){if(!b.isValid(!0))return a=!1,!1});if(this.fbar){var b=this.fbar.items.items;for(var c=0,d=b.length;c<d;c++){var e=b[c];e.formBind===!0&&e.disabled===a&&e.setDisabled(!a)}}this.fireEvent("clientvalidation",this,a)}}),Ext.reg("form",Ext.FormPanel),Ext.form.FormPanel=Ext.FormPanel,Ext.form.FieldSet=Ext.extend(Ext.Panel,{baseCls:"x-fieldset",layout:"form",animCollapse:!1,onRender:function(a,b){if(!this.el){this.el=document.createElement("fieldset"),this.el.id=this.id;if(this.title||this.header||this.checkboxToggle)this.el.appendChild(document.createElement("legend")).className=this.baseCls+"-header"}Ext.form.FieldSet.superclass.onRender.call(this,a,b);if(this.checkboxToggle){var c=typeof this.checkboxToggle=="object"?this.checkboxToggle:{tag:"input",type:"checkbox",name:this.checkboxName||this.id+"-checkbox"};this.checkbox=this.header.insertFirst(c),this.checkbox.dom.checked=!this.collapsed,this.mon(this.checkbox,"click",this.onCheckClick,this)}},onCollapse:function(a,b){this.checkbox&&(this.checkbox.dom.checked=!1),Ext.form.FieldSet.superclass.onCollapse.call(this,a,b)},onExpand:function(a,b){this.checkbox&&(this.checkbox.dom.checked=!0),Ext.form.FieldSet.superclass.onExpand.call(this,a,b)},onCheckClick:function(){this[this.checkbox.dom.checked?"expand":"collapse"]()}}),Ext.reg("fieldset",Ext.form.FieldSet),Ext.form.HtmlEditor=Ext.extend(Ext.form.Field,{enableFormat:!0,enableFontSize:!0,enableColors:!0,enableAlignments:!0,enableLists:!0,enableSourceEdit:!0,enableLinks:!0,enableFont:!0,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultFont:"tahoma",defaultValue:Ext.isOpera||Ext.isIE6?"&#160;":"&#8203;",actionMode:"wrap",validationEvent:!1,deferHeight:!0,initialized:!1,activated:!1,sourceEditMode:!1,onFocus:Ext.emptyFn,iframePad:3,hideMode:"offsets",defaultAutoCreate:{tag:"textarea",style:"width:500px;height:300px;",autocomplete:"off"},initComponent:function(){this.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange"),Ext.form.HtmlEditor.superclass.initComponent.call(this)},createFontOptions:function(){var a=[],b=this.fontFamilies,c,d;for(var e=0,f=b.length;e<f;e++)c=b[e],d=c.toLowerCase(),a.push('<option value="',d,'" style="font-family:',c,';"',this.defaultFont==d?' selected="true">':">",c,"</option>");return a.join("")},createToolbar:function(a){function d(b,d,e){return{itemId:b,cls:"x-btn-icon",iconCls:"x-edit-"+b,enableToggle:d!==!1,scope:a,handler:e||a.relayBtnCmd,clickEvent:"mousedown",tooltip:c?a.buttonTips[b]||undefined:undefined,overflowText:a.buttonTips[b].title||undefined,tabIndex:-1}}var b=[],c=Ext.QuickTips&&Ext.QuickTips.isEnabled();if(this.enableFont&&!Ext.isSafari2){var e=new Ext.Toolbar.Item({autoEl:{tag:"select",cls:"x-font-select",html:this.createFontOptions()}});b.push(e,"-")}this.enableFormat&&b.push(d("bold"),d("italic"),d("underline")),this.enableFontSize&&b.push("-",d("increasefontsize",!1,this.adjustFont),d("decreasefontsize",!1,this.adjustFont)),this.enableColors&&b.push("-",{itemId:"forecolor",cls:"x-btn-icon",iconCls:"x-edit-forecolor",clickEvent:"mousedown",tooltip:c?a.buttonTips.forecolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({allowReselect:!0,focus:Ext.emptyFn,value:"000000",plain:!0,listeners:{scope:this,select:function(a,b){this.execCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+b:b),this.deferFocus()}},clickEvent:"mousedown"})},{itemId:"backcolor",cls:"x-btn-icon",iconCls:"x-edit-backcolor",clickEvent:"mousedown",tooltip:c?a.buttonTips.backcolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({focus:Ext.emptyFn,value:"FFFFFF",plain:!0,allowReselect:!0,listeners:{scope:this,select:function(a,b){Ext.isGecko?(this.execCmd("useCSS",!1),this.execCmd("hilitecolor",b),this.execCmd("useCSS",!0),this.deferFocus()):(this.execCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE?"#"+
b:b),this.deferFocus())}},clickEvent:"mousedown"})}),this.enableAlignments&&b.push("-",d("justifyleft"),d("justifycenter"),d("justifyright")),Ext.isSafari2||(this.enableLinks&&b.push("-",d("createlink",!1,this.createLink)),this.enableLists&&b.push("-",d("insertorderedlist"),d("insertunorderedlist")),this.enableSourceEdit&&b.push("-",d("sourceedit",!0,function(a){this.toggleSourceEdit(!this.sourceEditMode)})));var f=new Ext.Toolbar({renderTo:this.wrap.dom.firstChild,items:b});e&&(this.fontSelect=e.el,this.mon(this.fontSelect,"change",function(){var a=this.fontSelect.dom.value;this.relayCmd("fontname",a),this.deferFocus()},this)),this.mon(f.el,"click",function(a){a.preventDefault()}),this.tb=f,this.tb.doLayout()},onDisable:function(){this.wrap.mask(),Ext.form.HtmlEditor.superclass.onDisable.call(this)},onEnable:function(){this.wrap.unmask(),Ext.form.HtmlEditor.superclass.onEnable.call(this)},setReadOnly:function(a){Ext.form.HtmlEditor.superclass.setReadOnly.call(this,a);if(this.initialized){Ext.isIE?this.getEditorBody().contentEditable=!a:this.setDesignMode(!a);var b=this.getEditorBody();b&&(b.style.cursor=this.readOnly?"default":"text"),this.disableItems(a)}},getDocMarkup:function(){var a=Ext.fly(this.iframe).getHeight()-this.iframePad*2;return String.format('<html><head><style type="text/css">body{border: 0; margin: 0; padding: {0}px; height: {1}px; cursor: text}</style></head><body></body></html>',this.iframePad,a)},getEditorBody:function(){var a=this.getDoc();return a.body||a.documentElement},getDoc:function(){return Ext.isIE?this.getWin().document:this.iframe.contentDocument||this.getWin().document},getWin:function(){return Ext.isIE?this.iframe.contentWindow:window.frames[this.iframe.name]},onRender:function(a,b){Ext.form.HtmlEditor.superclass.onRender.call(this,a,b),this.el.dom.style.border="0 none",this.el.dom.setAttribute("tabIndex",-1),this.el.addClass("x-hidden"),Ext.isIE&&this.el.applyStyles("margin-top:-1px;margin-bottom:-1px;"),this.wrap=this.el.wrap({cls:"x-html-editor-wrap",cn:{cls:"x-html-editor-tb"}}),this.createToolbar(this),this.disableItems(!0),this.tb.doLayout(),this.createIFrame();if(!this.width){var c=this.el.getSize();this.setSize(c.width,this.height||c.height)}this.resizeEl=this.positionEl=this.wrap},createIFrame:function(){var a=document.createElement("iframe");a.name=Ext.id(),a.frameBorder="0",a.style.overflow="auto",a.src=Ext.SSL_SECURE_URL,this.wrap.dom.appendChild(a),this.iframe=a,this.monitorTask=Ext.TaskMgr.start({run:this.checkDesignMode,scope:this,interval:100})},initFrame:function(){Ext.TaskMgr.stop(this.monitorTask);var a=this.getDoc();this.win=this.getWin(),a.open(),a.write(this.getDocMarkup()),a.close();var b={run:function(){var a=this.getDoc();if(a.body||a.readyState=="complete")Ext.TaskMgr.stop(b),this.setDesignMode(!0),this.initEditor.defer(10,this)},interval:10,duration:1e4,scope:this};Ext.TaskMgr.start(b)},checkDesignMode:function(){if(this.wrap&&this.wrap.dom.offsetWidth){var a=this.getDoc();if(!a)return;(!a.editorInitialized||this.getDesignMode()!="on")&&this.initFrame()}},setDesignMode:function(a){var b=this.getDoc();b&&(this.readOnly&&(a=!1),b.designMode=/on|true/i.test(String(a).toLowerCase())?"on":"off")},getDesignMode:function(){var a=this.getDoc();return a?String(a.designMode).toLowerCase():""},disableItems:function(a){this.fontSelect&&(this.fontSelect.dom.disabled=a),this.tb.items.each(function(b){b.getItemId()!="sourceedit"&&b.setDisabled(a)})},onResize:function(a,b){Ext.form.HtmlEditor.superclass.onResize.apply(this,arguments);if(this.el&&this.iframe){if(Ext.isNumber(a)){var c=a-this.wrap.getFrameWidth("lr");this.el.setWidth(c),this.tb.setWidth(c),this.iframe.style.width=Math.max(c,0)+"px"}if(Ext.isNumber(b)){var d=b-this.wrap.getFrameWidth("tb")-this.tb.el.getHeight();this.el.setHeight(d),this.iframe.style.height=Math.max(d,0)+"px";var e=this.getEditorBody();e&&(e.style.height=Math.max(d-this.iframePad*2,0)+"px")}}},toggleSourceEdit:function(a){var b,c;a===undefined&&(a=!this.sourceEditMode),this.sourceEditMode=a===!0;var d=this.tb.getComponent("sourceedit");if(d.pressed!==this.sourceEditMode){d.toggle(this.sourceEditMode);if(!d.xtbHidden)return}this.sourceEditMode?(this.previousSize=this.getSize(),b=Ext.get(this.iframe).getHeight(),this.disableItems(!0),this.syncValue(),this.iframe.className="x-hidden",this.el.removeClass("x-hidden"),this.el.dom.removeAttribute("tabIndex"),this.el.focus(),this.el.dom.style.height=b+"px"):(c=parseInt(this.el.dom.style.height,10),this.initialized&&this.disableItems(this.readOnly),this.pushValue(),this.iframe.className="",this.el.addClass("x-hidden"),this.el.dom.setAttribute("tabIndex",-1),this.deferFocus(),this.setSize(this.previousSize),delete this.previousSize,this.iframe.style.height=c+"px"),this.fireEvent("editmodechange",this,this.sourceEditMode)},createLink:function(){var a=prompt(this.createLinkText,this.defaultLinkValue);a&&a!="http://"&&this.relayCmd("createlink",a)},initEvents:function(){this.originalValue=this.getValue()},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,setValue:function(a){return Ext.form.HtmlEditor.superclass.setValue.call(this,a),this.pushValue(),this},cleanHtml:function(a){return a=String(a),Ext.isWebKit&&(a=a.replace(/\sclass="(?:Apple-style-span|khtml-block-placeholder)"/gi,"")),a.charCodeAt(0)==this.defaultValue.replace(/\D/g,"")&&(a=a.substring(1)),a},syncValue:function(){if(this.initialized){var a=this.getEditorBody(),b=a.innerHTML;if(Ext.isWebKit){var c=a.getAttribute("style"),d=c.match(/text-align:(.*?);/i);d&&d[1]&&(b='<div style="'+d[0]+'">'+b+"</div>")}b=this.cleanHtml(b),this.fireEvent("beforesync",this,b)!==!1&&(this.el.dom.value=b,this.fireEvent("sync",this,b))}},getValue:function(){return this[this.sourceEditMode?"pushValue":"syncValue"](),Ext.form.HtmlEditor.superclass.getValue.call(this)},pushValue:function(){if(this.initialized){var a=this.el.dom.value;!this.activated&&a.length<1&&(a=this.defaultValue),this.fireEvent("beforepush",this,a)!==!1&&(this.getEditorBody().innerHTML=a,Ext.isGecko&&(this.setDesignMode(!1),this.setDesignMode(!0)),this.fireEvent("push",this,a))}},deferFocus:function(){this.focus.defer(10,this)},focus:function(){this.win&&!this.sourceEditMode?this.win.focus():this.el.focus()},initEditor:function(){try{var a=this.getEditorBody(),b=this.el.getStyles("font-size","font-family","background-image","background-repeat","background-color","color"),c,d;b["background-attachment"]="fixed",a.bgProperties="fixed",Ext.DomHelper.applyStyles(a,b),c=this.getDoc();if(c)try{Ext.EventManager.removeAll(c)}catch(e){}d=this.onEditorEvent.createDelegate(this),Ext.EventManager.on(c,{mousedown:d,dblclick:d,click:d,keyup:d,buffer:100}),Ext.isGecko&&Ext.EventManager.on(c,"keypress",this.applyCommand,this),(Ext.isIE||Ext.isWebKit||Ext.isOpera)&&Ext.EventManager.on(c,"keydown",this.fixKeys,this),c.editorInitialized=!0,this.initialized=!0,this.pushValue(),this.setReadOnly(this.readOnly),this.fireEvent("initialize",this)}catch(e){}},beforeDestroy:function(){this.monitorTask&&Ext.TaskMgr.stop(this.monitorTask);if(this.rendered){Ext.destroy(this.tb);var a=this.getDoc();if(a)try{Ext.EventManager.removeAll(a);for(var b in a)delete a[b]}catch(c){}this.wrap&&(this.wrap.dom.innerHTML="",this.wrap.remove())}Ext.form.HtmlEditor.superclass.beforeDestroy.call(this)},onFirstFocus:function(){this.activated=!0,this.disableItems(this.readOnly);if(Ext.isGecko){this.win.focus();var a=this.win.getSelection();if(!a.focusNode||a.focusNode.nodeType!=3){var b=a.getRangeAt(0);b.selectNodeContents(this.getEditorBody()),b.collapse(!0),this.deferFocus()}try{this.execCmd("useCSS",!0),this.execCmd("styleWithCSS",!1)}catch(c){}}this.fireEvent("activate",this)},adjustFont:function(a){var b=a.getItemId()=="increasefontsize"?1:-1,c=this.getDoc(),d=parseInt(c.queryCommandValue("FontSize")||2,10);Ext.isSafari&&!Ext.isSafari2||Ext.isChrome||Ext.isAir?(d<=10?d=1+b:d<=13?d=2+b:d<=16?d=3+b:d<=18?d=4+b:d<=24?d=5+b:d=6+b,d=d.constrain(1,6)):(Ext.isSafari&&(b*=2),d=Math.max(1,d+b)+(Ext.isSafari?"px":0)),this.execCmd("FontSize",d)},onEditorEvent:function(a){this.updateToolbar()},updateToolbar:function(){if(this.readOnly)return;if(!this.activated){this.onFirstFocus();return}var a=this.tb.items.map,b=this.getDoc();if(this.enableFont&&!Ext.isSafari2){var c=(b.queryCommandValue("FontName")||this.defaultFont).toLowerCase();c!=this.fontSelect.dom.value&&(this.fontSelect.dom.value=c)}this.enableFormat&&(a.bold.toggle(b.queryCommandState("bold")),a.italic.toggle(b.queryCommandState("italic")),a.underline.toggle(b.queryCommandState("underline"))),this.enableAlignments&&(a.justifyleft.toggle(b.queryCommandState("justifyleft")),a.justifycenter.toggle(b.queryCommandState("justifycenter")),a.justifyright.toggle(b.queryCommandState("justifyright"))),!Ext.isSafari2&&this.enableLists&&(a.insertorderedlist.toggle(b.queryCommandState("insertorderedlist")),a.insertunorderedlist.toggle(b.queryCommandState("insertunorderedlist"))),Ext.menu.MenuMgr.hideAll(),this.syncValue()},relayBtnCmd:function(a){this.relayCmd(a.getItemId())},relayCmd:function(a,b){((function(){this.focus(),this.execCmd(a,b),this.updateToolbar()})).defer(10,this)},execCmd:function(a,b){var c=this.getDoc();c.execCommand(a,!1,b===undefined?null:b),this.syncValue()},applyCommand:function(a){if(a.ctrlKey){var b=a.getCharCode(),c;if(b>0){b=String.fromCharCode(b);switch(b){case"b":c="bold";break;case"i":c="italic";break;case"u":c="underline"}c&&(this.win.focus(),this.execCmd(c),this.deferFocus(),a.preventDefault())}}},insertAtCursor:function(a){if(!this.activated)return;if(Ext.isIE){this.win.focus();var b=this.getDoc(),c=b.selection.createRange();c&&(c.pasteHTML(a),this.syncValue(),this.deferFocus())}else this.win.focus(),this.execCmd("InsertHTML",a),this.deferFocus()},fixKeys:function(){if(Ext.isIE)return function(a){var b=a.getKey(),c=this.getDoc(),d;if(b==a.TAB)a.stopEvent(),d=c.selection.createRange(),d&&(d.collapse(!0),d.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;"),this.deferFocus());else if(b==a.ENTER){d=c.selection.createRange();if(d){var e=d.parentElement();if(!e||e.tagName.toLowerCase()!="li")a.stopEvent(),d.pasteHTML("<br />"),d.collapse(!1),d.select()}}};if(Ext.isOpera)return function(a){var b=a.getKey();b==a.TAB&&(a.stopEvent(),this.win.focus(),this.execCmd("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;"),this.deferFocus())};if(Ext.isWebKit)return function(a){var b=a.getKey();b==a.TAB?(a.stopEvent(),this.execCmd("InsertText","\t"),this.deferFocus()):b==a.ENTER&&(a.stopEvent(),this.execCmd("InsertHtml","<br /><br />"),this.deferFocus())}}(),getToolbar:function(){return this.tb},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}}}),Ext.reg("htmleditor",Ext.form.HtmlEditor),Ext.form.TimeField=Ext.extend(Ext.form.ComboBox,{minValue:undefined,maxValue:undefined,minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",increment:15,mode:"local",triggerAction:"all",typeAhead:!1,initDate:"1/1/2008",initDateFormat:"j/n/Y",initComponent:function(){Ext.isDefined(this.minValue)&&this.setMinValue(this.minValue,!0),Ext.isDefined(this.maxValue)&&this.setMaxValue(this.maxValue,!0),this.store||this.generateStore(!0),Ext.form.TimeField.superclass.initComponent.call(this)},setMinValue:function(a,b){return this.setLimit(a,!0,b),this},setMaxValue:function(a,b){return this.setLimit(a,!1,b),this},generateStore:function(a){var b=this.minValue||(new Date(this.initDate)).clearTime(),c=this.maxValue||(new Date(this.initDate)).clearTime().add("mi",1439),d=[];while(b<=c)d.push(b.dateFormat(this.format)),b=b.add("mi",this.increment);this.bindStore(d,a)},setLimit:function(a,b,c){var d;Ext.isString(a)?d=this.parseDate(a):Ext.isDate(a)&&(d=a);if(d){var e=(new Date(this.initDate)).clearTime();e.setHours(d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()),this[b?"minValue":"maxValue"]=e,c||this.generateStore()}},getValue:function(){var a=Ext.form.TimeField.superclass.getValue.call(this);return this.formatDate(this.parseDate(a))||""},setValue:function(a){return Ext.form.TimeField.superclass.setValue.call(this,this.formatDate(this.parseDate(a)))},validateValue:Ext.form.DateField.prototype.validateValue,formatDate:Ext.form.DateField.prototype.formatDate,parseDate:function(a){if(!a||Ext.isDate(a))return a;var b=this.initDate+" ",c=this.initDateFormat+" ",d=Date.parseDate(b+a,c+this.format),e=this.altFormats;if(!d&&e){this.altFormatsArray||(this.altFormatsArray=e.split("|"));for(var f=0,g=this.altFormatsArray,h=g.length;f<h&&!d;f++)d=Date.parseDate(b+a,c+g[f])}return d}}),Ext.reg("timefield",Ext.form.TimeField),Ext.form.SliderField=Ext.extend(Ext.form.Field,{useTips:!0,tipText:null,actionMode:"wrap",initComponent:function(){var a=Ext.copyTo({id:this.id+"-slider"},this.initialConfig,["vertical","minValue","maxValue","decimalPrecision","keyIncrement","increment","clickToChange","animate"]);if(this.useTips){var b=this.tipText?{getText:this.tipText}:{};a.plugins=[new Ext.slider.Tip(b)]}this.slider=new Ext.Slider(a),Ext.form.SliderField.superclass.initComponent.call(this)},onRender:function(a,b){this.autoCreate={id:this.id,name:this.name,type:"hidden",tag:"input"},Ext.form.SliderField.superclass.onRender.call(this,a,b),this.wrap=this.el.wrap({cls:"x-form-field-wrap"}),this.resizeEl=this.positionEl=this.wrap,this.slider.render(this.wrap)},onResize:function(a,b,c,d){Ext.form.SliderField.superclass.onResize.call(this,a,b,c,d),this.slider.setSize(a,b)},initEvents:function(){Ext.form.SliderField.superclass.initEvents.call(this),this.slider.on("change",this.onChange,this)},onChange:function(a,b){this.setValue(b,undefined,!0)},onEnable:function(){Ext.form.SliderField.superclass.onEnable.call(this),this.slider.enable()},onDisable:function(){Ext.form.SliderField.superclass.onDisable.call(this),this.slider.disable()},beforeDestroy:function(){Ext.destroy(this.slider),Ext.form.SliderField.superclass.beforeDestroy.call(this)},alignErrorIcon:function(){this.errorIcon.alignTo(this.slider.el,"tl-tr",[2,0])},setMinValue:function(a){return this.slider.setMinValue(a),this},setMaxValue:function(a){return this.slider.setMaxValue(a),this},setValue:function(a,b,c){return c||this.slider.setValue(a,b),Ext.form.SliderField.superclass.setValue.call(this,this.slider.getValue())},getValue:function(){return this.slider.getValue()}}),Ext.reg("sliderfield",Ext.form.SliderField),Ext.form.Label=Ext.extend(Ext.BoxComponent,{onRender:function(a,b){this.el||(this.el=document.createElement("label"),this.el.id=this.getId(),this.el.innerHTML=this.text?Ext.util.Format.htmlEncode(this.text):this.html||"",this.forId&&this.el.setAttribute("for",this.forId)),Ext.form.Label.superclass.onRender.call(this,a,b)},setText:function(a,b){var c=b===!1;return this[c?"html":"text"]=a,delete this[c?"text":"html"],this.rendered&&(this.el.dom.innerHTML=b!==!1?Ext.util.Format.htmlEncode(a):a),this}}),Ext.reg("label",Ext.form.Label),Ext.form.Action=function(a,b){this.form=a,this.options=b||{}},Ext.form.Action.CLIENT_INVALID="client",Ext.form.Action.SERVER_INVALID="server",Ext.form.Action.CONNECT_FAILURE="connect",Ext.form.Action.LOAD_FAILURE="load",Ext.form.Action.prototype={type:"default",run:function(a){},success:function(a){},handleResponse:function(a){},failure:function(a){this.response=a,this.failureType=Ext.form.Action.CONNECT_FAILURE,this.form.afterAction(this,!1)},processResponse:function(a){return this.response=a,!a.responseText&&!a.responseXML?!0:(this.result=this.handleResponse(a),this.result)},getUrl:function(a){var b=this.options.url||this.form.url||this.form.el.dom.action;if(a){var c=this.getParams();c&&(b=Ext.urlAppend(b,c))}return b},getMethod:function(){return(this.options.method||this.form.method||this.form.el.dom.method||"POST").toUpperCase()},getParams:function(){var a=this.form.baseParams,b=this.options.params;return b?typeof b=="object"?b=Ext.urlEncode(Ext.applyIf(b,a)):typeof b=="string"&&a&&(b+="&"+Ext.urlEncode(a)):a&&(b=Ext.urlEncode(a)),b},createCallback:function(a){var a=a||{};return{success:this.success,failure:this.failure,scope:this,timeout:a.timeout*1e3||this.form.timeout*1e3,upload:this.form.fileUpload?this.success:undefined}}},Ext.form.Action.Submit=function(a,b){Ext.form.Action.Submit.superclass.constructor.call(this,a,b)},Ext.extend(Ext.form.Action.Submit,Ext.form.Action,{type:"submit",run:function(){var a=this.options,b=this.getMethod(),c=b=="GET";if(a.clientValidation===!1||this.form.isValid()){if(a.submitEmptyText===!1){var d=this.form.items,e=[],f=function(a){a.el.getValue()==a.emptyText&&(e.push(a),a.el.dom.value=""),a.isComposite&&a.rendered&&a.items.each(f)};d.each(f)}Ext.Ajax.request(Ext.apply(this.createCallback(a),{form:this.form.el.dom,url:this.getUrl(c),method:b,headers:a.headers,params:c?null:this.getParams(),isUpload:this.form.fileUpload})),a.submitEmptyText===!1&&Ext.each(e,function(a){a.applyEmptyText&&a.applyEmptyText()})}else a.clientValidation!==!1&&(this.failureType=Ext.form.Action.CLIENT_INVALID,this.form.afterAction(this,!1))},success:function(a){var b=this.processResponse(a);if(b===!0||b.success){this.form.afterAction(this,!0);return}b.errors&&this.form.markInvalid(b.errors),this.failureType=Ext.form.Action.SERVER_INVALID,this.form.afterAction(this,!1)},handleResponse:function(a){if(this.form.errorReader){var b=this.form.errorReader.read(a),c=[];if(b.records)for(var d=0,e=b.records.length;d<e;d++){var f=b.records[d];c[d]=f.data}return c.length<1&&(c=null),{success:b.success,errors:c}}return Ext.decode(a.responseText)}}),Ext.form.Action.Load=function(a,b){Ext.form.Action.Load.superclass.constructor.call(this,a,b),this.reader=this.form.reader},Ext.extend(Ext.form.Action.Load,Ext.form.Action,{type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(this.options),{method:this.getMethod(),url:this.getUrl(!1),headers:this.options.headers,params:this.getParams()}))},success:function(a){var b=this.processResponse(a);if(b===!0||!b.success||!b.data){this.failureType=Ext.form.Action.LOAD_FAILURE,this.form.afterAction(this,!1);return}this.form.clearInvalid(),this.form.setValues(b.data),this.form.afterAction(this,!0)},handleResponse:function(a){if(this.form.reader){var b=this.form.reader.read(a),c=b.records&&b.records[0]?b.records[0].data:null;return{success:b.success,data:c}}return Ext.decode(a.responseText)}}),Ext.form.Action.DirectLoad=Ext.extend(Ext.form.Action.Load,{constructor:function(a,b){Ext.form.Action.DirectLoad.superclass.constructor.call(this,a,b)},type:"directload",run:function(){var a=this.getParams();a.push(this.success,this),this.form.api.load.apply(window,a)},getParams:function(){var a=[],b={},c=this.form.baseParams,d=this.options.params;Ext.apply(b,d,c);var e=this.form.paramOrder;if(e)for(var f=0,g=e.length;f<g;f++)a.push(b[e[f]]);else this.form.paramsAsHash&&a.push(b);return a},processResponse:function(a){return this.result=a,a},success:function(a,b){b.type==Ext.Direct.exceptions.SERVER&&(a={}),Ext.form.Action.DirectLoad.superclass.success.call(this,a)}}),Ext.form.Action.DirectSubmit=Ext.extend(Ext.form.Action.Submit,{constructor:function(a,b){Ext.form.Action.DirectSubmit.superclass.constructor.call(this,a,b)},type:"directsubmit",run:function(){var a=this.options;a.clientValidation===!1||this.form.isValid()?(this.success.params=this.getParams(),this.form.api.submit(this.form.el.dom,this.success,this)):a.clientValidation!==!1&&(this.failureType=Ext.form.Action.CLIENT_INVALID,this.form.afterAction(this,!1))},getParams:function(){var a={},b=this.form.baseParams,c=this.options.params;return Ext.apply(a,c,b),a},processResponse:function(a){return this.result=a,a},success:function(a,b){b.type==Ext.Direct.exceptions.SERVER&&(a={}),Ext.form.Action.DirectSubmit.superclass.success.call(this,a)}}),Ext.form.Action.ACTION_TYPES={load:Ext.form.Action.Load,submit:Ext.form.Action.Submit,directload:Ext.form.Action.DirectLoad,directsubmit:Ext.form.Action.DirectSubmit},Ext.form.VTypes=function(){var a=/^[a-zA-Z_]+$/,b=/^[a-zA-Z0-9_]+$/,c=/^(\w+)([\-+.][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,d=/(((^https?)|(^ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;return{email:function(a){return c.test(a)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[a-z0-9_\.\-@\+]/i,url:function(a){return d.test(a)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(b){return a.test(b)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(a){return b.test(a)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}(),Ext.grid.GridPanel=Ext.extend(Ext.Panel,{autoExpandColumn:!1,autoExpandMax:1e3,autoExpandMin:50,columnLines:!1,ddText:"{0} selected row{1}",deferRowRender:!0,enableColumnHide:!0,enableColumnMove:!0,enableDragDrop:!1,enableHdMenu:!0,loadMask:!1,minColumnWidth:25,stripeRows:!1,trackMouseOver:!0,stateEvents:["columnmove","columnresize","sortchange","groupchange"],view:null,bubbleEvents:[],rendered:!1,viewReady:!1,initComponent:function(){Ext.grid.GridPanel.superclass.initComponent.call(this),this.columnLines&&(this.cls=(this.cls||"")+" x-grid-with-col-lines"),this.autoScroll=!1,this.autoWidth=!1,Ext.isArray(this.columns)&&(this.colModel=new Ext.grid.ColumnModel(this.columns),delete this.columns),this.ds&&(this.store=this.ds,delete this.ds),this.cm&&(this.colModel=this.cm,delete this.cm),this.sm&&(this.selModel=this.sm,delete this.sm),this.store=Ext.StoreMgr.lookup(this.store),this.addEvents("click","dblclick","contextmenu","mousedown","mouseup","mouseover","mouseout","keypress","keydown","cellmousedown","rowmousedown","headermousedown","groupmousedown","rowbodymousedown","containermousedown","cellclick","celldblclick","rowclick","rowdblclick","headerclick","headerdblclick","groupclick","groupdblclick","containerclick","containerdblclick","rowbodyclick","rowbodydblclick","rowcontextmenu","cellcontextmenu","headercontextmenu","groupcontextmenu","containercontextmenu","rowbodycontextmenu","bodyscroll","columnresize","columnmove","sortchange","groupchange","reconfigure","viewready")},onRender:function(a,b){Ext.grid.GridPanel.superclass.onRender.apply(this,arguments);var c=this.getGridEl();this.el.addClass("x-grid-panel"),this.mon(c,{scope:this,mousedown:this.onMouseDown,click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu}),this.relayEvents(c,["mousedown","mouseup","mouseover","mouseout","keypress","keydown"]);var d=this.getView();d.init(this),d.render(),this.getSelectionModel().init(this)},initEvents:function(){Ext.grid.GridPanel.superclass.initEvents.call(this),this.loadMask&&(this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({store:this.store},this.loadMask)))},initStateEvents:function(){Ext.grid.GridPanel.superclass.initStateEvents.call(this),this.mon(this.colModel,"hiddenchange",this.saveState,this,{delay:100})},applyState:function(a){var b=this.colModel,c=a.columns,d=this.store,e,f,g;if(c)for(var h=0,i=c.length;h<i;h++)e=c[h],f=b.getColumnById(e.id),f&&(g=b.getIndexById(e.id),b.setState(g,{hidden:e.hidden,width:e.width,sortable:e.sortable}),g!=h&&b.moveColumn(g,h));d&&(e=a.sort,e&&d[d.remoteSort?"setDefaultSort":"sort"](e.field,e.direction),e=a.group,d.groupBy&&(e?d.groupBy(e):d.clearGrouping()));var j=Ext.apply({},a);delete j.columns,delete j.sort,Ext.grid.GridPanel.superclass.applyState.call(this,j)},getState:function(){var a={columns:[]},b=this.store,c,d;for(var e=0,f;f=this.colModel.config[e];e++)a.columns[e]={id:f.id,width:f.width},f.hidden&&(a.columns[e].hidden=!0),f.sortable&&(a.columns[e].sortable=!0);return b&&(c=b.getSortState(),c&&(a.sort=c),b.getGroupState&&(d=b.getGroupState(),d&&(a.group=d))),a},afterRender:function(){Ext.grid.GridPanel.superclass.afterRender.call(this);var a=this.view;this.on("bodyresize",a.layout,a),a.layout(!0),this.deferRowRender?(this.deferRowRenderTask||(this.deferRowRenderTask=new Ext.util.DelayedTask(a.afterRender,this.view)),this.deferRowRenderTask.delay(10)):a.afterRender(),this.viewReady=!0},reconfigure:function(a,b){var c=this.rendered;c&&this.loadMask&&(this.loadMask.destroy(),this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({},{store:a},this.initialConfig.loadMask))),this.view&&this.view.initData(a,b),this.store=a,this.colModel=b,c&&this.view.refresh(!0),this.fireEvent("reconfigure",this,a,b)},onDestroy:function(){this.deferRowRenderTask&&this.deferRowRenderTask.cancel&&this.deferRowRenderTask.cancel(),this.rendered?Ext.destroy(this.view,this.loadMask):this.store&&this.store.autoDestroy&&this.store.destroy(),Ext.destroy(this.colModel,this.selModel),this.store=this.selModel=this.colModel=this.view=this.loadMask=null,Ext.grid.GridPanel.superclass.onDestroy.call(this)},processEvent:function(a,b){this.view.processEvent(a,b)},onClick:function(a){this.processEvent("click",a)},onMouseDown:function(a){this.processEvent("mousedown",a)},onContextMenu:function(a,b){this.processEvent("contextmenu",a)},onDblClick:function(a){this.processEvent("dblclick",a)},walkCells:function(a,b,c,d,e){var f=this.colModel,g=f.getColumnCount(),h=this.store,i=h.getCount(),j=!0;if(c<0){b<0&&(a--,j=!1);while(a>=0){j||(b=g-1),j=!1;while(b>=0){if(d.call(e||this,a,b,f)===!0)return[a,b];b--}a--}}else{b>=g&&(a++,j=!1);while(a<i){j||(b=0),j=!1;while(b<g){if(d.call(e||this,a,b,f)===!0)return[a,b];b++}a++}}return null},getGridEl:function(){return this.body},stopEditing:Ext.emptyFn,getSelectionModel:function(){return this.selModel||(this.selModel=new Ext.grid.RowSelectionModel(this.disableSelection?{selectRow:Ext.emptyFn}:null)),this.selModel},getStore:function(){return this.store},getColumnModel:function(){return this.colModel},getView:function(){return this.view||(this.view=new Ext.grid.GridView(this.viewConfig)),this.view},getDragDropText:function(){var a=this.selModel.getCount();return String.format(this.ddText,a,a==1?"":"s")}}),Ext.reg("grid",Ext.grid.GridPanel),Ext.grid.PivotGrid=Ext.extend(Ext.grid.GridPanel,{aggregator:"sum",renderer:undefined,initComponent:function(){Ext.grid.PivotGrid.superclass.initComponent.apply(this,arguments),this.initAxes(),this.enableColumnResize=!1,this.viewConfig=Ext.apply(this.viewConfig||{},{forceFit:!0}),this.colModel=new Ext.grid.ColumnModel({})},getAggregator:function(){return typeof this.aggregator=="string"?Ext.grid.PivotAggregatorMgr.types[this.aggregator]:this.aggregator},setAggregator:function(a){this.aggregator=a},setMeasure:function(a){this.measure=a},setLeftAxis:function(a,b){this.leftAxis=a,b&&this.view.refresh()},setTopAxis:function(a,b){this.topAxis=a,b&&this.view.refresh()},initAxes:function(){var a=Ext.grid.PivotAxis;this.leftAxis instanceof a||this.setLeftAxis(new a({orientation:"vertical",dimensions:this.leftAxis||[],store:this.store})),this.topAxis instanceof a||this.setTopAxis(new a({orientation:"horizontal",dimensions:this.topAxis||[],store:this.store}))},extractData:function(){var a=this.store.data.items,b=a.length,c=[],d,e,f,g;if(b==0)return[];var h=this.leftAxis.getTuples(),i=h.length,j=this.topAxis.getTuples(),k=j.length,l=this.getAggregator();for(e=0;e<b;e++){d=a[e];for(f=0;f<i;f++){c[f]=c[f]||[];if(h[f].matcher(d)===!0)for(g=0;g<k;g++)c[f][g]=c[f][g]||[],j[g].matcher(d)&&c[f][g].push(d)}}var m=c.length,n,o;for(e=0;e<m;e++){o=c[e],n=o.length;for(f=0;f<n;f++)c[e][f]=l(c[e][f],this.measure)}return c},getView:function(){return this.view||(this.view=new Ext.grid.PivotGridView(this.viewConfig)),this.view}}),Ext.reg("pivotgrid",Ext.grid.PivotGrid),Ext.grid.PivotAggregatorMgr=new Ext.AbstractManager,Ext.grid.PivotAggregatorMgr.registerType("sum",function(a,b){var c=a.length,d=0,e;for(e=0;e<c;e++)d+=a[e].get(b);return d}),Ext.grid.PivotAggregatorMgr.registerType("avg",function(a,b){var c=a.length,d=0,e;for(e=0;e<c;e++)d+=a[e].get(b);return d/c||"n/a"}),Ext.grid.PivotAggregatorMgr.registerType("min",function(a,b){var c=[],d=a.length,e;for(e=0;e<d;e++)c.push(a[e].get(b));return Math.min.apply(this,c)||"n/a"}),Ext.grid.PivotAggregatorMgr.registerType("max",function(a,b){var c=[],d=a.length,e;for(e=0;e<d;e++)c.push(a[e].get(b));return Math.max.apply(this,c)||"n/a"}),Ext.grid.PivotAggregatorMgr.registerType("count",function(a,b){return a.length}),Ext.grid.GridView=Ext.extend(Ext.util.Observable,{deferEmptyText:!0,scrollOffset:undefined,autoFill:!1,forceFit:!1,sortClasses:["sort-asc","sort-desc"],sortAscText:"Sort Ascending",sortDescText:"Sort Descending",columnsText:"Columns",selectedRowClass:"x-grid3-row-selected",borderWidth:2,tdClass:"x-grid3-cell",hdCls:"x-grid3-hd",markDirty:!0,cellSelectorDepth:4,rowSelectorDepth:10,rowBodySelectorDepth:10,cellSelector:"td.x-grid3-cell",rowSelector:"div.x-grid3-row",rowBodySelector:"div.x-grid3-row-body",firstRowCls:"x-grid3-row-first",lastRowCls:"x-grid3-row-last",rowClsRe:/(?:^|\s+)x-grid3-row-(first|last|alt)(?:\s+|$)/g,headerMenuOpenCls:"x-grid3-hd-menu-open",rowOverCls:"x-grid3-row-over",constructor:function(a){Ext.apply(this,a),this.addEvents("beforerowremoved","beforerowsinserted","beforerefresh","rowremoved","rowsinserted","rowupdated","refresh"),Ext.grid.GridView.superclass.constructor.call(this)},masterTpl:new Ext.Template('<div class="x-grid3" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header">','<div class="x-grid3-header-inner">','<div class="x-grid3-header-offset" style="{ostyle}">{header}</div>',"</div>",'<div class="x-clear"></div>',"</div>",'<div class="x-grid3-scroller">','<div class="x-grid3-body" style="{bstyle}">{body}</div>','<a href="#" class="x-grid3-focus" tabIndex="-1"></a>',"</div>","</div>",'<div class="x-grid3-resize-marker">&#160;</div>','<div class="x-grid3-resize-proxy">&#160;</div>',"</div>"),headerTpl:new Ext.Template('<table border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<thead>",'<tr class="x-grid3-hd-row">{cells}</tr>',"</thead>","</table>"),bodyTpl:new Ext.Template("{rows}"),cellTpl:new Ext.Template('<td class="x-grid3-col x-grid3-cell x-grid3-td-{id} {css}" style="{style}" tabIndex="0" {cellAttr}>','<div class="x-grid3-cell-inner x-grid3-col-{id}" unselectable="on" {attr}>{value}</div>',"</td>"),initTemplates:function(){var a=this.templates||{},b,c,d=new Ext.Template('<td class="x-grid3-hd x-grid3-cell x-grid3-td-{id} {css}" style="{style}">','<div {tooltip} {attr} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"></a>':"","{value}",'<img alt="" class="x-grid3-sort-icon" src="',Ext.BLANK_IMAGE_URL,'" />',"</div>","</td>"),e=['<tr class="x-grid3-row-body-tr" style="{bodyStyle}">','<td colspan="{cols}" class="x-grid3-body-cell" tabIndex="0" hidefocus="on">','<div class="x-grid3-row-body">{body}</div>',"</td>","</tr>"].join(""),f=['<table class="x-grid3-row-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<tbody>","<tr>{cells}</tr>",this.enableRowBody?e:"","</tbody>","</table>"].join("");Ext.applyIf(a,{hcell:d,cell:this.cellTpl,body:this.bodyTpl,header:this.headerTpl,master:this.masterTpl,row:new Ext.Template('<div class="x-grid3-row {alt}" style="{tstyle}">'+f+"</div>"),rowInner:new Ext.Template(f)});for(c in a)b=a[c],b&&Ext.isFunction(b.compile)&&!b.compiled&&(b.disableFormats=!0,b.compile());this
.templates=a,this.colRe=new RegExp("x-grid3-td-([^\\s]+)","")},fly:function(a){return this._flyweight||(this._flyweight=new Ext.Element.Flyweight(document.body)),this._flyweight.dom=a,this._flyweight},getEditorParent:function(){return this.scroller.dom},initElements:function(){var a=Ext.Element,b=Ext.get(this.grid.getGridEl().dom.firstChild),c=new a(b.child("div.x-grid3-viewport")),d=new a(c.child("div.x-grid3-header")),e=new a(c.child("div.x-grid3-scroller"));this.grid.hideHeaders&&d.setDisplayed(!1),this.forceFit&&e.setStyle("overflow-x","hidden"),Ext.apply(this,{el:b,mainWrap:c,scroller:e,mainHd:d,innerHd:d.child("div.x-grid3-header-inner").dom,mainBody:new a(a.fly(e).child("div.x-grid3-body")),focusEl:new a(a.fly(e).child("a")),resizeMarker:new a(b.child("div.x-grid3-resize-marker")),resizeProxy:new a(b.child("div.x-grid3-resize-proxy"))}),this.focusEl.swallowEvent("click",!0)},getRows:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},findCell:function(a){return a?this.fly(a).findParent(this.cellSelector,this.cellSelectorDepth):!1},findCellIndex:function(a,b){var c=this.findCell(a),d;if(c){d=this.fly(c).hasClass(b);if(!b||d)return this.getCellIndex(c)}return!1},getCellIndex:function(a){if(a){var b=a.className.match(this.colRe);if(b&&b[1])return this.cm.getIndexById(b[1])}return!1},findHeaderCell:function(a){var b=this.findCell(a);return b&&this.fly(b).hasClass(this.hdCls)?b:null},findHeaderIndex:function(a){return this.findCellIndex(a,this.hdCls)},findRow:function(a){return a?this.fly(a).findParent(this.rowSelector,this.rowSelectorDepth):!1},findRowIndex:function(a){var b=this.findRow(a);return b?b.rowIndex:!1},findRowBody:function(a){return a?this.fly(a).findParent(this.rowBodySelector,this.rowBodySelectorDepth):!1},getRow:function(a){return this.getRows()[a]},getCell:function(a,b){return Ext.fly(this.getRow(a)).query(this.cellSelector)[b]},getHeaderCell:function(a){return this.mainHd.dom.getElementsByTagName("td")[a]},addRowClass:function(a,b){var c=this.getRow(a);c&&this.fly(c).addClass(b)},removeRowClass:function(a,b){var c=this.getRow(a);c&&this.fly(c).removeClass(b)},removeRow:function(a){Ext.removeNode(this.getRow(a)),this.syncFocusEl(a)},removeRows:function(a,b){var c=this.mainBody.dom,d;for(d=a;d<=b;d++)Ext.removeNode(c.childNodes[a]);this.syncFocusEl(a)},getScrollState:function(){var a=this.scroller.dom;return{left:a.scrollLeft,top:a.scrollTop}},restoreScroll:function(a){var b=this.scroller.dom;b.scrollLeft=a.left,b.scrollTop=a.top},scrollToTop:function(){var a=this.scroller.dom;a.scrollTop=0,a.scrollLeft=0},syncScroll:function(){this.syncHeaderScroll();var a=this.scroller.dom;this.grid.fireEvent("bodyscroll",a.scrollLeft,a.scrollTop)},syncHeaderScroll:function(){var a=this.innerHd,b=this.scroller.dom.scrollLeft;a.scrollLeft=b,a.scrollLeft=b},updateSortIcon:function(a,b){var c=this.sortClasses,d=c[b=="DESC"?1:0],e=this.mainHd.select("td").removeClass(c);e.item(a).addClass(d)},updateAllColumnWidths:function(){var a=this.getTotalWidth(),b=this.cm.getColumnCount(),c=this.getRows(),d=c.length,e=[],f,g,h,i,j;for(i=0;i<b;i++)e[i]=this.getColumnWidth(i),this.getHeaderCell(i).style.width=e[i];this.updateHeaderWidth();for(i=0;i<d;i++){f=c[i],f.style.width=a,g=f.firstChild;if(g){g.style.width=a,h=g.rows[0];for(j=0;j<b;j++)h.childNodes[j].style.width=e[j]}}this.onAllColumnWidthsUpdated(e,a)},updateColumnWidth:function(a,b){var c=this.getColumnWidth(a),d=this.getTotalWidth(),e=this.getHeaderCell(a),f=this.getRows(),g=f.length,h,i,j;this.updateHeaderWidth(),e.style.width=c;for(i=0;i<g;i++)h=f[i],j=h.firstChild,h.style.width=d,j&&(j.style.width=d,j.rows[0].childNodes[a].style.width=c);this.onColumnWidthUpdated(a,c,d)},updateColumnHidden:function(a,b){var c=this.getTotalWidth(),d=b?"none":"",e=this.getHeaderCell(a),f=this.getRows(),g=f.length,h,i,j;this.updateHeaderWidth(),e.style.display=d;for(j=0;j<g;j++)h=f[j],h.style.width=c,i=h.firstChild,i&&(i.style.width=c,i.rows[0].childNodes[a].style.display=d);this.onColumnHiddenUpdated(a,b,c),delete this.lastViewWidth,this.layout()},doRender:function(a,b,c,d,e,f){var g=this.templates,h=g.cell,i=g.row,j=e-1,k="width:"+this.getTotalWidth()+";",l=[],m=[],n={tstyle:k},o={},p=b.length,q,r,s,t,u,v;for(u=0;u<p;u++){s=b[u],m=[],v=u+d;for(t=0;t<e;t++)r=a[t],o.id=r.id,o.css=t===0?"x-grid3-cell-first ":t==j?"x-grid3-cell-last ":"",o.attr=o.cellAttr="",o.style=r.style,o.value=r.renderer.call(r.scope,s.data[r.name],o,s,v,t,c),Ext.isEmpty(o.value)&&(o.value="&#160;"),this.markDirty&&s.dirty&&typeof s.modified[r.name]!="undefined"&&(o.css+=" x-grid3-dirty-cell"),m[m.length]=h.apply(o);q=[],f&&(v+1)%2===0&&(q[0]="x-grid3-row-alt"),s.dirty&&(q[1]=" x-grid3-dirty-row"),n.cols=e,this.getRowClass&&(q[2]=this.getRowClass(s,v,n,c)),n.alt=q.join(" "),n.cells=m.join(""),l[l.length]=i.apply(n)}return l.join("")},processRows:function(a,b){if(!this.ds||this.ds.getCount()<1)return;var c=this.getRows(),d=c.length,e,f;b=b||!this.grid.stripeRows,a=a||0;for(f=0;f<d;f++)e=c[f],e&&(e.rowIndex=f,b||(e.className=e.className.replace(this.rowClsRe," "),(f+1)%2===0&&(e.className+=" x-grid3-row-alt")));a===0&&Ext.fly(c[0]).addClass(this.firstRowCls),Ext.fly(c[d-1]).addClass(this.lastRowCls)},afterRender:function(){if(!this.ds||!this.cm)return;this.mainBody.dom.innerHTML=this.renderBody()||"&#160;",this.processRows(0,!0),this.deferEmptyText!==!0&&this.applyEmptyText(),this.grid.fireEvent("viewready",this.grid)},afterRenderUI:function(){var a=this.grid;this.initElements(),Ext.fly(this.innerHd).on("click",this.handleHdDown,this),this.mainHd.on({scope:this,mouseover:this.handleHdOver,mouseout:this.handleHdOut,mousemove:this.handleHdMove}),this.scroller.on("scroll",this.syncScroll,this),a.enableColumnResize!==!1&&(this.splitZone=new Ext.grid.GridView.SplitDragZone(a,this.mainHd.dom)),a.enableColumnMove&&(this.columnDrag=new Ext.grid.GridView.ColumnDragZone(a,this.innerHd),this.columnDrop=new Ext.grid.HeaderDropZone(a,this.mainHd.dom)),a.enableHdMenu!==!1&&(this.hmenu=new Ext.menu.Menu({id:a.id+"-hctx"}),this.hmenu.add({itemId:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{itemId:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"}),a.enableColumnHide!==!1&&(this.colMenu=new Ext.menu.Menu({id:a.id+"-hcols-menu"}),this.colMenu.on({scope:this,beforeshow:this.beforeColMenuShow,itemclick:this.handleHdMenuClick}),this.hmenu.add("-",{itemId:"columns",hideOnClick:!1,text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"})),this.hmenu.on("itemclick",this.handleHdMenuClick,this)),a.trackMouseOver&&this.mainBody.on({scope:this,mouseover:this.onRowOver,mouseout:this.onRowOut});if(a.enableDragDrop||a.enableDrag)this.dragZone=new Ext.grid.GridDragZone(a,{ddGroup:a.ddGroup||"GridDD"});this.updateHeaderSortState()},renderUI:function(){var a=this.templates;return a.master.apply({body:a.body.apply({rows:"&#160;"}),header:this.renderHeaders(),ostyle:"width:"+this.getOffsetWidth()+";",bstyle:"width:"+this.getTotalWidth()+";"})},processEvent:function(a,b){var c=b.getTarget(),d=this.grid,e=this.findHeaderIndex(c),f,g,h,i;d.fireEvent(a,b),e!==!1?d.fireEvent("header"+a,d,e,b):(f=this.findRowIndex(c),f!==!1?(g=this.findCellIndex(c),g!==!1?(h=d.colModel.getColumnAt(g),d.fireEvent("cell"+a,d,f,g,b)!==!1&&(!h||h.processEvent&&h.processEvent(a,b,d,f,g)!==!1)&&d.fireEvent("row"+a,d,f,b)):d.fireEvent("row"+a,d,f,b)!==!1&&(i=this.findRowBody(c))&&d.fireEvent("rowbody"+a,d,f,b)):d.fireEvent("container"+a,d,b))},layout:function(a){if(!this.mainBody)return;var b=this.grid,c=b.getGridEl(),d=c.getSize(!0),e=d.width,f=d.height,g=this.scroller,h,i,j;if(e<20||f<20)return;b.autoHeight?(h=g.dom.style,h.overflow="visible",Ext.isWebKit&&(h.position="static")):(this.el.setSize(e,f),i=this.mainHd.getHeight(),j=f-i,g.setSize(e,j),this.innerHd&&(this.innerHd.style.width=e+"px")),this.forceFit||a===!0&&this.autoFill?this.lastViewWidth!=e&&(this.fitColumns(!1,!1),this.lastViewWidth=e):(this.autoExpand(),this.syncHeaderScroll()),this.onLayout(e,j)},onLayout:function(a,b){},onColumnWidthUpdated:function(a,b,c){},onAllColumnWidthsUpdated:function(a,b){},onColumnHiddenUpdated:function(a,b,c){},updateColumnText:function(a,b){},afterMove:function(a){},init:function(a){this.grid=a,this.initTemplates(),this.initData(a.store,a.colModel),this.initUI(a)},getColumnId:function(a){return this.cm.getColumnId(a)},getOffsetWidth:function(){return this.cm.getTotalWidth()+this.getScrollOffset()+"px"},getScrollOffset:function(){return Ext.num(this.scrollOffset,Ext.getScrollBarWidth())},renderHeaders:function(){var a=this.cm,b=this.templates,c=b.hcell,d={},e=a.getColumnCount(),f=e-1,g=[],h,i;for(h=0;h<e;h++)h==0?i="x-grid3-cell-first ":i=h==f?"x-grid3-cell-last ":"",d={id:a.getColumnId(h),value:a.getColumnHeader(h)||"",style:this.getColumnStyle(h,!0),css:i,tooltip:this.getColumnTooltip(h)},a.config[h].align=="right"?d.istyle="padding-right: 16px;":delete d.istyle,g[h]=c.apply(d);return b.header.apply({cells:g.join(""),tstyle:String.format("width: {0};",this.getTotalWidth())})},getColumnTooltip:function(a){var b=this.cm.getColumnTooltip(a);return b?Ext.QuickTips.isEnabled()?'ext:qtip="'+b+'"':'title="'+b+'"':""},beforeUpdate:function(){this.grid.stopEditing(!0)},updateHeaders:function(){this.innerHd.firstChild.innerHTML=this.renderHeaders(),this.updateHeaderWidth(!1)},updateHeaderWidth:function(a){var b=this.innerHd.firstChild,c=this.getTotalWidth();b.style.width=this.getOffsetWidth(),b.firstChild.style.width=c,a!==!1&&(this.mainBody.dom.style.width=c)},focusRow:function(a){this.focusCell(a,0,!1)},focusCell:function(a,b,c){this.syncFocusEl(this.ensureVisible(a,b,c));var d=this.focusEl;Ext.isGecko?d.focus():d.focus.defer(1,d)},resolveCell:function(a,b,c){Ext.isNumber(a)||(a=a.rowIndex);if(!this.ds)return null;if(a<0||a>=this.ds.getCount())return null;b=b!==undefined?b:0;var d=this.getRow(a),e=this.cm,f=e.getColumnCount(),g;if(c!==!1||b!==0){while(b<f&&e.isHidden(b))b++;g=this.getCell(a,b)}return{row:d,cell:g}},getResolvedXY:function(a){if(!a)return null;var b=a.cell,c=a.row;return b?Ext.fly(b).getXY():[this.el.getX(),Ext.fly(c).getY()]},syncFocusEl:function(a,b,c){var d=a;if(!Ext.isArray(d)){a=Math.min(a,Math.max(0,this.getRows().length-1));if(isNaN(a))return;d=this.getResolvedXY(this.resolveCell(a,b,c))}this.focusEl.setXY(d||this.scroller.getXY())},ensureVisible:function(a,b,c){var d=this.resolveCell(a,b,c);if(!d||!d.row)return null;var e=d.row,f=d.cell,g=this.scroller.dom,h=e,i=0,j=this.el.dom;while(h&&h!=j)i+=h.offsetTop,h=h.offsetParent;i-=this.mainHd.dom.offsetHeight,j=parseInt(g.scrollTop,10);var k=i+e.offsetHeight,l=g.clientHeight,m=j+l;i<j?g.scrollTop=i:k>m&&(g.scrollTop=k-l);if(c!==!1){var n=parseInt(f.offsetLeft,10),o=n+f.offsetWidth,p=parseInt(g.scrollLeft,10),q=p+g.clientWidth;n<p?g.scrollLeft=n:o>q&&(g.scrollLeft=o-g.clientWidth)}return this.getResolvedXY(d)},insertRows:function(a,b,c,d){var e=a.getCount()-1;if(!d&&b===0&&c>=e)this.fireEvent("beforerowsinserted",this,b,c),this.refresh(),this.fireEvent("rowsinserted",this,b,c);else{d||this.fireEvent("beforerowsinserted",this,b,c);var f=this.renderRows(b,c),g=this.getRow(b);if(g)b===0&&Ext.fly(this.getRow(0)).removeClass(this.firstRowCls),Ext.DomHelper.insertHtml("beforeBegin",g,f);else{var h=this.getRow(e-1);h&&Ext.fly(h).removeClass(this.lastRowCls),Ext.DomHelper.insertHtml("beforeEnd",this.mainBody.dom,f)}d?(b===0||b>=e)&&Ext.fly(this.getRow(b)).addClass(b===0?this.firstRowCls:this.lastRowCls):(this.processRows(b),this.fireEvent("rowsinserted",this,b,c))}this.syncFocusEl(b)},deleteRows:function(a,b,c){a.getRowCount()<1?this.refresh():(this.fireEvent("beforerowsdeleted",this,b,c),this.removeRows(b,c),this.processRows(b),this.fireEvent("rowsdeleted",this,b,c))},getColumnStyle:function(a,b){var c=this.cm,d=c.config,e=b?"":d[a].css||"",f=d[a].align;return e+=String.format("width: {0};",this.getColumnWidth(a)),c.isHidden(a)&&(e+="display: none; "),f&&(e+=String.format("text-align: {0};",f)),e},getColumnWidth:function(a){var b=this.cm.getColumnWidth(a),c=this.borderWidth;return Ext.isNumber(b)?Ext.isBorderBox||Ext.isWebKit&&!Ext.isSafari2?b+"px":Math.max(b-c,0)+"px":b},getTotalWidth:function(){return this.cm.getTotalWidth()+"px"},fitColumns:function(a,b,c){var d=this.grid,e=this.cm,f=e.getTotalWidth(!1),g=this.getGridInnerWidth(),h=g-f,i=[],j=0,k=0,l,m,n;if(g<20||h===0)return!1;var o=e.getColumnCount(!0),p=e.getColumnCount(!1),q=o-(Ext.isNumber(c)?1:0);q===0&&(q=1,c=undefined);for(n=0;n<p;n++)!e.isFixed(n)&&n!==c&&(l=e.getColumnWidth(n),i.push(n,l),e.isHidden(n)||(j=n,k+=l));m=(g-e.getTotalWidth())/k;while(i.length)l=i.pop(),n=i.pop(),e.setColumnWidth(n,Math.max(d.minColumnWidth,Math.floor(l+l*m)),!0);f=e.getTotalWidth(!1);if(f>g){var r=q==o?j:c,s=Math.max(1,e.getColumnWidth(r)-(f-g));e.setColumnWidth(r,s,!0)}return a!==!0&&this.updateAllColumnWidths(),!0},autoExpand:function(a){var b=this.grid,c=this.cm,d=this.getGridInnerWidth(),e=c.getTotalWidth(!1),f=b.autoExpandColumn;if(!this.userResized&&f&&d!=e){var g=c.getIndexById(f),h=c.getColumnWidth(g),i=d-e+h,j=Math.min(Math.max(i,b.autoExpandMin),b.autoExpandMax);h!=j&&(c.setColumnWidth(g,j,!0),a!==!0&&this.updateColumnWidth(g,j))}},getGridInnerWidth:function(){return this.grid.getGridEl().getWidth(!0)-this.getScrollOffset()},getColumnData:function(){var a=[],b=this.cm,c=b.getColumnCount(),d=this.ds.fields,e,f;for(e=0;e<c;e++)f=b.getDataIndex(e),a[e]={name:Ext.isDefined(f)?f:d.get(e)?d.get(e).name:undefined,renderer:b.getRenderer(e),scope:b.getRendererScope(e),id:b.getColumnId(e),style:this.getColumnStyle(e)};return a},renderRows:function(a,b){var c=this.grid,d=c.store,e=c.stripeRows,f=c.colModel,g=f.getColumnCount(),h=d.getCount(),i;return h<1?"":(a=a||0,b=Ext.isDefined(b)?b:h-1,i=d.getRange(a,b),this.doRender(this.getColumnData(),i,d,a,g,e))},renderBody:function(){var a=this.renderRows()||"&#160;";return this.templates.body.apply({rows:a})},refreshRow:function(a){var b=this.ds,c=this.cm.getColumnCount(),d=this.getColumnData(),e=c-1,f=["x-grid3-row"],g={tstyle:String.format("width: {0};",this.getTotalWidth())},h=[],i=this.templates.cell,j,k,l,m,n,o;Ext.isNumber(a)?(j=a,a=b.getAt(j)):j=b.indexOf(a);if(!a||j<0)return;for(o=0;o<c;o++)l=d[o],o==0?n="x-grid3-cell-first":n=o==e?"x-grid3-cell-last ":"",m={id:l.id,style:l.style,css:n,attr:"",cellAttr:""},m.value=l.renderer.call(l.scope,a.data[l.name],m,a,j,o,b),Ext.isEmpty(m.value)&&(m.value="&#160;"),this.markDirty&&a.dirty&&typeof a.modified[l.name]!="undefined"&&(m.css+=" x-grid3-dirty-cell"),h[o]=i.apply(m);k=this.getRow(j),k.className="",this.grid.stripeRows&&(j+1)%2===0&&f.push("x-grid3-row-alt"),this.getRowClass&&(g.cols=c,f.push(this.getRowClass(a,j,g,b))),this.fly(k).addClass(f).setStyle(g.tstyle),g.cells=h.join(""),k.innerHTML=this.templates.rowInner.apply(g),this.fireEvent("rowupdated",this,j,a)},refresh:function(a){this.fireEvent("beforerefresh",this),this.grid.stopEditing(!0);var b=this.renderBody();this.mainBody.update(b).setWidth(this.getTotalWidth()),a===!0&&(this.updateHeaders(),this.updateHeaderSortState()),this.processRows(0,!0),this.layout(),this.applyEmptyText(),this.fireEvent("refresh",this)},applyEmptyText:function(){this.emptyText&&!this.hasRows()&&this.mainBody.update('<div class="x-grid-empty">'+this.emptyText+"</div>")},updateHeaderSortState:function(){var a=this.ds.getSortState();if(!a)return;(!this.sortState||this.sortState.field!=a.field||this.sortState.direction!=a.direction)&&this.grid.fireEvent("sortchange",this.grid,a),this.sortState=a;var b=this.cm.findColumnIndex(a.field);if(b!=-1){var c=a.direction;this.updateSortIcon(b,c)}},clearHeaderSortState:function(){if(!this.sortState)return;this.grid.fireEvent("sortchange",this.grid,null),this.mainHd.select("td").removeClass(this.sortClasses),delete this.sortState},destroy:function(){var a=this,b=a.grid,c=b.getGridEl(),d=a.dragZone,e=a.splitZone,f=a.columnDrag,g=a.columnDrop,h=a.scrollToTopTask,i,j;h&&h.cancel&&h.cancel(),Ext.destroyMembers(a,"colMenu","hmenu"),a.initData(null,null),a.purgeListeners(),Ext.fly(a.innerHd).un("click",a.handleHdDown,a),b.enableColumnMove&&(i=f.dragData,j=f.proxy,Ext.destroy(f.el,j.ghost,j.el,g.el,g.proxyTop,g.proxyBottom,i.ddel,i.header),j.anim&&Ext.destroy(j.anim),delete j.ghost,delete i.ddel,delete i.header,f.destroy(),delete Ext.dd.DDM.locationCache[f.id],delete f._domRef,delete g.proxyTop,delete g.proxyBottom,g.destroy(),delete Ext.dd.DDM.locationCache["gridHeader"+c.id],delete g._domRef,delete Ext.dd.DDM.ids[g.ddGroup]),e&&(e.destroy(),delete e._domRef,delete Ext.dd.DDM.ids["gridSplitters"+c.id]),Ext.fly(a.innerHd).removeAllListeners(),Ext.removeNode(a.innerHd),delete a.innerHd,Ext.destroy(a.el,a.mainWrap,a.mainHd,a.scroller,a.mainBody,a.focusEl,a.resizeMarker,a.resizeProxy,a.activeHdBtn,a._flyweight,d,e),delete b.container,d&&d.destroy(),Ext.dd.DDM.currentTarget=null,delete Ext.dd.DDM.locationCache[c.id],Ext.EventManager.removeResizeListener(a.onWindowResize,a)},onDenyColumnHide:function(){},render:function(){if(this.autoFill){var a=this.grid.ownerCt;a&&a.getLayout()&&a.on("afterlayout",function(){this.fitColumns(!0,!0),this.updateHeaders(),this.updateHeaderSortState()},this,{single:!0})}else this.forceFit?this.fitColumns(!0,!1):this.grid.autoExpandColumn&&this.autoExpand(!0);this.grid.getGridEl().dom.innerHTML=this.renderUI(),this.afterRenderUI()},initData:function(a,b){var c=this;if(c.ds){var d=c.ds;d.un("add",c.onAdd,c),d.un("load",c.onLoad,c),d.un("clear",c.onClear,c),d.un("remove",c.onRemove,c),d.un("update",c.onUpdate,c),d.un("datachanged",c.onDataChange,c),d!==a&&d.autoDestroy&&d.destroy()}a&&a.on({scope:c,load:c.onLoad,add:c.onAdd,remove:c.onRemove,update:c.onUpdate,clear:c.onClear,datachanged:c.onDataChange});if(c.cm){var e=c.cm;e.un("configchange",c.onColConfigChange,c),e.un("widthchange",c.onColWidthChange,c),e.un("headerchange",c.onHeaderChange,c),e.un("hiddenchange",c.onHiddenChange,c),e.un("columnmoved",c.onColumnMove,c)}b&&(delete c.lastViewWidth,b.on({scope:c,configchange:c.onColConfigChange,widthchange:c.onColWidthChange,headerchange:c.onHeaderChange,hiddenchange:c.onHiddenChange,columnmoved:c.onColumnMove})),c.ds=a,c.cm=b},onDataChange:function(){this.refresh(!0),this.updateHeaderSortState(),this.syncFocusEl(0)},onClear:function(){this.refresh(),this.syncFocusEl(0)},onUpdate:function(a,b){this.refreshRow(b)},onAdd:function(a,b,c){this.insertRows(a,c,c+(b.length-1))},onRemove:function(a,b,c,d){d!==!0&&this.fireEvent("beforerowremoved",this,c,b),this.removeRow(c),d!==!0&&(this.processRows(c),this.applyEmptyText(),this.fireEvent("rowremoved",this,c,b))},onLoad:function(){Ext.isGecko?(this.scrollToTopTask||(this.scrollToTopTask=new Ext.util.DelayedTask(this.scrollToTop,this)),this.scrollToTopTask.delay(1)):this.scrollToTop()},onColWidthChange:function(a,b,c){this.updateColumnWidth(b,c)},onHeaderChange:function(a,b,c){this.updateHeaders()},onHiddenChange:function(a,b,c){this.updateColumnHidden(b,c)},onColumnMove:function(a,b,c){this.indexMap=null,this.refresh(!0),this.restoreScroll(this.getScrollState()),this.afterMove(c),this.grid.fireEvent("columnmove",b,c)},onColConfigChange:function(){delete this.lastViewWidth,this.indexMap=null,this.refresh(!0)},initUI:function(a){a.on("headerclick",this.onHeaderClick,this)},initEvents:Ext.emptyFn,onHeaderClick:function(a,b){if(this.headersDisabled||!this.cm.isSortable(b))return;a.stopEditing(!0),a.store.sort(this.cm.getDataIndex(b))},onRowOver:function(a,b){var c=this.findRowIndex(b);c!==!1&&this.addRowClass(c,this.rowOverCls)},onRowOut:function(a,b){var c=this.findRowIndex(b);c!==!1&&!a.within(this.getRow(c),!0)&&this.removeRowClass(c,this.rowOverCls)},onRowSelect:function(a){this.addRowClass(a,this.selectedRowClass)},onRowDeselect:function(a){this.removeRowClass(a,this.selectedRowClass)},onCellSelect:function(a,b){var c=this.getCell(a,b);c&&this.fly(c).addClass("x-grid3-cell-selected")},onCellDeselect:function(a,b){var c=this.getCell(a,b);c&&this.fly(c).removeClass("x-grid3-cell-selected")},handleWheel:function(a){a.stopPropagation()},onColumnSplitterMoved:function(a,b){this.userResized=!0,this.grid.colModel.setColumnWidth(a,b,!0),this.forceFit?(this.fitColumns(!0,!1,a),this.updateAllColumnWidths()):(this.updateColumnWidth(a,b),this.syncHeaderScroll()),this.grid.fireEvent("columnresize",a,b)},beforeColMenuShow:function(){var a=this.cm,b=a.getColumnCount(),c=this.colMenu,d;c.removeAll();for(d=0;d<b;d++)a.config[d].hideable!==!1&&c.add(new Ext.menu.CheckItem({text:a.getColumnHeader(d),itemId:"col-"+a.getColumnId(d),checked:!a.isHidden(d),disabled:a.config[d].hideable===!1,hideOnClick:!1}))},handleHdMenuClick:function(a){var b=this.ds,c=this.cm.getDataIndex(this.hdCtxIndex);switch(a.getItemId()){case"asc":b.sort(c,"ASC");break;case"desc":b.sort(c,"DESC");break;default:this.handleHdMenuClickDefault(a)}return!0},handleHdMenuClickDefault:function(a){var b=this.cm,c=a.getItemId(),d=b.getIndexById(c.substr(4));if(d!=-1){if(a.checked&&b.getColumnsBy(this.isHideableColumn,this).length<=1){this.onDenyColumnHide();return}b.setHidden(d,a.checked)}},handleHdDown:function(a,b){if(Ext.fly(b).hasClass("x-grid3-hd-btn")){a.stopEvent();var c=this.cm,d=this.findHeaderCell(b),e=this.getCellIndex(d),f=c.isSortable(e),g=this.hmenu,h=g.items,i=this.headerMenuOpenCls;this.hdCtxIndex=e,Ext.fly(d).addClass(i),h.get("asc").setDisabled(!f),h.get("desc").setDisabled(!f),g.on("hide",function(){Ext.fly(d).removeClass(i)},this,{single:!0}),g.show(b,"tl-bl?")}},handleHdMove:function(a){var b=this.findHeaderCell(this.activeHdRef);if(b&&!this.headersDisabled){var c=this.splitHandleWidth||5,d=this.activeHdRegion,e=b.style,f=this.cm,g="",h=a.getPageX();if(this.grid.enableColumnResize!==!1){var i=this.activeHdIndex,j=this.getPreviousVisible(i),k=f.isResizable(i),l=j&&f.isResizable(j),m=h-d.left<=c,n=d.right-h<=(this.activeHdBtn?2:c);m&&l?g=Ext.isAir?"move":Ext.isWebKit?"e-resize":"col-resize":n&&k&&(g=Ext.isAir?"move":Ext.isWebKit?"w-resize":"col-resize")}e.cursor=g}},getPreviousVisible:function(a){while(a>0){if(!this.cm.isHidden(a-1))return a;a--}return undefined},handleHdOver:function(a,b){var c=this.findHeaderCell(b);if(c&&!this.headersDisabled){var d=this.fly(c);this.activeHdRef=b,this.activeHdIndex=this.getCellIndex(c),this.activeHdRegion=d.getRegion(),this.isMenuDisabled(this.activeHdIndex,d)||(d.addClass("x-grid3-hd-over"),this.activeHdBtn=d.child(".x-grid3-hd-btn"),this.activeHdBtn&&(this.activeHdBtn.dom.style.height=c.firstChild.offsetHeight-1+"px"))}},handleHdOut:function(a,b){var c=this.findHeaderCell(b);c&&(!Ext.isIE||!a.within(c,!0))&&(this.activeHdRef=null,this.fly(c).removeClass("x-grid3-hd-over"),c.style.cursor="")},isMenuDisabled:function(a,b){return this.cm.isMenuDisabled(a)},hasRows:function(){var a=this.mainBody.dom.firstChild;return a&&a.nodeType==1&&a.className!="x-grid-empty"},isHideableColumn:function(a){return!a.hidden},bind:function(a,b){this.initData(a,b)}}),Ext.grid.GridView.SplitDragZone=Ext.extend(Ext.dd.DDProxy,{constructor:function(a,b){this.grid=a,this.view=a.getView(),this.marker=this.view.resizeMarker,this.proxy=this.view.resizeProxy,Ext.grid.GridView.SplitDragZone.superclass.constructor.call(this,b,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:!1}),this.scroll=!1,this.hw=this.view.splitHandleWidth||5},b4StartDrag:function(a,b){this.dragHeadersDisabled=this.view.headersDisabled,this.view.headersDisabled=!0;var c=this.view.mainWrap.getHeight();this.marker.setHeight(c),this.marker.show(),this.marker.alignTo(this.view.getHeaderCell(this.cellIndex),"tl-tl",[-2,0]),this.proxy.setHeight(c);var d=this.cm.getColumnWidth(this.cellIndex),e=Math.max(d-this.grid.minColumnWidth,0);this.resetConstraints(),this.setXConstraint(e,1e3),this.setYConstraint(0,0),this.minX=a-e,this.maxX=a+1e3,this.startPos=a,Ext.dd.DDProxy.prototype.b4StartDrag.call(this,a,b)},allowHeaderDrag:function(a){return!0},handleMouseDown:function(a){var b=this.view.findHeaderCell(a.getTarget());if(b&&this.allowHeaderDrag(a)){var c=this.view.fly(b).getXY(),d=c[0],e=a.getXY(),f=e[0],g=b.offsetWidth,h=!1;f-d<=this.hw?h=-1:d+g-f<=this.hw&&(h=0);if(h!==!1){this.cm=this.grid.colModel;var i=this.view.getCellIndex(b);if(h==-1){if(i+h<0)return;while(this.cm.isHidden(i+h)){--h;if(i+h<0)return}}this.cellIndex=i+h,this.split=b.dom,this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)&&Ext.grid.GridView.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}else this.view.columnDrag&&this.view.columnDrag.callHandleMouseDown(a)}},endDrag:function(a){this.marker.hide();var b=this.view,c=Math.max(this.minX,a.getPageX()),d=c-this.startPos,e=this.dragHeadersDisabled;b.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+d),setTimeout(function(){b.headersDisabled=e},50)},autoOffset:function(){this.setDelta(0,0)}}),Ext.grid.PivotGridView=Ext.extend(Ext.grid.GridView,{colHeaderCellCls:"grid-hd-group-cell",title:"",getColumnHeaders:function(){return this.grid.topAxis.buildHeaders()},getRowHeaders:function(){return this.grid.leftAxis.buildHeaders()},renderRows:function(a,b){var c=this.grid,d=c.extractData(),e=d.length,f=this.templates,g=c.renderer,h=typeof g=="function",i=this.getCellCls,k=typeof i=="function",l=f.cell,m=f.row,n=[],o={},p="width:"+this.getGridInnerWidth()+"px;",q,r,s;a=a||0,b=Ext.isDefined(b)?b:e-1;for(s=0;s<e;s++){row=d[s],colCount=row.length,q=[],rowIndex=a+s;for(j=0;j<colCount;j++)cell=row[j],o.css=j===0?"x-grid3-cell-first ":j==colCount-1?"x-grid3-cell-last ":"",o.attr=o.cellAttr="",o.value=cell,Ext.isEmpty(o.value)&&(o.value="&#160;"),h&&(o.value=g(o.value)),k&&(o.css+=i(o.value)+" "),q[q.length]=l.apply(o);n[n.length]=m.apply({tstyle:p,cols:colCount,cells:q.join(""),alt:""})}return n.join("")},masterTpl:new Ext.Template('<div class="x-grid3 x-pivotgrid" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header">','<div class="x-grid3-header-title"><span>{title}</span></div>','<div class="x-grid3-header-inner">','<div class="x-grid3-header-offset" style="{ostyle}"></div>',"</div>",'<div class="x-clear"></div>',"</div>",'<div class="x-grid3-scroller">','<div class="x-grid3-row-headers"></div>','<div class="x-grid3-body" style="{bstyle}">{body}</div>','<a href="#" class="x-grid3-focus" tabIndex="-1"></a>',"</div>","</div>",'<div class="x-grid3-resize-marker">&#160;</div>','<div class="x-grid3-resize-proxy">&#160;</div>',"</div>"),initTemplates:function(){Ext.grid.PivotGridView.superclass.initTemplates.apply(this,arguments);var a=this.templates||{};a.gcell||(a.gcell=new Ext.XTemplate('<td class="x-grid3-hd x-grid3-gcell x-grid3-td-{id} ux-grid-hd-group-row-{row} '+this.colHeaderCellCls+'" style="{style}">','<div {tooltip} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"></a>':"","{value}","</div>","</td>")),this.templates=a,this.hrowRe=new RegExp("ux-grid-hd-group-row-(\\d+)","")},initElements:function(){Ext.grid.PivotGridView.superclass.initElements.apply(this,arguments),this.rowHeadersEl=new Ext.Element(this.scroller.child("div.x-grid3-row-headers")),this.headerTitleEl=new Ext.Element(this.mainHd.child("div.x-grid3-header-title"))},getGridInnerWidth:function(){var a=Ext.grid.PivotGridView.superclass.getGridInnerWidth.apply(this,arguments);return a-this.getTotalRowHeaderWidth()},getTotalRowHeaderWidth:function(){var a=this.getRowHeaders(),b=a.length,c=0,d;for(d=0;d<b;d++)c+=a[d].width;return c},getTotalColumnHeaderHeight:function(){return this.getColumnHeaders().length*21},renderUI:function(){var a=this.templates,b=this.getGridInnerWidth();return a.master.apply({body:a.body.apply({rows:"&#160;"}),ostyle:"width:"+b+"px",bstyle:"width:"+b+"px"})},onLayout:function(a,b){Ext.grid.PivotGridView.superclass.onLayout.apply(this,arguments);var a=this.getGridInnerWidth();this.resizeColumnHeaders(a),this.resizeAllRows(a)},refresh:function(a){this.fireEvent("beforerefresh",this),this.grid.stopEditing(!0);var b=this.renderBody();this.mainBody.update(b).setWidth(this.getGridInnerWidth()),a===!0&&(this.updateHeaders(),this.updateHeaderSortState()),this.processRows(0,!0),this.layout(),this.applyEmptyText(),this.fireEvent("refresh",this)},renderHeaders:Ext.emptyFn,fitColumns:Ext.emptyFn,resizeColumnHeaders:function(a){var b=this.grid.topAxis;b.rendered&&b.el.setWidth(a)},resizeRowHeaders:function(){var a=this.getTotalRowHeaderWidth(),b=String.format("margin-left: {0}px;",a);this.rowHeadersEl.setWidth(a),this.mainBody.applyStyles(b),Ext.fly(this.innerHd).applyStyles(b),this.headerTitleEl.setWidth(a),this.headerTitleEl.setHeight(this.getTotalColumnHeaderHeight())},resizeAllRows:function(a){var b=this.getRows(),c=b.length,d;for(d=0;d<c;d++)Ext.fly(b[d]).setWidth(a),Ext.fly(b[d]).child("table").setWidth(a)},updateHeaders:function(){this.renderGroupRowHeaders(),this.renderGroupColumnHeaders()},renderGroupRowHeaders:function(){var a=this.grid.leftAxis;this.resizeRowHeaders(),a.rendered=!1,a.render(this.rowHeadersEl),this.setTitle(this.title)},setTitle:function(a){this.headerTitleEl.child("span").dom.innerHTML=a},renderGroupColumnHeaders:function(){var a=this.grid.topAxis;a.rendered=!1,a.render(this.innerHd.firstChild)},isMenuDisabled:function(a,b){return!0}}),Ext.grid.PivotAxis=Ext.extend(Ext.Component,{orientation:"horizontal",defaultHeaderWidth:80,paddingWidth:7,setDimensions:function(a){this.dimensions=a},onRender:function(a,b){var c=this.orientation=="horizontal"?this.renderHorizontalRows():this.renderVerticalRows();this.el=Ext.DomHelper.overwrite(a.dom,{tag:"table",cn:c},!0)},renderHorizontalRows:function(){var a=this.buildHeaders(),b=a.length,c=[],d,e,f,g,h;for(g=0;g<b;g++){d=[],e=a[g].items,f=e.length;for(h=0;h<f;h++)d.push({tag:"td",html:e[h].header,colspan:e[h].span});c[g]={tag:"tr",cn:d}}return c},renderVerticalRows:function(){var a=this.buildHeaders(),b=a.length,c=[],d=[],e,f,g,h,i,j;for(i=0;i<b;i++){f=a[i],h=f.width||80,e=f.items.length;for(j=0;j<e;j++)g=f.items[j],c[g.start]=c[g.start]||[],c[g.start].push({tag:"td",html:g.header,rowspan:g.span,width:Ext.isBorderBox?h:h-this.paddingWidth})}e=c.length;for(i=0;i<e;i++)d[i]={tag:"tr",cn:c[i]};return d},getTuples:function(){var a=new Ext.data.Store({});a.data=this.store.data.clone(),a.fields=this.store.fields;var b=[],c=this.dimensions,d=c.length,e;for(e=0;e<d;e++)b.push({field:c[e].dataIndex,direction:c[e].direction||"ASC"});a.sort(b);var f=a.data.items,g=[],h=[],i,j,k,l,m;d=f.length;for(e=0;e<d;e++){k=this.getRecordInfo(f[e]),l=k.data,j="";for(m in l)j+=l[m]+"---";g.indexOf(j)==-1&&(g.push(j),h.push(k))}return a.destroy(),h},getRecordInfo:function(a){var b=this.dimensions,c=b.length,d={},e,f,g;for(g=0;g<c;g++)e=b[g],f=e.dataIndex,d[f]=a.get(f);var h=function(a){return function(b){for(var c in a)if(b.get(c)!=a[c])return!1;return!0}};return{data:d,matcher:h(d)}},buildHeaders:function(){var a=this.getTuples(),b=a.length,c=this.dimensions,d=c.length,e=[],f,g,h,i,j,k,l,m,n,o;for(n=0;n<d;n++){dimension=c[n],g=[],j=0,k=0;for(o=0;o<b;o++)f=a[o],l=o==b-1,h=f.data[dimension.dataIndex],m=i!=undefined&&i!=h,n>0&&o>0&&(m=m||f.data[c[n-1].dataIndex]!=a[o-1].data[c[n-1].dataIndex]),m&&(g.push({header:i,span:j,start:k}),k+=j,j=0),l&&(g.push({header:h,span:j+1,start:k}),k+=j,j=0),i=h,j++;e.push({items:g,width:dimension.width||this.defaultHeaderWidth}),i=undefined}return e}}),Ext.grid.HeaderDragZone=Ext.extend(Ext.dd.DragZone,{maxDragWidth:120,constructor:function(a,b,c){this.grid=a,this.view=a.getView(),this.ddGroup="gridHeader"+this.grid.getGridEl().id,Ext.grid.HeaderDragZone.superclass.constructor.call(this,b),c&&(this.setHandleElId(Ext.id(b)),this.setOuterHandleElId(Ext.id(c))),this.scroll=!1},getDragData:function(a){var b=Ext.lib.Event.getTarget(a),c=this.view.findHeaderCell(b);return c?{ddel:c.firstChild,header:c}:!1},onInitDrag:function(a){this.dragHeadersDisabled=this.view.headersDisabled,this.view.headersDisabled=!0;var b=this.dragData.ddel.cloneNode(!0);return b.id=Ext.id(),b.style.width=Math.min(this.dragData.header.offsetWidth,this.maxDragWidth)+"px",this.proxy.update(b),!0},afterValidDrop:function(){this.completeDrop()},afterInvalidDrop:function(){this.completeDrop()},completeDrop:function(){var a=this.view,b=this.dragHeadersDisabled;setTimeout(function(){a.headersDisabled=b},50)}}),Ext.grid.HeaderDropZone=Ext.extend(Ext.dd.DropZone,{proxyOffsets:[-4,-9],fly:Ext.Element.fly,constructor:function(a,b,c){this.grid=a,this.view=a.getView(),this.proxyTop=Ext.DomHelper.append(document.body,{cls:"col-move-top",html:"&#160;"},!0),this.proxyBottom=Ext.DomHelper.append(document.body,{cls:"col-move-bottom",html:"&#160;"},!0),this.proxyTop.hide=this.proxyBottom.hide=function(){this.setLeftTop(-100,-100),this.setStyle("visibility","hidden")},this.ddGroup="gridHeader"+this.grid.getGridEl().id,Ext.
grid.HeaderDropZone.superclass.constructor.call(this,a.getGridEl().dom)},getTargetFromEvent:function(a){var b=Ext.lib.Event.getTarget(a),c=this.view.findCellIndex(b);if(c!==!1)return this.view.getHeaderCell(c)},nextVisible:function(a){var b=this.view,c=this.grid.colModel;a=a.nextSibling;while(a){if(!c.isHidden(b.getCellIndex(a)))return a;a=a.nextSibling}return null},prevVisible:function(a){var b=this.view,c=this.grid.colModel;a=a.prevSibling;while(a){if(!c.isHidden(b.getCellIndex(a)))return a;a=a.prevSibling}return null},positionIndicator:function(a,b,c){var d=Ext.lib.Event.getPageX(c),e=Ext.lib.Dom.getRegion(b.firstChild),f,g,h=e.top+this.proxyOffsets[1];return e.right-d<=(e.right-e.left)/2?(f=e.right+this.view.borderWidth,g="after"):(f=e.left,g="before"),this.grid.colModel.isFixed(this.view.getCellIndex(b))?!1:(f+=this.proxyOffsets[0],this.proxyTop.setLeftTop(f,h),this.proxyTop.show(),this.bottomOffset||(this.bottomOffset=this.view.mainHd.getHeight()),this.proxyBottom.setLeftTop(f,h+this.proxyTop.dom.offsetHeight+this.bottomOffset),this.proxyBottom.show(),g)},onNodeEnter:function(a,b,c,d){d.header!=a&&this.positionIndicator(d.header,a,c)},onNodeOver:function(a,b,c,d){var e=!1;return d.header!=a&&(e=this.positionIndicator(d.header,a,c)),e||(this.proxyTop.hide(),this.proxyBottom.hide()),e?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(a,b,c,d){this.proxyTop.hide(),this.proxyBottom.hide()},onNodeDrop:function(a,b,c,d){var e=d.header;if(e!=a){var f=this.grid.colModel,g=Ext.lib.Event.getPageX(c),h=Ext.lib.Dom.getRegion(a.firstChild),i=h.right-g<=(h.right-h.left)/2?"after":"before",j=this.view.getCellIndex(e),k=this.view.getCellIndex(a);return i=="after"&&k++,j<k&&k--,f.moveColumn(j,k),!0}return!1}}),Ext.grid.GridView.ColumnDragZone=Ext.extend(Ext.grid.HeaderDragZone,{constructor:function(a,b){Ext.grid.GridView.ColumnDragZone.superclass.constructor.call(this,a,b,null),this.proxy.el.addClass("x-grid3-col-dd")},handleMouseDown:function(a){},callHandleMouseDown:function(a){Ext.grid.GridView.ColumnDragZone.superclass.handleMouseDown.call(this,a)}}),Ext.grid.SplitDragZone=Ext.extend(Ext.dd.DDProxy,{fly:Ext.Element.fly,constructor:function(a,b,c){this.grid=a,this.view=a.getView(),this.proxy=this.view.resizeProxy,Ext.grid.SplitDragZone.superclass.constructor.call(this,b,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:!1}),this.setHandleElId(Ext.id(b)),this.setOuterHandleElId(Ext.id(c)),this.scroll=!1},b4StartDrag:function(a,b){this.view.headersDisabled=!0,this.proxy.setHeight(this.view.mainWrap.getHeight());var c=this.cm.getColumnWidth(this.cellIndex),d=Math.max(c-this.grid.minColumnWidth,0);this.resetConstraints(),this.setXConstraint(d,1e3),this.setYConstraint(0,0),this.minX=a-d,this.maxX=a+1e3,this.startPos=a,Ext.dd.DDProxy.prototype.b4StartDrag.call(this,a,b)},handleMouseDown:function(a){var b=Ext.EventObject.setEvent(a),c=this.fly(b.getTarget());c.hasClass("x-grid-split")&&(this.cellIndex=this.view.getCellIndex(c.dom),this.split=c.dom,this.cm=this.grid.colModel,this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)&&Ext.grid.SplitDragZone.superclass.handleMouseDown.apply(this,arguments))},endDrag:function(a){this.view.headersDisabled=!1;var b=Math.max(this.minX,Ext.lib.Event.getPageX(a)),c=b-this.startPos;this.view.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+c)},autoOffset:function(){this.setDelta(0,0)}}),Ext.grid.GridDragZone=function(a,b){this.view=a.getView(),Ext.grid.GridDragZone.superclass.constructor.call(this,this.view.mainBody.dom,b),this.scroll=!1,this.grid=a,this.ddel=document.createElement("div"),this.ddel.className="x-grid-dd-wrap"},Ext.extend(Ext.grid.GridDragZone,Ext.dd.DragZone,{ddGroup:"GridDD",getDragData:function(a){var b=Ext.lib.Event.getTarget(a),c=this.view.findRowIndex(b);if(c!==!1){var d=this.grid.selModel;return(!d.isSelected(c)||a.hasModifier())&&d.handleMouseDown(this.grid,c,a),{grid:this.grid,ddel:this.ddel,rowIndex:c,selections:d.getSelections()}}return!1},onInitDrag:function(a){var b=this.dragData;this.ddel.innerHTML=this.grid.getDragDropText(),this.proxy.update(this.ddel)},afterRepair:function(){this.dragging=!1},getRepairXY:function(a,b){return!1},onEndDrag:function(a,b){},onValidDrop:function(a,b,c){this.hideProxy()},beforeInvalidDrop:function(a,b){}}),Ext.grid.ColumnModel=Ext.extend(Ext.util.Observable,{defaultWidth:100,defaultSortable:!1,constructor:function(a){a.columns?(Ext.apply(this,a),this.setConfig(a.columns,!0)):this.setConfig(a,!0),this.addEvents("widthchange","headerchange","hiddenchange","columnmoved","configchange"),Ext.grid.ColumnModel.superclass.constructor.call(this)},getColumnId:function(a){return this.config[a].id},getColumnAt:function(a){return this.config[a]},setConfig:function(a,b){var c,d,e;if(!b){delete this.totalWidth;for(c=0,e=this.config.length;c<e;c++)d=this.config[c],d.setEditor&&d.setEditor(null)}this.defaults=Ext.apply({width:this.defaultWidth,sortable:this.defaultSortable},this.defaults),this.config=a,this.lookup={};for(c=0,e=a.length;c<e;c++){d=Ext.applyIf(a[c],this.defaults),Ext.isEmpty(d.id)&&(d.id=c);if(!d.isColumn){var f=Ext.grid.Column.types[d.xtype||"gridcolumn"];d=new f(d),a[c]=d}this.lookup[d.id]=d}b||this.fireEvent("configchange",this)},getColumnById:function(a){return this.lookup[a]},getIndexById:function(a){for(var b=0,c=this.config.length;b<c;b++)if(this.config[b].id==a)return b;return-1},moveColumn:function(a,b){var c=this.config,d=c[a];c.splice(a,1),c.splice(b,0,d),this.dataMap=null,this.fireEvent("columnmoved",this,a,b)},getColumnCount:function(a){var b=this.config.length,c=0,d;if(a===!0){for(d=0;d<b;d++)this.isHidden(d)||c++;return c}return b},getColumnsBy:function(a,b){var c=this.config,d=c.length,e=[],f,g;for(f=0;f<d;f++)g=c[f],a.call(b||this,g,f)===!0&&(e[e.length]=g);return e},isSortable:function(a){return!!this.config[a].sortable},isMenuDisabled:function(a){return!!this.config[a].menuDisabled},getRenderer:function(a){return this.config[a].renderer||Ext.grid.ColumnModel.defaultRenderer},getRendererScope:function(a){return this.config[a].scope},setRenderer:function(a,b){this.config[a].renderer=b},getColumnWidth:function(a){var b=this.config[a].width;return typeof b!="number"&&(b=this.defaultWidth),b},setColumnWidth:function(a,b,c){this.config[a].width=b,this.totalWidth=null,c||this.fireEvent("widthchange",this,a,b)},getTotalWidth:function(a){if(!this.totalWidth){this.totalWidth=0;for(var b=0,c=this.config.length;b<c;b++)if(a||!this.isHidden(b))this.totalWidth+=this.getColumnWidth(b)}return this.totalWidth},getColumnHeader:function(a){return this.config[a].header},setColumnHeader:function(a,b){this.config[a].header=b,this.fireEvent("headerchange",this,a,b)},getColumnTooltip:function(a){return this.config[a].tooltip},setColumnTooltip:function(a,b){this.config[a].tooltip=b},getDataIndex:function(a){return this.config[a].dataIndex},setDataIndex:function(a,b){this.config[a].dataIndex=b},findColumnIndex:function(a){var b=this.config;for(var c=0,d=b.length;c<d;c++)if(b[c].dataIndex==a)return c;return-1},isCellEditable:function(a,b){var c=this.config[a],d=c.editable;return!!(d||!Ext.isDefined(d)&&c.editor)},getCellEditor:function(a,b){return this.config[a].getCellEditor(b)},setEditable:function(a,b){this.config[a].editable=b},isHidden:function(a){return!!this.config[a].hidden},isFixed:function(a){return!!this.config[a].fixed},isResizable:function(a){return a>=0&&this.config[a].resizable!==!1&&this.config[a].fixed!==!0},setHidden:function(a,b){var c=this.config[a];c.hidden!==b&&(c.hidden=b,this.totalWidth=null,this.fireEvent("hiddenchange",this,a,b))},setEditor:function(a,b){this.config[a].setEditor(b)},destroy:function(){var a=this.config.length,b=0;for(;b<a;b++)this.config[b].destroy();delete this.config,delete this.lookup,this.purgeListeners()},setState:function(a,b){b=Ext.applyIf(b,this.defaults),Ext.apply(this.config[a],b)}}),Ext.grid.ColumnModel.defaultRenderer=function(a){return typeof a=="string"&&a.length<1?"&#160;":a},Ext.grid.AbstractSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(){this.locked=!1,Ext.grid.AbstractSelectionModel.superclass.constructor.call(this)},init:function(a){this.grid=a,this.lockOnInit&&(delete this.lockOnInit,this.locked=!1,this.lock()),this.initEvents()},lock:function(){if(!this.locked){this.locked=!0;var a=this.grid;a?a.getView().on({scope:this,beforerefresh:this.sortUnLock,refresh:this.sortLock}):this.lockOnInit=!0}},sortLock:function(){this.locked=!0},sortUnLock:function(){this.locked=!1},unlock:function(){if(this.locked){this.locked=!1;var a=this.grid,b;a?(b=a.getView(),b.un("beforerefresh",this.sortUnLock,this),b.un("refresh",this.sortLock,this)):delete this.lockOnInit}},isLocked:function(){return this.locked},destroy:function(){this.unlock(),this.purgeListeners()}}),Ext.grid.RowSelectionModel=Ext.extend(Ext.grid.AbstractSelectionModel,{singleSelect:!1,constructor:function(a){Ext.apply(this,a),this.selections=new Ext.util.MixedCollection(!1,function(a){return a.id}),this.last=!1,this.lastActive=!1,this.addEvents("selectionchange","beforerowselect","rowselect","rowdeselect"),Ext.grid.RowSelectionModel.superclass.constructor.call(this)},initEvents:function(){!this.grid.enableDragDrop&&!this.grid.enableDrag&&this.grid.on("rowmousedown",this.handleMouseDown,this),this.rowNav=new Ext.KeyNav(this.grid.getGridEl(),{up:this.onKeyPress,down:this.onKeyPress,scope:this}),this.grid.getView().on({scope:this,refresh:this.onRefresh,rowupdated:this.onRowUpdated,rowremoved:this.onRemove})},onKeyPress:function(a,b){var c=b=="up",d=c?"selectPrevious":"selectNext",e=c?-1:1,f;!a.shiftKey||this.singleSelect?this[d](!1):this.last!==!1&&this.lastActive!==!1?(f=this.last,this.selectRange(this.last,this.lastActive+e),this.grid.getView().focusRow(this.lastActive),f!==!1&&(this.last=f)):this.selectFirstRow()},onRefresh:function(){var a=this.grid.store,b=this.getSelections(),c=0,d=b.length,e,f;this.silent=!0,this.clearSelections(!0);for(;c<d;c++)f=b[c],(e=a.indexOfId(f.id))!=-1&&this.selectRow(e,!0);b.length!=this.selections.getCount()&&this.fireEvent("selectionchange",this),this.silent=!1},onRemove:function(a,b,c){this.selections.remove(c)!==!1&&this.fireEvent("selectionchange",this)},onRowUpdated:function(a,b,c){this.isSelected(c)&&a.onRowSelect(b)},selectRecords:function(a,b){b||this.clearSelections();var c=this.grid.store,d=0,e=a.length;for(;d<e;d++)this.selectRow(c.indexOf(a[d]),!0)},getCount:function(){return this.selections.length},selectFirstRow:function(){this.selectRow(0)},selectLastRow:function(a){this.selectRow(this.grid.store.getCount()-1,a)},selectNext:function(a){return this.hasNext()?(this.selectRow(this.last+1,a),this.grid.getView().focusRow(this.last),!0):!1},selectPrevious:function(a){return this.hasPrevious()?(this.selectRow(this.last-1,a),this.grid.getView().focusRow(this.last),!0):!1},hasNext:function(){return this.last!==!1&&this.last+1<this.grid.store.getCount()},hasPrevious:function(){return!!this.last},getSelections:function(){return[].concat(this.selections.items)},getSelected:function(){return this.selections.itemAt(0)},each:function(a,b){var c=this.getSelections(),d=0,e=c.length;for(;d<e;d++)if(a.call(b||this,c[d],d)===!1)return!1;return!0},clearSelections:function(a){if(this.isLocked())return;if(a!==!0){var b=this.grid.store,c=this.selections;c.each(function(a){this.deselectRow(b.indexOfId(a.id))},this),c.clear()}else this.selections.clear();this.last=!1},selectAll:function(){if(this.isLocked())return;this.selections.clear();for(var a=0,b=this.grid.store.getCount();a<b;a++)this.selectRow(a,!0)},hasSelection:function(){return this.selections.length>0},isSelected:function(a){var b=Ext.isNumber(a)?this.grid.store.getAt(a):a;return b&&this.selections.key(b.id)?!0:!1},isIdSelected:function(a){return this.selections.key(a)?!0:!1},handleMouseDown:function(a,b,c){if(c.button!==0||this.isLocked())return;var d=this.grid.getView();if(c.shiftKey&&!this.singleSelect&&this.last!==!1){var e=this.last;this.selectRange(e,b,c.ctrlKey),this.last=e,d.focusRow(b)}else{var f=this.isSelected(b);if(c.ctrlKey&&f)this.deselectRow(b);else if(!f||this.getCount()>1)this.selectRow(b,c.ctrlKey||c.shiftKey),d.focusRow(b)}},selectRows:function(a,b){b||this.clearSelections();for(var c=0,d=a.length;c<d;c++)this.selectRow(a[c],!0)},selectRange:function(a,b,c){var d;if(this.isLocked())return;c||this.clearSelections();if(a<=b)for(d=a;d<=b;d++)this.selectRow(d,!0);else for(d=a;d>=b;d--)this.selectRow(d,!0)},deselectRange:function(a,b,c){if(this.isLocked())return;for(var d=a;d<=b;d++)this.deselectRow(d,c)},selectRow:function(a,b,c){if(this.isLocked()||a<0||a>=this.grid.store.getCount()||b&&this.isSelected(a))return;var d=this.grid.store.getAt(a);d&&this.fireEvent("beforerowselect",this,a,b,d)!==!1&&((!b||this.singleSelect)&&this.clearSelections(),this.selections.add(d),this.last=this.lastActive=a,c||this.grid.getView().onRowSelect(a),this.silent||(this.fireEvent("rowselect",this,a,d),this.fireEvent("selectionchange",this)))},deselectRow:function(a,b){if(this.isLocked())return;this.last==a&&(this.last=!1),this.lastActive==a&&(this.lastActive=!1);var c=this.grid.store.getAt(a);c&&(this.selections.remove(c),b||this.grid.getView().onRowDeselect(a),this.fireEvent("rowdeselect",this,a,c),this.fireEvent("selectionchange",this))},acceptsNav:function(a,b,c){return!c.isHidden(b)&&c.isCellEditable(b,a)},onEditorKey:function(a,b){var c=b.getKey(),d,e=this.grid,f=e.lastEdit,g=e.activeEditor,h=b.shiftKey,i,f,j,k;c==b.TAB?(b.stopEvent(),g.completeEdit(),h?d=e.walkCells(g.row,g.col-1,-1,this.acceptsNav,this):d=e.walkCells(g.row,g.col+1,1,this.acceptsNav,this)):c==b.ENTER&&this.moveEditorOnEnter!==!1&&(h?d=e.walkCells(f.row-1,f.col,-1,this.acceptsNav,this):d=e.walkCells(f.row+1,f.col,1,this.acceptsNav,this)),d&&(j=d[0],k=d[1],this.onEditorSelect(j,f.row),e.isEditor&&e.editing&&(i=e.activeEditor,i&&i.field.triggerBlur&&i.field.triggerBlur()),e.startEditing(j,k))},onEditorSelect:function(a,b){b!=a&&this.selectRow(a)},destroy:function(){Ext.destroy(this.rowNav),this.rowNav=null,Ext.grid.RowSelectionModel.superclass.destroy.call(this)}}),Ext.grid.Column=Ext.extend(Ext.util.Observable,{isColumn:!0,constructor:function(a){Ext.apply(this,a),Ext.isString(this.renderer)?this.renderer=Ext.util.Format[this.renderer]:Ext.isObject(this.renderer)&&(this.scope=this.renderer.scope,this.renderer=this.renderer.fn),this.scope||(this.scope=this);var b=this.editor;delete this.editor,this.setEditor(b),this.addEvents("click","contextmenu","dblclick","mousedown"),Ext.grid.Column.superclass.constructor.call(this)},processEvent:function(a,b,c,d,e){return this.fireEvent(a,this,c,d,b)},destroy:function(){this.setEditor&&this.setEditor(null),this.purgeListeners()},renderer:function(a){return a},getEditor:function(a){return this.editable!==!1?this.editor:null},setEditor:function(a){var b=this.editor;b&&(b.gridEditor?(b.gridEditor.destroy(),delete b.gridEditor):b.destroy()),this.editor=null,a&&(a.isXType||(a=Ext.create(a,"textfield")),this.editor=a)},getCellEditor:function(a){var b=this.getEditor(a);return b&&(b.startEdit||(b.gridEditor||(b.gridEditor=new Ext.grid.GridEditor(b)),b=b.gridEditor)),b}}),Ext.grid.BooleanColumn=Ext.extend(Ext.grid.Column,{trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(a){Ext.grid.BooleanColumn.superclass.constructor.call(this,a);var b=this.trueText,c=this.falseText,d=this.undefinedText;this.renderer=function(a){return a===undefined?d:!a||a==="false"?c:b}}}),Ext.grid.NumberColumn=Ext.extend(Ext.grid.Column,{format:"0,000.00",constructor:function(a){Ext.grid.NumberColumn.superclass.constructor.call(this,a),this.renderer=Ext.util.Format.numberRenderer(this.format)}}),Ext.grid.DateColumn=Ext.extend(Ext.grid.Column,{format:"m/d/Y",constructor:function(a){Ext.grid.DateColumn.superclass.constructor.call(this,a),this.renderer=Ext.util.Format.dateRenderer(this.format)}}),Ext.grid.TemplateColumn=Ext.extend(Ext.grid.Column,{constructor:function(a){Ext.grid.TemplateColumn.superclass.constructor.call(this,a);var b=!Ext.isPrimitive(this.tpl)&&this.tpl.compile?this.tpl:new Ext.XTemplate(this.tpl);this.renderer=function(a,c,d){return b.apply(d.data)},this.tpl=b}}),Ext.grid.ActionColumn=Ext.extend(Ext.grid.Column,{header:"&#160;",actionIdRe:/x-action-col-(\d+)/,altText:"",constructor:function(a){var b=this,c=a.items||(b.items=[b]),d=c.length,e,f;Ext.grid.ActionColumn.superclass.constructor.call(b,a),b.renderer=function(h,i){h=Ext.isFunction(a.renderer)?a.renderer.apply(this,arguments)||"":"",i.css+=" x-action-col-cell";for(e=0;e<d;e++)f=c[e],h+='<img alt="'+b.altText+'" src="'+(f.icon||Ext.BLANK_IMAGE_URL)+'" class="x-action-col-icon x-action-col-'+String(e)+" "+(f.iconCls||"")+" "+(Ext.isFunction(f.getClass)?f.getClass.apply(f.scope||this.scope||this,arguments):"")+'"'+(f.tooltip?' ext:qtip="'+f.tooltip+'"':"")+" />";return h}},destroy:function(){return delete this.items,delete this.renderer,Ext.grid.ActionColumn.superclass.destroy.apply(this,arguments)},processEvent:function(a,b,c,d,e){var f=b.getTarget().className.match(this.actionIdRe),g,h;if(f&&(g=this.items[parseInt(f[1],10)]))if(a=="click")(h=g.handler||this.handler)&&h.call(g.scope||this.scope||this,c,d,e,g,b);else if(a=="mousedown"&&g.stopSelection!==!1)return!1;return Ext.grid.ActionColumn.superclass.processEvent.apply(this,arguments)}}),Ext.grid.Column.types={gridcolumn:Ext.grid.Column,booleancolumn:Ext.grid.BooleanColumn,numbercolumn:Ext.grid.NumberColumn,datecolumn:Ext.grid.DateColumn,templatecolumn:Ext.grid.TemplateColumn,actioncolumn:Ext.grid.ActionColumn},Ext.grid.RowNumberer=Ext.extend(Object,{header:"",width:23,sortable:!1,constructor:function(a){Ext.apply(this,a),this.rowspan&&(this.renderer=this.renderer.createDelegate(this))},fixed:!0,hideable:!1,menuDisabled:!0,dataIndex:"",id:"numberer",rowspan:undefined,renderer:function(a,b,c,d){return this.rowspan&&(b.cellAttr='rowspan="'+this.rowspan+'"'),d+1}}),Ext.grid.CheckboxSelectionModel=Ext.extend(Ext.grid.RowSelectionModel,{header:'<div class="x-grid3-hd-checker">&#160;</div>',width:20,sortable:!1,menuDisabled:!0,fixed:!0,hideable:!1,dataIndex:"",id:"checker",isColumn:!0,constructor:function(){Ext.grid.CheckboxSelectionModel.superclass.constructor.apply(this,arguments),this.checkOnly&&(this.handleMouseDown=Ext.emptyFn)},initEvents:function(){Ext.grid.CheckboxSelectionModel.superclass.initEvents.call(this),this.grid.on("render",function(){Ext.fly(this.grid.getView().innerHd).on("mousedown",this.onHdMouseDown,this)},this)},processEvent:function(a,b,c,d,e){return a=="mousedown"?(this.onMouseDown(b,b.getTarget()),!1):Ext.grid.Column.prototype.processEvent.apply(this,arguments)},onMouseDown:function(a,b){if(a.button===0&&b.className=="x-grid3-row-checker"){a.stopEvent();var c=a.getTarget(".x-grid3-row");if(c){var d=c.rowIndex;this.isSelected(d)?this.deselectRow(d):(this.selectRow(d,!0),this.grid.getView().focusRow(d))}}},onHdMouseDown:function(a,b){if(b.className=="x-grid3-hd-checker"){a.stopEvent();var c=Ext.fly(b.parentNode),d=c.hasClass("x-grid3-hd-checker-on");d?(c.removeClass("x-grid3-hd-checker-on"),this.clearSelections()):(c.addClass("x-grid3-hd-checker-on"),this.selectAll())}},renderer:function(a,b,c){return'<div class="x-grid3-row-checker">&#160;</div>'},onEditorSelect:function(a,b){b!=a&&!this.checkOnly&&this.selectRow(a)}}),Ext.grid.CellSelectionModel=Ext.extend(Ext.grid.AbstractSelectionModel,{constructor:function(a){Ext.apply(this,a),this.selection=null,this.addEvents("beforecellselect","cellselect","selectionchange"),Ext.grid.CellSelectionModel.superclass.constructor.call(this)},initEvents:function(){this.grid.on("cellmousedown",this.handleMouseDown,this),this.grid.on(Ext.EventManager.getKeyEvent(),this.handleKeyDown,this),this.grid.getView().on({scope:this,refresh:this.onViewChange,rowupdated:this.onRowUpdated,beforerowremoved:this.clearSelections,beforerowsinserted:this.clearSelections}),this.grid.isEditor&&this.grid.on("beforeedit",this.beforeEdit,this)},beforeEdit:function(a){this.select(a.row,a.column,!1,!0,a.record)},onRowUpdated:function(a,b,c){this.selection&&this.selection.record==c&&a.onCellSelect(b,this.selection.cell[1])},onViewChange:function(){this.clearSelections(!0)},getSelectedCell:function(){return this.selection?this.selection.cell:null},clearSelections:function(a){var b=this.selection;b&&(a!==!0&&this.grid.view.onCellDeselect(b.cell[0],b.cell[1]),this.selection=null,this.fireEvent("selectionchange",this,null))},hasSelection:function(){return this.selection?!0:!1},handleMouseDown:function(a,b,c,d){if(d.button!==0||this.isLocked())return;this.select(b,c)},select:function(a,b,c,d,e){if(this.fireEvent("beforecellselect",this,a,b)!==!1){this.clearSelections(),e=e||this.grid.store.getAt(a),this.selection={record:e,cell:[a,b]};if(!c){var f=this.grid.getView();f.onCellSelect(a,b),d!==!0&&f.focusCell(a,b)}this.fireEvent("cellselect",this,a,b),this.fireEvent("selectionchange",this,this.selection)}},isSelectable:function(a,b,c){return!c.isHidden(b)},onEditorKey:function(a,b){b.getKey()==b.TAB&&this.handleKeyDown(b)},handleKeyDown:function(a){if(!a.isNavKeyPress())return;var b=a.getKey(),c=this.grid,d=this.selection,e=this,f=function(a,b,d){return c.walkCells(a,b,d,c.isEditor&&c.editing?e.acceptsNav:e.isSelectable,e)},g,h,i,j,k;switch(b){case a.ESC:case a.PAGE_UP:case a.PAGE_DOWN:break;default:a.stopEvent()}if(!d){g=f(0,0,1),g&&this.select(g[0],g[1]);return}g=d.cell,i=g[0],j=g[1];switch(b){case a.TAB:a.shiftKey?h=f(i,j-1,-1):h=f(i,j+1,1);break;case a.DOWN:h=f(i+1,j,1);break;case a.UP:h=f(i-1,j,-1);break;case a.RIGHT:h=f(i,j+1,1);break;case a.LEFT:h=f(i,j-1,-1);break;case a.ENTER:if(c.isEditor&&!c.editing){c.startEditing(i,j);return}}h&&(i=h[0],j=h[1],this.select(i,j),c.isEditor&&c.editing&&(k=c.activeEditor,k&&k.field.triggerBlur&&k.field.triggerBlur(),c.startEditing(i,j)))},acceptsNav:function(a,b,c){return!c.isHidden(b)&&c.isCellEditable(b,a)}}),Ext.grid.EditorGridPanel=Ext.extend(Ext.grid.GridPanel,{clicksToEdit:2,forceValidation:!1,isEditor:!0,detectEdit:!1,autoEncode:!1,trackMouseOver:!1,initComponent:function(){Ext.grid.EditorGridPanel.superclass.initComponent.call(this),this.selModel||(this.selModel=new Ext.grid.CellSelectionModel),this.activeEditor=null,this.addEvents("beforeedit","afteredit","validateedit")},initEvents:function(){Ext.grid.EditorGridPanel.superclass.initEvents.call(this),this.getGridEl().on("mousewheel",this.stopEditing.createDelegate(this,[!0]),this),this.on("columnresize",this.stopEditing,this,[!0]);if(this.clicksToEdit==1)this.on("cellclick",this.onCellDblClick,this);else{var a=this.getView();this.clicksToEdit=="auto"&&a.mainBody&&a.mainBody.on("mousedown",this.onAutoEditClick,this),this.on("celldblclick",this.onCellDblClick,this)}},onResize:function(){Ext.grid.EditorGridPanel.superclass.onResize.apply(this,arguments);var a=this.activeEditor;this.editing&&a&&a.realign(!0)},onCellDblClick:function(a,b,c){this.startEditing(b,c)},onAutoEditClick:function(a,b){if(a.button!==0)return;var c=this.view.findRowIndex(b),d=this.view.findCellIndex(b);if(c!==!1&&d!==!1){this.stopEditing();if(this.selModel.getSelectedCell){var e=this.selModel.getSelectedCell();e&&e[0]===c&&e[1]===d&&this.startEditing(c,d)}else this.selModel.isSelected(c)&&this.startEditing(c,d)}},onEditComplete:function(a,b,c){this.editing=!1,this.lastActiveEditor=this.activeEditor,this.activeEditor=null;var d=a.record,e=this.colModel.getDataIndex(a.col);b=this.postEditValue(b,c,d,e);if(this.forceValidation===!0||String(b)!==String(c)){var f={grid:this,record:d,field:e,originalValue:c,value:b,row:a.row,column:a.col,cancel:!1};this.fireEvent("validateedit",f)!==!1&&!f.cancel&&String(b)!==String(c)&&(d.set(e,f.value),delete f.cancel,this.fireEvent("afteredit",f))}this.view.focusCell(a.row,a.col)},startEditing:function(a,b){this.stopEditing();if(this.colModel.isCellEditable(b,a)){this.view.ensureVisible(a,b,!0);var c=this.store.getAt(a),d=this.colModel.getDataIndex(b),e={grid:this,record:c,field:d,value:c.data[d],row:a,column:b,cancel:!1};if(this.fireEvent("beforeedit",e)!==!1&&!e.cancel){this.editing=!0;var f=this.colModel.getCellEditor(b,a);if(!f)return;f.rendered||(f.parentEl=this.view.getEditorParent(f),f.on({scope:this,render:{fn:function(a){a.field.focus(!1,!0)},single:!0,scope:this},specialkey:function(a,b){this.getSelectionModel().onEditorKey(a,b)},complete:this.onEditComplete,canceledit:this.stopEditing.createDelegate(this,[!0])})),Ext.apply(f,{row:a,col:b,record:c}),this.lastEdit={row:a,col:b},this.activeEditor=f,f.selectSameEditor=this.activeEditor==this.lastActiveEditor;var g=this.preEditValue(c,d);f.startEdit(this.view.getCell(a,b).firstChild,Ext.isDefined(g)?g:""),function(){delete f.selectSameEditor}.defer(50)}}},preEditValue:function(a,b){var c=a.data[b];return this.autoEncode&&Ext.isString(c)?Ext.util.Format.htmlDecode(c):c},postEditValue:function(a,b,c,d){return this.autoEncode&&Ext.isString(a)?Ext.util.Format.htmlEncode(a):a},stopEditing:function(a){if(this.editing){var b=this.lastActiveEditor=this.activeEditor;b&&(b[a===!0?"cancelEdit":"completeEdit"](),this.view.focusCell(b.row,b.col)),this.activeEditor=null}this.editing=!1}}),Ext.reg("editorgrid",Ext.grid.EditorGridPanel),Ext.grid.GridEditor=function(a,b){Ext.grid.GridEditor.superclass.constructor.call(this,a,b),a.monitorTab=!1},Ext.extend(Ext.grid.GridEditor,Ext.Editor,{alignment:"tl-tl",autoSize:"width",hideEl:!1,cls:"x-small-editor x-grid-editor",shim:!1,shadow:!1}),Ext.grid.PropertyRecord=Ext.data.Record.create([{name:"name",type:"string"},"value"]),Ext.grid.PropertyStore=Ext.extend(Ext.util.Observable,{constructor:function(a,b){this.grid=a,this.store=new Ext.data.Store({recordType:Ext.grid.PropertyRecord}),this.store.on("update",this.onUpdate,this),b&&this.setSource(b),Ext.grid.PropertyStore.superclass.constructor.call(this)},setSource:function(a){this.source=a,this.store.removeAll();var b=[];for(var c in a)this.isEditableValue(a[c])&&b.push(new Ext.grid.PropertyRecord({name:c,value:a[c]},c));this.store.loadRecords({records:b},{},!0)},onUpdate:function(a,b,c){if(c==Ext.data.Record.EDIT){var d=b.data.value,e=b.modified.value;this.grid.fireEvent("beforepropertychange",this.source,b.id,d,e)!==!1?(this.source[b.id]=d,b.commit(),this.grid.fireEvent("propertychange",this.source,b.id,d,e)):b.reject()}},getProperty:function(a){return this.store.getAt(a)},isEditableValue:function(a){return Ext.isPrimitive(a)||Ext.isDate(a)},setValue:function(a,b,c){var d=this.getRec(a);d?(d.set("value",b),this.source[a]=b):c&&(this.source[a]=b,d=new Ext.grid.PropertyRecord({name:a,value:b},a),this.store.add(d))},remove:function(a){var b=this.getRec(a);b&&(this.store.remove(b),delete this.source[a])},getRec:function(a){return this.store.getById(a)},getSource:function(){return this.source}}),Ext.grid.PropertyColumnModel=Ext.extend(Ext.grid.ColumnModel,{nameText:"Name",valueText:"Value",dateFormat:"m/j/Y",trueText:"true",falseText:"false",constructor:function(a,b){var c=Ext.grid,d=Ext.form;this.grid=a,c.PropertyColumnModel.superclass.constructor.call(this,[{header:this.nameText,width:50,sortable:!0,dataIndex:"name",id:"name",menuDisabled:!0},{header:this.valueText,width:50,resizable:!1,dataIndex:"value",id:"value",menuDisabled:!0}]),this.store=b;var e=new d.Field({autoCreate:{tag:"select",children:[{tag:"option",value:"true",html:this.trueText},{tag:"option",value:"false",html:this.falseText}]},getValue:function(){return this.el.dom.value=="true"}});this.editors={date:new c.GridEditor(new d.DateField({selectOnFocus:!0})),string:new c.GridEditor(new d.TextField({selectOnFocus:!0})),number:new c.GridEditor(new d.NumberField({selectOnFocus:!0,style:"text-align:left;"})),"boolean":new c.GridEditor(e,{autoSize:"both"})},this.renderCellDelegate=this.renderCell.createDelegate(this),this.renderPropDelegate=this.renderProp.createDelegate(this)},renderDate:function(a){return a.dateFormat(this.dateFormat)},renderBool:function(a){return this[a?"trueText":"falseText"]},isCellEditable:function(a,b){return a==1},getRenderer:function(a){return a==1?this.renderCellDelegate:this.renderPropDelegate},renderProp:function(a){return this.getPropertyName(a)},renderCell:function(a,b,c){var d=this.grid.customRenderers[c.get("name")];if(d)return d.apply(this,arguments);var e=a;return Ext.isDate(a)?e=this.renderDate(a):typeof a=="boolean"&&(e=this.renderBool(a)),Ext.util.Format.htmlEncode(e)},getPropertyName:function(a){var b=this.grid.propertyNames;return b&&b[a]?b[a]:a},getCellEditor:function(a,b){var c=this.store.getProperty(b),d=c.data.name,e=c.data.value;return this.grid.customEditors[d]?this.grid.customEditors[d]:Ext.isDate(e)?this.editors.date:typeof e=="number"?this.editors.number:typeof e=="boolean"?this.editors["boolean"]:this.editors.string},destroy:function(){Ext.grid.PropertyColumnModel.superclass.destroy.call(this),this.destroyEditors(this.editors),this.destroyEditors(this.grid.customEditors)},destroyEditors:function(a){for(var b in a)Ext.destroy(a[b])}}),Ext.grid.PropertyGrid=Ext.extend(Ext.grid.EditorGridPanel,{enableColumnMove:!1,stripeRows:!1,trackMouseOver:!1,clicksToEdit:1,enableHdMenu:!1,viewConfig:{forceFit:!0},initComponent:function(){this.customRenderers=this.customRenderers||{},this.customEditors=this.customEditors||{},this.lastEditRow=null;var a=new Ext.grid.PropertyStore(this);this.propStore=a;var b=new Ext.grid.PropertyColumnModel(this,a);a.store.sort("name","ASC"),this.addEvents("beforepropertychange","propertychange"),this.cm=b,this.ds=a.store,Ext.grid.PropertyGrid.superclass.initComponent.call(this),this.mon(this.selModel,"beforecellselect",function(a,b,c){if(c===0)return this.startEditing.defer(200,this,[b,1]),!1},this)},onRender:function(){Ext.grid.PropertyGrid.superclass.onRender.apply(this,arguments),this.getGridEl().addClass("x-props-grid")},afterRender:function(){Ext.grid.PropertyGrid.superclass.afterRender.apply(this,arguments),this.source&&this.setSource(this.source)},setSource:function(a){this.propStore.setSource(a)},getSource:function(){return this.propStore.getSource()},setProperty:function(a,b,c){this.propStore.setValue(a,b,c)},removeProperty:function(a){this.propStore.remove(a)}}),Ext.reg("propertygrid",Ext.grid.PropertyGrid),Ext.grid.GroupingView=Ext.extend(Ext.grid.GridView,{groupByText:"Group By This Field",showGroupsText:"Show in Groups",hideGroupedColumn:!1,showGroupName:!0,startCollapsed:!1,enableGrouping:!0,enableGroupingMenu:!0,enableNoGroups:!0,emptyGroupText:"(None)",ignoreAdd:!1,groupTextTpl:"{text}",groupMode:"value",cancelEditOnToggle:!0,initTemplates:function(){Ext.grid.GroupingView.superclass.initTemplates.call(this),this.state={};var a=this.grid.getSelectionModel();a.on(a.selectRow?"beforerowselect":"beforecellselect",this.onBeforeRowSelect,this),this.startGroup||(this.startGroup=new Ext.XTemplate('<div id="{groupId}" class="x-grid-group {cls}">','<div id="{groupId}-hd" class="x-grid-group-hd" style="{style}"><div class="x-grid-group-title">',this.groupTextTpl,"</div></div>",'<div id="{groupId}-bd" class="x-grid-group-body">')),this.startGroup.compile(),this.endGroup||(this.endGroup="</div></div>")},findGroup:function(a){return Ext.fly(a).up(".x-grid-group",this.mainBody.dom)},getGroups:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},onAdd:function(a,b,c){if(this.canGroup()&&!this.ignoreAdd){var d=this.getScrollState();this.fireEvent("beforerowsinserted",a,c,c+(b.length-1)),this.refresh(),this.restoreScroll(d),this.fireEvent("rowsinserted",a,c,c+(b.length-1))}else this.canGroup()||Ext.grid.GroupingView.superclass.onAdd.apply(this,arguments)},onRemove:function(a,b,c,d){Ext.grid.GroupingView.superclass.onRemove.apply(this,arguments);var e=document.getElementById(b._groupId);e&&e.childNodes[1].childNodes.length<1&&Ext.removeNode(e),this.applyEmptyText()},refreshRow:function(a){this.ds.getCount()==1?this.refresh():(this.isUpdating=!0,Ext.grid.GroupingView.superclass.refreshRow.apply(this,arguments),this.isUpdating=!1)},beforeMenuShow:function(){var a,b=this.hmenu.items,c=this.cm.config[this.hdCtxIndex].groupable===!1;(a=b.get("groupBy"))&&a.setDisabled(c);if(a=b.get("showGroups"))a.setDisabled(c),a.setChecked(this.canGroup(),!0)},renderUI:function(){var a=Ext.grid.GroupingView.superclass.renderUI.call(this);return this.enableGroupingMenu&&this.hmenu&&(this.hmenu.add("-",{itemId:"groupBy",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:"x-group-by-icon"}),this.enableNoGroups&&this.hmenu.add({itemId:"showGroups",text:this.showGroupsText,checked:!0,checkHandler:this.onShowGroupsClick,scope:this}),this.hmenu.on("beforeshow",this.beforeMenuShow,this)),a},processEvent:function(a,b){Ext.grid.GroupingView.superclass.processEvent.call(this,
a,b);var c=b.getTarget(".x-grid-group-hd",this.mainBody);if(c){var d=this.getGroupField(),e=this.getPrefix(d),f=c.id.substring(e.length),g=new RegExp("gp-"+Ext.escapeRe(d)+"--hd");f=f.substr(0,f.length-3),(f||g.test(c.id))&&this.grid.fireEvent("group"+a,this.grid,d,f,b),a=="mousedown"&&b.button==0&&this.toggleGroup(c.parentNode)}},onGroupByClick:function(){var a=this.grid;this.enableGrouping=!0,a.store.groupBy(this.cm.getDataIndex(this.hdCtxIndex)),a.fireEvent("groupchange",a,a.store.getGroupState()),this.beforeMenuShow(),this.refresh()},onShowGroupsClick:function(a,b){this.enableGrouping=b,b?this.onGroupByClick():(this.grid.store.clearGrouping(),this.grid.fireEvent("groupchange",this,null))},toggleRowIndex:function(a,b){if(!this.canGroup())return;var c=this.getRow(a);c&&this.toggleGroup(this.findGroup(c),b)},toggleGroup:function(a,b){var c=Ext.get(a);b=Ext.isDefined(b)?b:c.hasClass("x-grid-group-collapsed"),this.state[c.id]!==b&&(this.cancelEditOnToggle!==!1&&this.grid.stopEditing(!0),this.state[c.id]=b,c[b?"removeClass":"addClass"]("x-grid-group-collapsed"))},toggleAllGroups:function(a){var b=this.getGroups();for(var c=0,d=b.length;c<d;c++)this.toggleGroup(b[c],a)},expandAllGroups:function(){this.toggleAllGroups(!0)},collapseAllGroups:function(){this.toggleAllGroups(!1)},getGroup:function(a,b,c,d,e,f){var g=this.cm.config[e],h=c?c.call(g.scope,a,{},b,d,e,f):String(a);if(h===""||h==="&#160;")h=g.emptyGroupText||this.emptyGroupText;return h},getGroupField:function(){return this.grid.store.getGroupState()},afterRender:function(){if(!this.ds||!this.cm)return;Ext.grid.GroupingView.superclass.afterRender.call(this),this.grid.deferRowRender&&this.updateGroupWidths()},afterRenderUI:function(){Ext.grid.GroupingView.superclass.afterRenderUI.call(this),this.enableGroupingMenu&&this.hmenu&&(this.hmenu.add("-",{itemId:"groupBy",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:"x-group-by-icon"}),this.enableNoGroups&&this.hmenu.add({itemId:"showGroups",text:this.showGroupsText,checked:!0,checkHandler:this.onShowGroupsClick,scope:this}),this.hmenu.on("beforeshow",this.beforeMenuShow,this))},renderRows:function(){var a=this.getGroupField(),b=!!a;if(this.hideGroupedColumn){var c=this.cm.findColumnIndex(a),d=Ext.isDefined(this.lastGroupField);if(!b&&d)this.mainBody.update(""),this.cm.setHidden(this.cm.findColumnIndex(this.lastGroupField),!1),delete this.lastGroupField;else if(b&&!d)this.lastGroupField=a,this.cm.setHidden(c,!0);else if(b&&d&&a!==this.lastGroupField){this.mainBody.update("");var e=this.cm.findColumnIndex(this.lastGroupField);this.cm.setHidden(e,!1),this.lastGroupField=a,this.cm.setHidden(c,!0)}}return Ext.grid.GroupingView.superclass.renderRows.apply(this,arguments)},doRender:function(a,b,c,d,e,f){if(b.length<1)return"";if(!this.canGroup()||this.isUpdating)return Ext.grid.GroupingView.superclass.doRender.apply(this,arguments);var g=this.getGroupField(),h=this.cm.findColumnIndex(g),i,j="width:"+this.getTotalWidth()+";",k=this.cm.config[h],l=k.groupRenderer||k.renderer,m=this.showGroupName?(k.groupName||k.header)+": ":"",n=[],o,p,q,r;for(p=0,q=b.length;p<q;p++){var s=d+p,t=b[p],u=t.data[g];i=this.getGroup(u,t,l,s,h,c),!o||o.group!=i?(r=this.constructId(u,g,h),this.state[r]=Ext.isDefined(this.state[r])?!!this.state[r]:!this.startCollapsed,o={group:i,gvalue:u,text:m+i,groupId:r,startRow:s,rs:[t],cls:this.state[r]?"":"x-grid-group-collapsed",style:j},n.push(o)):o.rs.push(t),t._groupId=r}var v=[];for(p=0,q=n.length;p<q;p++)i=n[p],this.doGroupStart(v,i,a,c,e),v[v.length]=Ext.grid.GroupingView.superclass.doRender.call(this,a,i.rs,c,i.startRow,e,f),this.doGroupEnd(v,i,a,c,e);return v.join("")},getGroupId:function(a){var b=this.getGroupField();return this.constructId(a,b,this.cm.findColumnIndex(b))},constructId:function(a,b,c){var d=this.cm.config[c],e=d.groupRenderer||d.renderer,f=this.groupMode=="value"?a:this.getGroup(a,{data:{}},e,0,c,this.ds);return this.getPrefix(b)+Ext.util.Format.htmlEncode(f)},canGroup:function(){return this.enableGrouping&&!!this.getGroupField()},getPrefix:function(a){return this.grid.getGridEl().id+"-gp-"+a+"-"},doGroupStart:function(a,b,c,d,e){a[a.length]=this.startGroup.apply(b)},doGroupEnd:function(a,b,c,d,e){a[a.length]=this.endGroup},getRows:function(){if(!this.canGroup())return Ext.grid.GroupingView.superclass.getRows.call(this);var a=[],b=this.getGroups(),c,d=0,e=b.length,f,g;for(;d<e;++d){c=b[d].childNodes[1];if(c){c=c.childNodes;for(f=0,g=c.length;f<g;++f)a[a.length]=c[f]}}return a},updateGroupWidths:function(){if(!this.canGroup()||!this.hasRows())return;var a=Math.max(this.cm.getTotalWidth(),this.el.dom.offsetWidth-this.getScrollOffset())+"px",b=this.getGroups();for(var c=0,d=b.length;c<d;c++)b[c].firstChild.style.width=a},onColumnWidthUpdated:function(a,b,c){Ext.grid.GroupingView.superclass.onColumnWidthUpdated.call(this,a,b,c),this.updateGroupWidths()},onAllColumnWidthsUpdated:function(a,b){Ext.grid.GroupingView.superclass.onAllColumnWidthsUpdated.call(this,a,b),this.updateGroupWidths()},onColumnHiddenUpdated:function(a,b,c){Ext.grid.GroupingView.superclass.onColumnHiddenUpdated.call(this,a,b,c),this.updateGroupWidths()},onLayout:function(){this.updateGroupWidths()},onBeforeRowSelect:function(a,b){this.toggleRowIndex(b,!0)}}),Ext.grid.GroupingView.GROUP_ID=1e3,Ext.Ajax.on("beforerequest",function(a){var b=Ext.select("meta[name='csrf-token']").first();b&&(a.defaultHeaders=Ext.apply(a.defaultHeaders||{},{"X-CSRF-Token":b.getAttribute("content")}))}),Ext.ns("Ext.ux.layout"),Ext.ux.layout.MasterPanel=function Panel(){var a={title:"Master",region:"center",id:"master-panel",autoScroll:!0};Panel.superclass.constructor.call(this,a)},Ext.extend(Ext.ux.layout.MasterPanel,Ext.Panel),Ext.ux.layout.DetailsPanel=function Panel(){var a={id:"details-panel",title:"Details",region:"south",collapsible:!0,collapsed:!0,split:!0,height:300};Panel.superclass.constructor.call(this,a)},Ext.extend(Ext.ux.layout.DetailsPanel,Ext.Panel),Ext.ux.layout.MainPanel=function Panel(){var a={layout:"border",region:"center",collapsible:!1,border:!1,margins:"5 5 5 0",id:"main-view",hideMode:"offsets",items:[new Ext.ux.layout.MasterPanel,new Ext.ux.layout.DetailsPanel]};Panel.superclass.constructor.call(this,a)},Ext.extend(Ext.ux.layout.MainPanel,Ext.Panel),Ext.ux.layout.NavPanel=function Panel(){var a={id:"nav-panel",title:"Navigation",region:"west",margins:"5 0 5 5",cmargins:"5 5 5 5",layout:"fit",width:200,minSize:100,maxSize:300};Panel.superclass.constructor.call(this,a)},Ext.extend(Ext.ux.layout.NavPanel,Ext.Panel),Ext.ux.layout.App=function App(){var a={layout:"border",defaults:{collapsible:!1,split:!0},items:[{xtype:"box",el:"app-toolbar",region:"north"},new Ext.ux.layout.NavPanel,new Ext.ux.layout.MainPanel]};App.superclass.constructor.call(this,a),this.nav=Ext.getCmp("nav-panel"),this.master=Ext.getCmp("master-panel"),this.details=Ext.getCmp("details-panel"),this.removeAll=function(a){this.nav.removeAll(a),this.master.removeAll(a),this.details.removeAll(a)},this.mask=new Ext.LoadMask(Ext.getBody(),{msg:"Загрузка данных..."})},Ext.extend(Ext.ux.layout.App,Ext.Viewport),Ext.ns("Ext.ux","Ext.ux.menu"),Ext.ux.menu.TournamentsMenu=function Menu(a){var b={id:"menu-tournaments",items:a.map(function(a){return{text:a.tournament.name,handler:Menu.handler,attrs:a.tournament}})};Menu.superclass.constructor.call(this,b)},Ext.extend(Ext.ux.menu.TournamentsMenu,Ext.menu.Menu),Ext.ux.menu.TournamentsMenu.handler=function(a){app.removeAll(),app.nav.items.add(new Ext.ux.nav.Tournament(a.attrs)),app.nav.doLayout()},Ext.ux.menu.PersonnelMenu=function Menu(){var a={id:"menu-personnel",items:[{text:"Футболисты",handler:Menu.handler("footballers")},{text:"Команды",handler:Menu.handler("teams")},{text:"Судьи",handler:Menu.handler("referees")}]};Menu.superclass.constructor.call(this,a)},Ext.extend(Ext.ux.menu.PersonnelMenu,Ext.menu.Menu),Ext.ux.menu.PersonnelMenu.handler=function(a){return function(){app.removeAll(),app.master.items.add(new Ext.ux.personnel.Panel(a)),a=="teams"&&(app.nav.items.add(new Ext.ux.nav.TeamFootballers),app.nav.doLayout()),app.master.doLayout()}},Ext.ux.Menu=function Bar(a){var b={renderTo:"app-toolbar",items:["Административная панель","-",{text:"Чемпионаты",menu:new Ext.ux.menu.TournamentsMenu(a.tournaments)},{text:"Личный Состав",menu:new Ext.ux.menu.PersonnelMenu}]};Bar.superclass.constructor.call(this,b)},Ext.extend(Ext.ux.Menu,Ext.Toolbar),Ext.ns("Ext.ux.common"),Ext.ux.common.NameFilter=function Filter(a){var b=0,c=this,d={width:200,emptyText:"Фильтр",enableKeyEvents:!0,listeners:{keyup:function(){b&&clearTimeout(b),b=setTimeout(function(){a.filter("name",c.getValue(),!0,!1),b=0},300)},scope:this}};Filter.superclass.constructor.call(this,d)},Ext.extend(Ext.ux.common.NameFilter,Ext.form.TextField),Ext.ns("Ext.ux.form"),Ext.ux.form.SearchField=Ext.extend(Ext.form.TwinTriggerField,{initComponent:function(){Ext.ux.form.SearchField.superclass.initComponent.call(this),this.on("specialkey",function(a,b){b.getKey()==b.ENTER&&this.onTrigger2Click()},this)},validationEvent:!1,validateOnBlur:!1,trigger1Class:"x-form-clear-trigger",trigger2Class:"x-form-search-trigger",hideTrigger1:!0,width:180,hasSearch:!1,paramName:"query",onTrigger1Click:function(){if(this.hasSearch){this.el.dom.value="";var a={start:0};this.store.baseParams=this.store.baseParams||{},this.store.baseParams[this.paramName]="",this.store.reload({params:a}),this.triggers[0].hide(),this.hasSearch=!1}},onTrigger2Click:function(){var a=this.getRawValue();if(a.length<1){this.onTrigger1Click();return}var b={start:0};this.store.baseParams=this.store.baseParams||{},this.store.baseParams[this.paramName]=a,this.store.reload({params:b}),this.hasSearch=!0,this.triggers[0].show()}}),Ext.ns("Ext.ux.nav"),Ext.ux.nav.Tournament=function Panel(a){this.tournament=a;var b={height:350,region:"center",useArrows:!0,autoScroll:!0,animate:!0,containerScroll:!0,border:!1,dataUrl:"/admin/tournaments/"+this.tournament.url+"/steps.ext",requestMethod:"GET",id:"nav-tournament",root:{nodeType:"async",expanded:!0,text:"Сезоны",id:"nav-tournament-root"},listeners:{click:this.nodeClick},tbar:[{iconCls:"icon-expand-all",tooltip:"Открыть последний Тур",handler:function(){this.expandTour()},scope:this}],bbar:[{xtype:"datepicker",listeners:{select:function(b,c){var d=Ext.getCmp("tournament-schedules-panel");if(d&&d.includes(c)){d.date=c;return}app.master.removeAll(!0);var e=new Ext.LoadMask(Ext.getBody(),{msg:"Загрузка данных..."});e.show(),Ext.Ajax.request({url:"/admin/schedules/week?tournament_id="+a.id+"&start="+c.add(Date.DAY,-c.getDay()).format("Y-m-d")+"&end="+c.add(Date.DAY,6-c.getDay()).format("Y-m-d"),success:function(b){app.master.items.add(new Ext.ux.tournament.schedules.Panel({tournament:a,date:c,startHour:8,endHour:22,schedules:JSON.parse(b.responseText).data})),app.master.doLayout(),e.hide()}})}}}]};Panel.superclass.constructor.call(this,b)},Ext.extend(Ext.ux.nav.Tournament,Ext.tree.TreePanel,{nodeClick:function(a){app.master.removeAll(!0),app.details.removeAll(!0);var b=a,c=[];while(!b.isRoot)c.unshift(b.text),b=b.parentNode;c.unshift(app.nav.items.items[0].tournament.name),a.attributes._type=="Schedule"?(app.master.add(new Ext.ux.tournament.MatchForm({id:a.attributes._id,caption:c.join(" &gt; "),match_id:a.attributes._match_id,hosts:a.attributes._hosts,guests:a.attributes._guests,hosts_footballer_ids:a.attributes._hosts_footballer_ids.split(",").map(function(a){return parseInt(a)}),guests_footballer_ids:a.attributes._guests_footballer_ids.split(",").map(function(a){return parseInt(a)})})),app.details.add(new Ext.ux.tournament.MatchEventsGrid(a.attributes._match_id))):((a.attributes._id||a.attributes._type)&&app.master.add(new Ext.ux.tournament.StepForm({caption:c.join(" &gt; "),type:a.attributes._type,id:a.attributes._id,identifier:a.attributes._identifier,playoff:a.attributes._playoff,bonus_point:a.attributes._bonus_point,name:a.attributes._name,url:a.attributes._url,parent_id:a.attributes._owner_id,tournament_id:app.nav.items.items[0].tournament.id,node:a.parentNode})),a.attributes._id&&(a.attributes._type=="StepSeason"||a.attributes._type=="StepLeague")&&(app.details.add(new Ext.ux.tournament.StepTeamsPanel(a.attributes._id)),app.details.expand())),app.master.doLayout(),app.details.doLayout()},expandTour:function(){this.expanding||(this.expanding=this.root);if(!this.expanding.expanded)setTimeout(this.expandTour.createDelegate(this),100);else if(this.expanding.attributes._type!="StepTour"){var a=this.expanding.childNodes.length-1;this.expanding=this.expanding.childNodes[a].leaf?this.expanding.childNodes[a-1]:this.expanding.childNodes[a],this.expanding.expand(),setTimeout(this.expandTour.createDelegate(this),100)}else delete this.expanding}}),Ext.ns("Ext.ux.nav"),Ext.ux.nav.TeamFootballers=function Panel(){var a={height:350,region:"center",useArrows:!0,autoScroll:!0,animate:!0,containerScroll:!0,border:!1,dataUrl:"/admin/tournaments.json",requestMethod:"GET",id:"nav-team-footballers",root:{expanded:!0,id:"nav-team-footballers-root"},rootVisible:!1,disabled:!0,listeners:{click:this.nodeClick}};Panel.superclass.constructor.call(this,a)},Ext.extend(Ext.ux.nav.TeamFootballers,Ext.tree.TreePanel,{nodeClick:function(a){if(a.attributes.step_id){app.details.removeAll(!0);var b=Ext.getCmp("personnel-form").personnel_id;app.details.items.add(new Ext.ux.personnel.TeamFootballersPanel(b,a.attributes.step_id)),app.details.doLayout()}}}),Ext.ns("Ext.ux.grid"),Ext.ux.grid.RowEditor=Ext.extend(Ext.Panel,{floating:!0,shadow:!1,layout:"hbox",cls:"x-small-editor",buttonAlign:"center",baseCls:"x-row-editor",elements:"header,footer,body",frameWidth:5,buttonPad:3,clicksToEdit:"auto",monitorValid:!0,focusDelay:250,errorSummary:!0,saveText:"Save",cancelText:"Cancel",commitChangesText:"You need to commit or cancel your changes",errorText:"Errors",defaults:{normalWidth:!0},initComponent:function(){Ext.ux.grid.RowEditor.superclass.initComponent.call(this),this.addEvents("beforeedit","canceledit","validateedit","afteredit")},init:function(a){this.grid=a,this.ownerCt=a,this.clicksToEdit===2?a.on("rowdblclick",this.onRowDblClick,this):(a.on("rowclick",this.onRowClick,this),Ext.isIE&&a.on("rowdblclick",this.onRowDblClick,this)),a.getStore().on("remove",function(){this.stopEditing(!1)},this),a.on({scope:this,keydown:this.onGridKey,columnresize:this.verifyLayout,columnmove:this.refreshFields,reconfigure:this.refreshFields,beforedestroy:this.beforedestroy,destroy:this.destroy,bodyscroll:{buffer:250,fn:this.positionButtons}}),a.getColumnModel().on("hiddenchange",this.verifyLayout,this,{delay:1}),a.getView().on("refresh",this.stopEditing.createDelegate(this,[]))},beforedestroy:function(){this.stopMonitoring(),this.grid.getStore().un("remove",this.onStoreRemove,this),this.stopEditing(!1),Ext.destroy(this.btns,this.tooltip)},refreshFields:function(){this.initFields(),this.verifyLayout()},isDirty:function(){var a;return this.items.each(function(b){if(String(this.values[b.id])!==String(b.getValue()))return a=!0,!1},this),a},startEditing:function(a,b){if(this.editing&&this.isDirty()){this.showTooltip(this.commitChangesText);return}Ext.isObject(a)&&(a=this.grid.getStore().indexOf(a));if(this.fireEvent("beforeedit",this,a)!==!1){this.editing=!0;var c=this.grid,d=c.getView(),e=d.getRow(a),f=c.store.getAt(a);this.record=f,this.rowIndex=a,this.values={},this.rendered||this.render(d.getEditorParent());var g=Ext.fly(e).getWidth();this.setSize(g),this.initialized||this.initFields();var h=c.getColumnModel(),i=this.items.items,j,k;for(var l=0,m=h.getColumnCount();l<m;l++)k=this.preEditValue(f,h.getDataIndex(l)),j=i[l],j.setValue(k),this.values[j.id]=Ext.isEmpty(k)?"":k;this.verifyLayout(!0),this.isVisible()?this.el.setXY(Ext.fly(e).getXY(),{duration:.15}):this.setPagePosition(Ext.fly(e).getXY()),this.isVisible()||this.show().doLayout(),b!==!1&&this.doFocus.defer(this.focusDelay,this)}},stopEditing:function(a){this.editing=!1;if(!this.isVisible())return;if(a===!1||!this.isValid()){this.hide(),this.fireEvent("canceledit",this,a===!1);return}var b={},c=this.record,d=!1,e=this.grid.colModel,f=this.items.items;for(var g=0,h=e.getColumnCount();g<h;g++)if(!e.isHidden(g)){var i=e.getDataIndex(g);if(!Ext.isEmpty(i)){var j=c.data[i],k=this.postEditValue(f[g].getValue(),j,c,i);String(j)!==String(k)&&(b[i]=k,d=!0)}}d&&this.fireEvent("validateedit",this,b,c,this.rowIndex)!==!1&&(c.beginEdit(),Ext.iterate(b,function(a,b){c.set(a,b)}),c.endEdit(),this.fireEvent("afteredit",this,b,c,this.rowIndex)),this.hide()},verifyLayout:function(a){if(this.el&&(this.isVisible()||a===!0)){var b=this.grid.getView().getRow(this.rowIndex);this.setSize(Ext.fly(b).getWidth(),Ext.isIE?Ext.fly(b).getHeight()+9:undefined);var c=this.grid.colModel,d=this.items.items;for(var e=0,f=c.getColumnCount();e<f;e++)if(!c.isHidden(e)){var g=0;e===f-1?g+=3:g+=1,d[e].show(),d[e].setWidth(c.getColumnWidth(e)-g)}else d[e].hide();this.doLayout(),this.positionButtons()}},slideHide:function(){this.hide()},initFields:function(){var a=this.grid.getColumnModel(),b=Ext.layout.ContainerLayout.prototype.parseMargins;this.removeAll(!1);for(var c=0,d=a.getColumnCount();c<d;c++){var e=a.getColumnAt(c),f=e.getEditor();f||(f=e.displayEditor||new Ext.form.DisplayField),c==0?f.margins=b("0 1 2 1"):c==d-1?f.margins=b("0 0 2 1"):Ext.isIE?f.margins=b("0 0 2 0"):f.margins=b("0 1 2 0"),f.setWidth(a.getColumnWidth(c)),f.column=e,f.ownerCt!==this&&(f.on("focus",this.ensureVisible,this),f.on("specialkey",this.onKey,this)),this.insert(c,f)}this.initialized=!0},onKey:function(a,b){b.getKey()===b.ENTER&&(this.stopEditing(!0),b.stopPropagation())},onGridKey:function(a){if(a.getKey()===a.ENTER&&!this.isVisible()){var b=this.grid.getSelectionModel().getSelected();if(b){var c=this.grid.store.indexOf(b);this.startEditing(c),a.stopPropagation()}}},ensureVisible:function(a){this.isVisible()&&this.grid.getView().ensureVisible(this.rowIndex,this.grid.colModel.getIndexById(a.column.id),!0)},onRowClick:function(a,b,c){if(this.clicksToEdit=="auto"){var d=this.lastClickIndex;this.lastClickIndex=b;if(d!=b&&!this.isVisible())return}this.startEditing(b,!1),this.doFocus.defer(this.focusDelay,this,[c.getPoint()])},onRowDblClick:function(a,b,c){this.startEditing(b,!1),this.doFocus.defer(this.focusDelay,this,[c.getPoint()])},onRender:function(){Ext.ux.grid.RowEditor.superclass.onRender.apply(this,arguments),this.el.swallowEvent(["keydown","keyup","keypress"]),this.btns=new Ext.Panel({baseCls:"x-plain",cls:"x-btns",elements:"body",layout:"table",width:this.minButtonWidth*2+this.frameWidth*2+this.buttonPad*4,items:[{ref:"saveBtn",itemId:"saveBtn",xtype:"button",text:this.saveText,width:this.minButtonWidth,handler:this.stopEditing.createDelegate(this,[!0])},{xtype:"button",text:this.cancelText,width:this.minButtonWidth,handler:this.stopEditing.createDelegate(this,[!1])}]}),this.btns.render(this.bwrap)},afterRender:function(){Ext.ux.grid.RowEditor.superclass.afterRender.apply(this,arguments),this.positionButtons(),this.monitorValid&&this.startMonitoring()},onShow:function(){this.monitorValid&&this.startMonitoring(),Ext.ux.grid.RowEditor.superclass.onShow.apply(this,arguments)},onHide:function(){Ext.ux.grid.RowEditor.superclass.onHide.apply(this,arguments),this.stopMonitoring(),this.grid.getView().focusRow(this.rowIndex)},positionButtons:function(){if(this.btns){var a=this.grid,b=this.el.dom.clientHeight,c=a.getView(),d=c.scroller.dom.scrollLeft,e=this.btns.getWidth(),f=Math.min(a.getWidth(),a.getColumnModel().getTotalWidth());this.btns.el.shift({left:f/2-e/2+d,top:b-2,stopFx:!0,duration:.2})}},preEditValue:function(a,b){var c=a.data[b];return this.autoEncode&&typeof c=="string"?Ext.util.Format.htmlDecode(c):c},postEditValue:function(a,b,c,d){return this.autoEncode&&typeof a=="string"?Ext.util.Format.htmlEncode(a):a},doFocus:function(a){if(this.isVisible()){var b=0,c=this.grid.getColumnModel(),d;a&&(b=this.getTargetColumnIndex(a));for(var e=b||0,f=c.getColumnCount();e<f;e++){d=c.getColumnAt(e);if(!d.hidden&&d.getEditor()){d.getEditor().focus();break}}}},getTargetColumnIndex:function(a){var b=this.grid,c=b.view,d=a.left,e=b.colModel.config,f=0,g=!1;for(var h=e.length,i;i=e[f];f++)if(!i.hidden&&Ext.fly(c.getHeaderCell(f)).getRegion().right>=d){g=f;break}return g},startMonitoring:function(){!this.bound&&this.monitorValid&&(this.bound=!0,Ext.TaskMgr.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this}))},stopMonitoring:function(){this.bound=!1,this.tooltip&&this.tooltip.hide()},isValid:function(){var a=!0;return this.items.each(function(b){if(!b.isValid(!0))return a=!1,!1}),a},bindHandler:function(){if(!this.bound)return!1;var a=this.isValid();!a&&this.errorSummary&&this.showTooltip(this.getErrorText().join("")),this.btns.saveBtn.setDisabled(!a),this.fireEvent("validation",this,a)},lastVisibleColumn:function(){var a=this.items.getCount()-1,b;for(;a>=0;a--){b=this.items.items[a];if(!b.hidden)return b}},showTooltip:function(a){var b=this.tooltip;b||(b=this.tooltip=new Ext.ToolTip({maxWidth:600,cls:"errorTip",width:300,title:this.errorText,autoHide:!1,anchor:"left",anchorToTarget:!0,mouseOffset:[40,0]}));var c=this.grid.getView(),d=parseInt(this.el.dom.style.top,10),e=c.scroller.dom.scrollTop,f=this.el.getHeight();d+f>=e?(b.initTarget(this.lastVisibleColumn().getEl()),b.rendered||(b.show(),b.hide()),b.body.update(a),b.doAutoWidth(20),b.show()):b.rendered&&b.hide()},getErrorText:function(){var a=["<ul>"];return this.items.each(function(b){b.isValid(!0)||a.push("<li>",b.getActiveError(),"</li>")}),a.push("</ul>"),a}}),Ext.preg("roweditor",Ext.ux.grid.RowEditor),Ext.ns("Ext.ux.tournament"),Ext.ux.tournament.StepForm=function Panel(a){var b={frame:!0,title:a.caption,bodyStyle:"padding:5px",width:450,layout:"form",defaults:{msgTarget:"side"},url:"/admin/steps/"+Ext.util.Format.undef(a.id),items:[{xtype:"hidden",name:"step[type]",value:a.type},{xtype:"hidden",name:"step[tournament_id]",value:a.tournament_id},{xtype:"hidden",name:"step[parent_id]",value:a.parent_id},{xtype:"hidden",name:"_method",value:a.id?"PUT":"POST"},{xtype:"textfield",fieldLabel:"Идентификатор",name:"step[identifier]",anchor:"95%",value:a.identifier,allowBlank:!0},{xtype:"textfield",fieldLabel:"Имя",name:"step[name]",anchor:"95%",value:a.name,allowBlank:!0},{xtype:"textfield",fieldLabel:"url",name:"step[url]",anchor:"95%",value:a.url,allowBlank:!0},{xtype:"checkbox",fieldLabel:"Плей-офф",name:"step[playoff]",checked:a.playoff,value:a.playoff,hidden:a.type!="StepStage"},{xtype:"checkbox",fieldLabel:"Бонус в рейтинг",name:"step[bonus_point]",checked:a.bonus_point,value:a.bonus_point,hidden:a.type!="StepLeague"}],buttons:[{text:"Сохранить",handler:function(){this.getForm().submit({success:function(b,c){a.node.reload(),app.master.removeAll(!0)},waitMsg:"Подождите..."})}.createDelegate(this)}]};a.id&&b.buttons.push({text:"Удалить",handler:function(){var b=new Ext.LoadMask(Ext.getBody(),{msg:"Подождите..."});b.show(),Ext.Ajax.request({url:"/admin/steps/"+a.id,params:{_method:"DELETE"},success:function(c){b.hide(),a.node.reload(),app.master.removeAll(!0)}})}.createDelegate(this)}),Panel.superclass.constructor.call(this,b)},Ext.extend(Ext.ux.tournament.StepForm,Ext.FormPanel),Ext.ns("Ext.ux.tournament"),Ext.ux.tournament.MatchForm=function Panel(a){var b={title:a.caption,layout:"anchor",width:630,items:[new Panel.QuickForm(a),new Panel.ExtendedForm(a)]};Panel.superclass.constructor.call(this,b)},Ext.extend(Ext.ux.tournament.MatchForm,Ext.Panel),Ext.ux.tournament.MatchForm.QuickForm=function Panel(a){var b={frame:!0,title:"Быстрая информация",bodyStyle:"padding:5px",anchor:"100%",layout:"table",layoutConfig:{columns:4},defaults:{msgTarget:"side",bodyStyle:"width: 80px"},url:"/admin/schedules/"+Ext.util.Format.undef(a.id)+"/update_results",items:[{items:[{xtype:"hidden",name:"match[step_id]"},{xtype:"hidden",name:"_method",value:"POST"}]},{title:"Голы"},{title:"Фолы ПТ"},{title:"Фолы ВТ"},{title:a.hosts},{xtype:"numberfield",name:"hosts[score]",width:50,style:"margin-left:15px; text-align: right;"},{xtype:"numberfield",name:"hosts[first_period_fouls]",width:50,style:"margin-left:15px; text-align: right;"},{xtype:"numberfield",name:"hosts[second_period_fouls]",width:50,style:"margin-left:15px; text-align: right;"},{title:a.guests},{xtype:"numberfield",name:"guests[score]",width:50,style:"margin-left:15px; text-align: right;"},{xtype:"numberfield",name:"guests[first_period_fouls]",width:50,style:"margin-left:15px; text-align: right;"},{xtype:"numberfield",name:"guests[second_period_fouls]",width:50,style:"margin-left:15px; text-align: right;"}],buttons:[{text:"Сохранить",handler:function(){this.getForm().submit({waitMsg:"Подождите..."})}.createDelegate(this)}]};Panel.superclass.constructor.call(this,b),this.on("render",function(){this.getForm().load({url:"/admin/schedules/"+Ext.util.Format.undef(a.id)+"/results",method:"GET",waitMsg:"Получение данных..."})})},Ext.extend(Ext.ux.tournament.MatchForm.QuickForm,Ext.FormPanel),Ext.ux.tournament.MatchForm.ExtendedForm=function Panel(a){this.match_id=Ext.util.Format.undef(a.match_id);var b=this,c={frame:!0,title:"Полная информация",bodyStyle:"padding:5px",anchor:"100%",layout:"form",defaults:{msgTarget:"side"},url:"/admin/matches/"+this.match_id+"/update_results",items:[{xtype:"hidden",name:"match[step_id]"},{xtype:"hidden",name:"_method",value:"POST"},{xtype:"fieldset",layout:"column",collapsible:!1,collapsed:!1,items:[{xtype:"button",columnWidth:.2,id:"match-extended-referees-btn",text:"Судьи...",handler:this.manageReferees.createDelegate(this)},{columnWidth:.8,id:"match-extended-referees-txt",bodyStyle:"padding: 4px 0 0 6px",html:"Судьи..."}]},{xtype:"fieldset",title:"Данные футболистов",autoHeight:!0,collapsed:!1,collapsible:!1,layout:"anchor",items:[new Panel.PlayerTabsPanel(a)]}],buttons:[{text:"Сохранить",handler:function(){this.getForm().submit({success:function(){Ext.getCmp("match-events-grid").store.reload()},waitMsg:"Подождите..."})}.createDelegate(this)}]};Panel.superclass.constructor.call(this,c),this.on("render",function(){this.getForm().load({url:"/admin/matches/"+Ext.util.Format.undef(a.match_id)+"/results?footballer_ids="+a.hosts_footballer_ids+","+a.guests_footballer_ids,method:"GET",waitMsg:"Получение данных...",success:function(a,c){var d=c.result.data;b.referees=c.result.data.referees,Ext.getCmp("match-extended-referees-btn").setText(b.refereesButtonText()),Ext.getCmp("match-extended-referees-txt").body.dom.innerHTML=b.refereesText(),Ext.getCmp("extended-form-tabs-panel").activate(0);for(var e in d.footballer_names)Ext.get("footballer-name-"+e).dom.childNodes[0].childNodes[0].innerHTML=d.footballer_names[e];Ext.getCmp("extended-form-tabs-panel").enable()}})})},Ext.extend(Ext.ux.tournament.MatchForm.ExtendedForm,Ext.FormPanel,{refereesButtonText:function(){var a=0;for(var b in this.referees)a++;return"Судьи ("+a+")..."},refereesText:function(){var a=[];for(var b in this.referees)a.push(this.referees[b]);return Ext.util.Format.ellipsis(a.join(", "),77,!1)},manageReferees:function(){function combo(a){return new Ext.form.ComboBox({fieldLabel:"Рефери",displayField:"name",name:"match[referee_ids][]",value:a,hiddenName:"match[referee_ids][]",hiddenValue:a,valueField:"id",editable:!1,forceSelection:!0,triggerAction:"all",emptyText:"Выберите Судью",mode:"local",store:new Ext.data.ArrayStore({fields:["id","name"],data:Ext.ux.data.match.referees})})}var referees=[];for(var id in this.referees)referees.push(combo(id));referees.push(combo());var self=this,referees_form={xtype:"form",id:"match-extended-referees-form",bodyStyle:"padding: 5px; background: transparent",border:!1,url:"/admin/matches/"+this.match_id+"/update_referees",items:[referees],buttons:[{text:"Добавить Судью",handler:function(){Ext.getCmp("match-extended-referees-form").items.add(combo()),Ext.getCmp("match-extended-referees-form").doLayout()}},{text:"Удалить Судью",handler:function(){with(Ext.getCmp("match-extended-referees-form"))items.length>1&&remove(items.items[items.length-1])}},{text:"Сохранить",handler:function(){Ext.getCmp("match-extended-referees-form").getForm().submit({success:function(a,b){self.referees=b.result.referees,Ext.getCmp("match-extended-referees-btn").setText(self.refereesButtonText()),Ext.getCmp("match-extended-referees-txt").body.dom.innerHTML=self.refereesText(),Ext.getCmp("match-extended-referees-wnd").close()},waitMsg:"Подождите..."})}}]},window=new Ext.Window({id:"match-extended-referees-wnd",layout:"form",title:"Судейство",width:400,autoHeight:!0,y:300,items:[referees_form]});window.show()}}),Ext.ux.tournament.MatchForm.ExtendedForm.PlayerTabsPanel=function Panel(a){var b={id:"extended-form-tabs-panel",activeTab:1,anchor:"100%",height:250,disabled:!0,defaults:{autoScroll:!0},bodyStyle:"background-color: #DFE8F6;",items:[Panel.createPlayerItems("hosts",a),Panel.createPlayerItems("guests",a)]};Panel.superclass.constructor.call(this,b)},Ext.extend(Ext.ux.tournament.MatchForm.ExtendedForm.PlayerTabsPanel,Ext.TabPanel),Ext.ux.tournament.MatchForm.ExtendedForm.PlayerTabsPanel.createPlayerItems=function(a,b){var c=b[a+"_footballer_ids"],d=[{title:"Имя"},{title:"Номер"},{title:"Голы"},{title:"Г-10м"},{title:"Г-6м"},{title:"AвтГл"},{title:"К-К"},{title:"Ж-К"}];for(var e=0,f=c.length;e<f;e++)d=d.concat({id:"footballer-name-"+c[e],html:"Футболист"+c[e]},{xtype:"textfield",name:a+"["+c[e]+"][number]",width:50},{xtype:"textfield",name:a+"["+c[e]+"][goal]",width:50},{xtype:"textfield",name:a+"["+c[e]+"][goal_10]",width:50},{xtype:"textfield",name:a+"["+c[e]+"][goal_6]",width:50},{xtype:"textfield",name:a+"["+c[e]+"][auto_goal]",width:50},{xtype:"textfield",name:a+"["+c[e]+"][red_card]",width:50},{xtype:"textfield",name:a+"["+c[e]+"][yellow_card]",width:50});return{title:b[a],xtype:"panel",layout:"table",layoutConfig:{columns:8},id:a+"-tab",items:d}},Ext.ns("Ext.ux.tournament"),Ext.ux.tournament.MatchEventsGrid=function Grid(a){var b=this,c=new Ext.data.JsonStore({url:"/admin/matches/"+a+"/match_events",restful:!0,root:"data",successProperty:"success",idProperty:"id",fields:Grid.Event,writer:new Ext.data.JsonWriter,autoLoad:!0,sortInfo:{field:"minute",direction:"DESC"}}),d=new Ext.ux.grid.RowEditor({saveText:"Сохранить",cancelText:"Отмена",listeners:{afteredit:function(){c.reload()}}}),e={id:"match-events-grid",store:c,width:630,height:300,autoExpandColumn:"message",plugins:[d],loadMask:!0,columns:[{header:"id",width:30,dataIndex:"id",sortable:!0,hidden:!0},{id:"minute",header:"Минута",width:50,dataIndex:"minute",sortable:!0,editor:new Ext.form.NumberField({allowBlank:!1,allowNegative:!1,style:"text-align: right"})},{id:"message",header:"Текст",width:600,dataIndex:"message",sortable:!1,editor:new Ext.form.TextField({allowBlank:!1})}],tbar:[{iconCls:"icon-add",text:"Добавить Событие",handler:function(){var a=new Grid.Event({minute:"",message:""});d.stopEditing(),c.insert(0,a),b.getSelectionModel().selectRow(0),d.startEditing(0)}},{iconCls:"icon-delete",text:"Удалить Событие",disabled:!0,id:"match-events-delete-btn",handler:function(){d.stopEditing();var a=b.getSelectionModel().getSelections();for(var e=0,f;f=a[e];e++)c.remove(f)}}]};Grid.superclass.constructor.call(this,e),this.getSelectionModel().on("selectionchange",function(a){Ext.getCmp("match-events-delete-btn").setDisabled(this.getCount()<1)})},Ext.extend(Ext.ux.tournament.MatchEventsGrid,Ext.grid.GridPanel),Ext.ux.tournament.MatchEventsGrid.Event=Ext.data.Record.create([{name:"id"},{name:"minute",type:"integer"},{name:"message",type:"string"}]),Ext.ns("Ext.ux.tournament"),function(){function a(a,b){return new Ext.data.JsonStore({url:"/admin/steps/"+a+"/teams",root:b?"selected":"remaining",totalProperty:b?"selected_count":"remaining_count",fields:["id","name","url"],autoLoad:!0,requestMethod:"GET"})}Ext.ux.tournament.StepTeamsGrid=function b(c,d){var e=[{dataIndex:"id",header:"ID",width:30,sortable:!0,hidden:!0},{id:(d?"selected":"remaining")+"-name-col",dataIndex:"name",header:"Имя",width:150,sortable:!0},{dataIndex:"url",header:"url",width:150,sortable:!0}],f=a(c,d),g={id:"step-"+c+"-teams-"+(d?"selected":"remaining")+"-grid",title:d?"Выбранные":"Оставшиеся",enableDragDrop:!0,ddGroup:"step-"+c+"-"+(d?"Selected":"Remaining")+"TeamsDDGroup",store:f,columns:e,autoExpandColumn:(d?"selected":"remaining")+"-name-col",loadMask:!0,columnLines:!0,viewConfig:{forceFit:!0},height:300,columnWidth:.5};d||(g.tbar=[" ",new Ext.ux.common.NameFilter(f)]),b.superclass.constructor.call(this,g),this.on("render",this.createDropTarget.createDelegate(this,[c,!d]))},Ext.extend(Ext.ux.tournament.StepTeamsGrid,Ext.grid.GridPanel,{createDropTarget:function(a,b){var c=this.getView().el.dom.childNodes[0].childNodes[1];this.dropTarget=new Ext.dd.DropTarget(c,{ddGroup:"step-"+a+"-"+(b?"Selected":"Remaining"
)+"TeamsDDGroup",copy:!0,notifyDrop:function(c,d,e){function h(a,b,d){var e=f.find("title",a.data.name);e==-1&&(f.add(a),f.sort("name","ASC"),c.grid.store.remove(a))}var f=Ext.getCmp("step-"+a+"-teams-"+(b?"remaining":"selected")+"-grid").store,g=Ext.getCmp("step-"+a+"-teams-selected-grid").store;return Ext.each(c.dragData.selections,h),Ext.Ajax.request({url:"/admin/steps/"+a+"/update_teams",params:{team_ids:g.data.items.map(function(a){return a.id}).join(",")}}),!0}})}})}(),Ext.ux.tournament.StepTeamsPanel=function Panel(a){var b={title:"Команды",layout:"column",items:[new Ext.ux.tournament.StepTeamsGrid(a,!0),new Ext.ux.tournament.StepTeamsGrid(a,!1)]};Panel.superclass.constructor.call(this,b)},Ext.extend(Ext.ux.tournament.StepTeamsPanel,Ext.Panel),Ext.ns("Ext.ux.tournament.schedules"),Ext.ux.tournament.schedules.Panel=function Panel(options){var config={id:"tournament-schedules-panel",title:"Расписание: ",layout:"table",layoutConfig:{columns:8},defaults:{width:150,height:27},items:[this.addBtn(),{title:"Воскресенье"},{title:"Понедельник"},{title:"Вторник"},{title:"Среда"},{title:"Четверг"},{title:"Пятница"},{title:"Суббота"}]};Ext.apply(this,options);with(this){this.startDate=date.add(Date.DAY,-date.getDay()),this.endDate=date.add(Date.DAY,6-date.getDay()),config.title+=startDate.format("d/m")+" - "+endDate.format("d/m");for(var i=0;i<7;i++)config.items[i+1].title+=" "+startDate.add(Date.DAY,i).format("d/m")}for(var hour=this.startHour;hour<=this.endHour;hour++){config.items.push({width:40,title:hour+":00"});for(var day=0;day<7;day++){var schedules=[];for(var i=0;i<this.schedules[day].length;i++)hour==parseInt(this.schedules[day][i].time)&&schedules.push(this.schedules[day][i]);config.items.push(schedules.length?new Ext.ux.tournament.schedules.Item(schedules):Ext.ux.tournament.schedules.Item.EMPTY)}}Panel.superclass.constructor.call(this,config)},Ext.extend(Ext.ux.tournament.schedules.Panel,Ext.Panel,{includes:function(d){with(this)return startDate<=d&&endDate>=d},getFormOptions:function(){return{tournament:this.tournament,startDate:this.startDate,endDate:this.endDate,startHour:this.startHour,endHour:this.endHour}},addBtn:function(){var a=this;return{xtype:"button",iconCls:"icon-add",width:40,handler:function(b,c){var d=new Ext.ux.tournament.schedules.Editor(a.getFormOptions());d.show()}}}}),Ext.ux.tournament.schedules.Item=function Item(a){this.schedules=a;var b={width:148,height:25};Item.superclass.constructor.call(this,b),this.updateText(),this.updateHandler()},Ext.extend(Ext.ux.tournament.schedules.Item,Ext.Button,{single:function(){return this.schedules.length==1},getSchedule:function(a){if(typeof a=="undefined"||a===null)a=0;return this.schedules[a]},updateText:function(){if(this.single())with(this.getSchedule())var text=[time,hosts.substring(0,10),"-",guests.substring(0,10)].join(" ");else var text=this.schedules.map(function(a){return a.time}).join(" | ");return this.setText(text)},updateHandler:function(){return this.setHandler(this.single()?this.singularHandler:this.multipleHandler)},singularHandler:function(a,b){var c=new Ext.ux.tournament.schedules.Editor(this.getSchedule());c.show()},multipleHandler:function(a,b){}}),Ext.ux.tournament.schedules.Item.EMPTY={html:"&nbsp;"},Ext.ux.tournament.schedules.Editor=function Window(a){var b={title:"Новые Данные",width:500,height:300,resizable:!1,layout:"fit",plain:!0,bodyStyle:"padding: 5px",buttonAlign:"right",modal:!0,items:new Ext.ux.tournament.schedules.Form(a)};Window.superclass.constructor.call(this,b),this.show()},Ext.extend(Ext.ux.tournament.schedules.Editor,Ext.Window),Ext.ux.tournament.schedules.Form=function Form(options){var config={frame:!0,layout:"form",url:"/admin/schedules",id:"schedule-form",items:[new Form.TourSelector(options.tournament),new Form.TeamSelector("hosts"),new Form.TeamSelector("guests"),new Form.DatePicker(options.startDate,options.endDate),new Form.TimeInput(options.startHour,options.endHour),new Form.VenueSelector]};Form.superclass.constructor.call(this,config);var self=this;this.on("render",function(){app.mask.show(),Ext.Ajax.request({url:"/admin/schedules/data?what=form&tournament_id="+options.tournament.id,success:function(response){self.formData=JSON.parse(response.responseText).data,app.mask.hide();with(self.formData.last)tour_id&&stage_id&&season_id&&self.selectTour(tour_id,season_id,tour_name);Ext.getCmp("schedule-form-venue-selector").setVenues(self.formData.venues)}})})},Ext.extend(Ext.ux.tournament.schedules.Form,Ext.FormPanel,{load:function(){Ext.ux.tournament.schedules.Form.superclass.prototype.load.call(this,{})},selectTour:function(a,b,c){Ext.getCmp("schedule-form-tour").setValue(c),Ext.getCmp("schedule-form-tour").hiddenField.value=a;var d=Ext.getCmp("schedule-form-team-selector-hosts"),e=d.getStore(),f=[],g=b+"";e.removeAll();for(var h=0,i=this.formData.teams.length;h<i;h++){var j=this.formData.teams[h];g in j.steps&&f.push(new e.recordType({teamId:j.id,teamName:j.name,leagueId:j.steps[g]}))}f.length>0?(e.add(f),d.enable()):d.disable()}}),Ext.ux.tournament.schedules.Form.TourSelector=function Selector(a){var b={store:new Ext.data.SimpleStore({fields:[],data:[[]]}),id:"schedule-form-tour",hiddenName:"step_tour_id",hiddenValue:"",fieldLabel:"Тур",editable:!1,shadow:!1,mode:"local",maxHeight:200,tpl:'<tpl for="."><div style="height:200px"><div id="tour_selector_tree"></div></div></tpl>',selectedClass:""};Selector.superclass.constructor.call(this,b);var c=this;this.tree=new Ext.tree.TreePanel({dataUrl:"/admin/schedules/data?what=tour_tree&tournament_id="+a.id,border:!1,containerScroll:!0,autoScroll:!0,root:new Ext.tree.AsyncTreeNode({text:a.name+": Выбор Тура",expanded:!0,id:"root"})}),this.tree.on("click",function(a){a.leaf?(c.setValue(a.text),c.hiddenField.value=a.attributes._id,c.treeAction=!1,Ext.getCmp("schedule-form").selectTour(a.attributes._id,a.parentNode.parentNode.attributes._id)):c.treeAction=!0}),this.tree.on("beforeexpandnode",function(){c.treeAction=!0}),this.tree.on("beforecollapsenode",function(){c.treeAction=!0}),this.on("expand",function(){this.tree.render("tour_selector_tree")}),this.on("collapse",function(){this.treeAction&&(this.expand(),this.treeAction=!1)})},Ext.extend(Ext.ux.tournament.schedules.Form.TourSelector,Ext.form.ComboBox),Ext.ux.tournament.schedules.Form.TeamSelector=function Selector(a){var b=new Ext.data.ArrayStore({id:0,fields:["teamId","teamName","leagueId"],data:[]}),c={id:"schedule-form-team-selector-"+a,disabled:!0,fieldLabel:a=="hosts"?"Хозяева":"Гости",lazyRender:!0,typeAhead:!0,mode:"local",name:a+"_team_id",valueField:"teamId",displayField:"teamName",store:b,listeners:{select:function(b,c,d){function i(a,b){var c=[];for(var d=0,e=a.getCount();d<e;d++){var f=a.getAt(d).data;c.push(new a.recordType({teamId:f.teamId,teamName:f.teamName,leagueId:f.leagueId}))}b.add(c)}if(a=="hosts"){var e=Ext.getCmp("schedule-form"),f=Ext.getCmp("schedule-form-team-selector-guests"),g=f.getStore();if(c.data.leagueId){var h=_(e.formData.teams).chain().select(function(a){return _.any(a.steps,function(a){return a==c.data.leagueId})&&a.id!=c.data.teamId}).map(function(a){return new g.recordType({teamId:a.id,teamName:a.name,leagueId:c.data.leagueId})}).value();h.length?g.add(h):i(b.getStore(),g)}else i(b.getStore(),g);f.enable()}}}};Selector.superclass.constructor.call(this,c)},Ext.extend(Ext.ux.tournament.schedules.Form.TeamSelector,Ext.form.ComboBox),Ext.ux.tournament.schedules.Form.DatePicker=function Picker(a,b){var c={allowBlank:!1,fieldLabel:"Дата",name:"match_on",format:"Y-m-d",minValue:a,maxValue:b};Picker.superclass.constructor.call(this,c)},Ext.extend(Ext.ux.tournament.schedules.Form.DatePicker,Ext.form.DateField),Ext.ux.tournament.schedules.Form.TimeInput=function Input(a,b){var c={allowBlank:!1,name:"match_at",fieldLabel:"Время",format:"H:i",minValue:(a<10?"0":"")+a+":00",maxValue:(b<10?"0":"")+b+":30",increment:30};Input.superclass.constructor.call(this,c)},Ext.extend(Ext.ux.tournament.schedules.Form.TimeInput,Ext.form.TimeField),Ext.ux.tournament.schedules.Form.VenueSelector=function Selector(){var a=new Ext.data.ArrayStore({id:0,fields:["venueId","venueName"],data:[]}),b={id:"schedule-form-venue-selector",fieldLabel:"Место",lazyRender:!0,typeAhead:!0,mode:"local",name:"venue_id",valueField:"venueId",displayField:"venueName",store:a};Selector.superclass.constructor.call(this,b)},Ext.extend(Ext.ux.tournament.schedules.Form.VenueSelector,Ext.form.ComboBox,{setVenues:function(a){var b=this.getStore(),c=_.map(a,function(a){return new b.recordType({venueId:a.id,venueName:a.name})});b.add(c)}}),Ext.ns("Ext.ux.personnel"),Ext.ux.personnel.Grid=function Grid(a){var b=Grid.createStore(a),c={store:b,columns:Grid.columns[a],autoExpandColumn:"name-col",width:600,height:300,loadMask:!0,columnLines:!0,viewConfig:{forceFit:!0},tbar:[" ",new Ext.ux.form.SearchField({store:b})]};Grid.superclass.constructor.call(this,c)},Ext.extend(Ext.ux.personnel.Grid,Ext.grid.GridPanel,{bindTo:function(a){this.getSelectionModel().on("rowselect",function(b,c,d){a.getForm().loadRecord(d),a.setId(d.data.id)})}}),Ext.ux.personnel.Grid.createStore=function Store(a){var b=new Ext.data.JsonStore({url:"/admin/"+a+".json",root:"personnel",totalProperty:"count",fields:Store.fields[a],autoLoad:!1,restful:!0});return b.setDefaultSort(a=="teams"?"name":"last_name","asc"),b},Ext.ux.personnel.Grid.columns={footballers:[{header:"ID",width:30,dataIndex:"id",sortable:!0,hidden:!0},{header:"Имя",width:150,dataIndex:"first_name",sortable:!0},{header:"Фамилия",width:150,dataIndex:"last_name",sortable:!0,id:"name-col"},{header:"Отчество",width:150,dataIndex:"patronymic",sortable:!0},{header:"ДР",dataIndex:"birth_date",xtype:"datecolumn",format:"M d, Y"},{header:"url",dataIndex:"url",sortable:!0}],referees:[{header:"ID",width:30,dataIndex:"id",sortable:!0,hidden:!0},{header:"Имя",width:150,dataIndex:"first_name",sortable:!0},{header:"Фамилия",width:150,dataIndex:"last_name",sortable:!0,id:"name-col"},{header:"Отчество",width:150,dataIndex:"patronymic",sortable:!0},{header:"ДР",dataIndex:"birth_date",xtype:"datecolumn",format:"M d, Y"}],teams:[{header:"ID",width:30,dataIndex:"id",sortable:!0,hidden:!0},{header:"Имя",dataIndex:"name",sortable:!0,id:"name-col"},{header:"url",dataIndex:"url",sortable:!0}]},Ext.ux.personnel.Grid.createStore.fields={footballers:["name","first_name","last_name","patronymic","url",{name:"birth_date",type:"date"},{name:"id",type:"int"}],referees:["name","first_name","last_name","patronymic",{name:"birth_date",type:"date"},{name:"id",type:"int"}],teams:["name","url",{name:"id",type:"int"}]},Ext.ux.personnel.Panel=function Panel(a){var b=new Ext.ux.personnel.Grid(a);b.bindTo(this);var c={id:"personnel-form",frame:!0,labelAlign:"left",title:Panel.titles[a],bodyStyle:"padding: 5px",width:1e3,layout:"column",items:[{columnWidth:.65,items:[b]},Panel.createFieldset(a)],buttons:[{text:"Сохранить",handler:function(){var c=this;this.getForm().submit({url:"/admin/"+a+(this.personnel_id?"/"+this.personnel_id:"")+".json",params:{_method:this.personnel_id?"PUT":"POST"},success:function(a,d){b.store.reload(),c.setId(0)},waitMsg:"Подождите..."})}.createDelegate(this)},{id:"personnel-form-delete-btn",text:"Удалить",disabled:!0,handler:function(){var c=this,d=Ext.MessageBox.wait("Пожалуйста, подождите","Обработка запроса");Ext.Ajax.request({url:"/admin/"+a+"/"+this.personnel_id,params:{_method:"DELETE"},success:function(){d.hide(),b.store.reload(),c.setId(0)}})}.createDelegate(this)},{id:"personnel-form-cancel-btn",text:"Отменить",disabled:!0,handler:function(){b.getSelectionModel().clearSelections(),this.setId(0)}.createDelegate(this)}]};Panel.superclass.constructor.call(this,c)},Ext.extend(Ext.ux.personnel.Panel,Ext.FormPanel,{setId:function(a){this.personnel_id=a,Ext.getCmp("personnel-form-delete-btn")[this.personnel_id?"enable":"disable"](),Ext.getCmp("personnel-form-cancel-btn")[this.personnel_id?"enable":"disable"]();var b=Ext.getCmp("nav-team-footballers");b&&(b[this.personnel_id?"enable":"disable"](),b.collapseAll(),b.getSelectionModel().clearSelections(),app.details.removeAll()),this.personnel_id||this.getForm().reset()}}),Ext.ux.personnel.Panel.titles={footballers:"Футболисты",referees:"Судьи",teams:"Команды"},Ext.ux.personnel.Panel.createFieldset=function(a){var b={columnWidth:.35,xtype:"fieldset",labelWidth:90,title:"Информация",defaults:{width:180},defaultType:"textfield",autoHeight:!0,bodyStyle:Ext.isIE?"padding:0 0 5px 15px;":"padding:10px 15px;"};return a=="footballers"||a=="referees"?(b.items=[{id:"first_name",fieldLabel:"Имя",name:a+"[first_name]"},{id:"last_name",fieldLabel:"Фамилия",name:a+"[last_name]"},{id:"patronymic",fieldLabel:"Отчество",name:a+"[patronymic]"},{id:"birth_date",fieldLabel:"ДР",name:a+"[birth_date]",format:"Y-m-d",xtype:"datefield"}],a=="footballers"&&b.items.push({id:"url",fieldLabel:"url",name:a+"[url]"})):a=="teams"&&(b.items=[{id:"name",fieldLabel:"Название",name:a+"[name]"},{id:"url",fieldLabel:"url",name:a+"[url]"}]),b},Ext.ns("Ext.ux.personnel"),Ext.ux.personnel.TeamFootballersGrid=function Panel(options){with(options){var store=new Ext.data.JsonStore({url:"/admin/teams/"+team_id+"/footballers?step_id="+options.step_id,root:selected?"selected":"remaining",totalProperty:selected?"selected_count":"remaining_count",fields:["name","first_name","last_name","patronymic","url",{name:"birth_date",type:"date"},{name:"id",type:"int"}],autoLoad:!0,restful:!0,requestMethod:"GET"}),columns=[{header:"ID",width:30,dataIndex:"id",sortable:!0,hidden:!0},{header:"Имя",width:150,dataIndex:"first_name",sortable:!0},{header:"Фамилия",width:150,dataIndex:"last_name",sortable:!0,id:(selected?"selected":"remaining")+"-name-col"},{header:"Отчество",width:150,dataIndex:"patronymic",sortable:!0},{header:"ДР",dataIndex:"birth_date",xtype:"datecolumn",format:"M d, Y"},{header:"url",dataIndex:"url",sortable:!0}],config={id:"team-"+team_id+"-footballers-"+(selected?"selected":"remaining")+"-grid",title:selected?"Выбранные":"Оставшиеся",enableDragDrop:!0,ddGroup:"team-"+team_id+"-"+(selected?"Selected":"Remaining")+"TeamsDDGroup",store:store,columns:columns,autoExpandColumn:(selected?"selected":"remaining")+"-name-col",loadMask:!0,columnLines:!0,viewConfig:{forceFit:!0},height:300,columnWidth:.5};selected||(config.tbar=[" ",new Ext.ux.form.SearchField({store:store})])}Panel.superclass.constructor.call(this,config),this.on("render",this.createDropTarget.createDelegate(this,[options.team_id,!options.selected,options.step_id]))},Ext.extend(Ext.ux.personnel.TeamFootballersGrid,Ext.grid.GridPanel,{createDropTarget:function(a,b,c){var d=this.getView().el.dom.childNodes[0].childNodes[1];this.dropTarget=new Ext.dd.DropTarget(d,{ddGroup:"team-"+a+"-"+(b?"Selected":"Remaining")+"TeamsDDGroup",copy:!0,notifyDrop:function(d,e,f){function i(a,b,c){var e=g.find("title",a.data.name);e==-1&&(g.add(a),g.sort("last_name","ASC"),d.grid.store.remove(a))}var g=Ext.getCmp("team-"+a+"-footballers-"+(b?"remaining":"selected")+"-grid").store,h=Ext.getCmp("team-"+a+"-footballers-selected-grid").store;return Ext.each(d.dragData.selections,i),Ext.Ajax.request({url:"/admin/teams/"+a+"/update_footballers?step_id="+c,params:{footballer_ids:h.data.items.map(function(a){return a.id}).join(",")}}),!0}})}}),Ext.ux.personnel.TeamFootballersPanel=function Panel(a,b){var c={title:"Футболисты",layout:"column",items:[new Ext.ux.personnel.TeamFootballersGrid({team_id:a,step_id:b,selected:!0}),new Ext.ux.personnel.TeamFootballersGrid({team_id:a,step_id:b,selected:!1})]};Panel.superclass.constructor.call(this,c)},Ext.extend(Ext.ux.personnel.TeamFootballersPanel,Ext.Panel),$(document).ajaxSend(function(a,b,c){var d=$("meta[name='csrf-token']").attr("content");b.setRequestHeader("X-CSRF-Token",d)}),football={namespace:function(a,b){return b=b||{},$.extend(a.split(".").inject(this,function(a,b){return a[b]||(a[b]={}),a[b]}),b)},create:function(a,b){return"prototype"in b&&(a.prototype=b.prototype,delete b.prototype),"extend"in b&&($.extend(a,b.extend),delete b.extend),$.extend(a.prototype,b),a},extend:function(a,b){typeof b.initialize!="function"&&(b.initialize=function(){a.apply(this,arguments)});var c=function(){b.initialize.apply(this,arguments)};delete b.intialize,c.prototype.parent=a.prototype;for(var d in a.prototype)typeof a.prototype[d]=="function"&&(c.prototype[d]=a.prototype[d]);return $.extend(c.prototype,b),c}},football.namespace("temp.schedule",{autocomplete_cache:{},options:{},host_team_id:"",team:{init:function(a){football.temp.schedule.options=a,$("#host_team").autocomplete({minLength:2,source:function(a,b){if(a.term in football.temp.schedule.autocomplete_cache){b(football.temp.schedule.autocomplete_cache[a.term]);return}$.ajax({url:football.temp.schedule.options.teams_path,type:"POST",dataType:"json",data:{search:a,search_type:"host"},success:function(c){football.temp.schedule.autocomplete_cache[a.term]=c,b(c)}})},select:function(a,b){b.item&&football.temp.schedule.team.select_host_team(b.item.id)}}),$("#guest_team").autocomplete({minLength:1,source:function(a,b){if(football.temp.schedule.team.host_team_id=="")return alert("Please, select host team first"),!1;$.ajax({url:football.temp.schedule.options.teams_path,type:"POST",dataType:"json",data:{search:a,search_type:"guest",tour_id:$("#schedule_tour_id").val(),host_team_id:football.temp.schedule.team.host_team_id},success:function(c){football.temp.schedule.autocomplete_cache[a.term]=c,b(c)}})},select:function(a,b){b.item&&football.temp.schedule.team.select_guest_team(b.item.id)}}),$("#tournament_id").bind("change",function(a){$.ajax({url:"/admin/temp/get_tours",type:"GET",dataType:"json",data:{tournament_id:$(this).val()},success:function(a){var b="";for(var c=0;c<a.length;c++)b+='<option value="'+a[c].value+'"'+(c==a.length-1?' selected="selected"':"")+">"+a[c].text+"</option>";$("#schedule_tour_id").html(b)}})})},select_host_team:function(a){$("#schedule_host_team_id").val(a),football.temp.schedule.team.host_team_id=a},select_guest_team:function(a){$("#schedule_guest_team_id").val(a)}}}),Ext.BLANK_IMAGE_URL="/stylesheets//source/ext-3.3.1/resources/images/default/s.gif",Ext.ns("Application"),Application.base=function(){return Ext.QuickTips.init(),{init:function(){new Ext.Viewport({layout:"border",items:[new Ext.BoxComponent({region:"north",height:32,autoEl:{tag:"div",html:"<p>Административная секция</p>"}}),{region:"west",id:"west-panel",title:"Меню",split:!0,width:200,minSize:175,maxSize:400,collapsible:!0,margins:"0 0 0 5",layout:{type:"fit"},items:[{xtype:"applicationmenu"}]},new Ext.TabPanel({id:"main-panel-tab",region:"center",deferredRender:!1,activeTab:0,items:[{id:"main-panel-tab-content",contentEl:"center2",title:"Главная панель",autoScroll:!0}]})]})}}}(),Ext.onReady(Application.base.init,Application.base)