/*
Copyright (c) 2003-2011, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
(function(){window.CKEDITOR||(window.CKEDITOR=function(){var a={timestamp:"B1GG4Z6",version:"3.5.2",revision:"6450",_:{},status:"unloaded",basePath:function(){var a=window.CKEDITOR_BASEPATH||"";if(!a){var b=document.getElementsByTagName("script");for(var c=0;c<b.length;c++){var d=b[c].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);if(d){a=d[1];break}}}a.indexOf(":/")==-1&&(a.indexOf("/")===0?a=location.href.match(/^.*?:\/\/[^\/]*/)[0]+a:a=location.href.match(/^[^\?]*\/(?:)/)[0]+a);if(!a)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return a}(),getUrl:function(a){return a.indexOf(":/")==-1&&a.indexOf("/")!==0&&(a=this.basePath+a),this.timestamp&&a.charAt(a.length-1)!="/"&&!/[&?]t=/.test(a)&&(a+=(a.indexOf("?")>=0?"&":"?")+"t="+this.timestamp),a}},b=window.CKEDITOR_GETURL;if(b){var c=a.getUrl;a.getUrl=function(d){return b.call(a,d)||c.call(a,d)}}return a}());var a=CKEDITOR;a.event||(a.event=function(){},a.event.implementOn=function(b){var c=a.event.prototype;for(var d in c)b[d]==undefined&&(b[d]=c[d])},a.event.prototype=function(){var a=function(a){var b=a.getPrivate&&a.getPrivate()||a._||(a._={});return b.events||(b.events={})},b=function(a){this.name=a,this.listeners=[]};return b.prototype={getListenerIndex:function(a){for(var b=0,c=this.listeners;b<c.length;b++)if(c[b].fn==a)return b;return-1}},{on:function(c,d,e,f,g){var h=a(this),i=h[c]||(h[c]=new b(c));if(i.getListenerIndex(d)<0){var j=i.listeners;e||(e=this),isNaN(g)&&(g=10);var k=this,l=function(a,b,g,h){var i={name:c,sender:this,editor:a,data:b,listenerData:f,stop:g,cancel:h,removeListener:function(){k.removeListener(c,d)}};return d.call(e,i),i.data};l.fn=d,l.priority=g;for(var m=j.length-1;m>=0;m--)if(j[m].priority<=g){j.splice(m+1,0,l);return}j.unshift(l)}},fire:function(){var b=!1,c=function(){b=!0},d=!1,e=function(){d=!0};return function(f,g,h){var i=a(this)[f],j=b,k=d;b=d=!1;if(i){var l=i.listeners;if(l.length){l=l.slice(0);for(var m=0;m<l.length;m++){var n=l[m].call(this,h,g,c,e);typeof n!="undefined"&&(g=n);if(b||d)break}}}var o=d||(typeof g=="undefined"?!1:g);return b=j,d=k,o}}(),fireOnce:function(b,c,d){var e=this.fire(b,c,d);return delete a(this)[b],e},removeListener:function(b,c){var d=a(this)[b];if(d){var e=d.getListenerIndex(c);e>=0&&d.listeners.splice(e,1)}},hasListeners:function(b){var c=a(this)[b];return c&&c.listeners.length>0}}}()),a.editor||(a.ELEMENT_MODE_NONE=0,a.ELEMENT_MODE_REPLACE=1,a.ELEMENT_MODE_APPENDTO=2,a.editor=function(b,c,d,e){var f=this;f._={instanceConfig:b,element:c,data:e},f.elementMode=d||0,a.event.call(f),f._init()},a.editor.replace=function(b,c){var d=b;if(typeof d!="object"){d=document.getElementById(b),d&&d.tagName.toLowerCase()in{style:1,script:1,base:1,link:1,meta:1,title:1}&&(d=null);if(!d){var e=0,f=document.getElementsByName(b);while((d=f[e++])&&d.tagName.toLowerCase()!="textarea");}if(!d)throw'[CKEDITOR.editor.replace] The element with id or name "'+b+'" was not found.'}return d.style.visibility="hidden",new a.editor(c,d,1)},a.editor.appendTo=function(b,c,d){var e=b;if(typeof e!="object"){e=document.getElementById(b);if(!e)throw'[CKEDITOR.editor.appendTo] The element with id "'+b+'" was not found.'}return new a.editor(c,e,2,d)},a.editor.prototype={_init:function(){var b=a.editor._pending||(a.editor._pending=[]);b.push(this)},fire:function(b,c){return a.event.prototype.fire.call(this,b,c,this)},fireOnce:function(b,c){return a.event.prototype.fireOnce.call(this,b,c,this)}},a.event.implementOn(a.editor.prototype,!0)),a.env||(a.env=function(){var a=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:!1,opera:!!b&&b.version,webkit:a.indexOf(" applewebkit/")>-1,air:a.indexOf(" adobeair/")>-1,mac:a.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat",mobile:a.indexOf("mobile")>-1,isCustomDomain:function(){if(!this.ie)return!1;var a=document.domain,b=window.location.hostname;return a!=b&&a!="["+b+"]"}};c.gecko=navigator.product=="Gecko"&&!c.webkit&&!c.opera;var d=0;c.ie&&(d=parseFloat(a.match(/msie (\d+)/)[1]),c.ie8=!!document.documentMode,c.ie8Compat=document.documentMode==8,c.ie7Compat=d==7&&!document.documentMode||document.documentMode==7,c.ie6Compat=d<7||c.quirks);if(c.gecko){var e=a.match(/rv:([\d\.]+)/);e&&(e=e[1].split("."),d=e[0]*1e4+(e[1]||0)*100+ +(e[2]||0))}return c.opera&&(d=parseFloat(b.version())),c.air&&(d=parseFloat(a.match(/ adobeair\/(\d+)/)[1])),c.webkit&&(d=parseFloat(a.match(/ applewebkit\/(\d+)/)[1])),c.version=d,c.isCompatible=!c.mobile&&(c.ie&&d>=6||c.gecko&&d>=10801||c.opera&&d>=9.5||c.air&&d>=1||c.webkit&&d>=522||!1),c.cssClass="cke_browser_"+(c.ie?"ie":c.gecko?"gecko":c.opera?"opera":c.webkit?"webkit":"unknown"),c.quirks&&(c.cssClass+=" cke_browser_quirks"),c.ie&&(c.cssClass+=" cke_browser_ie"+(c.version<7?"6":c.version>=8?document.documentMode:"7"),c.quirks&&(c.cssClass+=" cke_browser_iequirks")),c.gecko&&d<10900&&(c.cssClass+=" cke_browser_gecko18"),c.air&&(c.cssClass+=" cke_browser_air"),c}());var b=a.env,c=b.ie;a.status=="unloaded"&&function(){a.event.implementOn(a),a.loadFullCore=function(){if(a.status!="basic_ready"){a.loadFullCore._load=1;return}delete a.loadFullCore;var b=document.createElement("script");b.type="text/javascript",b.src=a.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(b)},a.loadFullCoreTimeout=0,a.replaceClass="ckeditor",a.replaceByClassEnabled=1;var c=function(c,d,e,f){if(b.isCompatible){a.loadFullCore&&a.loadFullCore();var g=e(c,d,f);return a.add(g),g}return null};a.replace=function(b,d){return c(b,d,a.editor.replace)},a.appendTo=function(b,d,e){return c(b,d,a.editor.appendTo,e)},a.add=function(a){var b=this._.pending||(this._.pending=[]);b.push(a)},a.replaceAll=function(){var a=document.getElementsByTagName("textarea");for(var b=0;b<a.length;b++){var c=null,d=a[b],e=d.name;if(!d.name&&!d.id)continue;if(typeof arguments[0]=="string"){var f=new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)");if(!f.test(d.className))continue}else if(typeof arguments[0]=="function"){c={};if(arguments[0](d,c)===!1)continue}this.replace(d,c)}},function(){var b=function(){var b=a.loadFullCore,c=a.loadFullCoreTimeout;a.replaceByClassEnabled&&a.replaceAll(a.replaceClass),a.status="basic_ready",b&&b._load?b():c&&setTimeout(function(){a.loadFullCore&&a.loadFullCore()},c*1e3)};window.addEventListener?window.addEventListener("load",b,!1):window.attachEvent&&window.attachEvent("onload",b)}(),a.status="basic_loaded"}(),a.dom={};var d=a.dom;(function(){var b=[];a.on("reset",function(){b=[]}),a.tools={arrayCompare:function(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0},clone:function(a){var b;if(a&&a instanceof Array){b=[];for(var c=0;c<a.length;c++)b[c]=this.clone(a[c]);return b}if(a===null||typeof a!="object"||a instanceof String||a instanceof Number||a instanceof Boolean||a instanceof Date||a instanceof RegExp)return a;b=new a.constructor;for(var d in a){var e=a[d];b[d]=this.clone(e)}return b},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},extend:function(a){var b=arguments.length,c,d;typeof (c=arguments[b-1])=="boolean"?b--:typeof (c=arguments[b-2])=="boolean"&&(d=arguments[b-1],b-=2);for(var e=1;e<b;e++){var f=arguments[e];for(var g in f)if(c===!0||a[g]==undefined)if(!d||g in d)a[g]=f[g]}return a},prototypedCopy:function(a){var b=function(){};return b.prototype=a,new b},isArray:function(a){return!!a&&a instanceof Array},isEmpty:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},cssStyleToDomStyle:function(){var a=document.createElement("div").style,b=typeof a.cssFloat!="undefined"?"cssFloat":typeof a.styleFloat!="undefined"?"styleFloat":"float";return function(a){return a=="float"?b:a.replace(/-./g,function(a){return a.substr(1).toUpperCase()})}}(),buildStyleHtml:function(a){a=[].concat(a);var b,c=[];for(var d=0;d<a.length;d++)b=a[d],/@import|[{}]/.test(b)?c.push("<style>"+b+"</style>"):c.push('<link type="text/css" rel=stylesheet href="'+b+'">');return c.join("")},htmlEncode:function(a){var b=function(a){var b=new d.element("span");return b.setText(a),b.getHtml()},c=b("\n").toLowerCase()=="<br>"?function(a){return b(a).replace(/<br>/gi,"\n")}:b,e=b(">")==">"?function(a){return c(a).replace(/>/g,"&gt;")}:c,f=b("  ")=="&nbsp; "?function(a){return e(a).replace(/&nbsp;/g," ")}:e;return this.htmlEncode=f,this.htmlEncode(a)},htmlEncodeAttr:function(a){return a.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},getNextNumber:function(){var a=0;return function(){return++a}}(),getNextId:function(){return"cke_"+this.getNextNumber()},override:function(a,b){return b(a)},setTimeout:function(a,b,c,d,e){return e||(e=window),c||(c=e),e.setTimeout(function(){d?a.apply(c,[].concat(d)):a.apply(c)},b||0)},trim:function(){var a=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(b){return b.replace(a,"")}}(),ltrim:function(){var a=/^[ \t\n\r]+/g;return function(b){return b.replace(a,"")}}(),rtrim:function(){var a=/[ \t\n\r]+$/g;return function(b){return b.replace(a,"")}}(),indexOf:Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},bind:function(a,b){return function(){return a.apply(b,arguments)}},createClass:function(b){var c=b.$,d=b.base,e=b.privates||b._,f=b.proto,g=b.statics;if(e){var h=c;c=function(){var b=this,c=b._||(b._={});for(var d in e){var f=e[d];c[d]=typeof f=="function"?a.tools.bind(f,b):f}h.apply(b,arguments)}}return d&&(c.prototype=this.prototypedCopy(d.prototype),c.prototype.constructor=c,c.prototype.base=function(){this.base=d.prototype.base,d.apply(this,arguments),this.base=arguments.callee}),f&&this.extend(c.prototype,f,!0),g&&this.extend(c,g,!0),c},addFunction:function(a,c){return b.push(function(){return a.apply(c||this,arguments)})-1},removeFunction:function(a){b[a]=null},callFunction:function(a){var c=b[a];return c&&c.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var a=/^\d+(?:\.\d+)?$/;return function(b){return b+(a.test(b)?"px":"")}}(),repeat:function(a,b){return(new Array(b+1)).join(a)},tryThese:function(){var a;for(var b=0,c=arguments.length;b<c;b++){var d=arguments[b];try{a=d();break}catch(e){}}return a},genKey:function(){return Array.prototype.slice.call(arguments).join("-")}}})();var e=a.tools;a.dtd=function(){var a=e.extend,b={isindex:1,fieldset:1},c={input:1,button:1,select:1,textarea:1,label:1},d=a({a:1},c),f=a({iframe:1},d),g={hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1},h={ins:1,del:1,script:1,style:1},i=a({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1},h),j=a({sub:1,img:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1},i),k=a({p:1},j),l=a({iframe:1},j,c),m={img:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1},n=a({a:1},l),o={tr:1},p={"#":1},q=a({param:1},m),r=a({form:1},b,f,g,k),s={li:1},t={style:1,script:1},u={base:1,link:1,meta:1,title:1},v=a(u,t),w={head:1,body:1},x={html:1},y={address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1};return{$nonBodyContent:a(x,w,u),$block:y,$blockLimit:{body:1,div:1,td:1,th:1,caption:1,form:1},$inline:n,$body:a({script:1,style:1},y),$cdata:{script:1,style:1},$empty:{area:1,base:1,br:1,col:1,hr:1,img:1,input:1,link:1,meta:1,param:1},$listItem:{dd:1,dt:1,li:1},$list:{ul:1,ol:1,dl:1},$nonEditable:{applet:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,script:1,textarea:1,param:1},$removeEmpty:{abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},html:w,head:v,style:p,script:p,body:r,base:{},link:{},meta:{},title:p,col:{},tr:{td:1,th:1},img:{},colgroup:{col:1},noscript:r,td:r,br:{},th:r,center:r,kbd:n,button:a(k,g),basefont:{},h5:n,h4:n,samp:n,h6:n,ol:s,h1:n,h3:n,option:p,h2:n,form:a(b,f,g,k),select:{optgroup:1,option:1},font:n,ins:n,menu:s,abbr:n,label:n,table:{thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1},code:n,script:p,tfoot:o,cite:n,li:r,input:{},iframe:r,strong:n,textarea:p,noframes:r,big:n,small:n,span:n,hr:{},dt:n,sub:n,optgroup:{option:1},param:{},bdo:n,"var":n,div:r,object:q,sup:n,dd:r,strike:n,area:{},dir:s,map:a({area:1,form:1,p:1},b,h,g),applet:q,dl:{dt:1,dd:1},del:n,isindex:{},fieldset:a({legend:1},m),thead:o,ul:s,acronym:n,b:n,a:l,blockquote:r,caption:n,i:n,u:n,tbody:o,s:n,address:a(f,k),tt:n,legend:n,q:n,pre:a(i,d),p:n,em:n,dfn:n}}();var f=a.dtd;d.event=function(a){this.$=a},d.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this,b=a.getKey();if(a.$.ctrlKey||a.$.metaKey)b+=1e3;return a.$.shiftKey&&(b+=2e3),a.$.altKey&&(b+=4e3),b},preventDefault:function(a){var b=this.$;b.preventDefault?b.preventDefault():b.returnValue=!1,a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getTarget:function(){var a=this.$.target||this.$.srcElement;return a?new d.node(a):null}},a.CTRL=1e3,a.SHIFT=2e3,a.ALT=4e3,d.domObject=function(a){a&&(this.$=a)},d.domObject.prototype=function(){var b=function(b,c){return function(e){typeof a!="undefined"&&b.fire(c,new d.event(e))}};return{getPrivate:function(){var a;return(a=this.getCustomData("_"))||this.setCustomData("_",a={}),a},on:function(c){var d=this,e=d.getCustomData("_cke_nativeListeners");e||(e={},d.setCustomData("_cke_nativeListeners",e));if(!e[c]){var f=e[c]=b(d,c);d.$.attachEvent?d.$.attachEvent("on"+c,f):d.$.addEventListener&&d.$.addEventListener(c,f,!!a.event.useCapture)}return a.event.prototype.on.apply(d,arguments)},removeListener:function(b){var c=this;a.event.prototype.removeListener.apply(c,arguments);if(!c.hasListeners(b)){var d=c.getCustomData("_cke_nativeListeners"),e=d&&d[b];e&&(c.$.detachEvent?c.$.detachEvent("on"+b,e):c.$.removeEventListener&&c.$.removeEventListener(b,e,!1),delete d[b])}},removeAllListeners:function(){var a=this,b=a.getCustomData("_cke_nativeListeners");for(var c in b){var d=b[c];a.$.detachEvent?a.$.detachEvent("on"+c,d):a.$.removeEventListener&&a.$.removeEventListener(c,d,!1),delete b[c]}}}}(),function(b){var c={};a.on("reset",function(){c={}}),b.equals=function(a){return a&&a.$===this.$},b.setCustomData=function(a,b){var d=this.getUniqueId(),e=c[d]||(c[d]={});return e[a]=b,this},b.getCustomData=function(a){var b=this.$["data-cke-expando"],d=b&&c[b];return d&&d[a]},b.removeCustomData=function(a){var b=this.$["data-cke-expando"],d=b&&c[b],e=d&&d[a];return typeof e!="undefined"&&delete d[a],e||null},b.clearCustomData=function(){this.removeAllListeners();var a=this.$["data-cke-expando"];a&&delete c[a]},b.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=e.getNextNumber())},a.event.implementOn(b)}(d.domObject.prototype),d.window=function(a){d.domObject.call(this,a)},d.window.prototype=new d.domObject,e.extend(d.window.prototype,{focus:function(){b.webkit&&this.$.parent&&this.$.parent.focus(),this.$.focus()},getViewPaneSize:function(){var a=this.$.document,b=a.compatMode=="CSS1Compat";return{width:(b?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(b?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};var b=a.document;return{x:b.documentElement.scrollLeft||b.body.scrollLeft||0,y:b.documentElement.scrollTop||b.body.scrollTop||0}}}),d.document=function(a){d.domObject.call(this,a)};var g=d.document;g.prototype=new d.domObject,e.extend(g.prototype,{appendStyleSheet:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var b=new d.element("link");b.setAttributes({rel:"stylesheet",type:"text/css",href:a}),this.getHead().append(b)}},appendStyleText:function(a){var b=this;if(b.$.createStyleSheet){var c=b.$.createStyleSheet("");c.cssText=a}else{var e=new d.element("style",b);e.append(new d.text(a,b)),b.getHead().append(e)}},createElement:function(a,b){var c=new d.element(a,this);return b&&(b.attributes&&c.setAttributes(b.attributes),b.styles&&c.setStyles(b.styles)),c},createText:function(a){return new d.text(a,this)},focus:function(){this.getWindow().focus()},getById:function(a){var b=this.$.getElementById(a);return b?new d.element(b):null},getByAddress:function(a,b){var c=this.$.documentElement;for(var e=0;c&&e<a.length;e++){var f=a[e];if(!b){c=c.childNodes[f];continue}var g=-1;for(var h=0;h<c.childNodes.length;h++){var i=c.childNodes[h];if(b===!0&&i.nodeType==3&&i.previousSibling&&i.previousSibling.nodeType==3)continue;g++;if(g==f){c=i;break}}}return c?new d.node(c):null},getElementsByTag:function(a,b){return(!c||document.documentMode>8)&&b&&(a=b+":"+a),new d.nodeList(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];return a?a=new d.element(a):a=this.getDocumentElement().append(new d.element("head"),!0),(this.getHead=function(){return a})()},getBody:function(){var a=new d.element(this.$.body);return(this.getBody=function(){return a})()},getDocumentElement:function(){var a=new d.element(this.$.documentElement);return(this.getDocumentElement=function(){return a})()},getWindow:function(){var a=new d.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return a})()},write:function(a){var c=this;c.$.open("text/html","replace"),b.isCustomDomain()&&(c.$.domain=document.domain),c.$.write(a),c.$.close()}}),d.node=function(a){if(a){switch(a.nodeType){case 9:return new g(a);case 1:return new d.element(a);case 3:return new d.text(a)}d.domObject.call(this,a)}return this},d.node.prototype=new d.domObject,a.NODE_ELEMENT=1,a.NODE_DOCUMENT=9,a.NODE_TEXT=3,a.NODE_COMMENT=8,a.NODE_DOCUMENT_FRAGMENT=11,a.POSITION_IDENTICAL=0,a.POSITION_DISCONNECTED=1,a.POSITION_FOLLOWING=2,a.POSITION_PRECEDING=4,a.POSITION_IS_CONTAINED=8,a.POSITION_CONTAINS=16,e.extend(d.node.prototype,{appendTo:function(a,b){return a.append(this,b),a},clone:function(a,b){var c=this.$.cloneNode(a),e=function(c){if(c.nodeType!=1)return;b||c.removeAttribute("id",!1),c.removeAttribute("data-cke-expando",!1);if(a){var d=c.childNodes;for(var f=0;f<d.length;f++)e(d[f])}};return e(c),new d.node(c)},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(a){return a.$.parentNode.insertBefore(this.$,a.$.nextSibling),a},insertBefore:function(a){return a.$.parentNode.insertBefore(this.$,a.$),a},insertBeforeMe:function(a){return this.$.parentNode.insertBefore(a.$,this.$),a},getAddress:function(a){var b=[],c=this.getDocument().$.documentElement,d=this.$;while(d&&d!=c){var e=d.parentNode,f=-1;if(e){for(var g=0;g<e.childNodes.length;g++){var h=e.childNodes[g];if(a&&h.nodeType==3&&h.previousSibling&&h.previousSibling.nodeType==3)continue;f++;if(h==d)break}b.unshift(f)}d=e}return b},getDocument:function(){return new g(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(){var a=this.$,b=a.parentNode&&a.parentNode.firstChild,c=-1;while(b){c++;if(b==a)return c;b=b.nextSibling}return-1},getNextSourceNode:function(a,b,c){if(c&&!c.call){var d=c;c=function(a){return!a.equals(d)}}var e=!a&&this.getFirst&&this.getFirst(),f;if(!e){if(this.type==1&&c&&c(this,!0)===!1)return null;e=this.getNext()}while(!e&&(f=(f||this).getParent())){if(c&&c(f,!0)===!1)return null;e=f.getNext()}return e?c&&c(e)===!1?null:b&&b!=e.type?e.getNextSourceNode(!1,b,c):e:null},getPreviousSourceNode:function(a,b,c){if(c&&!c.call){var d=c;c=function(a){return!a.equals(d)}}var e=!a&&this.getLast&&this.getLast(),f;if(!e){if(this.type==1&&c&&c(this,!0)===!1)return null;e=this.getPrevious()}while(!e&&(f=(f||this).getParent())){if(c&&c(f,!0)===!1)return null;e=f.getPrevious()}return e?c&&c(e)===!1?null:b&&e.type!=b?e.getPreviousSourceNode(!1,b,c):e:null},getPrevious:function(a){var b=this.$,c;do b=b.previousSibling,c=b&&new d.node(b);while(c&&a&&!a(c));return c},getNext:function(a){var b=this.$,c;do b=b.nextSibling,c=b&&new d.node(b);while(c&&a&&!a(c));return c},getParent:function(){var a=this.$.parentNode;return a&&a.nodeType==1?new d.node(a):null},getParents:function(a){var b=this,c=[];do c[a?"push":"unshift"](b);while(b=b.getParent());return c},getCommonAncestor:function(a){var b=this;if(a.equals(b))return b;if(a.contains&&a.contains(b))return a;var c=b.contains?b:b.getParent();do if(c.contains(a))return c;while(c=c.getParent());return null},getPosition:function(a){var b=this.$,c=a.$;if(b.compareDocumentPosition)return b.compareDocumentPosition(c);if(b==c)return 0;if(this.type==1&&a.type==1){if(b.contains){if(b.contains(c))return 20;if(c.contains(b))return 10}if("sourceIndex"in b)return b.sourceIndex<0||c.sourceIndex<0?1:b.sourceIndex<c.sourceIndex?4:2}var d=this.getAddress(),e=a.getAddress(),f=Math.min(d.length,e.length);for(var g=0;g<=f-1;g++)if(d[g]!=e[g]){if(g<f)return d[g]<e[g]?4:2;break}return d.length<e.length?20:10},getAscendant:function(a,b){var c=this.$;b||(c=c.parentNode);while(c){if(c.nodeName&&c.nodeName.toLowerCase()==a)return new d.node(c);c=c.parentNode}return null},hasAscendant:function(a,b){var c=this.$;b||(c=c.parentNode);while(c){if(c.nodeName&&c.nodeName.toLowerCase()==a)return!0;c=c.parentNode}return!1},move:function(a,b){a.append(this.remove(),b)},remove:function(a){var b=this.$,c=b.parentNode;if(c){if(a)for(var d;d=b.firstChild;)c.insertBefore(b.removeChild(d),b);c.removeChild(b)}return this},replace:function(a){this.insertBefore(a),a.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){var a=this,b;while(a.getFirst&&(b=a.getFirst())){if(b.type==3){var c=e.ltrim(b.getText()),d=b.getLength();if(!c){b.remove();continue}c.length<d&&(b.split(d-c.length),a.$.removeChild(a.$.firstChild))}break}},rtrim:function(){var a=this,d;while(a.getLast&&(d=a.getLast())){if(d.type==3){var f=e.rtrim(d.getText()),g=d.getLength();if(!f){d.remove();continue}f.length<g&&(d.split(f.length),a.$.lastChild.parentNode.removeChild(a.$.lastChild))}break}!c&&!b.opera&&(d=a.$.lastChild,d&&d.type==1&&d.nodeName.toLowerCase()=="br"&&d.parentNode.removeChild(d))},isReadOnly:function(){var a=this;while(a){if(a.type==1){if(a.is("body")||!!a.data("cke-editable"))break;if(a.getAttribute("contentEditable")=="false")return a;if(a.getAttribute("contentEditable")=="true")break}a=a.getParent()}return!1}}),d.nodeList=function(a){this.$=a},d.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){var b=this.$[a];return b?new d.node(b):null}},d.element=function(a,b){typeof a=="string"&&(a=(b?b.$:document).createElement(a)),d.domObject.call(this,a)};var h=d.element;h.get=function(a){return a&&(a.$?a:new h(a))},h.prototype=new d.node,h.createFromHtml=function(a,b){var c=new h("div",b);return c.setHtml(a),c.getFirst().remove()},h.setMarker=function(a,b,c,d){var f=b.getCustomData("list_marker_id")||b.setCustomData("list_marker_id",e.getNextNumber()).getCustomData("list_marker_id"),g=b.getCustomData("list_marker_names")||b.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return a[f]=b,g[c]=1,b.setCustomData(c,d)},h.clearAllMarkers=function(a){for(var b in a)h.clearMarkers(a,a[b],1)},h.clearMarkers=function(a,b,c){var d=b.getCustomData("list_marker_names"),e=b.getCustomData("list_marker_id");for(var f in d)b.removeCustomData(f);b.removeCustomData("list_marker_names"),c&&(b.removeCustomData("list_marker_id"),delete a[e])},e.extend(h.prototype,{type:1,addClass:function(a){var b=this.$.className;if(b){var c=new RegExp("(?:^|\\s)"+a+"(?:\\s|$)","");c.test(b)||(b+=" "+a)}this.$.className=b||a},removeClass:function(a){var b=this.getAttribute("class");if(b){var c=new RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","i");c.test(b)&&(b=b.replace(c,"").replace(/^\s+/,""),b?this.setAttribute("class",b):this.removeAttribute("class"))}},hasClass:function(a){var b=new RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","");return b.test(this.getAttribute("class"))},append:function(a,b){var c=this;return typeof a=="string"&&(a=c.getDocument().createElement(a)),b?c.$.insertBefore(a.$,c.$.firstChild):c.$.appendChild(a.$),a},appendHtml:function(a){var b=this;if(!b.$.childNodes.length)b.setHtml(a);else{var c=new h("div",b.getDocument());c.setHtml(a),c.moveChildren(b)}},appendText:function(a){this.$.text!=undefined?this.$.text+=a:this.append(new d.text(a))},appendBogus:function(){var a=this,c=a.getLast();while(c&&c.type==3&&!e.rtrim(c.getText()))c=c.getPrevious();if(!c||!c.is||!c.is("br")){var d=b.opera?a.getDocument().createText(""):a.getDocument().createElement("br");b.gecko&&d.setAttribute("type","_moz"),a.append(d)}},breakParent:function(a){var b=this,c=new d.range(b.getDocument());c.setStartAfter(b),c.setEndAfter(a);var e=c.extractContents();c.insertNode(b.remove()),e.insertAfterNode(b)},contains:c||b.webkit?function(a){var b=this.$;return a.type!=1?b.contains(a.getParent().$):b!=a.$&&b.contains(a.$)}:function(a){return!!(this.$.compareDocumentPosition(a.$)&16)},focus:function(){function a(){try{this.$.focus()}catch(a){}}return function(b){b?e.setTimeout(a,100,this):a.call(this)}}(),getHtml:function(){var a=this.$.innerHTML;return c?a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){var a=this;if(a.$.outerHTML)return a.$.outerHTML.replace(/<\?[^>]*>/,"");var b=a.$.ownerDocument.createElement("div");return b.appendChild(a.$.cloneNode(!0)),b.innerHTML},setHtml:function(a){return this.$.innerHTML=a},setText:function(a){return h.prototype.setText=this.$.innerText!=undefined?function(a){return this.$.innerText=a}:function(a){return this.$.textContent=a},this.setText(a)},getAttribute:function(){var a=function(a){return this.$.getAttribute(a,2)};return c&&(b.ie7Compat||b.ie6Compat)?function(b){var c=this;switch(b){case"class":b="className";break;case"tabindex":var d=a.call(c,b);return d!==0&&c.$.tabIndex===0&&(d=null),d;case"checked":var e=c.$.attributes.getNamedItem(b),f=e.specified?e.nodeValue:c.$.checked;return f?"checked":null;case"hspace":case"value":return c.$[b];case"style":return c.$.style.cssText}return a.call(c,b)}:a}(),getChildren:function(){return new d.nodeList(this.$.childNodes)},getComputedStyle:c?function(a){return this.$.currentStyle[e.cssStyleToDomStyle(a)]}:function(a){return this.getWindow().$.getComputedStyle(this.$,"").getPropertyValue(a)},getDtd:function(){var a=f[this.getName()];return this.getDtd=function(){return a},a},getElementsByTag:g.prototype.getElementsByTag,getTabIndex:c?function(){var a=this.$.tabIndex;return a===0&&!f.$tabIndex[this.getName()]&&parseInt(this.getAttribute("tabindex"),10)!==0&&(a=-1),a}:b.webkit?function(){var a=this.$.tabIndex;return a==undefined&&(a=parseInt(this.getAttribute("tabindex"),10),isNaN(a)&&(a=-1)),a}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(c&&!(document.documentMode>8)){var b=this.$.scopeName;b!="HTML"&&(a=b.toLowerCase()+":"+a)}return(this.getName=function(){return a})()},getValue:function(){return this.$.value},getFirst:function(a){var b=this.$.firstChild,c=b&&new d.node(b);return c&&a&&!a(c)&&(c=c.getNext(a)),c},getLast:function(a){var b=this.$.lastChild,c=b&&new d.node(b);return c&&a&&!a(c)&&(c=c.getPrevious(a)),c},getStyle:function(a){return this.$.style[e.cssStyleToDomStyle(a)]},is:function(){var a=this.getName();for(var b=0;b<arguments.length;b++)if(arguments[b]==a)return!0;return!1},isEditable:function(){var a=this.getName(),b=!f.$nonEditable[a]&&(f[a]||f.span);return b&&b["#"]},isIdentical:function(a){if(this.getName()!=a.getName())return!1;var b=this.$.attributes,d=a.$.attributes,e=b.length,f=d.length;for(var g=0;g<e;g++){var h=b[g];if(h.nodeName=="_moz_dirty")continue;if((!c||h.specified&&h.nodeName!="data-cke-expando")&&h.nodeValue!=a.getAttribute(h.nodeName))return!1}if(c)for(g=0;g<f;g++){h=d[g];if(h.specified&&h.nodeName!="data-cke-expando"&&h.nodeValue!=this.getAttribute(h.nodeName))return!1}return!0},isVisible:function(){var c=!!this.$.offsetHeight&&this.getComputedStyle("visibility")!="hidden",d,e;return c&&(b.webkit||b.opera)&&(d=this.getWindow(),!d.equals(a.document.getWindow())&&(e=d.$.frameElement)&&(c=(new h(e)).isVisible())),c},isEmptyInlineRemoveable:function(){if(!f.$removeEmpty[this.getName()])return!1;var a=this.getChildren();for(var b=0,c=a.count();b<c;b++){var d=a.getItem(b);if(d.type==1&&d.data("cke-bookmark"))continue;if(d.type==1&&!d.isEmptyInlineRemoveable()||d.type==3&&e.trim(d.getText()))return!1}return!0},hasAttributes:c&&(b.ie7Compat||b.ie6Compat)?function(){var a=this.$.attributes;for(var b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(c.specified)return!0}}return!1}:function(){var a=this.$.attributes,b=a.length,c={"data-cke-expando":1,_moz_dirty:1};return b>0&&(b>2||!c[a[0].nodeName]||b==2&&!c[a[1].nodeName])},hasAttribute:function(a){var b=this.$.attributes.getNamedItem(a);return!!b&&!!b.specified},hide:function(){this.setStyle("display","none")},moveChildren:function(a,b){var c=this.$;a=a.$;if(c==a)return;var d;if(b)while(d=c.lastChild)a.insertBefore(c.removeChild(d),a.firstChild);else while(d=c.firstChild)a.appendChild(c.removeChild(d))},mergeSiblings:function(){function a(a,b,c){if(b&&b.type==1){var d=[];while(b.data("cke-bookmark")||b.isEmptyInlineRemoveable()){d.push(b),b=c?b.getNext():b.getPrevious();if(!b||b.type!=1)return}if(a.isIdentical(b)){var e=c?a.getLast():a.getFirst();while(d.length)d.shift().move(a,!c);b.moveChildren(a,!c),b.remove(),e&&e.type==1&&e.mergeSiblings()}}}return function(b){var c=this;if(b!==!1&&!f.$removeEmpty[c.getName()]&&!c.is("a"))return;a(c,c.getNext(),!0),a(c,c.getPrevious())}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(a,b){return this.$.setAttribute(a,b),this};return c&&(b.ie7Compat||b.ie6Compat)?function(b,c){var d=this;return b=="class"?d.$.className=c:b=="style"?d.$.style.cssText=c:b=="tabindex"?d.$.tabIndex=c:b=="checked"?d.$.checked=c:a.apply(d,arguments),d}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},setValue:function(a){return this.$.value=a,this},removeAttribute:function(){var a=function(a){this.$.removeAttribute(a)};return c&&(b.ie7Compat||b.ie6Compat)?function(b){b=="class"?b="className":b=="tabindex"&&(b="tabIndex"),a.call(this,b)}:a}(),removeAttributes:function(a){if(e.isArray(a))for(var b=0;b<a.length;b++)this.removeAttribute(a[b]);else for(var c in a)a.hasOwnProperty(c)&&this.removeAttribute(c)},removeStyle:function(a){var b=this;b.setStyle(a,""),b.$.style.removeAttribute&&b.$.style.removeAttribute(e.cssStyleToDomStyle(a)),b.$.style.cssText||b.removeAttribute("style")},setStyle:function(a,b){return this.$.style[e.cssStyleToDomStyle(a)]=b,this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){c?(a=Math.round(a*100),this.setStyle("filter",a>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")")):this.setStyle("opacity",a)},unselectable:b.gecko?function(){this.$.style.MozUserSelect="none",this.on("dragstart",function(a){a.data.preventDefault()})}:b.webkit?function(){this.$.style.KhtmlUserSelect="none",this.on("dragstart",function(a){a.data.preventDefault()})}:function(){if(c||b.opera){var a=this.$,d,e=0;a.unselectable="on";while(d=a.all[e++])switch(d.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:d.unselectable="on"}}},getPositionedAncestor:function(){var a=this;while(a.getName()!="html"){if(a.getComputedStyle("position"
)!="static")return a;a=a.getParent()}return null},getDocumentPosition:function(a){var d=this,e=0,f=0,g=d.getDocument().getBody(),i=d.getDocument().$.compatMode=="BackCompat",j=d.getDocument();if(document.documentElement.getBoundingClientRect){var k=d.$.getBoundingClientRect(),l=j.$,m=l.documentElement,n=m.clientTop||g.$.clientTop||0,o=m.clientLeft||g.$.clientLeft||0,p=!0;if(c){var q=j.getDocumentElement().contains(d),r=j.getBody().contains(d);p=i&&r||!i&&q}p&&(e=k.left+(!i&&m.scrollLeft||g.$.scrollLeft),e-=o,f=k.top+(!i&&m.scrollTop||g.$.scrollTop),f-=n)}else{var s=d,t=null,u;while(s&&s.getName()!="body"&&s.getName()!="html"){e+=s.$.offsetLeft-s.$.scrollLeft,f+=s.$.offsetTop-s.$.scrollTop,s.equals(d)||(e+=s.$.clientLeft||0,f+=s.$.clientTop||0);var v=t;while(v&&!v.equals(s))e-=v.$.scrollLeft,f-=v.$.scrollTop,v=v.getParent();t=s,s=(u=s.$.offsetParent)?new h(u):null}}if(a){var w=d.getWindow(),x=a.getWindow();if(!w.equals(x)&&w.$.frameElement){var y=(new h(w.$.frameElement)).getDocumentPosition(a);e+=y.x,f+=y.y}}return document.documentElement.getBoundingClientRect||b.gecko&&!i&&(e+=d.$.clientLeft?1:0,f+=d.$.clientTop?1:0),{x:e,y:f}},scrollIntoView:function(a){var b=this,c=b.getWindow(),d=c.getViewPaneSize().height,e=d*-1;a?e+=d:(e+=b.$.offsetHeight||0,e+=parseInt(b.getComputedStyle("marginBottom")||0,10)||0);var f=b.getDocumentPosition();e+=f.y,e=e<0?0:e;var g=c.getScrollPosition().y;(e>g||e<g-d)&&c.$.scrollTo(0,e)},setState:function(a){var b=this;switch(a){case 1:b.addClass("cke_on"),b.removeClass("cke_off"),b.removeClass("cke_disabled");break;case 0:b.addClass("cke_disabled"),b.removeClass("cke_off"),b.removeClass("cke_on");break;default:b.addClass("cke_off"),b.removeClass("cke_on"),b.removeClass("cke_disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(d){a.src=a.src,c&&b.version<7&&window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);</script>")')}return a&&new g(a.contentWindow.document)},copyAttributes:function(a,b){var d=this,e=d.$.attributes;b=b||{};for(var f=0;f<e.length;f++){var g=e[f],h=g.nodeName.toLowerCase(),i;if(h in b)continue;if(h=="checked"&&(i=d.getAttribute(h)))a.setAttribute(h,i);else if(g.specified||c&&g.nodeValue&&h=="value")i=d.getAttribute(h),i===null&&(i=g.nodeValue),a.setAttribute(h,i)}d.$.style.cssText!==""&&(a.$.style.cssText=d.$.style.cssText)},renameNode:function(a){var b=this;if(b.getName()==a)return;var c=b.getDocument(),d=new h(a,c);b.copyAttributes(d),b.moveChildren(d),b.getParent()&&b.$.parentNode.replaceChild(d.$,b.$),d.$["data-cke-expando"]=b.$["data-cke-expando"],b.$=d.$},getChild:function(a){var b=this.$;if(!a.slice)b=b.childNodes[a];else while(a.length>0&&b)b=b.childNodes[a.shift()];return b?new d.node(b):null},getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(a){a.data.getTarget().hasClass("cke_enable_context_menu")||a.data.preventDefault()})},getDirection:function(a){return a?this.getComputedStyle("direction"):this.getStyle("direction")||this.getAttribute("dir")},data:function(a,b){return a="data-"+a,b===undefined?this.getAttribute(a):(b===!1?this.removeAttribute(a):this.setAttribute(a,b),null)}}),function(){function d(b){var c=0;for(var d=0,e=a[b].length;d<e;d++)c+=parseInt(this.getComputedStyle(a[b][d])||0,10)||0;return c}var a={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};h.prototype.setSize=function(a,e,f){typeof e=="number"&&(f&&(!c||!b.quirks)&&(e-=d.call(this,a)),this.setStyle(a,e+"px"))},h.prototype.getSize=function(a,b){var c=Math.max(this.$["offset"+e.capitalize(a)],this.$["client"+e.capitalize(a)])||0;return b&&(c-=d.call(this,a)),c}}(),a.command=function(b,c){this.uiItems=[],this.exec=function(a){return this.state==0?!1:(this.editorFocus&&b.focus(),c.exec.call(this,b,a)!==!1)},e.extend(this,c,{modes:{wysiwyg:1},editorFocus:1,state:2}),a.event.call(this)},a.command.prototype={enable:function(){var a=this;a.state==0&&a.setState(!a.preserveState||typeof a.previousState=="undefined"?2:a.previousState)},disable:function(){this.setState(0)},setState:function(a){var b=this;return b.state==a?!1:(b.previousState=b.state,b.state=a,b.fire("state"),!0)},toggleState:function(){var a=this;a.state==2?a.setState(1):a.state==1&&a.setState(2)}},a.event.implementOn(a.command.prototype,!0),a.ENTER_P=1,a.ENTER_BR=2,a.ENTER_DIV=3,a.config={customConfig:"config.js",autoUpdateElement:!0,baseHref:"",contentsCss:a.basePath+"contents.css",contentsLangDirection:"ui",contentsLanguage:"",language:"",defaultLanguage:"en",enterMode:1,forceEnterMode:!1,shiftEnterMode:2,corePlugins:"",docType:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',bodyId:"",bodyClass:"",fullPage:!1,height:200,plugins:"about,a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,contextmenu,dialogadvtab,div,elementspath,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,htmldataprocessor,iframe,image,indent,justify,keystrokes,link,list,liststyle,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,scayt,smiley,showblocks,showborders,sourcearea,stylescombo,table,tabletools,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc",extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,theme:"default",skin:"kama",width:"",baseFloatZIndex:1e4};var i=a.config;a.focusManager=function(a){return a.focusManager?a.focusManager:(this.hasFocus=!1,this._={editor:a},this)},a.focusManager.prototype={focus:function(){var b=this;b._.timer&&clearTimeout(b._.timer);if(!b.hasFocus){a.currentInstance&&a.currentInstance.focusManager.forceBlur();var c=b._.editor;c.container.getChild(1).addClass("cke_focus"),b.hasFocus=!0,c.fire("focus")}},blur:function(){var a=this;a._.timer&&clearTimeout(a._.timer),a._.timer=setTimeout(function(){delete a._.timer,a.forceBlur()},100)},forceBlur:function(){if(this.hasFocus){var a=this._.editor;a.container.getChild(1).removeClass("cke_focus"),this.hasFocus=!1,a.fire("blur")}}},function(){var b={};a.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,is:1,it:1,ja:1,km:1,ko:1,lt:1,lv:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sk:1,sl:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,zh:1},load:function(b,c,d){if(!b||!a.lang.languages[b])b=this.detect(c,b);this[b]?d(b,this[b]):a.scriptLoader.load(a.getUrl("lang/"+b+".js"),function(){d(b,this[b])},this)},detect:function(b,c){var d=this.languages;c=c||navigator.userLanguage||navigator.language;var e=c.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),f=e[1],g=e[2];return d[f+"-"+g]?f=f+"-"+g:d[f]||(f=null),a.lang.detect=f?function(){return f}:function(a){return a},f||b}}}(),a.scriptLoader=function(){var b={},d={};return{load:function(e,f,g,i){var j=typeof e=="string";j&&(e=[e]),g||(g=a);var k=e.length,l=[],m=[],n=function(a){f&&(j?f.call(g,a):f.call(g,l,m))};if(k===0){n(!0);return}var o=function(b,c){(c?l:m).push(b),--k<=0&&(i&&a.document.getDocumentElement().removeStyle("cursor"),n(c))},p=function(a,c){b[a]=1;var e=d[a];delete d[a];for(var f=0;f<e.length;f++)e[f](a,c)},q=function(e){if(b[e]){o(e,!0);return}var g=d[e]||(d[e]=[]);g.push(o);if(g.length>1)return;var i=new h("script");i.setAttributes({type:"text/javascript",src:e}),f&&(c?i.$.onreadystatechange=function(){if(i.$.readyState=="loaded"||i.$.readyState=="complete")i.$.onreadystatechange=null,p(e,!0)}:(i.$.onload=function(){setTimeout(function(){p(e,!0)},0)},i.$.onerror=function(){p(e,!1)})),i.appendTo(a.document.getHead())};i&&a.document.getDocumentElement().setStyle("cursor","wait");for(var r=0;r<k;r++)q(e[r])}}}(),a.resourceManager=function(a,b){var c=this;c.basePath=a,c.fileName=b,c.registered={},c.loaded={},c.externals={},c._={waitingList:{}}},a.resourceManager.prototype={add:function(b,c){if(this.registered[b])throw'[CKEDITOR.resourceManager.add] The resource name "'+b+'" is already registered.';a.fire(b+e.capitalize(this.fileName)+"Ready",this.registered[b]=c||{})},get:function(a){return this.registered[a]||null},getPath:function(b){var c=this.externals[b];return a.getUrl(c&&c.dir||this.basePath+b+"/")},getFilePath:function(b){var c=this.externals[b];return a.getUrl(this.getPath(b)+(c&&typeof c.file=="string"?c.file:this.fileName+".js"))},addExternal:function(a,b,c){a=a.split(",");for(var d=0;d<a.length;d++){var e=a[d];this.externals[e]={dir:b,file:c}}},load:function(b,c,d){e.isArray(b)||(b=b?[b]:[]);var f=this.loaded,g=this.registered,h=[],i={},j={};for(var k=0;k<b.length;k++){var l=b[k];if(!l)continue;if(!f[l]&&!g[l]){var m=this.getFilePath(l);h.push(m),m in i||(i[m]=[]),i[m].push(l)}else j[l]=this.get(l)}a.scriptLoader.load(h,function(a,b){if(b.length)throw'[CKEDITOR.resourceManager.load] Resource name "'+i[b[0]].join(",")+'" was not found at "'+b[0]+'".';for(var e=0;e<a.length;e++){var g=i[a[e]];for(var h=0;h<g.length;h++){var k=g[h];j[k]=this.get(k),f[k]=1}}c.call(d,j)},this)}},a.plugins=new a.resourceManager("plugins/","plugin");var j=a.plugins;j.load=e.override(j.load,function(a){return function(b,c,d){var f={},g=function(b){a.call(this,b,function(a){e.extend(f,a);var b=[];for(var h in a){var i=a[h],j=i&&i.requires;if(j)for(var k=0;k<j.length;k++)f[j[k]]||b.push(j[k])}if(b.length)g.call(this,b);else{for(h in f)i=f[h],i.onLoad&&!i.onLoad._called&&(i.onLoad(),i.onLoad._called=1);c&&c.call(d||window,f)}},this)};g.call(this,b)}}),j.setLang=function(a,b,c){var d=this.get(a),e=d.lang||(d.lang={});e[b]=c},a.skins=function(){var b={},c={},d=function(d,f,g,h){function k(a,b){return a.replace(/url\s*\(([\s'"]*)(.*?)([\s"']*)\)/g,function(a,c,d,e){return/^\/|^\w?:/.test(d)?a:"url("+b+c+d+e+")"})}var i=b[f];d.skin||(d.skin=i,i.init&&i.init(d));var j=function(b){for(var d=0;d<b.length;d++)b[d]=a.getUrl(c[f]+b[d])};g=i[g];var l=!g||!!g._isLoaded;if(l)h&&h();else{var m=g._pending||(g._pending=[]);m.push(h);if(m.length>1)return;var n=!g.css||!g.css.length,o=!g.js||!g.js.length,p=function(){if(n&&o){g._isLoaded=1;for(var a=0;a<m.length;a++)m[a]&&m[a]()}};if(!n){var q=g.css;if(e.isArray(q)){j(q);for(var r=0;r<q.length;r++)a.document.appendStyleSheet(q[r])}else q=k(q,a.getUrl(c[f])),a.document.appendStyleText(q);g.css=q,n=1}o||(j(g.js),a.scriptLoader.load(g.js,function(){o=1,p()})),p()}};return{add:function(d,e){b[d]=e,e.skinPath=c[d]||(c[d]=a.getUrl("skins/"+d+"/"))},load:function(e,f,g){var h=e.skinName,i=e.skinPath;b[h]?d(e,h,f,g):(c[h]=i,a.scriptLoader.load(a.getUrl(i+"skin.js"),function(){d(e,h,f,g)}))}}}(),a.themes=new a.resourceManager("themes/","theme"),a.ui=function(a){return a.ui?a.ui:(this._={handlers:{},items:{},editor:a},this)};var k=a.ui;k.prototype={add:function(a,b,c){this._.items[a]={type:b,command:c.command||null,args:Array.prototype.slice.call(arguments,2)}},create:function(a){var b=this,c=b._.items[a],d=c&&b._.handlers[c.type],e=c&&c.command&&b._.editor.getCommand(c.command),f=d&&d.create.apply(b,c.args);return e&&e.uiItems.push(f),f},addHandler:function(a,b){this._.handlers[a]=b}},a.event.implementOn(k),function(){function s(){var a,b=this._.commands,c=this.mode;for(var d in b)a=b[d],a[a.startDisabled?"disable":a.modes[c]?"enable":"disable"]()}var c=0,d=function(){var b="editor"+ ++c;return a.instances&&a.instances[b]?d():b},f={},g=function(b){var c=b.config.customConfig;if(!c)return!1;c=a.getUrl(c);var d=f[c]||(f[c]={});return d.fn?(d.fn.call(b,b.config),(a.getUrl(b.config.customConfig)==c||!g(b))&&b.fireOnce("customConfigLoaded")):a.scriptLoader.load(c,function(){a.editorConfig?d.fn=a.editorConfig:d.fn=function(){},g(b)}),!0},l=function(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);e.extend(a.config,b,!0),delete a.config.on}m(a)}),b&&b.customConfig!=undefined&&(a.config.customConfig=b.customConfig),g(a)||a.fireOnce("customConfigLoaded")},m=function(b){var c=b.config.skin.split(","),d=c[0],e=a.getUrl(c[1]||"skins/"+d+"/");b.skinName=d,b.skinPath=e,b.skinClass="cke_skin_"+d,b.tabIndex=b.config.tabIndex||b.element.getAttribute("tabindex")||0,b.fireOnce("configLoaded"),p(b)},n=function(c){a.lang.load(c.config.language,c.config.defaultLanguage,function(a,d){c.langCode=a,c.lang=e.prototypedCopy(d),b.gecko&&b.version<10900&&c.lang.dir=="rtl"&&(c.lang.dir="ltr");var f=c.config;f.contentsLangDirection=="ui"&&(f.contentsLangDirection=c.lang.dir),o(c)})},o=function(c){var d=c.config,f=d.plugins,g=d.extraPlugins,h=d.removePlugins;if(g){var i=new RegExp("(?:^|,)(?:"+g.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");f=f.replace(i,""),f+=","+g}h&&(i=new RegExp("(?:^|,)(?:"+h.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),f=f.replace(i,"")),b.air&&(f+=",adobeair"),j.load(f.split(","),function(b){var d=[],f=[],g=[];c.plugins=b;for(var h in b){var i=b[h],k=i.lang,l=j.getPath(h),m=null;i.path=l,k&&(m=e.indexOf(k,c.langCode)>=0?c.langCode:k[0],i.lang[m]?(e.extend(c.lang,i.lang[m]),m=null):g.push(a.getUrl(l+"lang/"+m+".js"))),f.push(m),d.push(i)}a.scriptLoader.load(g,function(){var a=["beforeInit","init","afterInit"];for(var b=0;b<a.length;b++)for(var g=0;g<d.length;g++){var h=d[g];b===0&&f[g]&&h.lang&&e.extend(c.lang,h.lang[f[g]]),h[a[b]]&&h[a[b]](c)}c.fire("pluginsLoaded"),q(c)})})},p=function(b){a.skins.load(b,"editor",function(){n(b)})},q=function(b){var c=b.config.theme;a.themes.load(c,function(){var d=b.theme=a.themes.get(c);d.path=a.themes.getPath(c),d.build(b),b.config.autoUpdateElement&&r(b)})},r=function(a){var b=a.element;if(a.elementMode==1&&b.is("textarea")){var c=b.$.form&&new h(b.$.form);if(c){function d(){a.updateElement()}c.on("submit",d),!c.$.submit.nodeName&&!c.$.submit.length&&(c.$.submit=e.override(c.$.submit,function(b){return function(){a.updateElement(),b.apply?b.apply(this,arguments):b()}})),a.on("destroy",function(){c.removeListener("submit",d)})}}};a.editor.prototype._init=function(){var b=this,c=h.get(b._.element),f=b._.instanceConfig;delete b._.element,delete b._.instanceConfig,b._.commands={},b._.styles=[],b.element=c,b.name=c&&b.elementMode==1&&(c.getId()||c.getNameAtt())||d();if(b.name in a.instances)throw'[CKEDITOR.editor] The instance "'+b.name+'" already exists.';b.id=e.getNextId(),b.config=e.prototypedCopy(i),b.ui=new k(b),b.focusManager=new a.focusManager(b),a.fire("instanceCreated",null,b),b.on("mode",s,null,null,1),l(b,f)}}(),e.extend(a.editor.prototype,{addCommand:function(b,c){return this._.commands[b]=new a.command(this,c)},addCss:function(a){this._.styles.push(a)},destroy:function(b){var c=this;b||c.updateElement(),c.fire("destroy"),c.theme&&c.theme.destroy(c),a.remove(c),a.fire("instanceDestroyed",null,c)},execCommand:function(a,b){var c=this.getCommand(a),d={name:a,commandData:b,command:c};if(c&&c.state!=0&&this.fire("beforeCommandExec",d)!==!0){d.returnValue=c.exec(d.commandData);if(!c.async&&this.fire("afterCommandExec",d)!==!0)return d.returnValue}return!1},getCommand:function(a){return this._.commands[a]},getData:function(){var a=this;a.fire("beforeGetData");var b=a._.data;if(typeof b!="string"){var c=a.element;c&&a.elementMode==1?b=c.is("textarea")?c.getValue():c.getHtml():b=""}return b={dataValue:b},a.fire("getData",b),b.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");if(typeof a!="string"){var b=this.element;b&&this.elementMode==1&&(a=b.is("textarea")?b.getValue():b.getHtml())}return a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,c){b&&this.on("dataReady",function(a){a.removeListener(),b.call(a.editor)});var d={dataValue:a};!c&&this.fire("setData",d),this._.data=d.dataValue,!c&&this.fire("afterSetData",d)},insertHtml:function(a){this.fire("insertHtml",a)},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",a)},checkDirty:function(){return this.mayBeDirty&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this.mayBeDirty&&(this._.previousValue=this.getSnapshot())},updateElement:function(){var a=this,b=a.element;if(b&&a.elementMode==1){var c=a.getData();a.config.htmlEncodeOutput&&(c=e.htmlEncode(c)),b.is("textarea")?b.setValue(c):b.setHtml(c)}}}),a.on("loaded",function(){var b=a.editor._pending;if(b){delete a.editor._pending;for(var c=0;c<b.length;c++)b[c]._init()}}),a.htmlParser=function(){this._={htmlPartsRegex:new RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s>]+)\\s*((?:(?:[^\"'>]+)|(?:\"[^\"]*\")|(?:'[^']*'))*)\\/?>))","g")}},function(){var b=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,c={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};a.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(a){var d=this,e,g,h=0,i;while(e=d._.htmlPartsRegex.exec(a)){var j=e.index;if(j>h){var k=a.substring(h,j);i?i.push(k):d.onText(k)}h=d._.htmlPartsRegex.lastIndex;if(g=e[1]){g=g.toLowerCase(),i&&f.$cdata[g]&&(d.onCDATA(i.join("")),i=null);if(!i){d.onTagClose(g);continue}}if(i){i.push(e[0]);continue}if(g=e[3]){g=g.toLowerCase();if(/="/.test(g))continue;var l={},n,o=e[4],p=!!o&&o.charAt(o.length-1)=="/";if(o)while(n=b.exec(o)){var q=n[1].toLowerCase(),r=n[2]||n[3]||n[4]||"";!r&&c[q]?l[q]=q:l[q]=r}d.onTagOpen(g,l,p),!i&&f.$cdata[g]&&(i=[]);continue}(g=e[2])&&d.onComment(g)}a.length>h&&d.onText(a.substring(h,a.length))}}}(),a.htmlParser.comment=function(a){this.value=a,this._={isBlockLike:!1}},a.htmlParser.comment.prototype={type:8,writeHtml:function(a,b){var c=this.value;if(b){if(!(c=b.onComment(c,this)))return;if(typeof c!="string"){c.parent=this.parent,c.writeHtml(a,b);return}}a.comment(c)}},function(){var b=/[\t\r\n ]{2,}|[\t\r\n]/g;a.htmlParser.text=function(a){this.value=a,this._={isBlockLike:!1}},a.htmlParser.text.prototype={type:3,writeHtml:function(a,b){var c=this.value;if(b&&!(c=b.onText(c,this)))return;a.text(c)}}}(),function(){a.htmlParser.cdata=function(a){this.value=a},a.htmlParser.cdata.prototype={type:3,writeHtml:function(a){a.write(this.value)}}}(),a.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){var b={colgroup:1,dd:1,dt:1,li:1,option:1,p:1,td:1,tfoot:1,th:1,thead:1,tr:1},d=e.extend({table:1,ul:1,ol:1,dl:1},f.table,f.ul,f.ol,f.dl),g=f.$list,h=f.$listItem;a.htmlParser.fragment.fromHtml=function(i,j){function v(a){var b;if(q.length>0)for(var c=0;c<q.length;c++){var d=q[c],e=d.name,g=f[e],h=s.name&&f[s.name];(!h||h[e])&&(!a||!g||g[a]||!f[a])&&(b||(w(),b=1),d=d.clone(),d.parent=s,s=d,q.splice(c,1),c--)}}function w(a){while(r.length-(a||0)>0)s.add(r.shift())}function x(a,b,c){b=b||s||p;if(j&&!b.type){var d,g;a.attributes&&(g=a.attributes["data-cke-real-element-type"])?d=g:d=a.name;if(d&&d in f.$inline){var h=s;s=b,k.onTagOpen(j,{}),b=s,c&&(s=h)}}if(a._.isBlockLike&&a.name!="pre"){var i=a.children.length,l=a.children[i-1],m;l&&l.type==3&&((m=e.rtrim(l.value))?l.value=m:a.children.length=i-1)}b.add(a),a.returnPoint&&(s=a.returnPoint,delete a.returnPoint)}var k=new a.htmlParser,l=[],p=new a.htmlParser.fragment,q=[],r=[],s=p,t=!1,u;k.onTagOpen=function(c,e,i){var j=new a.htmlParser.element(c,e);j.isUnknown&&i&&(j.isEmpty=!0);if(f.$removeEmpty[c]){q.push(j);return}if(c=="pre")t=!0;else if(c=="br"&&t){s.add(new a.htmlParser.text("\n"));return}if(c=="br"){r.push(j);return}var l=s.name,p=l&&(f[l]||(s._.isBlockLike?f.div:f.span));if(p&&!j.isUnknown&&!s.isUnknown&&!p[c]){var y=!1,z;if(c in g&&l in g){var C=s.children,D=C[C.length-1];D&&D.name in h||x(D=new a.htmlParser.element("li"),s),u=s,z=D}else c==l?x(s,s.parent):c in f.$listItem?(k.onTagOpen("ul",{}),z=s,y=!0):(d[l]?u||(u=s):(x(s,s.parent,!0),b[l]||q.unshift(s)),y=!0);z?s=z:s=s.returnPoint||s.parent;if(y){k.onTagOpen.apply(this,arguments);return}}v(c),w(),j.parent=s,j.returnPoint=u,u=0,j.isEmpty?x(j):s=j},k.onTagClose=function(a){for(var b=q.length-1;b>=0;b--)if(a==q[b].name){q.splice(b,1);return}var c=[],d=[],e=s;while(e.type&&e.name!=a)e._.isBlockLike||d.unshift(e),c.push(e),e=e.parent;if(e.type){for(b=0;b<c.length;b++){var f=c[b];x(f,f.parent)}s=e,s.name=="pre"&&(t=!1),e._.isBlockLike&&w(),x(e,e.parent),e==s&&(s=s.parent),q=q.concat(d)}a=="body"&&(j=!1)},k.onText=function(b){if(!s._.hasInlineStarted&&!t){b=e.ltrim(b);if(b.length===0)return}w(),v(),j&&(!s.type||s.name=="body")&&e.trim(b)&&this.onTagOpen(j,{}),t||(b=b.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),s.add(new a.htmlParser.text(b))},k.onCDATA=function(b){s.add(new a.htmlParser.cdata(b))},k.onComment=function(b){w(),v(),s.add(new a.htmlParser.comment(b))},k.parse(i),w(!c&&1);while(s.type){var y=s.parent,z=s;j&&(!y.type||y.name=="body")&&!f.$body[z.name]&&(s=y,k.onTagOpen(j,{}),y=s),y.add(z),s=y}return p},a.htmlParser.fragment.prototype={add:function(a){var b=this,c=b.children.length,d=c>0&&b.children[c-1]||null;if(d){if(a._.isBlockLike&&d.type==3){d.value=e.rtrim(d.value);if(d.value.length===0){b.children.pop(),b.add(a);return}}d.next=a}a.previous=d,a.parent=b,b.children.push(a),b._.hasInlineStarted=a.type==3||a.type==1&&!a._.isBlockLike},writeHtml:function(b,c){var d;this.filterChildren=function(){var b=new a.htmlParser.basicWriter;this.writeChildrenHtml.call(this,b,c,!0);var e=b.getHtml();this.children=(new a.htmlParser.fragment.fromHtml(e)).children,d=1},!this.name&&c&&c.onFragment(this),this.writeChildrenHtml(b,d?null:c)},writeChildrenHtml:function(a,b){for(var c=0;c<this.children.length;c++)this.children[c].writeHtml(a,b)}}}(),a.htmlParser.element=function(a,b){var c=this;c.name=a,c.attributes=b||(b={}),c.children=[];var d=b["data-cke-real-element-type"]||a,e=d.match(/^cke:(.*)/);e&&(d=e[1]);var g=f,h=!!(g.$nonBodyContent[d]||g.$block[d]||g.$listItem[d]||g.$tableContent[d]||g.$nonEditable[d]||d=="br"),i=!!g.$empty[a];c.isEmpty=i,c.isUnknown=!g[a],c._={isBlockLike:h,hasInlineStarted:i||!h}},function(){var b=function(a,b){return a=a[0],b=b[0],a<b?-1:a>b?1:0};a.htmlParser.element.prototype={type:1,add:a.htmlParser.fragment.prototype.add,clone:function(){return new a.htmlParser.element(this.name,this.attributes)},writeHtml:function(c,d){var e=this.attributes,f=this,g=f.name,h,i,j,k;f.filterChildren=function(){if(!k){var b=new a.htmlParser.basicWriter;a.htmlParser.fragment.prototype.writeChildrenHtml.call(f,b,d),f.children=(new a.htmlParser.fragment.fromHtml(b.getHtml())).children,k=1}};if(d){for(;;){if(!(g=d.onElementName(g)))return;f.name=g;if(!(f=d.onElement(f)))return;f.parent=this.parent;if(f.name==g)break;if(f.type!=1){f.writeHtml(c,d);return}g=f.name;if(!g){this.writeChildrenHtml.call(f,c,k?null:d);return}}e=f.attributes}c.openTag(g,e);var l=[];for(var m=0;m<2;m++)for(h in e){i=h,j=e[h];if(m==1)l.push([h,j]);else if(d){for(;;){if(!(i=d.onAttributeName(h))){delete e[h];break}if(i!=h){delete e[h],h=i;continue}break}i&&((j=d.onAttribute(f,i,j))===!1?delete e[i]:e[i]=j)}}c.sortAttributes&&l.sort(b);var n=l.length;for(m=0;m<n;m++){var o=l[m];c.attribute(o[0],o[1])}c.openTagClose(g,f.isEmpty),f.isEmpty||(this.writeChildrenHtml.call(f,c,k?null:d),c.closeTag(g))},writeChildrenHtml:function(b,c){a.htmlParser.fragment.prototype.writeChildrenHtml.apply(this,arguments)}}}(),function(){function b(a,b){for(var c=0;a&&c<b.length;c++){var d=b[c];a=a.replace(d[0],d[1])}return a}function c(a,b,c){typeof b=="function"&&(b=[b]);var d,e,f=a.length,g=b&&b.length;if(g){for(d=0;d<f&&a[d].pri<c;d++);for(e=g-1;e>=0;e--){var h=b[e];h&&(h.pri=c,a.splice(d,0,h))}}}function d(a,b,c){if(b)for(var d in b){var e=a[d];a[d]=f(e,b[d],c),e||a.$length++}}function f(a,b,d){if(b)return b.pri=d,a?(a.splice?c(a,b,d):(a.pri>d?a=[b,a]:a=[a,b],a.filter=g),a):(b.filter=b,b)}function g(b){var c=b.type||b instanceof a.htmlParser.fragment;for(var d=0;d<this.length;d++){if(c)var e=b.type,f=b.name;var g=this[d],h=g.apply(window,arguments);if(h===!1)return h;if(c){if(h&&(h.name!=f||h.type!=e))return h}else if(typeof h!="string")return h;h!=undefined&&(b=h)}return b}a.htmlParser.filter=e.createClass({$:function(a){this._={elementNames:[],attributeNames:[],elements:{$length:0},attributes:{$length:0}},a&&this.addRules(a,10)},proto:{addRules:function(a,b){var e=this;typeof b!="number"&&(b=10),c(e._.elementNames,a.elementNames,b),c(e._.attributeNames,a.attributeNames,b),d(e._.elements,a.elements,b),d(e._.attributes,a.attributes,b),e._.text=f(e._.text,a.text,b)||e._.text,e._.comment=f(e._.comment,a.comment,b)||e._.comment,e._.root=f(e._.root,a.root,b)||e._.root},onElementName:function(a){return b(a,this._.elementNames)},onAttributeName:function(a){return b(a,this._.attributeNames)},onText:function(a){var b=this._.text;return b?b.filter(a):a},onComment:function(a,b){var c=this._.comment;return c?c.filter(a,b):a},onFragment:function(a){var b=this._.root;return b?b.filter(a):a},onElement:function(a){var b=this,c=[b._.elements["^"],b._.elements[a.name],b._.elements.$],d,e;for(var f=0;f<3;f++){d=c[f];if(d){e=d.filter(a,b);if(e===!1)return null;if(e&&e!=a)return b.onNode(e);if(a.parent&&!a.name)break}}return a},onNode:function(b){var c=b.type;return c==1?this.onElement(b):c==3?new a.htmlParser.text(this.onText(b.value)):c==8?new a.htmlParser.comment(this.onComment(b.value)):null},onAttribute:function(a,b,c){var d=this._.attributes[b];if(d){var e=d.filter(c,a,this);if(e===!1)return!1;if(typeof e!="undefined")return e}return c}}})}(),a.htmlParser.basicWriter=e.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a,b){this._.output.push("<",a)},openTagClose:function(a,b){b?this._.output.push(" />"):this._.output.push(">")},attribute:function(a,b){typeof b=="string"&&(b=e.htmlEncodeAttr(b)),this._.output.push(" ",a,'="',b,'"')},closeTag:function(a){this._.output.push("</",a,">")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("<!--",a,"-->")},write:function(a){this._.output.push(a)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(a){var b=this._.output.join("");return a&&this.reset(),b}}}),delete a.loadFullCore,a.instances={},a.document=new g(document),a.add=function(b){a.instances[b.name]=b,b.on("focus",function(){a.currentInstance!=b&&(a.currentInstance=b,a.fire("currentInstance"))}),b.on("blur",function(){a.currentInstance==b&&(a.currentInstance=null,a.fire("currentInstance"))})},a.remove=function(b){delete a.instances[b.name]},a.on("instanceDestroyed",function(){e.isEmpty(this.instances)&&a.fire("reset")}),a.TRISTATE_ON=1,a.TRISTATE_OFF=2,a.TRISTATE_DISABLED=0,d.comment=e.createClass({base:d.node,$:function(a,b){typeof a=="string"&&(a=(b?b.$:document).createComment(a)),this.base(a)},proto:{type:8,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}}}),function(){var a={address:1,blockquote:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,dd:1,legend:1},b={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1,fieldset:1},e=function(a){var b=a.getChildren();for(var c=0,d=b.count();c<d;c++){var e=b.getItem(c);if(e.type==1&&f.$block[e.getName()])return!0}return!1};d.elementPath=function(d){var f=this,g=null,h=null,i=[],j=d;while(j){if(j.type==1){f.lastElement||(f.lastElement=j);var k=j.getName();c&&j.$.scopeName!="HTML"&&(k=j.$.scopeName.toLowerCase()+":"+k),h||(!g&&a[k]&&(g=j),b[k]&&(!g&&k=="div"&&!e(j)?g=j:h=j)),i.push(j);if(k=="body")break}j=j.getParent()}f.block=g,f.blockLimit=h,f.elements=i}}(),d.elementPath.prototype={compare:function(a){var b=this.elements,c=a&&a.elements;if(!c||b.length!=c.length)return!1;for(var d=0;d<b.length;d++)if(!b[d].equals(c[d]))return!1;return!0},contains:function(a){var b=this.elements;for(var c=0;c<b.length;c++)if(b[c].getName()in a)return b[c];return null}},d.text=function(a,b){typeof a=="string"&&(a=(b?b.$:document).createTextNode(a)),this.$=a},d.text.prototype=new d.node,e.extend(d.text.prototype,{type:3,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},split:function(a){var e=this;if(c&&a==e.getLength()){var f=e.getDocument().createText("");return f.insertAfter(e),f}var g=e.getDocument(),h=new d.text(e.$.splitText(a),g);if(b.ie8){var i=new d.text("",g);i.insertAfter(h),i.remove()}return h},substring:function(a,b){return typeof b!="number"?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,b)}}),d.documentFragment=function(b){b=b||a.document,this.$=b.$.createDocumentFragment()},e.extend(d.documentFragment.prototype,h.prototype,{type:11,insertAfterNode:function(a){a=a.$,a.parentNode.insertBefore(this.$,a.nextSibling)}},!0,{append:1,appendBogus:1,getFirst:1,getLast:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function a(a,b){if(this._.end)return null;var c,d=this.range,e,f=this.guard,g=this.type,h=a?"getPreviousSourceNode":"getNextSourceNode";if(!this._.start){this._.start=1,d.trim();if(d.collapsed)return this.end(),null}if(!a&&!this._.guardLTR){var i=d.endContainer,j=i.getChild(d.endOffset);this._.guardLTR=function(a,b){return(!b||!i.equals(a))&&(!j||!a.equals(j))&&(a.type!=1||!b||a.getName()!="body")}}if(a&&!this._.guardRTL){var k=d.startContainer,l=d.startOffset>0&&k.getChild(d.startOffset-1);this._.guardRTL=function(a,b){return(!b||!k.equals(a))&&(!l||!a.equals(l))&&(a.type!=1||!b||a.getName()!="body")}}var m=a?this._.guardRTL:this._.guardLTR;f?e=function(a,b){return m(a,b)===!1?!1:f(a,b)}:e=m,this.current?c=this.current[h](!1,g,e):a?(c=d.endContainer,d.endOffset>0?(c=c.getChild(d.endOffset-1),e(c)===!1&&(c=null)):c=e(c,!0)===!1?null:c.getPreviousSourceNode(!0,g,e)):(c=d.startContainer,c=c.getChild(d.startOffset),c?e(c)===!1&&(c=null):c=e(d.startContainer,!0)===!1?null:d.startContainer.getNextSourceNode(!0,g,e));while(c&&!this._.end){this.current=c;if(!this.evaluator||this.evaluator(c)!==!1){if(!b)return c}else if(b&&this.evaluator)return!1;c=c[h](!1,g,e)}return this.end(),this.current=null}function b(b){var c,d=null;while(c=a.call(this,b))d=c;return d}d.walker=e.createClass({$:function(a){this.range=a,this._={}},proto:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,1)},checkForward:function(){return a.call(this,0,1)!==!1},checkBackward:function(){return a.call(this,1,1)!==!1},lastForward:function(){return b.call(this)},lastBackward:function(){return b.call(this,1)},reset:function(){delete this.current,this._={}}}});var g={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1};h.prototype.isBlockBoundary=function(a){var b=e.extend({},f.$block,a||{});return this.getComputedStyle("float")=="none"&&g[this.getComputedStyle("display")]||b[this.getName()]},d.walker.blockBoundary=function(a){return function(b,c){return b.type!=1||!b.isBlockBoundary(a)}},d.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},d.walker.bookmark=function(a,b){function c(a){return a&&a.getName&&a.getName()=="span"&&a.data("cke-bookmark")}return function(d){var e,f;return e=d&&!d.getName&&(f=d.getParent())&&c(f),e=a?e:e||c(d),!!(b^e)}},d.walker.whitespaces=function(a){return function(b){var c=b&&b.type==3&&!e.trim(b.getText());return!!(a^c)}},d.walker.invisible=function(a){var b=d.walker.whitespaces();return function(c){var d=b(c)||c.is&&!c.$.offsetHeight;return!!(a^d)}},d.walker.nodeType=function(a,b){return function(c){return!!(b^c.type==a)}};var i=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,j=d.walker.whitespaces(),k=d.walker.bookmark(),l=function(a){return k(a)||j(a)||a.type==1&&a.getName()in f.$inline&&!(a.getName()in f.$empty)};h.prototype.getBogus=function(){var a=this;do a=a.getPreviousSourceNode();while(l(a));return a&&(c?a.getText&&i.test(a.getText()):a.is&&a.is("br"))?a:!1}}(),d.range=function(a){var b=this;b.startContainer=null,b.startOffset=null,b.endContainer=null,b.endOffset=null,b.collapsed=!0,b.document=a},function(){function i(a){var b=!1,f=d.walker.bookmark(!0);return function(d){if(f(d))return!0;if(d.type==3){if(e.trim(d.getText()).length)return!1}else if(d.type==1&&!g[d.getName()]){if(!(!a&&!c&&d.getName()=="br"&&!b))return!1;b=!0}return!0}}function j(a){return a.type!=3&&a.getName()in f.$removeEmpty||!e.trim(a.getText())||!!a.getParent().data("cke-bookmark")}function m(a){return!k(a)&&!l(a)}var a=function(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer.equals(a.endContainer)&&a.startOffset==a.endOffset},b=function(a,b,c,d){a.optimizeBookmark();var e=a.startContainer,f=a.endContainer,g=a.startOffset,i=a.endOffset,j,k;f.type==3?
f=f.split(i):f.getChildCount()>0&&(i>=f.getChildCount()?(f=f.append(a.document.createText("")),k=!0):f=f.getChild(i)),e.type==3?(e.split(g),e.equals(f)&&(f=e.getNext())):g?g>=e.getChildCount()?(e=e.append(a.document.createText("")),j=!0):e=e.getChild(g).getPrevious():(e=e.getFirst().insertBeforeMe(a.document.createText("")),j=!0);var l=e.getParents(),m=f.getParents(),n,o,p;for(n=0;n<l.length;n++){o=l[n],p=m[n];if(!o.equals(p))break}var q=c,r,s,t,u;for(var v=n;v<l.length;v++){r=l[v],q&&!r.equals(e)&&(s=q.append(r.clone())),t=r.getNext();while(t){if(t.equals(m[v])||t.equals(f))break;u=t.getNext(),b==2?q.append(t.clone(!0)):(t.remove(),b==1&&q.append(t)),t=u}q&&(q=s)}q=c;for(var w=n;w<m.length;w++){r=m[w],b>0&&!r.equals(f)&&(s=q.append(r.clone()));if(!l[w]||r.$.parentNode!=l[w].$.parentNode){t=r.getPrevious();while(t){if(t.equals(l[w])||t.equals(e))break;u=t.getPrevious(),b==2?q.$.insertBefore(t.$.cloneNode(!0),q.$.firstChild):(t.remove(),b==1&&q.$.insertBefore(t.$,q.$.firstChild)),t=u}}q&&(q=s)}if(b==2){var x=a.startContainer;x.type==3&&(x.$.data+=x.$.nextSibling.data,x.$.parentNode.removeChild(x.$.nextSibling));var y=a.endContainer;y.type==3&&y.$.nextSibling&&(y.$.data+=y.$.nextSibling.data,y.$.parentNode.removeChild(y.$.nextSibling))}else{if(o&&p&&(e.$.parentNode!=o.$.parentNode||f.$.parentNode!=p.$.parentNode)){var z=p.getIndex();j&&p.$.parentNode==e.$.parentNode&&z--;if(d&&o.type==1){var A=h.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',a.document);A.insertAfter(o),o.mergeSiblings(!1),a.moveToBookmark({startNode:A})}else a.setStart(p.getParent(),z)}a.collapse(!0)}j&&e.remove(),k&&f.$.parentNode&&f.remove()},g={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},k=new d.walker.whitespaces,l=new d.walker.bookmark;d.range.prototype={clone:function(){var a=this,b=new d.range(a.document);return b.startContainer=a.startContainer,b.startOffset=a.startOffset,b.endContainer=a.endContainer,b.endOffset=a.endOffset,b.collapsed=a.collapsed,b},collapse:function(a){var b=this;a?(b.endContainer=b.startContainer,b.endOffset=b.startOffset):(b.startContainer=b.endContainer,b.startOffset=b.endOffset),b.collapsed=!0},cloneContents:function(){var a=new d.documentFragment(this.document);return this.collapsed||b(this,2,a),a},deleteContents:function(a){if(this.collapsed)return;b(this,0,null,a)},extractContents:function(a){var c=new d.documentFragment(this.document);return this.collapsed||b(this,1,c,a),c},createBookmark:function(a){var b=this,c,d,f,g,h=b.collapsed;return c=b.document.createElement("span"),c.data("cke-bookmark",1),c.setStyle("display","none"),c.setHtml("&nbsp;"),a&&(f="cke_bm_"+e.getNextNumber(),c.setAttribute("id",f+"S")),h||(d=c.clone(),d.setHtml("&nbsp;"),a&&d.setAttribute("id",f+"E"),g=b.clone(),g.collapse(),g.insertNode(d)),g=b.clone(),g.collapse(!0),g.insertNode(c),d?(b.setStartAfter(c),b.setEndBefore(d)):b.moveToPosition(c,4),{startNode:a?f+"S":c,endNode:a?f+"E":d,serializable:a,collapsed:h}},createBookmark2:function(a){var b=this,c=b.startContainer,d=b.endContainer,e=b.startOffset,f=b.endOffset,g=b.collapsed,h,i;if(!c||!d)return{start:0,end:0};if(a){c.type==1&&(h=c.getChild(e),h&&h.type==3&&e>0&&h.getPrevious().type==3&&(c=h,e=0));while(c.type==3&&(i=c.getPrevious())&&i.type==3)c=i,e+=i.getLength();if(!g){d.type==1&&(h=d.getChild(f),h&&h.type==3&&f>0&&h.getPrevious().type==3&&(d=h,f=0));while(d.type==3&&(i=d.getPrevious())&&i.type==3)d=i,f+=i.getLength()}}return{start:c.getAddress(a),end:g?null:d.getAddress(a),startOffset:e,endOffset:f,normalized:a,collapsed:g,is2:!0}},moveToBookmark:function(a){var b=this;if(a.is2){var c=b.document.getByAddress(a.start,a.normalized),d=a.startOffset,e=a.end&&b.document.getByAddress(a.end,a.normalized),f=a.endOffset;b.setStart(c,d),e?b.setEnd(e,f):b.collapse(!0)}else{var g=a.serializable,h=g?b.document.getById(a.startNode):a.startNode,i=g?b.document.getById(a.endNode):a.endNode;b.setStartBefore(h),h.remove(),i?(b.setEndBefore(i),i.remove()):b.collapse(!0)}},getBoundaryNodes:function(){var a=this,b=a.startContainer,c=a.endContainer,e=a.startOffset,f=a.endOffset,g;if(b.type==1){g=b.getChildCount();if(g>e)b=b.getChild(e);else if(g<1)b=b.getPreviousSourceNode();else{b=b.$;while(b.lastChild)b=b.lastChild;b=new d.node(b),b=b.getNextSourceNode()||b}}if(c.type==1){g=c.getChildCount();if(g>f)c=c.getChild(f).getPreviousSourceNode(!0);else if(g<1)c=c.getPreviousSourceNode();else{c=c.$;while(c.lastChild)c=c.lastChild;c=new d.node(c)}}return b.getPosition(c)&2&&(b=c),{startNode:b,endNode:c}},getCommonAncestor:function(a,b){var c=this,d=c.startContainer,e=c.endContainer,f;return d.equals(e)?a&&d.type==1&&c.startOffset==c.endOffset-1?f=d.getChild(c.startOffset):f=d:f=d.getCommonAncestor(e),b&&!f.is?f.getParent():f},optimize:function(){var a=this,b=a.startContainer,c=a.startOffset;b.type!=1&&(c?c>=b.getLength()&&a.setStartAfter(b):a.setStartBefore(b)),b=a.endContainer,c=a.endOffset,b.type!=1&&(c?c>=b.getLength()&&a.setEndAfter(b):a.setEndBefore(b))},optimizeBookmark:function(){var a=this,b=a.startContainer,c=a.endContainer;b.is&&b.is("span")&&b.data("cke-bookmark")&&a.setStartAt(b,3),c&&c.is&&c.is("span")&&c.data("cke-bookmark")&&a.setEndAt(c,4)},trim:function(a,b){var c=this,d=c.startContainer,e=c.startOffset,f=c.collapsed;if((!a||f)&&d&&d.type==3){if(!e)e=d.getIndex(),d=d.getParent();else if(e>=d.getLength())e=d.getIndex()+1,d=d.getParent();else{var g=d.split(e);e=d.getIndex()+1,d=d.getParent(),c.startContainer.equals(c.endContainer)?c.setEnd(g,c.endOffset-c.startOffset):d.equals(c.endContainer)&&(c.endOffset+=1)}c.setStart(d,e);if(f){c.collapse(!0);return}}var h=c.endContainer,i=c.endOffset;!b&&!f&&h&&h.type==3&&(i?i>=h.getLength()?(i=h.getIndex()+1,h=h.getParent()):(h.split(i),i=h.getIndex()+1,h=h.getParent()):(i=h.getIndex(),h=h.getParent()),c.setEnd(h,i))},enlarge:function(a,b){switch(a){case 1:if(this.collapsed)return;var c=this.getCommonAncestor(),g=this.document.getBody(),h,i,j,k,l,m=!1,n,o,p=this.startContainer,q=this.startOffset;p.type==3?(q&&(p=!e.trim(p.substring(0,q)).length&&p,m=!!p),p&&((k=p.getPrevious())||(j=p.getParent()))):(q&&(k=p.getChild(q-1)||p.getLast()),k||(j=p));while(j||k){if(j&&!k){!l&&j.equals(c)&&(l=!0);if(!g.contains(j))break;if(!m||j.getComputedStyle("display")!="inline")m=!1,l?h=j:this.setStartBefore(j);k=j.getPrevious()}while(k){n=!1;if(k.type==3)o=k.getText(),/[^\s\ufeff]/.test(o)&&(k=null),n=/[\s\ufeff]$/.test(o);else if((k.$.offsetWidth>0||b&&k.is("br"))&&!k.data("cke-bookmark"))if(m&&f.$removeEmpty[k.getName()]){o=k.getText();if(/[^\s\ufeff]/.test(o))k=null;else{var r=k.$.all||k.$.getElementsByTagName("*");for(var s=0,t;t=r[s++];)if(!f.$removeEmpty[t.nodeName.toLowerCase()]){k=null;break}}k&&(n=!!o.length)}else k=null;n&&(m?l?h=j:j&&this.setStartBefore(j):m=!0);if(k){var u=k.getPrevious();if(!j&&!u){j=k,k=null;break}k=u}else j=null}j&&(j=j.getParent())}p=this.endContainer,q=this.endOffset,j=k=null,l=m=!1,p.type==3?(p=!e.trim(p.substring(q)).length&&p,m=!p||!p.getLength(),p&&((k=p.getNext())||(j=p.getParent()))):(k=p.getChild(q),k||(j=p));while(j||k){if(j&&!k){!l&&j.equals(c)&&(l=!0);if(!g.contains(j))break;if(!m||j.getComputedStyle("display")!="inline")m=!1,l?i=j:j&&this.setEndAfter(j);k=j.getNext()}while(k){n=!1;if(k.type==3)o=k.getText(),/[^\s\ufeff]/.test(o)&&(k=null),n=/^[\s\ufeff]/.test(o);else if((k.$.offsetWidth>0||b&&k.is("br"))&&!k.data("cke-bookmark"))if(m&&f.$removeEmpty[k.getName()]){o=k.getText();if(/[^\s\ufeff]/.test(o))k=null;else{r=k.$.all||k.$.getElementsByTagName("*");for(s=0;t=r[s++];)if(!f.$removeEmpty[t.nodeName.toLowerCase()]){k=null;break}}k&&(n=!!o.length)}else k=null;n&&m&&(l?i=j:this.setEndAfter(j));if(k){u=k.getNext();if(!j&&!u){j=k,k=null;break}k=u}else j=null}j&&(j=j.getParent())}h&&i&&(c=h.contains(i)?i:h,this.setStartBefore(c),this.setEndAfter(c));break;case 2:case 3:var v=new d.range(this.document);g=this.document.getBody(),v.setStartAt(g,1),v.setEnd(this.startContainer,this.startOffset);var w=new d.walker(v),x,y,z=d.walker.blockBoundary(a==3?{br:1}:null),A=function(a){var b=z(a);return b||(x=a),b},B=function(a){var b=A(a);return!b&&a.is&&a.is("br")&&(y=a),b};w.guard=A,j=w.lastBackward(),x=x||g,this.setStartAt(x,!x.is("br")&&(!j&&this.checkStartOfBlock()||j&&x.contains(j))?1:4),v=this.clone(),v.collapse(),v.setEndAt(g,2),w=new d.walker(v),w.guard=a==3?B:A,x=null,j=w.lastForward(),x=x||g,this.setEndAt(x,!j&&this.checkEndOfBlock()||j&&x.contains(j)?2:3),y&&this.setEndAfter(y)}},shrink:function(a,b){if(!this.collapsed){a=a||2;var c=this.clone(),e=this.startContainer,f=this.endContainer,g=this.startOffset,h=this.endOffset,i=this.collapsed,j=1,k=1;e&&e.type==3&&(g?g>=e.getLength()?c.setStartAfter(e):(c.setStartBefore(e),j=0):c.setStartBefore(e)),f&&f.type==3&&(h?h>=f.getLength()?c.setEndAfter(f):(c.setEndAfter(f),k=0):c.setEndBefore(f));var l=new d.walker(c),m=d.walker.bookmark();l.evaluator=function(b){return b.type==(a==1?1:3)};var n;l.guard=function(b,c){return m(b)?!0:a==1&&b.type==3?!1:c&&b.equals(n)?!1:(!c&&b.type==1&&(n=b),!0)};if(j){var o=l[a==1?"lastForward":"next"]();o&&this.setStartAt(o,b?1:3)}if(k){l.reset();var p=l[a==1?"lastBackward":"previous"]();p&&this.setEndAt(p,b?2:4)}return!!j||!!k}},insertNode:function(a){var b=this;b.optimizeBookmark(),b.trim(!1,!0);var c=b.startContainer,d=b.startOffset,e=c.getChild(d);e?a.insertBefore(e):c.append(a),a.getParent().equals(b.endContainer)&&b.endOffset++,b.setStartBefore(a)},moveToPosition:function(a,b){this.setStartAt(a,b),this.collapse(!0)},selectNodeContents:function(a){this.setStart(a,0),this.setEnd(a,a.type==3?a.getLength():a.getChildCount())},setStart:function(b,c){var d=this;b.type==1&&f.$empty[b.getName()]&&(c=b.getIndex(),b=b.getParent()),d.startContainer=b,d.startOffset=c,d.endContainer||(d.endContainer=b,d.endOffset=c),a(d)},setEnd:function(b,c){var d=this;b.type==1&&f.$empty[b.getName()]&&(c=b.getIndex()+1,b=b.getParent()),d.endContainer=b,d.endOffset=c,d.startContainer||(d.startContainer=b,d.startOffset=c),a(d)},setStartAfter:function(a){this.setStart(a.getParent(),a.getIndex()+1)},setStartBefore:function(a){this.setStart(a.getParent(),a.getIndex())},setEndAfter:function(a){this.setEnd(a.getParent(),a.getIndex()+1)},setEndBefore:function(a){this.setEnd(a.getParent(),a.getIndex())},setStartAt:function(b,c){var d=this;switch(c){case 1:d.setStart(b,0);break;case 2:b.type==3?d.setStart(b,b.getLength()):d.setStart(b,b.getChildCount());break;case 3:d.setStartBefore(b);break;case 4:d.setStartAfter(b)}a(d)},setEndAt:function(b,c){var d=this;switch(c){case 1:d.setEnd(b,0);break;case 2:b.type==3?d.setEnd(b,b.getLength()):d.setEnd(b,b.getChildCount());break;case 3:d.setEndBefore(b);break;case 4:d.setEndAfter(b)}a(d)},fixBlock:function(a,b){var d=this,e=d.createBookmark(),f=d.document.createElement(b);return d.collapse(a),d.enlarge(2),d.extractContents().appendTo(f),f.trim(),c||f.appendBogus(),d.insertNode(f),d.moveToBookmark(e),f},splitBlock:function(a){var b=this,e=new d.elementPath(b.startContainer),f=new d.elementPath(b.endContainer),g=e.blockLimit,h=f.blockLimit,i=e.block,j=f.block,k=null;if(!g.equals(h))return null;a!="br"&&(i||(i=b.fixBlock(!0,a),j=(new d.elementPath(b.endContainer)).block),j||(j=b.fixBlock(!1,a)));var l=i&&b.checkStartOfBlock(),m=j&&b.checkEndOfBlock();return b.deleteContents(),i&&i.equals(j)&&(m?(k=new d.elementPath(b.startContainer),b.moveToPosition(j,4),j=null):l?(k=new d.elementPath(b.startContainer),b.moveToPosition(i,3),i=null):(j=b.splitElement(i),!c&&!i.is("ul","ol")&&i.appendBogus())),{previousBlock:i,nextBlock:j,wasStartOfBlock:l,wasEndOfBlock:m,elementPath:k}},splitElement:function(a){var b=this;if(!b.collapsed)return null;b.setEndAt(a,2);var c=b.extractContents(),d=a.clone(!1);return c.appendTo(d),d.insertAfter(a),b.moveToPosition(a,4),d},checkBoundaryOfElement:function(a,b){var c=b==1,e=this.clone();e.collapse(c),e[c?"setStartAt":"setEndAt"](a,c?1:2);var f=new d.walker(e);return f.evaluator=j,f[c?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var a=this,b=a.startContainer,c=a.startOffset;if(c&&b.type==3){var f=e.ltrim(b.substring(0,c));if(f.length)return!1}a.trim();var g=new d.elementPath(a.startContainer),h=a.clone();h.collapse(!0),h.setStartAt(g.block||g.blockLimit,1);var j=new d.walker(h);return j.evaluator=i(!0),j.checkBackward()},checkEndOfBlock:function(){var a=this,b=a.endContainer,c=a.endOffset;if(b.type==3){var f=e.rtrim(b.substring(c));if(f.length)return!1}a.trim();var g=new d.elementPath(a.endContainer),h=a.clone();h.collapse(!1),h.setEndAt(g.block||g.blockLimit,2);var j=new d.walker(h);return j.evaluator=i(!1),j.checkForward()},checkReadOnly:function(){function a(a,b){while(a){if(a.type==1){if(a.getAttribute("contentEditable")=="false"&&!a.data("cke-editable"))return 0;if(a.is("body")||a.getAttribute("contentEditable")=="true"&&(a.contains(b)||a.equals(b)))break}a=a.getParent()}return 1}return function(){var b=this.startContainer,c=this.endContainer;return!a(b,c)||!a(c,b)}}(),moveToElementEditablePosition:function(a,b){var c;if(f.$empty[a.getName()])return!1;while(a&&a.type==1){c=a.isEditable();if(c)this.moveToPosition(a,b?2:1);else if(f.$inline[a.getName()])return this.moveToPosition(a,b?4:3),!0;f.$empty[a.getName()]?a=a[b?"getPrevious":"getNext"](m):a=a[b?"getLast":"getFirst"](m);if(a&&a.type==3)return this.moveToPosition(a,b?4:3),!0}return c},moveToElementEditStart:function(a){return this.moveToElementEditablePosition(a)},moveToElementEditEnd:function(a){return this.moveToElementEditablePosition(a,!0)},getEnclosedNode:function(){var a=this.clone();a.optimize();if(a.startContainer.type!=1||a.endContainer.type!=1)return null;var b=new d.walker(a),c=d.walker.bookmark(!0),e=d.walker.whitespaces(!0),f=function(a){return e(a)&&c(a)};a.evaluator=f;var g=b.next();return b.reset(),g&&g.equals(b.previous())?g:null},getTouchedStartNode:function(){var a=this.startContainer;return this.collapsed||a.type!=1?a:a.getChild(this.startOffset)||a},getTouchedEndNode:function(){var a=this.endContainer;return this.collapsed||a.type!=1?a:a.getChild(this.endOffset-1)||a}}}(),a.POSITION_AFTER_START=1,a.POSITION_BEFORE_END=2,a.POSITION_BEFORE_START=3,a.POSITION_AFTER_END=4,a.ENLARGE_ELEMENT=1,a.ENLARGE_BLOCK_CONTENTS=2,a.ENLARGE_LIST_ITEM_CONTENTS=3,a.START=1,a.END=2,a.STARTEND=3,a.SHRINK_ELEMENT=1,a.SHRINK_TEXT=2,function(){function b(a,b,c){var d=a.serializable,e=b[c?"endContainer":"startContainer"],f=c?"endOffset":"startOffset",g=d?b.document.getById(a.startNode):a.startNode,h=d?b.document.getById(a.endNode):a.endNode;return e.equals(g.getPrevious())?(b.startOffset=b.startOffset-e.getLength()-h.getPrevious().getLength(),e=h.getNext()):e.equals(h.getPrevious())&&(b.startOffset=b.startOffset-e.getLength(),e=h.getNext()),e.equals(g.getParent())&&b[f]++,e.equals(h.getParent())&&b[f]++,b[c?"endContainer":"startContainer"]=e,b}d.rangeList=function(b){return b instanceof d.rangeList?b:(b?b instanceof d.range&&(b=[b]):b=[],e.extend(b,a))};var a={createIterator:function(){var a=this,b=d.walker.bookmark(),c=function(a){return!a.is||!a.is("tr")},e=[],f;return{getNextRange:function(c){f=f==undefined?0:f+1;var d=a[f];if(d&&a.length>1){if(!f)for(var g=a.length-1;g>=0;g--)e.unshift(a[g].createBookmark(!0));if(c){var h=0;while(a[f+h+1]){var i=d.document,j=0,k=i.getById(e[h].endNode),l=i.getById(e[h+1].startNode),m;for(;;){m=k.getNextSourceNode(!1);if(!l.equals(m)){if(b(m)||m.type==1&&m.isBlockBoundary()){k=m;continue}}else j=1;break}if(!j)break;h++}}d.moveToBookmark(e.shift());while(h--)m=a[++f],m.moveToBookmark(e.shift()),d.setEnd(m.endContainer,m.endOffset)}return d}}},createBookmarks:function(a){var c=this,d=[],e;for(var f=0;f<c.length;f++){d.push(e=c[f].createBookmark(a,!0));for(var g=f+1;g<c.length;g++)c[g]=b(e,c[g]),c[g]=b(e,c[g],!0)}return d},createBookmarks2:function(a){var b=[];for(var c=0;c<this.length;c++)b.push(this[c].createBookmark2(a));return b},moveToBookmarks:function(a){for(var b=0;b<this.length;b++)this[b].moveToBookmark(a[b])}}}(),function(){if(b.webkit){b.hc=!1;return}var d=c&&b.version<7,e=c&&b.version==7,f=d?a.basePath+"images/spacer.gif":e?"about:blank":"data:image/png;base64,",g=h.createFromHtml('<div style="width:0px;height:0px;position:absolute;left:-10000px;background-image:url('+f+')"></div>',a.document);g.appendTo(a.document.getHead());try{b.hc=g.getComputedStyle("background-image")=="none"}catch(i){b.hc=!1}b.hc&&(b.cssClass+=" cke_hc"),g.remove()}(),j.load(i.corePlugins.split(","),function(){a.status="loaded",a.fire("loaded");var b=a._.pending;if(b){delete a._.pending;for(var c=0;c<b.length;c++)a.add(b[c])}});if(c)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(l){}a.skins.add("kama",function(){var d="cke_ui_color";return{editor:{css:["editor.css"]},dialog:{css:["dialog.css"]},templates:{css:["templates.css"]},margins:[0,0,0,0],init:function(f){function k(a){var b=a.getById(d);return b||(b=a.getHead().append("style"),b.setAttribute("id",d),b.setAttribute("type","text/css")),b}function l(a,d,e){var f,g,h;for(var i=0;i<a.length;i++)if(b.webkit)for(g=0;g<d.length;g++){h=d[g][1];for(f=0;f<e.length;f++)h=h.replace(e[f][0],e[f][1]);a[i].$.sheet.addRule(d[g][0],h)}else{h=d;for(f=0;f<e.length;f++)h=h.replace(e[f][0],e[f][1]);c?a[i].$.styleSheet.cssText+=h:a[i].$.innerHTML+=h}}f.config.width&&!isNaN(f.config.width)&&(f.config.width-=12);var g=[],h=/\$color/g,i="/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{\tbackground-color: $color !important;}";if(b.webkit){i=i.split("}").slice(0,-1);for(var j=0;j<i.length;j++)i[j]=i[j].split("{")}var n=/\$color/g;e.extend(f,{uiColor:null,getUiColor:function(){return this.uiColor},setUiColor:function(c){var d,e=k(a.document),h="."+f.id,j=[h+" .cke_wrapper",h+"_dialog .cke_dialog_contents",h+"_dialog a.cke_dialog_tab",h+"_dialog .cke_dialog_footer"].join(","),m="background-color: $color !important;";return b.webkit?d=[[j,m]]:d=j+"{"+m+"}",(this.setUiColor=function(a){var b=[[n,a]];f.uiColor=a,l([e],d,b),l(g,i,b)})(c)}}),f.on("menuShow",function(a){var b=a.data[0],c=b.element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!c.getById("cke_ui_color")){var d=k(c);g.push(d);var e=f.getUiColor();e&&l([d],i,[[n,e]])}}),f.config.uiColor&&f.setUiColor(f.config.uiColor)}}}()),function(){function b(){a.dialog.on("resize",function(a){var b=a.data,c=b.width,d=b.height,e=b.dialog,f=e.parts.contents;if(b.skin!="kama")return;f.setStyles({width:c+"px",height:d+"px"})})}a.dialog?b():a.on("dialogPluginReady",b)}(),j.add("about",{requires:["dialog"],init:function(b){var c=b.addCommand("about",new a.dialogCommand("about"));c.modes={wysiwyg:1,source:1},c.canUndo=!1,b.ui.addButton("About",{label:b.lang.about.title,command:"about"}),a.dialog.add("about",this.path+"dialogs/about.js")}}),function(){var b="a11yhelp",c="a11yHelp";j.add(b,{availableLangs:{en:1,he:1},init:function(b){var d=this;b.addCommand(c,{exec:function(){var f=b.langCode;f=d.availableLangs[f]?f:"en",a.scriptLoader.load(a.getUrl(d.path+"lang/"+f+".js"),function(){e.extend(b.lang,d.lang[f]),b.openDialog(c)})},modes:{wysiwyg:1,source:1},canUndo:!1}),a.dialog.add(c,this.path+"dialogs/a11yhelp.js")}})}(),j.add("basicstyles",{requires:["styles","button"],init:function(b){var c=function(c,d,e,f){var g=new a.style(f);b.attachStyleStateChange(g,function(a){b.getCommand(e).setState(a)}),b.addCommand(e,new a.styleCommand(g)),b.ui.addButton(c,{label:d,command:e})},d=b.config,e=b.lang;c("Bold",e.bold,"bold",d.coreStyles_bold),c("Italic",e.italic,"italic",d.coreStyles_italic),c("Underline",e.underline,"underline",d.coreStyles_underline),c("Strike",e.strike,"strike",d.coreStyles_strike),c("Subscript",e.subscript,"subscript",d.coreStyles_subscript),c("Superscript",e.superscript,"superscript",d.coreStyles_superscript)}}),i.coreStyles_bold={element:"strong",overrides:"b"},i.coreStyles_italic={element:"em",overrides:"i"},i.coreStyles_underline={element:"u"},i.coreStyles_strike={element:"strike"},i.coreStyles_subscript={element:"sub"},i.coreStyles_superscript={element:"sup"},function(){function g(a){i(a),k(a)}function i(a){var b=a.editor,c=a.data.path,d=b.config.useComputedState,e;d=d===undefined||d,d||(e=l(c.lastElement)),e=e||c.block||c.blockLimit,e.is("body")&&(e=b.getSelection().getRanges()[0].getEnclosedNode());if(!e)return;var f=d?e.getComputedStyle("direction"):e.getStyle("direction")||e.getAttribute("dir");b.getCommand("bidirtl").setState(f=="rtl"?1:2),b.getCommand("bidiltr").setState(f=="ltr"?1:2)}function k(a){var b=a.editor,c=b.container.getChild(1),d=a.data.path.block||a.data.path.blockLimit;d&&b.lang.dir!=d.getComputedStyle("direction")?c.addClass("cke_mixed_dir_content"):c.removeClass("cke_mixed_dir_content")}function l(a){while(a&&!(a.getName()in f||a.is("body"))){var b=a.getParent();if(!b)break;a=b}return a}function m(a,b,c,d){h.setMarker(d,a,"bidi_processed",1);var e=a;while((e=e.getParent())&&!e.is("body"))if(e.getCustomData("bidi_processed"))return a.removeStyle("direction"),a.removeAttribute("dir"),null;var f="useComputedState"in c.config?c.config.useComputedState:1,g=f?a.getComputedStyle("direction"):a.getStyle("direction")||a.hasAttribute("dir");if(g==b)return null;var i=f?g:a.getComputedStyle("direction");return a.removeStyle("direction"),f?(a.removeAttribute("dir"),b!=a.getComputedStyle("direction")&&a.setAttribute("dir",b)):a.setAttribute("dir",b),b!=i&&c.fire("dirChanged",{node:a,dir:b}),c.forceNextSelectionCheck(),null}function n(a,b,c){var d=a.getCommonAncestor(!1,!0);a=a.clone(),a.enlarge(c==2?3:2);if(a.checkBoundaryOfElement(d,1)&&a.checkBoundaryOfElement(d,2)){var e;while(d&&d.type==1&&(e=d.getParent())&&e.getChildCount()==1&&!(d.getName()in b))d=e;return d.type==1&&d.getName()in b&&d}}function o(a){return function(e){var f=e.getSelection(),g=e.config.enterMode,i=f.getRanges();if(i&&i.length){var j={},k=f.createBookmarks(),l=i.createIterator(),o,p=0;while(o=l.getNextRange(1)){var q=o.getEnclosedNode();if(!q||q&&!(q.type==1&&q.getName()in c))q=n(o,b,g);q&&!q.isReadOnly()&&m(q,a,e,j);var r,s,v=new d.walker(o),x=k[p].startNode,y=k[p++].endNode;v.evaluator=function(a){return!!(a.type==1&&a.getName()in b&&(a.getName()!=(g==1?"p":"div")||a.getParent().type!=1||a.getParent().getName()!="blockquote")&&a.getPosition(x)&2&&(a.getPosition(y)&4+16)==4)};while(s=v.next())m(s,a,e,j);r=o.createIterator(),r.enlargeBr=g!=2;while(s=r.getNextParagraph(g==1?"p":"div"))!s.isReadOnly()&&m(s,a,e,j)}h.clearAllMarkers(j),e.forceNextSelectionCheck(),f.selectBookmarks(k),e.focus()}}}var b={table:1,ul:1,ol:1,blockquote:1,div:1},c={},f={};e.extend(c,b,{tr:1,p:1,div:1,li:1}),e.extend(f,c,{td:1}),j.add("bidi",{requires:["styles","button"],init:function(b){var c=function(c,d,e,f){b.addCommand(e,new a.command(b,{exec:f})),b.ui.addButton(c,{label:d,command:e})},d=b.lang.bidi;c("BidiLtr",d.ltr,"bidiltr",o("ltr")),c("BidiRtl",d.rtl,"bidirtl",o("rtl")),b.on("selectionChange",g)}})}(),function(){function a(a,b){var c=b.block||b.blockLimit;return!c||c.getName()=="body"?2:c.getAscendant("blockquote",!0)?1:2}function b(b){var c=b.editor,d=c.getCommand("blockquote");d.state=a(c,b.data.path),d.fire("state")}function e(a){for(var b=0,c=a.getChildCount(),d;b<c&&(d=a.getChild(b));b++)if(d.type==1&&d.isBlockBoundary())return!1;return!0}var f={exec:function(a){var b=a.getCommand("blockquote").state,f=a.getSelection(),g=f&&f.getRanges(!0)[0];if(!g)return;var i=f.createBookmarks();if(c){var j=i[0].startNode,k=i[0].endNode,l;if(j&&j.getParent().getName()=="blockquote"){l=j;while(l=l.getNext())if(l.type==1&&l.isBlockBoundary()){j.move(l,!0);break}}if(k&&k.getParent().getName()=="blockquote"){l=k;while(l=l.getPrevious())if(l.type==1&&l.isBlockBoundary()){k.move(l);break}}}var m=g.createIterator(),n;m.enlargeBr=a.config.enterMode!=2;if(b==2){var p=[];while(n=m.getNextParagraph())p.push(n);if(p.length<1){var q=a.document.createElement(a.config.enterMode==1?"p":"div"),r=i.shift();g.insertNode(q),q.append(new d.text("",a.document)),g.moveToBookmark(r),g.selectNodeContents(q),g.collapse(!0),r=g.createBookmark(),p.push(q),i.unshift(r)}var s=p[0].getParent(),t=[];for(var u=0;u<p.length;u++)n=p[u],s=s.getCommonAncestor(n.getParent());var v={table:1,tbody:1,tr:1,ol:1,ul:1};while(v[s.getName()])s=s.getParent();var w=null;while(p.length>0){n=p.shift();while(!n.getParent().equals(s))n=n.getParent();n.equals(w)||t.push(n),w=n}while(t.length>0){n=t.shift();if(n.getName()=="blockquote"){var x=new d.documentFragment(a.document);while(n.getFirst())x.append(n.getFirst().remove()),p.push(x.getLast());x.replace(n)}else p.push(n)}var y=a.document.createElement("blockquote");y.insertBefore(p[0]);while(p.length>0)n=p.shift(),y.append(n)}else if(b==1){var z=[],A={};while(n=m.getNextParagraph()){var B=null,C=null;while(n.getParent()){if(n.getParent().getName()=="blockquote"){B=n.getParent(),C=n;break}n=n.getParent()}B&&C&&!C.getCustomData("blockquote_moveout")&&(z.push(C),h.setMarker(A,C,"blockquote_moveout",!0))}h.clearAllMarkers(A);var D=[],E=[];A={};while(z.length>0){var F=z.shift();y=F.getParent(),F.getPrevious()?F.getNext()?(F.breakParent(F.getParent()),E.push(F.getNext())):F.remove().insertAfter(y):F.remove().insertBefore(y),y.getCustomData("blockquote_processed")||(E.push(y),h.setMarker(A,y,"blockquote_processed",!0)),D.push(F)}h.clearAllMarkers(A);for(u=E.length-1;u>=0;u--)y=E[u],e(y)&&y.remove();if(a.config.enterMode==2){var G=!0;while(D.length){F=D.shift();if(F.getName()=="div"){x=new d.documentFragment(a.document);var H=G&&F.getPrevious()&&(F.getPrevious().type!=1||!F.getPrevious().isBlockBoundary());H&&x.append(a.document.createElement("br"));var I=F.getNext()&&(F.getNext().type!=1||!F.getNext().isBlockBoundary());while(F.getFirst())F.getFirst().remove().appendTo(x);I&&x.append(a.document.createElement("br")),x.replace(F),G=!1}}}}f.selectBookmarks(i),a.focus()}};j.add("blockquote",{init:function(a){a.addCommand("blockquote",f),a.ui.addButton("Blockquote",{label:a.lang.blockquote,command:"blockquote"}),a.on("selectionChange",b)},requires:["domiterator"]})}(),j.add("button",{beforeInit:function(a){a.ui.addHandler(1,k.button.handler)}}),a.UI_BUTTON=1,k.button=function(a){e.extend(this,a,{title:a.label,className:a.className||a.command&&"cke_button_"+a.command||"",click:a.click||function(b){b.execCommand(a.command)}}),this._={}},k.button.handler={create:function(a){return new k.button(a)}},k.button._={instances:[],keydown:function(a,b){var c=k.button._.instances[a];if(c.onkey)return b=new d.event(b),c.onkey(c,b.getKeystroke())!==!1},focus:function(a,c){var e=k.button._.instances[a],f;return e.onfocus&&(f=e.onfocus(e,new d.event(c))!==!1),b.gecko&&b.version<10900&&c.preventBubble(),f}},function(){var c=e.addFunction(k.button._.keydown,k.button._),d=e.addFunction(k.button._.focus,k.button._);k.button.prototype={canGroup:!0,render:function(f,g){var h=b,i=this._.id=e.getNextId(),j="",l=this.command,o,p;this._.editor=f;var q={id:i,button:this,editor:f,focus:function(){var b=a.document.getById(i);b.focus()},execute:function(){this.button.click(f)}};q.clickFn=o=e.addFunction(q.execute,q),q.index=p=k.button._.instances.push(q)-1;if(this.modes){var r={};f.on("beforeModeUnload",function(){r[f.mode]=this._.state},this),f.on("mode",function(){var a=f.mode;this.setState(this.modes[a]?r[a]!=undefined?r[a]:2:0)},this)}else l&&(l=f.getCommand(l),l&&(l.on("state",function(){this.setState(l.state)},this),j+="cke_"+(l.state==1?"on":l.state==0?"disabled":"off")));l||(j+="cke_off"),this.className&&(j+=" "+this.className),g.push('<span class="cke_button'+(this.icon&&this.icon.indexOf(".png")==-1?" cke_noalphafix":"")+'">','<a id="',i,'" class="',j,'"',h.gecko&&h.version>=10900&&!h.hc?"":'" href="javascript:void(\''+(this.title||"").replace("'","")+"')\"",' title="',this.title,'" tabindex="-1" hidefocus="true" role="button" aria-labelledby="'+i+'_label"'+(this.hasArrow?' aria-haspopup="true"':"")),(h.opera||h.gecko&&h.mac)&&g.push(' onkeypress="return false;"'),h.gecko&&g.push(' onblur="this.style.cssText = this.style.cssText;"'),g.push(' onkeydown="return CKEDITOR.tools.callFunction(',c,", ",p,', event);" onfocus="return CKEDITOR.tools.callFunction(',d,", ",p,', event);" onclick="CKEDITOR.tools.callFunction(',o,', this); return false;"><span class="cke_icon"');if(this.icon){var s=(this.iconOffset||0)*-16;g.push(' style="background-image:url(',a.getUrl(this.icon),");background-position:0 "+s+'px;"')}return g.push('>&nbsp;</span><span id="',i,'_label" class="cke_label">',this.label,"</span>"),this.hasArrow&&g.push('<span class="cke_buttonarrow">'+(b.hc?"&#9660;":"&nbsp;")+"</span>"),g.push("</a>","</span>"),this.onRender&&this.onRender(),q},setState:function(b){if(this._.state==b)return!1;this._.state=b;var c=a.document.getById(this._.id);return c?(c.setState(b),b==0?c.setAttribute("aria-disabled",!0):c.removeAttribute("aria-disabled"),b==1?c.setAttribute("aria-pressed",!0):c.removeAttribute("aria-pressed"),!0):!1}}}(),k.prototype.addButton=function(a,b){this.add(a,1,b)},a.on("reset",function(){k.button._.instances=[]}),function(){function l(a,e,f){var g=this.document;if(g.getById("cke_pastebin"))return;if(e=="text"&&a.data&&a.data.$.clipboardData){var i=a.data.$.clipboardData.getData("text/plain");if(i){a.data.preventDefault(),f(i);return}}var j=this.getSelection(),k=new d.range(g),l=new h(e=="text"?"textarea":b.webkit?"body":"div",g);l.setAttribute("id","cke_pastebin"),b.webkit&&l.append(g.createText("")),g.getBody().append(l),l.setStyles({position:"absolute",top:j.getStartElement().getDocumentPosition().y+"px",width:"1px",height:"1px",overflow:"hidden"}),l.setStyle(this.config.contentsLangDirection=="ltr"?"left":"right","-1000px");var m=j.createBookmarks();if(e=="text")if(c){var n=g.getBody().$.createTextRange();n.moveToElementText(l.$),n.execCommand("Paste"),a.data.preventDefault()}else l.$.focus();else k.setStartAt(l,1),k.setEndAt(l,2),k.select(!0);var o=this;window.setTimeout(function(){e=="text"&&b.gecko&&o.focusGrabber.focus(),l.remove();var a;l=b.webkit&&(a=l.getFirst())&&a.is&&a.hasClass("Apple-style-span")?a:l,j.selectBookmarks(m),f(l["get"+(e=="text"?"Value":"Html")]())},0)}function m(a){if(!c||b.quirks)return;var d=a.getSelection(),e;if(d.getType()==3&&(e=d.getSelectedElement())){var f=d.getRanges()[0],g=a.document.createText("");g.insertBefore(e),f.setStartBefore(g),f.setEndAfter(e),d.selectRanges([f]),setTimeout(function(){e.getParent()&&(g.remove(),d.selectElement(e))},0)}}function o(a,b){c&&(n=1);var d=b.document.$.queryCommandEnabled(a)?2:0;return n=0,d}function q(){var a=this;if(a.mode!="wysiwyg")return;a.getCommand("cut").setState(p?0:o("Cut",a)),a.getCommand("copy").setState(o("Copy",a));var c=p?0:b.webkit?2:o("Paste",a);a.fire("pasteState",c)}var e=function(a,c){var d=a.document,e=d.getBody(),f=0,g=function(){f=1};return e.on(c,g),(b.version>7?d.$:d.$.selection.createRange()).execCommand(c),e.removeListener(c,g),f},f=c?function(a,b){return e(a,b)}:function(a,b){try{return a.document.$.execCommand(b,!1,null)}catch(c){return!1}},g=function(a){var b=this;b.type=a,b.canUndo=b.type=="cut",b.startDisabled=!0};g.prototype={exec:function(a,b){this.type=="cut"&&m(a);var c=f(a,this.type);return c||alert(a.lang.clipboard[this.type+"Error"]),c}};var i={canUndo:!1,exec:c?function(a){a.focus();if(!a.document.getBody().fire("beforepaste")&&!e(a,"paste"))return a.fire("pasteDialog"),!1}:function(a){try{if(!a.document.getBody().fire("beforepaste")&&!a.
document.$.execCommand("Paste",!1,null))throw 0}catch(b){return setTimeout(function(){a.fire("pasteDialog")},0),!1}}},k=function(a){if(this.mode!="wysiwyg")return;switch(a.data.keyCode){case 1086:case 2045:var d=this.document.getBody();!c&&d.fire("beforepaste")?a.cancel():(b.opera||b.gecko&&b.version<10900)&&d.fire("paste");return;case 1088:case 2046:var e=this;this.fire("saveSnapshot"),setTimeout(function(){e.fire("saveSnapshot")},0)}},n,p;j.add("clipboard",{requires:["dialog","htmldataprocessor"],init:function(d){function e(a,b,c,e){var f=d.lang[b];d.addCommand(b,c),d.ui.addButton(a,{label:f,command:b}),d.addMenuItems&&d.addMenuItem(b,{label:f,command:b,group:"clipboard",order:e})}d.on("paste",function(a){var b=a.data;b.html?d.insertHtml(b.html):b.text&&d.insertText(b.text)},null,null,1e3),d.on("pasteDialog",function(a){setTimeout(function(){d.openDialog("paste")},0)}),d.on("pasteState",function(a){d.getCommand("paste").setState(a.data)}),e("Cut","cut",new g("cut"),1),e("Copy","copy",new g("copy"),4),e("Paste","paste",i,8),a.dialog.add("paste",a.getUrl(this.path+"dialogs/paste.js")),d.on("key",k,d);var f=d.config.forcePasteAsPlainText?"text":"html";d.on("contentDom",function(){var a=d.document.getBody();a.on(f=="text"&&c||b.webkit?"paste":"beforepaste",function(a){if(n)return;l.call(d,a,f,function(a){if(!a)return;var b={};b[f]=a,d.fire("paste",b)})}),a.on("beforecut",function(){!n&&m(d)}),a.on("mouseup",function(){setTimeout(function(){q.call(d)},0)},d),a.on("keyup",q,d)}),d.on("selectionChange",function(a){p=a.data.selection.getRanges()[0].checkReadOnly(),q.call(d)}),d.contextMenu&&d.contextMenu.addListener(function(a,c){var e=c.getRanges()[0].checkReadOnly();return{cut:!e&&o("Cut",d),copy:o("Copy",d),paste:!e&&(b.webkit?2:o("Paste",d))}})}})}(),j.add("colorbutton",{requires:["panelbutton","floatpanel","styles"],init:function(c){function i(a,b,f){var h=e.getNextId()+"_colorBox";c.ui.add(a,4,{label:f,title:f,className:"cke_button_"+a.toLowerCase(),modes:{wysiwyg:1},panel:{css:c.skin.editor.css,attributes:{role:"listbox","aria-label":g.panelTitle}},onBlock:function(a,d){d.autoSize=!0,d.element.addClass("cke_colorblock"),d.element.setHtml(j(a,b,h)),d.element.getDocument().getBody().setStyle("overflow","hidden"),k.fire("ready",this);var e=d.keys,f=c.lang.dir=="rtl";e[f?37:39]="next",e[40]="next",e[9]="next",e[f?39:37]="prev",e[38]="prev",e[2009]="prev",e[32]="click"},onOpen:function(){var a=c.getSelection(),e=a&&a.getStartElement(),f=new d.elementPath(e),g;e=f.block||f.blockLimit;do g=e&&e.getComputedStyle(b=="back"?"background-color":"color")||"transparent";while(b=="back"&&g=="transparent"&&e&&(e=e.getParent()));if(!g||g=="transparent")g="#ffffff";this._.panel._.iframe.getFrameDocument().getById(h).setStyle("background-color",g)}})}function j(b,d,h){var i=[],j=f.colorButton_colors.split(","),k=j.length+(f.colorButton_enableMore?2:1),p=e.addFunction(function(d,e){if(d=="?"){var g=arguments.callee;function h(a){this.removeListener("ok",h),this.removeListener("cancel",h),a.name=="ok"&&g(this.getContentElement("picker","selectedColor").getValue(),e)}c.openDialog("colordialog",function(){this.on("ok",h),this.on("cancel",h)});return}c.focus(),b.hide(),c.fire("saveSnapshot"),(new a.style(f["colorButton_"+e+"Style"],{color:"inherit"})).remove(c.document);if(d){var i=f["colorButton_"+e+"Style"];i.childRule=e=="back"?function(a){return l(a)}:function(a){return a.getName()!="a"||l(a)},(new a.style(i,{color:d})).apply(c.document)}c.fire("saveSnapshot")});i.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',g.auto,'" onclick="CKEDITOR.tools.callFunction(',p,",null,'",d,"');return false;\" href=\"javascript:void('",g.auto,'\')" role="option" aria-posinset="1" aria-setsize="',k,'"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td><span class="cke_colorbox" id="',h,'"></span></td><td colspan=7 align=center>',g.auto,'</td></tr></table></a><table role="presentation" cellspacing=0 cellpadding=0 width="100%">');for(var q=0;q<j.length;q++){q%8===0&&i.push("</tr><tr>");var r=j[q].split("/"),t=r[0],u=r[1]||t;r[1]||(t="#"+t.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));var v=c.lang.colors[u]||u;i.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',v,'" onclick="CKEDITOR.tools.callFunction(',p,",'",t,"','",d,"'); return false;\" href=\"javascript:void('",v,'\')" role="option" aria-posinset="',q+2,'" aria-setsize="',k,'"><span class="cke_colorbox" style="background-color:#',u,'"></span></a></td>')}return(f.colorButton_enableMore===undefined||f.colorButton_enableMore)&&i.push('</tr><tr><td colspan=8 align=center><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',g.more,'" onclick="CKEDITOR.tools.callFunction(',p,",'?','",d,"');return false;\" href=\"javascript:void('",g.more,"')\"",' role="option" aria-posinset="',k,'" aria-setsize="',k,'">',g.more,"</a></td>"),i.push("</tr></table>"),i.join("")}function l(a){return a.getAttribute("contentEditable")=="false"||a.getAttribute("data-nostyle")}var f=c.config,g=c.lang.colorButton,h;b.hc||(i("TextColor","fore",g.textColorTitle),i("BGColor","back",g.bgColorTitle))}}),i.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF",i.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},i.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}},function(){j.colordialog={init:function(b){b.addCommand("colordialog",new a.dialogCommand("colordialog")),a.dialog.add("colordialog",this.path+"dialogs/colordialog.js")}},j.add("colordialog",j.colordialog)}(),j.add("contextmenu",{requires:["menu"],onLoad:function(){j.contextMenu=e.createClass({base:a.menu,$:function(a){this.base.call(this,a,{panel:{className:a.skinClass+" cke_contextmenu",attributes:{"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,c){if(b.opera&&!("oncontextmenu"in document.body)){var d;a.on("mousedown",function(e){e=e.data;if(e.$.button!=2){e.getKeystroke()==1e3+1&&a.fire("contextmenu",e);return}if(c&&(b.mac?e.$.metaKey:e.$.ctrlKey))return;var f=e.getTarget();if(!d){var g=f.getDocument();d=g.createElement("input"),d.$.type="button",g.getBody().append(d)}d.setAttribute("style","position:absolute;top:"+(e.$.clientY-2)+"px;left:"+(e.$.clientX-2)+"px;width:5px;height:5px;opacity:0.01")}),a.on("mouseup",function(b){d&&(d.remove(),d=undefined,a.fire("contextmenu",b.data))})}a.on("contextmenu",function(a){var d=a.data;if(c&&(b.webkit?f:b.mac?d.$.metaKey:d.$.ctrlKey))return;d.preventDefault();var g=d.getTarget().getDocument().getDocumentElement(),h=d.$.clientX,i=d.$.clientY;e.setTimeout(function(){this.open(g,null,h,i)},0,this)},this),b.opera&&a.on("keypress",function(a){var b=a.data;b.$.keyCode===0&&b.preventDefault()});if(b.webkit){var f,g=function(a){f=b.mac?a.data.$.metaKey:a.data.$.ctrlKey},h=function(){f=0};a.on("keydown",g),a.on("keyup",h),a.on("contextmenu",h)}},open:function(b,c,d,e){this.editor.focus(),b=b||a.document.getDocumentElement(),this.show(b,c,d,e)}}})},beforeInit:function(a){a.contextMenu=new j.contextMenu(a),a.addCommand("contextMenu",{exec:function(){a.contextMenu.open(a.document.getBody())}})}}),function(){function a(a){var b=this.att,c=a&&a.hasAttribute(b)&&a.getAttribute(b)||"";c!==undefined&&this.setValue(c)}function b(){var a;for(var b=0;b<arguments.length;b++)if(arguments[b]instanceof h){a=arguments[b];break}if(a){var c=this.att,d=this.getValue();if(c=="dir"){var e=a.getAttribute(c);e!=d&&a.getParent()&&this._.dialog._.editor.fire("dirChanged",{node:a,dir:d||a.getDirection(1)})}d?a.setAttribute(c,d):a.removeAttribute(c,d)}}j.add("dialogadvtab",{createAdvancedTab:function(c,d){d||(d={id:1,dir:1,classes:1,styles:1});var e=c.lang.common,f={id:"advanced",label:e.advancedTab,title:e.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},g=[];if(d.id||d.dir)d.id&&g.push({id:"advId",att:"id",type:"text",label:e.id,setup:a,commit:b}),d.dir&&g.push({id:"advLangDir",att:"dir",type:"select",label:e.langDir,"default":"",style:"width:100%",items:[[e.notSet,""],[e.langDirLTR,"ltr"],[e.langDirRTL,"rtl"]],setup:a,commit:b}),f.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(g)});if(d.styles||d.classes)g=[],d.styles&&g.push({id:"advStyles",att:"style",type:"text",label:e.styles,"default":"",getStyle:function(a,b){var c=this.getValue().match(new RegExp(a+"\\s*:s*([^;]*)","i"));return c?c[1]:b},updateStyle:function(a,b){var c=this.getValue();c&&(c=c.replace(new RegExp("\\s*"+a+"s*:[^;]*(?:$|;s*)","i"),"").replace(/^[;\s]+/,"").replace(/\s+$/,"")),b&&(c&&!/;\s*$/.test(c)&&(c+="; "),c+=a+": "+b),this.setValue(c,1)},setup:a,commit:b}),d.classes&&g.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",label:e.cssClasses,"default":"",setup:a,commit:b}]}),f.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(g)});return f}})}(),function(){j.add("div",{requires:["editingblock","domiterator","styles"],init:function(b){var c=b.lang.div;b.addCommand("creatediv",new a.dialogCommand("creatediv")),b.addCommand("editdiv",new a.dialogCommand("editdiv")),b.addCommand("removediv",{exec:function(a){function i(a){var b=new d.elementPath(a),c=b.blockLimit,e=c.is("div")&&c;e&&!e.data("cke-div-added")&&(h.push(e),e.data("cke-div-added"))}var b=a.getSelection(),c=b&&b.getRanges(),e,f=b.createBookmarks(),g,h=[];for(var j=0;j<c.length;j++)e=c[j],e.collapsed?i(b.getStartElement()):(g=new d.walker(e),g.evaluator=i,g.lastForward());for(j=0;j<h.length;j++)h[j].remove(!0);b.selectBookmarks(f)}}),b.ui.addButton("CreateDiv",{label:c.toolbar,command:"creatediv"}),b.addMenuItems&&(b.addMenuItems({editdiv:{label:c.edit,command:"editdiv",group:"div",order:1},removediv:{label:c.remove,command:"removediv",group:"div",order:5}}),b.contextMenu&&b.contextMenu.addListener(function(a,b){if(!a||a.isReadOnly())return null;var c=new d.elementPath(a),e=c.blockLimit;return e&&e.getAscendant("div",!0)?{editdiv:2,removediv:2}:null})),a.dialog.add("creatediv",this.path+"dialogs/div.js"),a.dialog.add("editdiv",this.path+"dialogs/div.js")}})}(),function(){var f={toolbarFocus:{exec:function(d){var e=d._.elementsPath.idBase,f=a.document.getById(e+"0");f&&f.focus(c||b.air)}}},g='<span class="cke_empty">&nbsp;</span>';j.add("elementspath",{requires:["selection"],init:function(c){function l(a){c.focus();var b=c._.elementsPath.list[a];if(b.is("body")){var e=new d.range(c.document);e.selectNodeContents(b),e.select()}else c.getSelection().selectElement(b)}var h="cke_path_"+c.name,i,j=function(){return i||(i=a.document.getById(h)),i},k="cke_elementspath_"+e.getNextNumber()+"_";c._.elementsPath={idBase:k,filters:[]},c.on("themeSpace",function(a){a.data.space=="bottom"&&(a.data.html+='<span id="'+h+'_label" class="cke_voice_label">'+c.lang.elementsPath.eleLabel+"</span>"+'<div id="'+h+'" class="cke_path" role="group" aria-labelledby="'+h+'_label">'+g+"</div>")});var o=e.addFunction(l),p=e.addFunction(function(b,e){var f=c._.elementsPath.idBase,g;e=new d.event(e);var h=c.lang.dir=="rtl";switch(e.getKeystroke()){case h?39:37:case 9:return g=a.document.getById(f+(b+1)),g||(g=a.document.getById(f+"0")),g.focus(),!1;case h?37:39:case 2009:return g=a.document.getById(f+(b-1)),g||(g=a.document.getById(f+(c._.elementsPath.list.length-1))),g.focus(),!1;case 27:return c.focus(),!1;case 13:case 32:return l(b),!1}return!0});c.on("selectionChange",function(a){var c=b,d=a.data.selection,e=d.getStartElement(),f=[],h=a.editor,i=h._.elementsPath.list=[],l=h._.elementsPath.filters;while(e){var m=0;for(var q=0;q<l.length;q++)if(l[q](e)===!1){m=1;break}if(!m){var t=i.push(e)-1,w;e.data("cke-real-element-type")?w=e.data("cke-real-element-type"):w=e.getName();var x="";if(c.opera||c.gecko&&c.mac)x+=' onkeypress="return false;"';c.gecko&&(x+=' onblur="this.style.cssText = this.style.cssText;"');var y=h.lang.elementsPath.eleTitle.replace(/%1/,w);f.unshift('<a id="',k,t,'" href="javascript:void(\'',w,'\')" tabindex="-1" title="',y,'"'+(b.gecko&&b.version<10900?' onfocus="event.preventBubble();"':"")+' hidefocus="true" '+' onkeydown="return CKEDITOR.tools.callFunction(',p,",",t,', event );"'+x,' onclick="CKEDITOR.tools.callFunction('+o,",",t,'); return false;"',' role="button" aria-labelledby="'+k+t+'_label">',w,'<span id="',k,t,'_label" class="cke_label">'+y+"</span>","</a>")}if(w=="body")break;e=e.getParent()}var z=j();z.setHtml(f.join("")+g),h.fire("elementsPathUpdate",{space:z})}),c.on("contentDomUnload",function(){i&&i.setHtml(g)}),c.addCommand("elementsPathFocus",f.toolbarFocus)}})}(),function(){function i(a){return a.mode!="wysiwyg"?!1:a.getSelection().getStartElement().hasAscendant("pre",!0)?(setTimeout(function(){g(a,a.config.enterMode,null,!0)},0),!0):k(a,a.config.shiftEnterMode,1)}function k(a,b,c){return c=a.config.forceEnterMode||c,a.mode!="wysiwyg"?!1:(b||(b=a.config.enterMode),setTimeout(function(){a.fire("saveSnapshot"),b==2||a.getSelection().getStartElement().hasAscendant("pre",1)?e(a,b,null,c):g(a,b,null,c)},0),!0)}function l(a){var b=a.getSelection().getRanges(!0);for(var c=b.length-1;c>0;c--)b[c].deleteContents();return b[0]}j.add("enterkey",{requires:["keystrokes","indent"],init:function(a){var b=a.specialKeys;b[13]=k,b[2013]=i}}),j.enterkey={enterBlock:function(a,b,e,g){e=e||l(a);if(!e)return;var i=e.document;if(e.checkStartOfBlock()&&e.checkEndOfBlock()){var j=new d.elementPath(e.startContainer),k=j.block;if(k&&(k.is("li")||k.getParent().is("li"))){a.execCommand("outdent");return}}var m=b==3?"div":"p",n=e.splitBlock(m);if(!n)return;var o=n.previousBlock,q=n.nextBlock,r=n.wasStartOfBlock,t=n.wasEndOfBlock,u;q?(u=q.getParent(),u.is("li")&&(q.breakParent(u),q.move(q.getNext(),1))):o&&(u=o.getParent())&&u.is("li")&&(o.breakParent(u),e.moveToElementEditStart(o.getNext()),o.move(o.getPrevious()));if(!r&&!t)q.is("li")&&(u=q.getFirst(d.walker.invisible(!0)))&&u.is&&u.is("ul","ol")&&(c?i.createText(""):i.createElement("br")).insertBefore(u),q&&e.moveToElementEditStart(q);else{var v,w;if(o){if(o.is("li")||!h.test(o.getName()))v=o.clone()}else q&&(v=q.clone());v?g&&!v.is("li")&&v.renameNode(m):(v=i.createElement(m),o&&(w=o.getDirection())&&v.setAttribute("dir",w));var x=n.elementPath;if(x)for(var y=0,z=x.elements.length;y<z;y++){var A=x.elements[y];if(A.equals(x.block)||A.equals(x.blockLimit))break;f.$removeEmpty[A.getName()]&&(A=A.clone(),v.moveChildren(A),v.append(A))}c||v.appendBogus(),e.insertNode(v),c&&r&&(!t||!o.getChildCount())&&(e.moveToElementEditStart(t?o:v),e.select()),e.moveToElementEditStart(r&&!t?q:v)}if(!c)if(q){var B=i.createElement("span");B.setHtml("&nbsp;"),e.insertNode(B),B.scrollIntoView(),e.deleteContents()}else v.scrollIntoView();e.select()},enterBr:function(a,e,f,i){f=f||l(a);if(!f)return;var j=f.document,k=e==3?"div":"p",m=f.checkEndOfBlock(),n=new d.elementPath(a.getSelection().getStartElement()),q=n.block,r=q&&n.block.getName(),t=!1;if(!i&&r=="li"){g(a,e,f,i);return}if(!i&&m&&h.test(r)){var u,v;(v=q.getDirection())?(u=j.createElement("div"),u.setAttribute("dir",v),u.insertAfter(q),f.setStart(u,0)):(j.createElement("br").insertAfter(q),b.gecko&&j.createText("").insertAfter(q),f.setStartAt(q.getNext(),c?3:1))}else{var w;t=r=="pre",t&&!b.gecko?w=j.createText(c?"\r":"\n"):w=j.createElement("br"),f.deleteContents(),f.insertNode(w),c||j.createText("").insertAfter(w),m&&!c&&w.getParent().appendBogus(),c||(w.getNext().$.nodeValue=""),c?f.setStartAt(w,4):f.setStartAt(w.getNext(),1);if(!c){var x=null;b.gecko?x=j.createElement("br"):(x=j.createElement("span"),x.setHtml("&nbsp;")),x.insertBefore(w.getNext()),x.scrollIntoView(),x.remove()}}f.collapse(!0),f.select(t)}};var a=j.enterkey,e=a.enterBr,g=a.enterBlock,h=/^h[1-6]$/}(),function(){function e(a,b){var c={},d=[],e={nbsp:"",shy:"",gt:">",lt:"<"};a=a.replace(/\b(nbsp|shy|gt|lt|amp)(?:,|$)/g,function(a,f){var g=b?"&"+f+";":e[f],h=b?e[f]:"&"+f+";";return c[g]=h,d.push(g),""});if(!b&&a){a=a.split(",");var f=document.createElement("div"),g;f.innerHTML="&"+a.join(";&")+";",g=f.innerHTML,f=null;for(var h=0;h<g.length;h++){var i=g.charAt(h);c[i]="&"+a[h]+";",d.push(i)}}return c.regex=d.join(b?"|":""),c}var a="nbsp,gt,lt",b="quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro",c="Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml",d="Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv";j.add("entities",{afterInit:function(f){var g=f.config,h=f.dataProcessor,i=h&&h.htmlFilter;if(i){var j=a;g.entities&&(j+=","+b,g.entities_latin&&(j+=","+c),g.entities_greek&&(j+=","+d),g.entities_additional&&(j+=","+g.entities_additional));var k=e(j),l="["+k.regex+"]";delete k.regex,g.entities&&g.entities_processNumerical&&(l="[^ -~]|"+l),l=new RegExp(l,"g");function r(a){return g.entities_processNumerical=="force"||!k[a]?"&#"+a.charCodeAt(0)+";":k[a]}var s=e([a,"shy"].join(","),!0),t=new RegExp(s.regex,"g");function u(a){return s[a]}i.addRules({text:function(a){return a.replace(t,u).replace(l,r)}})}}})}(),i.entities=!0,i.entities_latin=!0,i.entities_greek=!0,i.entities_additional="#39",function(){function b(a,b){var c=[];if(!b)return a;for(var d in b)c.push(d+"="+encodeURIComponent(b[d]));return a+(a.indexOf("?")!=-1?"&":"?")+c.join("&")}function c(a){a+="";var b=a.charAt(0).toUpperCase();return b+a.substr(1)}function d(a){var d=this,e=d.getDialog(),f=e.getParentEditor();f._.filebrowserSe=d;var g=f.config["filebrowser"+c(e.getName())+"WindowWidth"]||f.config.filebrowserWindowWidth||"80%",h=f.config["filebrowser"+c(e.getName())+"WindowHeight"]||f.config.filebrowserWindowHeight||"70%",i=d.filebrowser.params||{};i.CKEditor=f.name,i.CKEditorFuncNum=f._.filebrowserFn,i.langCode||(i.langCode=f.langCode);var j=b(d.filebrowser.url,i);f.popup(j,g,h,f.config.fileBrowserWindowFeatures)}function f(a){var b=this,c=b.getDialog(),d=c.getParentEditor();return d._.filebrowserSe=b,c.getContentElement(b["for"][0],b["for"][1]).getInputElement().$.value?c.getContentElement(b["for"][0],b["for"][1]).getAction()?!0:!1:!1}function g(a,c,d){var e=d.params||{};e.CKEditor=a.name,e.CKEditorFuncNum=a._.filebrowserFn,e.langCode||(e.langCode=a.langCode),c.action=b(d.url,e),c.filebrowser=d}function h(a,b,e,i){var j,k;for(var l in i){j=i[l],(j.type=="hbox"||j.type=="vbox")&&h(a,b,e,j.children);if(!j.filebrowser)continue;if(typeof j.filebrowser=="string"){var m={action:j.type=="fileButton"?"QuickUpload":"Browse",target:j.filebrowser};j.filebrowser=m}if(j.filebrowser.action=="Browse"){var s=j.filebrowser.url;s===undefined&&(s=a.config["filebrowser"+c(b)+"BrowseUrl"],s===undefined&&(s=a.config.filebrowserBrowseUrl)),s&&(j.onClick=d,j.filebrowser.url=s,j.hidden=!1)}else if(j.filebrowser.action=="QuickUpload"&&j["for"]){s=j.filebrowser.url,s===undefined&&(s=a.config["filebrowser"+c(b)+"UploadUrl"],s===undefined&&(s=a.config.filebrowserUploadUrl));if(s){var t=j.onClick;j.onClick=function(a){var b=a.sender;return t&&t.call(b,a)===!1?!1:f.call(b,a)},j.filebrowser.url=s,j.hidden=!1,g(a,e.getContents(j["for"][0]).get(j["for"][1]),j.filebrowser)}}}}function i(a,b){var c=b.getDialog(),d=b.filebrowser.target||null;a=a.replace(/#/g,"%23");if(d){var e=d.split(":"),f=c.getContentElement(e[0],e[1]);f&&(f.setValue(a),c.selectPage(e[0]))}}function k(a,b,c){if(c.indexOf(";")!==-1){var d=c.split(";");for(var e=0;e<d.length;e++)if(k(a,b,d[e]))return!0;return!1}var f=a.getContents(b).get(c).filebrowser;return f&&f.url}function l(a,b){var c=this,d=c._.filebrowserSe.getDialog(),e=c._.filebrowserSe["for"],f=c._.filebrowserSe.filebrowser.onSelect;e&&d.getContentElement(e[0],e[1]).reset();if(typeof b=="function"&&b.call(c._.filebrowserSe)===!1)return;if(f&&f.call(c._.filebrowserSe,a,b)===!1)return;typeof b=="string"&&b&&alert(b),a&&i(a,c._.filebrowserSe)}j.add("filebrowser",{init:function(a,b){a._.filebrowserFn=e.addFunction(l,a),a.on("destroy",function(){e.removeFunction(this._.filebrowserFn)})}}),a.on("dialogDefinition",function(a){var b=a.data.definition,c;for(var d in b.contents)if(c=b.contents[d])h(a.editor,a.data.name,b,c.elements),c.hidden&&c.filebrowser&&(c.hidden=!k(b,c.id,c.filebrowser))})}(),j.add("find",{init:function(b){var c=j.find;b.ui.addButton("Find",{label:b.lang.findAndReplace.find,command:"find"});var d=b.addCommand("find",new a.dialogCommand("find"));d.canUndo=!1,b.ui.addButton("Replace",{label:b.lang.findAndReplace.replace,command:"replace"});var e=b.addCommand("replace",new a.dialogCommand("replace"));e.canUndo=!1,a.dialog.add("find",this.path+"dialogs/find.js"),a.dialog.add("replace",this.path+"dialogs/find.js")},requires:["styles"]}),i.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}},function(){function d(a){var c=a.attributes;return c.type=="application/x-shockwave-flash"||b.test(c.src||"")}function f(a,b){var d=a.createFakeParserElement(b,"cke_flash","flash",!0),e=d.attributes.style||"",f=b.attributes.width,g=b.attributes.height;return typeof f!="undefined"&&(e=d.attributes.style=e+"width:"+c(f)+";"),typeof g!="undefined"&&(e=d.attributes.style=e+"height:"+c(g)+";"),d}var b=/\.swf(?:$|\?)/i,c=e.cssLength;j.add("flash",{init:function(b){b.addCommand("flash",new a.dialogCommand("flash")),b.ui.addButton("Flash",{label:b.lang.common.flash,command:"flash"}),a.dialog.add("flash",this.path+"dialogs/flash.js"),b.addCss("img.cke_flash{background-image: url("+a.getUrl(this.path+"images/placeholder.png")+");"+"background-position: center center;"+"background-repeat: no-repeat;"+"border: 1px solid #a9a9a9;"+"width: 80px;"+"height: 80px;"+"}"),b.addMenuItems&&b.addMenuItems({flash:{label:b.lang.flash.properties,command:"flash",group:"flash"}}),b.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&b.data("cke-real-element-type")=="flash"&&(a.data.dialog="flash")}),b.contextMenu&&b.contextMenu.addListener(function(a,b){if(a&&a.is("img")&&!a.isReadOnly()&&a.data("cke-real-element-type")=="flash")return{flash:2}})},afterInit:function(a){var b=a.dataProcessor,c=b&&b.dataFilter;c&&c.addRules({elements:{"cke:object":function(b){var c=b.attributes,e=c.classid&&String(c.classid).toLowerCase();if(!e){for(var g=0;g<b.children.length;g++)if(b.children[g].name=="cke:embed")return d(b.children[g])?f(a,b):null;return null}return f(a,b)},"cke:embed":function(b){return d(b)?f(a,b):null}}},5)},requires:["fakeobjects"]})}(),e.extend(i,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1}),function(){function b(b,c,d,e,f,g,h){var i=b.config,j=f.split(";"),k=[],l={};for(var m=0;m<j.length;m++){var n=j[m];if(n){n=n.split("/");var o={},p=j[m]=n[0];o[d]=k[m]=n[1]||p,l[p]=new a.style(h,o),l[p]._.definition.name=p}else j.splice(m--,1)}b.ui.addRichCombo(c,{label:e.label,title:e.panelTitle,className:"cke_"+(d=="size"?"fontSize":"font"),panel:{css:b.skin.editor.css.concat(i.contentsCss),multiSelect:!1,attributes:{"aria-label":e.panelTitle}},init:function(){this.startGroup(e.panelTitle);for(var a=0;a<j.length;a++){var b=j[a];this.add(b,l[b].buildPreview(),b)}},onClick:function(a){b.focus(),b.fire("saveSnapshot");var c=l[a];this.getValue()==a?c.remove(b.document):c.apply(b.document),b.fire("saveSnapshot")},onRender:function(){b.on("selectionChange",function(a){var b=this.getValue(),c=a.data.path,d=c.elements;for(var e=0,f;e<d.length;e++){f=d[e];for(var h in l)if(l[h].checkElementRemovable(f,!0)){h!=b&&this.setValue(h);return}}this.setValue("",g)},this)}})}j.add("font",{requires:["richcombo","styles"],init:function(a){var c=a.config;b(a,"Font","family",a.lang.font,c.font_names,c.font_defaultLabel,c.font_style),b(a,"FontSize","size",a.lang.fontSize,c.fontSize_sizes,c.fontSize_defaultLabel,c.fontSize_style)}})}(),i.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif",i.font_defaultLabel="",i.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]},i.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px",i.fontSize_defaultLabel="",i.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]},j.add("format",{requires:["richcombo","styles"],init:function(b){var c=b.config,e=b.lang.format,f=c.format_tags.split(";"),g={};for(var h=0;h<f.length;h++){var i=f[h];g[i]=new a.style(c["format_"+i]),g[i]._.enterMode=b.config.enterMode}b.ui.addRichCombo("Format",{label:e.label,title:e.panelTitle,className:"cke_format",panel:{css:b.skin.editor.css.concat(c.contentsCss),multiSelect:!1,attributes:{"aria-label":e.panelTitle}},init:function(){this.startGroup(e.panelTitle);for(var a in g){var b=e["tag_"+a];this.add(a,"<"+a+">"+b+"</"+a+">",b)}},onClick:function(a){b.focus(),b.fire("saveSnapshot");var c=g[a],e=new d.elementPath(b.getSelection().getStartElement());c[c.checkActive(e)?"remove":"apply"](b.document),setTimeout(function(){b.fire("saveSnapshot")},0)},onRender:function(){b.on("selectionChange",function(a){var c=this.getValue(),d=a.data.path;for(var e in g)if(g[e].checkActive(d)){e!=c&&this.setValue(e,b.lang.format["tag_"+e]);return}this.setValue("")},this)}})}}),i.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",i.format_p={element:"p"},i.format_div={element:"div"},i.format_pre={element:"pre"},i.format_address={element:"address"},i.format_h1={element:"h1"},i.format_h2={element:"h2"},i.format_h3={element:"h3"},i.format_h4={element:"h4"},i.format_h5={element:"h5"},i.format_h6={element:"h6"},j.add("forms",{init:function(b){var c=b.lang;b.addCss("form{border: 1px dotted #FF0000;padding: 2px;}\n"),b.addCss("img.cke_hidden{background-image: url("+a.getUrl(this.path+"images/hiddenfield.gif")+");"+"background-position: center center;"+"background-repeat: no-repeat;"+"border: 1px solid #a9a9a9;"+"width: 16px !important;"+"height: 16px !important;"+"}");var d=function(d,e,f){b.addCommand(e,new a.dialogCommand(e)),b.ui.addButton(d,{label:c.common[d.charAt(0).toLowerCase()+d.slice(1)],command:e}),a.dialog.add(e,f)},e=this.path+"dialogs/";d("Form","form",e+"form.js"),d("Checkbox","checkbox",e+"checkbox.js"),d("Radio","radio",e+"radio.js"),d("TextField","textfield",e+"textfield.js"),d("Textarea","textarea",e+"textarea.js"),d("Select","select",e+"select.js"),d("Button","button",e+"button.js"),d("ImageButton","imagebutton",j.getPath("image")+"dialogs/image.js"),d("HiddenField","hiddenfield",e+"hiddenfield.js"),b.addMenuItems&&b.addMenuItems({form:{label:c.form.menu,command:"form",group:"form"},checkbox:{label:c.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:c.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:c.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:c.hidden.title,command:"hiddenfield",group:"hiddenfield"},imagebutton:{label:c.image.titleButton,command:"imagebutton",group:"imagebutton"},button:{label:c.button.title,command:"button",group:"button"},select:{label:c.select.title,command:"select",group:"select"},textarea:{label:c.textarea.title,command:"textarea",group:"textarea"}}),b.contextMenu&&(b.contextMenu.addListener(function(a){if(a&&a.hasAscendant("form",!0)&&!a.isReadOnly())return{form:2}}),b.contextMenu.addListener(function(a){if(a&&!a.isReadOnly()){var b=a.getName();if(b=="select")return{select:2};if(b=="textarea")return{textarea:2};if(b=="input")switch(a.getAttribute("type")){case"button":case"submit":case"reset":return{button:2};case"checkbox":return{checkbox:2};case"radio":return{radio:2};case"image":return{imagebutton:2};default:return{textfield:2}}if(b=="img"&&a.data("cke-real-element-type")=="hiddenfield")return{hiddenfield:2}}})),b.on("doubleclick",function(a){var b=a.data.element;if(b.is("form"))a.data.dialog="form";else if(b.is("select"))a.data.dialog="select";else if(b.is("textarea"))a.data.dialog="textarea";else if(b.is("img")&&b.data("cke-real-element-type")=="hiddenfield")a.data.dialog="hiddenfield";else if(b.is("input"))switch(b.getAttribute("type")){case"button":case"submit":case"reset":a.data.dialog="button";break;case"checkbox":a.data.dialog="checkbox";break;case"radio":a.data.dialog="radio";break;case"image":a.data.dialog="imagebutton";break;default:a.data.dialog="textfield"}})},afterInit:function(a){var b=a.dataProcessor,d=b&&b.htmlFilter,e=b&&b.dataFilter;c&&d&&d.addRules({elements:{input:function(a){var b=a.attributes,c=b.type;c||(b.type="text"),(c=="checkbox"||c=="radio")&&b.value=="on"&&delete b.value}}}),e&&e.addRules({elements:{input:function(b){if(b.attributes.type=="hidden")return a.createFakeParserElement(b,"cke_hidden","hiddenfield")}}})},requires:["image","fakeobjects"]}),c&&(h.prototype.hasAttribute=function(a){var b=this,c=b.$.attributes.getNamedItem(a);if(b.getName()=="input")switch(a){case"class":return b.$.className.length>0;case"checked":return!!b.$.checked;case"value":var d=b.getAttribute("type");return d=="checkbox"||d=="radio"?b.$.value!="on":b.$.value}return!!c&&!!c.specified}),function(){var a={canUndo:!1,exec:function(a){a.insertElement(a.document.createElement("hr"))}},b="horizontalrule";j.add(b,{init:function(c){c.addCommand(b,a),c.ui.addButton("HorizontalRule",{label:c.lang.horizontalrule,command:b})}})}(),function(){function g(a){var b=a.children.length,c=a.children[b-1];while(c&&c.type==3&&!e.trim(c.value))c=a.children[--b];return c}function k(a,d){var e=a.children,f=g(a);f&&((d||!c)&&f.type==1&&f.name=="br"&&e.pop(),f.type==3&&b.test(f.value)&&e.pop())}function l(a,b,d){if(!b&&(!d||typeof d=="function"&&d(a)===!1))return!1;if(b&&c&&(document.documentMode>7||a.name in f.tr||a.name in f.$listItem))return!1;var e=g(a);return!e||e&&(e.type==1&&e.name=="br"||a.name=="form"&&e.name=="input")}function m(b,d){return function(e){k(e,!b),l(e,!b,d)&&(b||c?e.add(new a.htmlParser.text("")):e.add(new a.htmlParser.element("br",{})))}}function t(a){var b=a.attributes;b.contenteditable!="false"&&(b["data-cke-editable"]=b.contenteditable?"true":1),b.contenteditable="false"}function u(a){var b=a.attributes;switch(b["data-cke-editable"]){case"true":b.contenteditable="true";break;case"1":delete b.contenteditable}}function C(a){return a.replace(v,function(a,b,c){return"<"+b+c.replace(w,function(a,b){return c.indexOf("data-cke-saved-"+b)==-1?" data-cke-saved-"+a+" "+a:a})+">"})}function D(a){return a.replace(x,function(a){return"<cke:encoded>"+encodeURIComponent(a)+"</cke:encoded>"})}function E(a){return a.replace(y,function(a,b){return decodeURIComponent(b)})}function F(a){return a.replace(z,"$1cke:$2")}function G(a){return a.replace(A,"$1$2")}function H(a){return a.replace(B,"<cke:$1$2></cke:$1>")}function I(a){return a.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2")}function J(a){return a.replace(/<!--(?!{cke_protected})[\s\S]+?-->/g,function(a){return"<!--"+d+"{C}"+encodeURIComponent(a).replace(/--/g,"%2D%2D")+"-->"})}function K(a){return a.replace(/<!--\{cke_protected\}\{C\}([\s\S]+?)-->/g,function(a,b){return decodeURIComponent(b)})}function L(a,b){var c=[],e=/<\!--\{cke_temp(comment)?\}(\d*?)-->/g,f=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi].concat(b);a=a.replace
(/<!--[\s\S]*?-->/g,function(a){return"<!--{cke_tempcomment}"+(c.push(a)-1)+"-->"});for(var g=0;g<f.length;g++)a=a.replace(f[g],function(a){return a=a.replace(e,function(a,b,d){return c[d]}),"<!--{cke_temp}"+(c.push(a)-1)+"-->"});return a=a.replace(e,function(a,b,e){return"<!--"+d+(b?"{C}":"")+encodeURIComponent(c[e]).replace(/--/g,"%2D%2D")+"-->"}),a}var b=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,d="{cke_protected}",n=f,o=e.extend({},n.$block,n.$listItem,n.$tableContent);for(var p in o)"br"in n[p]||delete o[p];delete o.pre;var q={elements:{a:function(a){var b=a.attributes;b&&b["data-cke-saved-name"]&&(b["class"]=(b["class"]?b["class"]+" ":"")+"cke_anchor")}},attributeNames:[[/^on/,"data-cke-pa-on"]]},r={elements:{}};for(p in o)r.elements[p]=m();var s={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(a){var b=a.attributes;if(b){if(b["data-cke-temp"])return!1;var c=["name","href","src"],d;for(var e=0;e<c.length;e++)d="data-cke-saved-"+c[e],d in b&&delete b[c[e]]}return a},embed:function(a){var b=a.parent;if(b&&b.name=="object"){var c=b.attributes.width,d=b.attributes.height;c&&(a.attributes.width=c),d&&(a.attributes.height=d)}},param:function(a){return a.children=[],a.isEmpty=!0,a},a:function(a){if(!(a.children.length||a.attributes.name||a.attributes["data-cke-saved-name"]))return!1},span:function(a){a.attributes["class"]=="Apple-style-span"&&delete a.name},pre:function(a){c&&k(a)},html:function(a){delete a.attributes.contenteditable,delete a.attributes["class"]},body:function(a){delete a.attributes.spellcheck,delete a.attributes.contenteditable},style:function(a){var b=a.children[0];b&&b.value&&(b.value=e.trim(b.value)),a.attributes.type||(a.attributes.type="text/css")},title:function(a){var b=a.children[0];b&&(b.value=a.attributes["data-cke-title"]||"")}},attributes:{"class":function(a,b){return e.ltrim(a.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}},comment:function(b){return b.substr(0,d.length)==d?(b.substr(d.length,3)=="{C}"?b=b.substr(d.length+3):b=b.substr(d.length),new a.htmlParser.cdata(decodeURIComponent(b))):b}};c&&(s.attributes.style=function(a,b){return a.replace(/(^|;)([^\:]+)/g,function(a){return a.toLowerCase()})});for(p in{input:1,textarea:1})q.elements[p]=t,s.elements[p]=u;var v=/<(a|area|img|input)\b([^>]*)>/gi,w=/\b(href|src|name)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,x=/(?:<style(?=[ >])[^>]*>[\s\S]*<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,y=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,z=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,A=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,B=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;j.add("htmldataprocessor",{requires:["htmlwriter"],init:function(b){var c=b.dataProcessor=new a.htmlDataProcessor(b);c.writer.forceSimpleAmpersand=b.config.forceSimpleAmpersand,c.dataFilter.addRules(q),c.dataFilter.addRules(r),c.htmlFilter.addRules(s);var d={elements:{}};for(p in o)d.elements[p]=m(!0,b.config.fillEmptyBlocks);c.htmlFilter.addRules(d)},onLoad:function(){!("fillEmptyBlocks"in i)&&(i.fillEmptyBlocks=1)}}),a.htmlDataProcessor=function(b){var c=this;c.editor=b,c.writer=new a.htmlWriter,c.dataFilter=new a.htmlParser.filter,c.htmlFilter=new a.htmlParser.filter},a.htmlDataProcessor.prototype={toHtml:function(b,c){b=L(b,this.editor.config.protectedSource),b=C(b),b=D(b),b=F(b),b=H(b),b=I(b);var d=new h("div");d.setHtml("a"+b),b=d.getHtml().substr(1),b=G(b),b=E(b),b=K(b);var e=a.htmlParser.fragment.fromHtml(b,c),f=new a.htmlParser.basicWriter;return e.writeHtml(f,this.dataFilter),b=f.getHtml(!0),b=J(b),b},toDataFormat:function(b,c){var d=this.writer,e=a.htmlParser.fragment.fromHtml(b,c);return d.reset(),e.writeHtml(d,this.htmlFilter),d.getHtml(!0)}}}(),function(){function b(a,b){var c=a.createFakeParserElement(b,"cke_iframe","iframe",!0),d=c.attributes.style||"",f=b.attributes.width,g=b.attributes.height;return typeof f!="undefined"&&(d+="width:"+e.cssLength(f)+";"),typeof g!="undefined"&&(d+="height:"+e.cssLength(g)+";"),c.attributes.style=d,c}j.add("iframe",{requires:["dialog","fakeobjects"],init:function(b){var c="iframe",d=b.lang.iframe;a.dialog.add(c,this.path+"dialogs/iframe.js"),b.addCommand(c,new a.dialogCommand(c)),b.addCss("img.cke_iframe{background-image: url("+a.getUrl(this.path+"images/placeholder.png")+");"+"background-position: center center;"+"background-repeat: no-repeat;"+"border: 1px solid #a9a9a9;"+"width: 80px;"+"height: 80px;"+"}"),b.ui.addButton("Iframe",{label:d.toolbar,command:c}),b.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&b.data("cke-real-element-type")=="iframe"&&(a.data.dialog="iframe")}),b.addMenuItems&&b.addMenuItems({iframe:{label:d.title,command:"iframe",group:"image"}}),b.contextMenu&&b.contextMenu.addListener(function(a,b){if(a&&a.is("img")&&a.data("cke-real-element-type")=="iframe")return{iframe:2}})},afterInit:function(a){var c=a.dataProcessor,d=c&&c.dataFilter;d&&d.addRules({elements:{iframe:function(c){return b(a,c)}}})}})}(),j.add("image",{init:function(b){var c="image";a.dialog.add(c,this.path+"dialogs/image.js"),b.addCommand(c,new a.dialogCommand(c)),b.ui.addButton("Image",{label:b.lang.common.image,command:c}),b.on("doubleclick",function(a){var b=a.data.element;b.is("img")&&!b.data("cke-realelement")&&(a.data.dialog="image")}),b.addMenuItems&&b.addMenuItems({image:{label:b.lang.image.menu,command:"image",group:"image"}}),b.contextMenu&&b.contextMenu.addListener(function(a,b){return!a||!a.is("img")||a.data("cke-realelement")||a.isReadOnly()?null:{image:2}})}}),i.image_removeLinkByEmptyURL=!0,function(){function i(b){var c=this,d=b.editor,e=b.data.path,f=e&&e.contains(a);if(f)return c.setState(2);if(!c.useIndentClasses&&c.name=="indent")return c.setState(2);var g=b.data.path,h=g.block||g.blockLimit;if(!h)return c.setState(0);if(c.useIndentClasses){var i=h.$.className.match(c.classNameRegex),j=0;return i&&(i=i[1],j=c.indentClassMap[i]),c.name=="outdent"&&!j||c.name=="indent"&&j==d.config.indentClasses.length?c.setState(0):c.setState(2)}var k=parseInt(h.getStyle(l(h)),10);return isNaN(k)&&(k=0),k<=0?c.setState(0):c.setState(2)}function k(a,b){var c=this;c.name=b,c.useIndentClasses=a.config.indentClasses&&a.config.indentClasses.length>0;if(c.useIndentClasses){c.classNameRegex=new RegExp("(?:^|\\s+)("+a.config.indentClasses.join("|")+")(?=$|\\s)"),c.indentClassMap={};for(var d=0;d<a.config.indentClasses.length;d++)c.indentClassMap[a.config.indentClasses[d]]=d+1}c.startDisabled=b=="outdent"}function l(a,b){return(b||a.getComputedStyle("direction"))=="ltr"?"margin-left":"margin-right"}function m(a){return a.type=a.is("li")}var a={ol:1,ul:1},f=d.walker.whitespaces(!0),g=d.walker.bookmark(!1,!0);k.prototype={exec:function(b){function p(d){var e=x.startContainer,l=x.endContainer;while(e&&!e.getParent().equals(d))e=e.getParent();while(l&&!l.getParent().equals(d))l=l.getParent();if(!e||!l)return;var m=e,p=[],q=!1;while(!q)m.equals(l)&&(q=!0),p.push(m),m=m.getNext();if(p.length<1)return;var r=d.getParents(!0);for(var s=0;s<r.length;s++)if(r[s].getName&&a[r[s].getName()]){d=r[s];break}var t=i.name=="indent"?1:-1,u=p[0],v=p[p.length-1],w=j.list.listToArray(d,k),y=w[v.getCustomData("listarray_index")].indent;for(s=u.getCustomData("listarray_index");s<=v.getCustomData("listarray_index");s++){w[s].indent+=t;var z=w[s].parent;w[s].parent=new h(z.getName(),z.getDocument())}for(s=v.getCustomData("listarray_index")+1;s<w.length&&w[s].indent>y;s++)w[s].indent+=t;var A=j.list.arrayToList(w,k,null,b.config.enterMode,d.getDirection());if(i.name=="outdent"){var B;if((B=d.getParent())&&B.is("li")){var C=A.listNode.getChildren(),D=[],E=C.count(),F;for(s=E-1;s>=0;s--)(F=C.getItem(s))&&F.is&&F.is("li")&&D.push(F)}}A&&A.listNode.replace(d);if(D&&D.length)for(s=0;s<D.length;s++){var G=D[s],H=G;while((H=H.getNext())&&H.is&&H.getName()in a)c&&!G.getFirst(function(a){return f(a)&&g(a)})&&G.append(x.document.createText("")),G.append(H);G.insertAfter(B)}}function q(){var a=x.createIterator(),c=b.config.enterMode;a.enforceRealBlocks=!0,a.enlargeBr=c!=2;var d;while(d=a.getNextParagraph(c==1?"p":"div"))t(d)}function t(a,c){if(a.getCustomData("indent_processed"))return!1;if(i.useIndentClasses){var d=a.$.className.match(i.classNameRegex),f=0;d&&(d=d[1],f=i.indentClassMap[d]),i.name=="outdent"?f--:f++;if(f<0)return!1;f=Math.min(f,b.config.indentClasses.length),f=Math.max(f,0),a.$.className=e.ltrim(a.$.className.replace(i.classNameRegex,"")),f>0&&a.addClass(b.config.indentClasses[f-1])}else{var g=l(a,c),j=parseInt(a.getStyle(g),10);isNaN(j)&&(j=0);var m=b.config.indentOffset||40;j+=(i.name=="indent"?1:-1)*m;if(j<0)return!1;j=Math.max(j,0),j=Math.ceil(j/m)*m,a.setStyle(g,j?j+(b.config.indentUnit||"px"):""),a.getAttribute("style")===""&&a.removeAttribute("style")}return h.setMarker(k,a,"indent_processed",1),!0}var i=this,k={},u=b.getSelection(),v=u.createBookmarks(1),w=u&&u.getRanges(1),x,y=w.createIterator();while(x=y.getNextRange()){var z=x.getCommonAncestor(),A=z;while(A&&(A.type!=1||!a[A.getName()]))A=A.getParent();if(!A){var B=x.getEnclosedNode();B&&B.type==1&&B.getName()in a&&(x.setStartAt(B,1),x.setEndAt(B,2),A=B)}if(A&&x.startContainer.type==1&&x.startContainer.getName()in a){var C=new d.walker(x);C.evaluator=m,x.startContainer=C.next()}A&&x.endContainer.type==1&&x.endContainer.getName()in a&&(C=new d.walker(x),C.evaluator=m,x.endContainer=C.previous());if(A){var D=A.getFirst(m),E=!!D.getNext(m),F=x.startContainer,G=D.equals(F)||D.contains(F);(!G||i.name!="indent"&&!i.useIndentClasses&&!parseInt(A.getStyle(l(A)),10)||!t(A,!E&&D.getDirection()))&&p(A)}else q()}h.clearAllMarkers(k),b.forceNextSelectionCheck(),u.selectBookmarks(v)}},j.add("indent",{init:function(a){var c=a.addCommand("indent",new k(a,"indent")),f=a.addCommand("outdent",new k(a,"outdent"));a.ui.addButton("Indent",{label:a.lang.indent,command:"indent"}),a.ui.addButton("Outdent",{label:a.lang.outdent,command:"outdent"}),a.on("selectionChange",e.bind(i,c)),a.on("selectionChange",e.bind(i,f)),(b.ie6Compat||b.ie7Compat)&&a.addCss("ul,ol{\tmargin-left: 0px;\tpadding-left: 40px;}"),a.on("dirChanged",function(b){var c=new d.range(a.document);c.setStartBefore(b.data.node),c.setEndAfter(b.data.node);var e=new d.walker(c),f;while(f=e.next())if(f.type==1){if(!f.equals(b.data.node)&&f.getDirection()){c.setStartAfter(f),e=new d.walker(c);continue}var g=a.config.indentClasses;if(g){var h=b.data.dir=="ltr"?["_rtl",""]:["","_rtl"];for(var i=0;i<g.length;i++)f.hasClass(g[i]+h[0])&&(f.removeClass(g[i]+h[0]),f.addClass(g[i]+h[1]))}var j=f.getStyle("margin-right"),k=f.getStyle("margin-left");j?f.setStyle("margin-left",j):f.removeStyle("margin-left"),k?f.setStyle("margin-right",k):f.removeStyle("margin-right")}})},requires:["domiterator","list"]})}(),function(){function a(a,c){var d=c.block||c.blockLimit;return!d||d.getName()=="body"?2:b(d,a.config.useComputedState)==this.value?1:2}function b(a,b){b=b===undefined||b;var c;if(b)c=a.getComputedStyle("text-align");else{while(!a.hasAttribute||!a.hasAttribute("align")&&!a.getStyle("text-align")){var d=a.getParent();if(!d)break;a=d}c=a.getStyle("text-align")||a.getAttribute("align")||""}return c&&(c=c.replace(/-moz-|-webkit-|start|auto/i,"")),!c&&b&&(c=a.getComputedStyle("direction")=="rtl"?"right":"left"),c}function c(b){var c=b.editor.getCommand(this.name);c.state=a.call(this,b.editor,b.data.path),c.fire("state")}function f(a,b,c){var d=this;d.name=b,d.value=c;var e=a.config.justifyClasses;if(e){switch(c){case"left":d.cssClassName=e[0];break;case"center":d.cssClassName=e[1];break;case"right":d.cssClassName=e[2];break;case"justify":d.cssClassName=e[3]}d.cssClassRegex=new RegExp("(?:^|\\s+)(?:"+e.join("|")+")(?=$|\\s)")}}function g(a){var b=a.editor,c=new d.range(b.document);c.setStartBefore(a.data.node),c.setEndAfter(a.data.node);var e=new d.walker(c),f;while(f=e.next())if(f.type==1){if(!f.equals(a.data.node)&&f.getDirection()){c.setStartAfter(f),e=new d.walker(c);continue}var g=b.config.justifyClasses;g&&(f.hasClass(g[0])?(f.removeClass(g[0]),f.addClass(g[2])):f.hasClass(g[2])&&(f.removeClass(g[2]),f.addClass(g[0])));var h="text-align",i=f.getStyle(h);i=="left"?f.setStyle(h,"right"):i=="right"&&f.setStyle(h,"left")}}f.prototype={exec:function(a){var c=this,d=a.getSelection(),f=a.config.enterMode;if(!d)return;var g=d.createBookmarks(),h=d.getRanges(!0),i=c.cssClassName,j,k,l=a.config.useComputedState;l=l===undefined||l;for(var m=h.length-1;m>=0;m--){j=h[m].createIterator(),j.enlargeBr=f!=2;while(k=j.getNextParagraph(f==1?"p":"div")){k.removeAttribute("align"),k.removeStyle("text-align");var o=i&&(k.$.className=e.ltrim(k.$.className.replace(c.cssClassRegex,""))),p=c.state==2&&(!l||b(k,true)!=c.value);i?p?k.addClass(i):o||k.removeAttribute("class"):p&&k.setStyle("text-align",c.value)}}a.focus(),a.forceNextSelectionCheck(),d.selectBookmarks(g)}},j.add("justify",{init:function(a){var b=new f(a,"justifyleft","left"),d=new f(a,"justifycenter","center"),h=new f(a,"justifyright","right"),i=new f(a,"justifyblock","justify");a.addCommand("justifyleft",b),a.addCommand("justifycenter",d),a.addCommand("justifyright",h),a.addCommand("justifyblock",i),a.ui.addButton("JustifyLeft",{label:a.lang.justify.left,command:"justifyleft"}),a.ui.addButton("JustifyCenter",{label:a.lang.justify.center,command:"justifycenter"}),a.ui.addButton("JustifyRight",{label:a.lang.justify.right,command:"justifyright"}),a.ui.addButton("JustifyBlock",{label:a.lang.justify.block,command:"justifyblock"}),a.on("selectionChange",e.bind(c,b)),a.on("selectionChange",e.bind(c,h)),a.on("selectionChange",e.bind(c,d)),a.on("selectionChange",e.bind(c,i)),a.on("dirChanged",g)},requires:["domiterator"]})}(),j.add("keystrokes",{beforeInit:function(b){b.keystrokeHandler=new a.keystrokeHandler(b),b.specialKeys={}},init:function(a){var b=a.config.keystrokes,c=a.config.blockedKeystrokes,d=a.keystrokeHandler.keystrokes,e=a.keystrokeHandler.blockedKeystrokes;for(var f=0;f<b.length;f++)d[b[f][0]]=b[f][1];for(f=0;f<c.length;f++)e[c[f]]=1}}),a.keystrokeHandler=function(a){var b=this;return a.keystrokeHandler?a.keystrokeHandler:(b.keystrokes={},b.blockedKeystrokes={},b._={editor:a},b)},function(){var c,d=function(a){a=a.data;var b=a.getKeystroke(),d=this.keystrokes[b],e=this._.editor;c=e.fire("key",{keyCode:b})===!0;if(!c){if(d){var f={from:"keystrokeHandler"};c=e.execCommand(d,f)!==!1}if(!c){var g=e.specialKeys[b];c=g&&g(e)===!0,c||(c=!!this.blockedKeystrokes[b])}}return c&&a.preventDefault(!0),!c},e=function(a){c&&(c=!1,a.data.preventDefault(!0))};a.keystrokeHandler.prototype={attach:function(a){a.on("keydown",d,this),(b.opera||b.gecko&&b.mac)&&a.on("keypress",e,this)}}}(),i.blockedKeystrokes=[1066,1073,1085],i.keystrokes=[[4121,"toolbarFocus"],[4122,"elementsPathFocus"],[2121,"contextMenu"],[3121,"contextMenu"],[1090,"undo"],[1089,"redo"],[3090,"redo"],[1076,"link"],[1066,"bold"],[1073,"italic"],[1085,"underline"],[4109,"toolbarCollapse"],[4048,"a11yHelp"]],j.add("link",{init:function(b){b.addCommand("link",new a.dialogCommand("link")),b.addCommand("anchor",new a.dialogCommand("anchor")),b.addCommand("unlink",new a.unlinkCommand),b.ui.addButton("Link",{label:b.lang.link.toolbar,command:"link"}),b.ui.addButton("Unlink",{label:b.lang.unlink,command:"unlink"}),b.ui.addButton("Anchor",{label:b.lang.anchor.toolbar,command:"anchor"}),a.dialog.add("link",this.path+"dialogs/link.js"),a.dialog.add("anchor",this.path+"dialogs/anchor.js");var c=b.lang.dir=="rtl"?"right":"left";b.addCss("img.cke_anchor{background-image: url("+a.getUrl(this.path+"images/anchor.gif")+");"+"background-position: center center;"+"background-repeat: no-repeat;"+"border: 1px solid #a9a9a9;"+"width: 18px !important;"+"height: 18px !important;"+"}\n"+"a.cke_anchor"+"{"+"background-image: url("+a.getUrl(this.path+"images/anchor.gif")+");"+"background-position: "+c+" center;"+"background-repeat: no-repeat;"+"border: 1px solid #a9a9a9;"+"padding-"+c+": 18px;"+"}"),b.on("selectionChange",function(a){var c=b.getCommand("unlink"),d=a.data.path.lastElement&&a.data.path.lastElement.getAscendant("a",!0);d&&d.getName()=="a"&&d.getAttribute("href")?c.setState(2):c.setState(0)}),b.on("doubleclick",function(a){var c=j.link.getSelectedLink(b)||a.data.element;c.isReadOnly()||(c.is("a")?a.data.dialog=c.getAttribute("name")&&!c.getAttribute("href")?"anchor":"link":c.is("img")&&c.data("cke-real-element-type")=="anchor"&&(a.data.dialog="anchor"))}),b.addMenuItems&&b.addMenuItems({anchor:{label:b.lang.anchor.menu,command:"anchor",group:"anchor"},link:{label:b.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:b.lang.unlink,command:"unlink",group:"link",order:5}}),b.contextMenu&&b.contextMenu.addListener(function(a,c){if(!a||a.isReadOnly())return null;var d=a.is("img")&&a.data("cke-real-element-type")=="anchor";if(!d){if(!(a=j.link.getSelectedLink(b)))return null;d=a.getAttribute("name")&&!a.getAttribute("href")}return d?{anchor:2}:{link:2,unlink:2}})},afterInit:function(a){var b=a.dataProcessor,c=b&&b.dataFilter;c&&c.addRules({elements:{a:function(b){var c=b.attributes;if(c.name&&!c.href)return a.createFakeParserElement(b,"cke_anchor","anchor")}}})},requires:["fakeobjects"]}),j.link={getSelectedLink:function(a){try{var b=a.getSelection();if(b.getType()==3){var c=b.getSelectedElement();if(c.is("a"))return c}var d=b.getRanges(!0)[0];d.shrink(2);var e=d.getCommonAncestor();return e.getAscendant("a",!0)}catch(f){return null}}},a.unlinkCommand=function(){},a.unlinkCommand.prototype={exec:function(a){var b=a.getSelection(),c=b.createBookmarks(),d=b.getRanges(),e,f;for(var g=0;g<d.length;g++){e=d[g].getCommonAncestor(!0),f=e.getAscendant("a",!0);if(!f)continue;d[g].selectNodeContents(f)}b.selectRanges(d),a.document.$.execCommand("unlink",!1,null),b.selectBookmarks(c)},startDisabled:!0},e.extend(i,{linkShowAdvancedTab:!0,linkShowTargetTab:!0}),function(){function m(a){var c=a.data.path,d=c.blockLimit,e=c.elements,f,g;for(g=0;g<e.length&&(f=e[g])&&!f.equals(d);g++)if(b[e[g].getName()])return this.setState(this.type==e[g].getName()?1:2);return this.setState(2)}function n(a,b,c,d){var e=j.list.listToArray(b.root,c),f=[];for(var g=0;g<b.contents.length;g++){var i=b.contents[g];i=i.getAscendant("li",!0);if(!i||i.getCustomData("list_item_processed"))continue;f.push(i),h.setMarker(c,i,"list_item_processed",!0)}var k=b.root,l=k.getDocument().createElement(this.type);k.copyAttributes(l,{start:1,type:1}),l.removeStyle("list-style-type");for(g=0;g<f.length;g++){var m=f[g].getCustomData("listarray_index");e[m].parent=l}var n=j.list.arrayToList(e,c,null,a.config.enterMode),o,p=n.listNode.getChildCount();for(g=0;g<p&&(o=n.listNode.getChild(g));g++)o.getName()==this.type&&d.push(o);n.listNode.replace(b.root)}function p(a,b,c){var d=b.contents,e=b.root.getDocument(),f=[];if(d.length==1&&d[0].equals(b.root)){var g=e.createElement("div");d[0].moveChildren&&d[0].moveChildren(g),d[0].append(g),d[0]=g}var h=b.contents[0].getParent();for(var i=0;i<d.length;i++)h=h.getCommonAncestor(d[i].getParent());var j=a.config.useComputedState,k,l;j=j===undefined||j;for(i=0;i<d.length;i++){var m=d[i],n;while(n=m.getParent()){if(n.equals(h)){f.push(m),!l&&m.getDirection()&&(l=1);var p=m.getDirection(j);k!==null&&(k&&k!=p?k=null:k=p);break}m=n}}if(f.length<1)return;var q=f[f.length-1].getNext(),r=e.createElement(this.type);c.push(r);var s,t;while(f.length)s=f.shift(),t=e.createElement("li"),s.is("pre")||o.test(s.getName())?s.appendTo(t):(k&&s.getDirection()&&(s.removeStyle("direction"),s.removeAttribute("dir")),s.copyAttributes(t),s.moveChildren(t),s.remove()),t.appendTo(r);k&&l&&r.setAttribute("dir",k),q?r.insertBefore(q):r.appendTo(h)}function q(a,b,c){function s(c){(q=p[c?"getFirst":"getLast"]())&&(!q.is||!q.isBlockBoundary())&&(r=b.root[c?"getPrevious":"getNext"](d.walker.whitespaces(!0)))&&(!r.is||!r.isBlockBoundary({br:1}))&&a.document.createElement("br")[c?"insertBefore":"insertAfter"](q)}var e=j.list.listToArray(b.root,c),f=[];for(var g=0;g<b.contents.length;g++){var i=b.contents[g];i=i.getAscendant("li",!0);if(!i||i.getCustomData("list_item_processed"))continue;f.push(i),h.setMarker(c,i,"list_item_processed",!0)}var k=null;for(g=0;g<f.length;g++){var l=f[g].getCustomData("listarray_index");e[l].indent=-1,k=l}for(g=k+1;g<e.length;g++)if(e[g].indent>e[g-1].indent+1){var m=e[g-1].indent+1-e[g].indent,n=e[g].indent;while(e[g]&&e[g].indent>=n)e[g].indent+=m,g++;g--}var o=j.list.arrayToList(e,c,null,a.config.enterMode,b.root.getAttribute("dir")),p=o.listNode,q,r;s(!0),s(),p.replace(b.root)}function r(a,b){this.name=a,this.type=b}function u(a,b){var c,d=a.children,e=d.length;for(var f=0;f<e;f++){c=d[f];if(c.name&&c.name in b)return f}return e}function v(b){return function(d){var e=d.children,f=u(d,s.$list),g=e[f],h=g&&g.previous,i;if(h&&(h.name&&h.name=="br"||h.value&&(i=h.value.match(t)))){var j=h;(!i||!i.index)&&j==e[0]?e[0]=b||c?new a.htmlParser.text(""):new a.htmlParser.element("br",{}):j.name=="br"?e.splice(f-1,1):j.value=j.value.replace(t,"")}}}var b={ol:1,ul:1},g=/^[\n\r\t ]*$/,i=d.walker.whitespaces(),k=d.walker.bookmark(),l=function(a){return!i(a)&&!k(a)};j.list={listToArray:function(a,c,d,e,f){if(!b[a.getName()])return[];e||(e=0),d||(d=[]);for(var g=0,i=a.getChildCount();g<i;g++){var k=a.getChild(g);if(k.$.nodeName.toLowerCase()!="li")continue;var l={parent:a,indent:e,element:k,contents:[]};f?l.grandparent=f:(l.grandparent=a.getParent(),l.grandparent&&l.grandparent.$.nodeName.toLowerCase()=="li"&&(l.grandparent=l.grandparent.getParent())),c&&h.setMarker(c,k,"listarray_index",d.length),d.push(l);for(var m=0,n=k.getChildCount(),o;m<n;m++)o=k.getChild(m),o.type==1&&b[o.getName()]?j.list.listToArray(o,c,d,e+1,l.grandparent):l.contents.push(o)}return d},arrayToList:function(a,e,g,i,k){g||(g=0);if(!a||a.length<g+1)return null;var m=a[g].parent.getDocument(),n=new d.documentFragment(m),o=null,p=g,q=Math.max(a[g].indent,0),r=null,s=i==1?"p":"div";for(;;){var t=a[p];if(t.indent==q){if(!o||a[p].parent.getName()!=o.getName())o=a[p].parent.clone(!1,1),k&&o.setAttribute("dir",k),n.append(o);r=o.append(t.element.clone(0,1));for(var u=0;u<t.contents.length;u++)r.append(t.contents[u].clone(1,1));p++}else if(t.indent==Math.max(q,0)+1){var v=j.list.arrayToList(a,null,p,i);!r.getChildCount()&&c&&!(m.$.documentMode>7)&&r.append(m.createText("")),r.append(v.listNode),p=v.nextIndex}else{if(t.indent!=-1||!!g||!t.grandparent)return null;r;if(b[t.grandparent.getName()])r=t.element.clone(!1,!0);else if(k||t.element.hasAttributes()||i!=2){r=m.createElement(s),t.element.copyAttributes(r,{type:1,value:1});var w=t.element.getDirection()||k;w&&r.setAttribute("dir",w),!k&&i==2&&!r.hasAttributes()&&(r=new d.documentFragment(m))}else r=new d.documentFragment(m);for(u=0;u<t.contents.length;u++)r.append(t.contents[u].clone(1,1));if(r.type==11&&p!=a.length-1){var x=r.getLast();x&&x.type==1&&x.getAttribute("type")=="_moz"&&x.remove(),(x=r.getLast(l)&&x.type==1&&x.getName()in f.$block)||r.append(m.createElement("br"))}if(r.type==1&&r.getName()==s&&r.$.firstChild){r.trim();var y=r.getFirst();if(y.type==1&&y.isBlockBoundary()){var z=new d.documentFragment(m);r.moveChildren(z),r=z}}var A=r.$.nodeName.toLowerCase();!c&&(A=="div"||A=="p")&&r.appendBogus(),n.append(r),o=null,p++}if(a.length<=p||Math.max(a[p].indent,0)<q)break}if(e){var B=n.getFirst();while(B)B.type==1&&h.clearMarkers(e,B),B=B.getNextSourceNode()}return{listNode:n,nextIndex:p}}};var o=/^h[1-6]$/;r.prototype={exec:function(a){a.focus();var c=a.document,e=a.getSelection(),f=e&&e.getRanges(!0);if(!f||f.length<1)return;if(this.state==2){var g=c.getBody();g.trim();if(!g.getFirst()){var i=c.createElement(a.config.enterMode==1?"p":a.config.enterMode==3?"div":"br");i.appendTo(g),f=new d.rangeList([new d.range(c)]),i.is("br")?(f[0].setStartBefore(i),f[0].setEndAfter(i)):f[0].selectNodeContents(i),e.selectRanges(f)}else{var j=f.length==1&&f[0],k=j&&j.getEnclosedNode();k&&k.is&&this.type==k.getName()&&this.setState(1)}}var l=e.createBookmarks(!0),m=[],o={},r=f.createIterator(),s=0;while((j=r.getNextRange())&&++s){var t=j.getBoundaryNodes(),u=t.startNode,v=t.endNode;u.type==1&&u.getName()=="td"&&j.setStartAt(t.startNode,1),v.type==1&&v.getName()=="td"&&j.setEndAt(t.endNode,2);var w=j.createIterator(),x;w.forceBrBreak=this.state==2;while(x=w.getNextParagraph()){if(x.getCustomData("list_block"))continue;h.setMarker(o,x,"list_block",1);var y=new d.elementPath(x),z=y.elements,A=z.length,B=null,C=0,D=y.blockLimit,E;for(var F=A-1;F>=0&&(E=z[F]);F--)if(b[E.getName()]&&D.contains(E)){D.removeCustomData("list_group_object_"+s);var G=E.getCustomData("list_group_object");G?G.contents.push(x):(G={root:E,contents:[x]},m.push(G),h.setMarker(o,E,"list_group_object",G)),C=1;break}if(C)continue;var H=D;H.getCustomData("list_group_object_"+s)?H.getCustomData("list_group_object_"+s).contents.push(x):(G={root:H,contents:[x]},h.setMarker(o,H,"list_group_object_"+s,G),m.push(G))}}var I=[];while(m.length>0)G=m.shift(),this.state==2?b[G.root.getName()]?n.call(this,a,G,o,I):p.call(this,a,G,I):this.state==1&&b[G.root.getName()]&&q.call(this,a,G,o);for(F=0;F<I.length;F++){B=I[F];var J,K=this;(J=function(a){var b=B[a?"getPrevious":"getNext"](d.walker.whitespaces(!0));b&&b.getName&&b.getName()==K.type&&(b.remove(),b.moveChildren(B,a))})(),J(1)}h.clearAllMarkers(o),e.selectBookmarks(l),a.focus()}};var s=f,t=/[\t\r\n ]*(?:&nbsp;|\xa0)$/,w={elements:{}};for(var x in s.$listItem)w.elements[x]=v();var y={elements:{}};for(x in s.$listItem)y.elements[x]=v(!0);j.add("list",{init:function(a){var b=a.addCommand("numberedlist",new r("numberedlist","ol")),c=a.addCommand("bulletedlist",new r("bulletedlist","ul"));a.ui.addButton("NumberedList",{label:a.lang.numberedlist,command:"numberedlist"}),a.ui.addButton("BulletedList",{label:a.lang.bulletedlist,command:"bulletedlist"}),a.on("selectionChange",e.bind(m,b)),a.on("selectionChange",e.bind(m,c))},afterInit:function(a){var b=a.dataProcessor;b&&(b.dataFilter.addRules(w),b.htmlFilter.addRules(y))},requires:["domiterator"]})}(),function(){j.liststyle={requires:["dialog"],init:function(b){b.addCommand("numberedListStyle",new a.dialogCommand("numberedListStyle")),a.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js"),b.addCommand("bulletedListStyle",new a.dialogCommand("bulletedListStyle")),a.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js"),b.addMenuItems&&(b.addMenuGroup("list",108),b.addMenuItems({numberedlist:{label:b.lang.list.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:b.lang.list.bulletedTitle,group:"list",command:"bulletedListStyle"}})),b.contextMenu&&b.contextMenu.addListener(function(a,b){if(!a||a.isReadOnly())return null;while(a){var c=a.getName();if(c=="ol")return{numberedlist:2};if(c=="ul")return{bulletedlist:2};a=a.getParent()}return null})}},j.add("liststyle",j.liststyle)}(),function(){function d(a){if(!a||a.type!=1||a.getName()!="form")return[];var b=[],c=["style","className"];for(var d=0;d<c.length;d++){var e=c[d],f=a.$.elements.namedItem(e);if(f){var g=new h(f);b.push([g,g.nextSibling]),g.remove()}}return b}function e(a,b){if(!a||a.type!=1||a.getName()!="form")return;if(b.length>0)for(var c=b.length-1;c>=0;c--){var d=b[c][0],e=b[c][1];e?d.insertBefore(e):d.appendTo(a)}}function f(a,b){var c=d(a),f={},g=a.$;return b||(f["class"]=g.className||"",g.className=""),f.inline=g.style.cssText||"",b||(g.style.cssText="position: static; overflow: visible"),e(c),f}function g(a,b){var c=d(a),f=a.$;"class"in b&&(f.className=b["class"]),"inline"in b&&(f.style.cssText=b.inline),e(c)}function i(b){var c=a.instances;for(var d in c){var e=c[d];if(e.mode=="wysiwyg"){var f=e.document.getBody();f.setAttribute("contentEditable",!1),f.setAttribute("contentEditable",!0)}}b.focusManager.hasFocus&&(b.toolbox.focus(),b.focus())}function k(a){if(!c||b.version>6)return null;var d=h.createFromHtml('<iframe frameborder="0" tabindex="-1" src="javascript:void((function(){document.open();'+(b.isCustomDomain()?"document.domain='"+this.getDocument().$.domain+"';":"")+"document.close();"+'})())"'+' style="display:block;position:absolute;z-index:-1;'+"progid:DXImageTransform.Microsoft.Alpha(opacity=0);"+'"></iframe>');return a.append(d,!0)}j.add("maximize",{init:function(d){function t(){var a=j.getViewPaneSize();s&&s.setStyles({width:a.width+"px",height:a.height+"px"}),d.resize(a.width,a.height,null,!0)}var e=d.lang,h=a.document,j=h.getWindow(),l,m,n,s,u=2;d.addCommand("maximize",{modes:{wysiwyg:1,source:1},editorFocus:!1,exec:function(){var a=d.container.getChild(1),C=d.getThemeSpace("contents");if(d.mode=="wysiwyg"){var D=d.getSelection();l=D&&D.getRanges(),m=j.getScrollPosition()}else{var E=d.textarea.$;l=!c&&[E.selectionStart,E.selectionEnd],m=[E.scrollLeft,E.scrollTop]}if(this.state==2){j.on("resize",t),n=j.getScrollPosition();var F=d.container;while(F=F.getParent())F.setCustomData("maximize_saved_styles",f(F)),F.setStyle("z-index",d.config.baseFloatZIndex-1);C.setCustomData("maximize_saved_styles",f(C,!0)),a.setCustomData("maximize_saved_styles",f(a,!0));var G={overflow:b.webkit?"":"hidden",width:0,height:0};h.getDocumentElement().setStyles(G),!b.gecko&&h.getDocumentElement().setStyle("position","fixed"),h.getBody().setStyles(G),c?setTimeout(function(){j.$.scrollTo(0,0)},0):j.$.scrollTo(0,0),a.setStyle("position","absolute"),a.$.offsetLeft,a.setStyles({"z-index":d.config.baseFloatZIndex-1,left:"0px",top:"0px"}),s=k(a),a.addClass("cke_maximized"),t();var H=a.getDocumentPosition();a.setStyles({left:-1*H.x+"px",top:-1*H.y+"px"}),b.gecko&&i(d)}else if(this.state==1){j.removeListener("resize",t);var I=[C,a];for(var J=0;J<I.length;J++)g(I[J],I[J].getCustomData("maximize_saved_styles")),I[J].removeCustomData("maximize_saved_styles");F=d.container;while(F=F.getParent())g(F,F.getCustomData("maximize_saved_styles")),F.removeCustomData("maximize_saved_styles");c?setTimeout(function(){j.$.scrollTo(n.x,n.y)},0):j.$.scrollTo(n.x,n.y),a.removeClass("cke_maximized"),b.webkit&&(a.setStyle("display","inline"),setTimeout(function(){a.setStyle("display","block")},0)),s&&(s.remove(),s=null),d.fire("resize")}this.toggleState();var K=this.uiItems[0];if(K){var L=this.state==2?e.maximize:e.minimize,M=d.element.getDocument().getById(K._.id);M.getChild(1).setHtml(L),M.setAttribute("title",L),M.setAttribute("href",'javascript:void("'+L+'");')}if(d.mode=="wysiwyg")if(l){b.gecko&&i(d),d.getSelection().selectRanges(l);var N=d.getSelection().getStartElement();N&&N.scrollIntoView(!0)}else j.$.scrollTo(m.x,m.y);else l&&(E.selectionStart=l[0],E.selectionEnd=l[1]),E.scrollLeft=m[0],E.scrollTop=m[1];l=m=null,u=this.state},canUndo:!1}),d.ui.addButton("Maximize",{label:e.maximize,command:"maximize"}),d.on("mode",function(){var a=d.getCommand("maximize");a.setState(a.state==0?0:u)},null,null,100)}})}(),j.add("newpage",{init:function(a){a.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(a){var b=this;a.setData(a.config.newpage_html||"",function(){setTimeout(function(){a.fire("afterCommandExec",{name:b.name,command:b})},200)}),a.focus()},async:!0}),a.ui.addButton("NewPage",{label:a.lang.newPage,command:"newpage"})}}),j.add("pagebreak",{init:function(b){b.addCommand("pagebreak",j.pagebreakCmd),b.ui.addButton("PageBreak",{label:b.lang.pagebreak,command:"pagebreak"}),b.addCss("img.cke_pagebreak{background-image: url("+a.getUrl(this.path+"images/pagebreak.gif")+");"+"background-position: center center;"+"background-repeat: no-repeat;"+"clear: both;"+"display: block;"+"float: none;"+"width:100% !important; _width:99.9% !important;"+"border-top: #999999 1px dotted;"+"border-bottom: #999999 1px dotted;"+"height: 5px !important;"+"page-break-after: always;"+"}")},afterInit:function(a){var b=a.dataProcessor,c=b&&b.dataFilter;c&&c.addRules({elements:{div:function(b){var c=b.attributes,d=c&&c.style,e=d&&b.children.length==1&&b.children[0],f=e&&e.name=="span"&&e.attributes.style;if(f&&/page-break-after\s*:\s*always/i.test(d)&&/display\s*:\s*none/i.test(f)){var g=a.createFakeParserElement(b,"cke_pagebreak","div"),h=a.lang.pagebreakAlt;return g.attributes.alt=h,g.attributes["aria-label"]=h,g}}}})},requires:["fakeobjects"]}),j.pagebreakCmd={exec:function(a){var b=a.lang.pagebreakAlt,c=h.createFromHtml('<div style="page-break-after: always;"><span style="display: none;">&nbsp;</span></div>');c=a.createFakeElement(c,"cke_pagebreak","div"),c.setAttributes({alt:b,"aria-label":b,title:b});var d=a.getSelection().getRanges(!0);a.fire("saveSnapshot");for(var e,g=d.length-1;g>=0;g--){e=d[g],g<d.length-1&&(c=c.clone(!0)),e.splitBlock("p"),e.insertNode(c),g==d.length-1&&(e.moveToPosition(c,4),e.select());var i=c.getPrevious();i&&f[i.getName()].div&&c.move(i)}a.fire("saveSnapshot")}},function(){j.add("pastefromword",{init:function(b){var c=0,d=function(){setTimeout(function(){c=0},0
)};b.addCommand("pastefromword",{canUndo:!1,exec:function(){c=1,b.execCommand("paste")===!1?b.on("dialogHide",function(a){a.removeListener(),d()}):d()}}),b.ui.addButton("PasteFromWord",{label:b.lang.pastefromword.toolbar,command:"pastefromword"}),b.on("pasteState",function(a){b.getCommand("pastefromword").setState(a.data)}),b.on("paste",function(d){var e=d.data,f;if((f=e.html)&&(c||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(f))){var g=this.loadFilterRules(function(){if(g)b.fire("paste",e);else if(!b.config.pasteFromWordPromptCleanup||c||confirm(b.lang.pastefromword.confirmCleanup))e.html=a.cleanWord(f,b)});g&&d.cancel()}},this)},loadFilterRules:function(b){var c=a.cleanWord;if(c)b();else{var d=a.getUrl(i.pasteFromWordCleanupFile||this.path+"filter/default.js");a.scriptLoader.load(d,b,null,!0)}return!c},requires:["clipboard"]})}(),function(){var b={exec:function(a){var b=e.tryThese(function(){var a=window.clipboardData.getData("Text");if(!a)throw 0;return a});return b?(a.fire("paste",{text:b}),!0):(a.openDialog("pastetext"),!1)}};j.add("pastetext",{init:function(c){var d="pastetext",e=c.addCommand(d,b);c.ui.addButton("PasteText",{label:c.lang.pasteText.button,command:d}),a.dialog.add(d,a.getUrl(this.path+"dialogs/pastetext.js")),c.config.forcePasteAsPlainText&&c.on("beforeCommandExec",function(a){a.data.name=="paste"&&(c.execCommand("pastetext"),a.cancel())},null,null,0),c.on("pasteState",function(a){c.getCommand("pastetext").setState(a.data)})},requires:["clipboard"]})}(),j.add("popup"),e.extend(a.editor.prototype,{popup:function(a,b,c,d){b=b||"80%",c=c||"70%",typeof b=="string"&&b.length>1&&b.substr(b.length-1,1)=="%"&&(b=parseInt(window.screen.width*parseInt(b,10)/100,10)),typeof c=="string"&&c.length>1&&c.substr(c.length-1,1)=="%"&&(c=parseInt(window.screen.height*parseInt(c,10)/100,10)),b<640&&(b=640),c<420&&(c=420);var e=parseInt((window.screen.height-c)/2,10),f=parseInt((window.screen.width-b)/2,10);d=(d||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+b+",height="+c+",top="+e+",left="+f;var g=window.open("",null,d,!0);if(!g)return!1;try{g.moveTo(f,e),g.resizeTo(b,c),g.focus(),g.location.href=a}catch(h){g=window.open(a,null,d,!0)}return!0}}),function(){var a={modes:{wysiwyg:1,source:1},canUndo:!1,exec:function(a){var c,d=a.config,f=d.baseHref?'<base href="'+d.baseHref+'"/>':"",g=b.isCustomDomain();if(d.fullPage)c=a.getData().replace(/<head>/,"$&"+f).replace(/[^>]*(?=<\/title>)/,"$& &mdash; "+a.lang.preview);else{var h="<body ",i=a.document&&a.document.getBody();i&&(i.getAttribute("id")&&(h+='id="'+i.getAttribute("id")+'" '),i.getAttribute("class")&&(h+='class="'+i.getAttribute("class")+'" ')),h+=">",c=a.config.docType+'<html dir="'+a.config.contentsLangDirection+'">'+"<head>"+f+"<title>"+a.lang.preview+"</title>"+e.buildStyleHtml(a.config.contentsCss)+"</head>"+h+a.getData()+"</body></html>"}var j=640,k=420,l=80;try{var m=window.screen;j=Math.round(m.width*.8),k=Math.round(m.height*.7),l=Math.round(m.width*.1)}catch(n){}var o="";g&&(window._cke_htmlToLoad=c,o='javascript:void( (function(){document.open();document.domain="'+document.domain+'";'+"document.write( window.opener._cke_htmlToLoad );"+"document.close();"+"window.opener._cke_htmlToLoad = null;"+"})() )");var p=window.open(o,null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+j+",height="+k+",left="+l);g||(p.document.open(),p.document.write(c),p.document.close())}},c="preview";j.add(c,{init:function(b){b.addCommand(c,a),b.ui.addButton("Preview",{label:b.lang.preview,command:c})}})}(),j.add("print",{init:function(a){var b="print",c=a.addCommand(b,j.print);a.ui.addButton("Print",{label:a.lang.print,command:b})}}),j.print={exec:function(a){if(b.opera)return;b.gecko?a.window.$.print():a.document.$.execCommand("Print")},canUndo:!1,modes:{wysiwyg:!b.opera}},j.add("removeformat",{requires:["selection"],init:function(a){a.addCommand("removeFormat",j.removeformat.commands.removeformat),a.ui.addButton("RemoveFormat",{label:a.lang.removeFormat,command:"removeFormat"}),a._.removeFormat={filters:[]}}}),j.removeformat={commands:{removeformat:{exec:function(a){var b=a._.removeFormatRegex||(a._.removeFormatRegex=new RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),c=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),e=j.removeformat.filter,f=a.getSelection().getRanges(1),g=f.createIterator(),h;while(h=g.getNextRange()){h.collapsed||h.enlarge(1);var i=h.createBookmark(),k=i.startNode,l=i.endNode,m,n=function(c){var f=new d.elementPath(c),g=f.elements;for(var h=1,i;i=g[h];h++){if(i.equals(f.block)||i.equals(f.blockLimit))break;b.test(i.getName())&&e(a,i)&&c.breakParent(i)}};n(k);if(l){n(l),m=k.getNextSourceNode(!0,1);while(m){if(m.equals(l))break;var o=m.getNextSourceNode(!1,1);(m.getName()!="img"||!m.data("cke-realelement"))&&e(a,m)&&(b.test(m.getName())?m.remove(1):(m.removeAttributes(c),a.fire("removeFormatCleanup",m))),m=o}}h.moveToBookmark(i)}a.getSelection().selectRanges(f)}}},filter:function(a,b){var c=a._.removeFormat.filters;for(var d=0;d<c.length;d++)if(c[d](b)===!1)return!1;return!0}},a.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormat.filters.push(a)},i.removeFormatTags="b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",i.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",j.add("resize",{init:function(b){var c=b.config;!c.resize_dir&&(c.resize_dir="both"),c.resize_maxWidth==undefined&&(c.resize_maxWidth=3e3),c.resize_maxHeight==undefined&&(c.resize_maxHeight=3e3),c.resize_minWidth==undefined&&(c.resize_minWidth=750),c.resize_minHeight==undefined&&(c.resize_minHeight=250);if(c.resize_enabled!==!1){var d=null,f,g,h=(c.resize_dir=="both"||c.resize_dir=="horizontal")&&c.resize_minWidth!=c.resize_maxWidth,i=(c.resize_dir=="both"||c.resize_dir=="vertical")&&c.resize_minHeight!=c.resize_maxHeight;function j(a){var d=a.data.$.screenX-f.x,e=a.data.$.screenY-f.y,j=g.width,k=g.height,l=j+d*(b.lang.dir=="rtl"?-1:1),o=k+e;h&&(j=Math.max(c.resize_minWidth,Math.min(l,c.resize_maxWidth))),i&&(k=Math.max(c.resize_minHeight,Math.min(o,c.resize_maxHeight))),b.resize(j,k)}function k(c){a.document.removeListener("mousemove",j),a.document.removeListener("mouseup",k),b.document&&(b.document.removeListener("mousemove",j),b.document.removeListener("mouseup",k))}var l=e.addFunction(function(e){d||(d=b.getResizable()),g={width:d.$.offsetWidth||0,height:d.$.offsetHeight||0},f={x:e.screenX,y:e.screenY},c.resize_minWidth>g.width&&(c.resize_minWidth=g.width),c.resize_minHeight>g.height&&(c.resize_minHeight=g.height),a.document.on("mousemove",j),a.document.on("mouseup",k),b.document&&(b.document.on("mousemove",j),b.document.on("mouseup",k))});b.on("destroy",function(){e.removeFunction(l)}),b.on("themeSpace",function(a){if(a.data.space=="bottom"){var c="";h&&!i&&(c=" cke_resizer_horizontal"),!h&&i&&(c=" cke_resizer_vertical"),a.data.html+='<div class="cke_resizer'+c+'"'+' title="'+e.htmlEncode(b.lang.resize)+'"'+' onmousedown="CKEDITOR.tools.callFunction('+l+', event)"'+"></div>"}},b,null,100)}}}),function(){var a={modes:{wysiwyg:1,source:1},exec:function(a){var b=a.element.$.form;if(b)try{b.submit()}catch(c){b.submit.click&&b.submit.click()}}},b="save";j.add(b,{init:function(c){var d=c.addCommand(b,a);d.modes={wysiwyg:!!c.element.$.form},c.ui.addButton("Save",{label:c.lang.save,command:b})}})}(),function(){function g(a,b){var c=0,d;for(d in b)if(b[d]==a){c=1;break}return c}var d="scaytcheck",f="",i=function(){var d=this,g=function(){var e=d.config,f={};f.srcNodeRef=d.document.getWindow().$.frameElement,f.assocApp="CKEDITOR."+a.version+"@"+a.revision,f.customerid=e.scayt_customerid||"1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2",f.customDictionaryIds=e.scayt_customDictionaryIds||"",f.userDictionaryName=e.scayt_userDictionaryName||"",f.sLang=e.scayt_sLang||"en_US",f.onLoad=function(){c&&b.version<8||this.addStyle(this.selectorCss(),"padding-bottom: 2px !important;"),d.focusManager.hasFocus&&!k.isControlRestored(d)&&this.focus()},f.onBeforeChange=function(){k.getScayt(d)&&!d.checkDirty()&&setTimeout(function(){d.resetDirty()},0)};var g=window.scayt_custom_params;if(typeof g=="object")for(var i in g)f[i]=g[i];k.getControlId(d)&&(f.id=k.getControlId(d));var j=new window.scayt(f);j.afterMarkupRemove.push(function(a){(new h(a,j.document)).mergeSiblings()});var l=k.instances[d.name];l&&(j.sLang=l.sLang,j.option(l.option()),j.paused=l.paused),k.instances[d.name]=j;var m="scaytButton",n=window.scayt.uiTags,o=[];for(var p=0,r=4;p<r;p++)o.push(n[p]&&k.uiTabs[p]);k.uiTabs=o;try{j.setDisabled(k.isPaused(d)===!1)}catch(s){}d.fire("showScaytState")};d.on("contentDom",g),d.on("contentDomUnload",function(){var b=a.document.getElementsByTag("script"),c=/^dojoIoScript(\d+)$/i,d=/^https?:\/\/svc\.spellchecker\.net\/spellcheck\/script\/ssrv\.cgi/i;for(var e=0;e<b.count();e++){var f=b.getItem(e),g=f.getId(),h=f.getAttribute("src");g&&h&&g.match(c)&&h.match(d)&&f.remove()}}),d.on("beforeCommandExec",function(a){if(a.data.name!="source"&&a.data.name!="newpage"||d.mode!="wysiwyg")a.data.name=="source"&&d.mode=="source"&&k.markControlRestore(d);else{var b=k.getScayt(d);b&&(k.setPaused(d,!b.disabled),k.setControlId(d,b.id),b.destroy(!0),delete k.instances[d.name])}}),d.on("afterCommandExec",function(a){if(!k.isScaytEnabled(d))return;d.mode=="wysiwyg"&&(a.data.name=="undo"||a.data.name=="redo")&&window.setTimeout(function(){k.getScayt(d).refresh()},10)}),d.on("destroy",function(a){var b=a.editor,c=k.getScayt(b);if(!c)return;delete k.instances[b.name],k.setControlId(b,c.id),c.destroy(!0)}),d.on("afterSetData",function(){k.isScaytEnabled(d)&&window.setTimeout(function(){var a=k.getScayt(d);a&&a.refresh()},10)}),d.on("insertElement",function(){var a=k.getScayt(d);k.isScaytEnabled(d)&&(c&&d.getSelection().unlock(!0),window.setTimeout(function(){a.focus(),a.refresh()},10))},this,null,50),d.on("insertHtml",function(){var a=k.getScayt(d);k.isScaytEnabled(d)&&(c&&d.getSelection().unlock(!0),window.setTimeout(function(){a.focus(),a.refresh()},10))},this,null,50),d.on("scaytDialog",function(a){a.data.djConfig=window.djConfig,a.data.scayt_control=k.getScayt(d),a.data.tab=f,a.data.scayt=window.scayt});var i=d.dataProcessor,l=i&&i.htmlFilter;l&&l.addRules({elements:{span:function(a){if(a.attributes["data-scayt_word"]&&a.attributes["data-scaytid"])return delete a.name,a}}});var m=j.undo.Image.prototype;m.equals=e.override(m.equals,function(a){return function(b){var c=this,d=c.contents,e=b.contents,f=k.getScayt(c.editor);f&&k.isScaytReady(c.editor)&&(c.contents=f.reset(d)||"",b.contents=f.reset(e)||"");var g=a.apply(c,arguments);return c.contents=d,b.contents=e,g}}),d.document&&g()};j.scayt={engineLoaded:!1,instances:{},controlInfo:{},setControlInfo:function(a,b){a&&a.name&&typeof this.controlInfo[a.name]!="object"&&(this.controlInfo[a.name]={});for(var c in b)this.controlInfo[a.name][c]=b[c]},isControlRestored:function(a){return a&&a.name&&this.controlInfo[a.name]?this.controlInfo[a.name].restored:!1},markControlRestore:function(a){this.setControlInfo(a,{restored:!0})},setControlId:function(a,b){this.setControlInfo(a,{id:b})},getControlId:function(a){return a&&a.name&&this.controlInfo[a.name]&&this.controlInfo[a.name].id?this.controlInfo[a.name].id:null},setPaused:function(a,b){this.setControlInfo(a,{paused:b})},isPaused:function(a){return a&&a.name&&this.controlInfo[a.name]?this.controlInfo[a.name].paused:undefined},getScayt:function(a){return this.instances[a.name]},isScaytReady:function(a){return this.engineLoaded===!0&&"undefined"!=typeof window.scayt&&this.getScayt(a)},isScaytEnabled:function(a){var b=this.getScayt(a);return b?b.disabled===!1:!1},loadEngine:function(c){if(b.gecko&&b.version<10900||b.opera||b.air)return c.fire("showScaytState");if(this.engineLoaded===!0)return i.apply(c);if(this.engineLoaded==-1)return a.on("scaytReady",function(){i.apply(c)});a.on("scaytReady",i,c),a.on("scaytReady",function(){this.engineLoaded=!0},this,null,0),this.engineLoaded=-1;var d=document.location.protocol;d=d.search(/https?:/)!=-1?d:"http:";var e="svc.spellchecker.net/scayt26/loader__base.js",f=c.config.scayt_srcUrl||d+"//"+e,g=k.parseUrl(f).path+"/";return window.scayt==undefined?(a._djScaytConfig={baseUrl:g,addOnLoad:[function(){a.fireOnce("scaytReady")}],isDebug:!1},a.document.getHead().append(a.document.createElement("script",{attributes:{type:"text/javascript",async:"true",src:f}}))):a.fireOnce("scaytReady"),null},parseUrl:function(a){var b;return a.match&&(b=a.match(/(.*)[\/\\](.*?\.\w+)$/))?{path:b[1],file:b[2]}:a}};var k=j.scayt,l=function(a,b,c,d,e,f,g){a.addCommand(d,e),a.addMenuItem(d,{label:c,command:d,group:f,order:g})},m={preserveState:!0,editorFocus:!1,canUndo:!1,exec:function(a){if(k.isScaytReady(a)){var b=k.isScaytEnabled(a);this.setState(b?2:1);var c=k.getScayt(a);c.focus(),c.setDisabled(b)}else!a.config.scayt_autoStartup&&k.engineLoaded>=0&&(this.setState(0),k.loadEngine(a))}};j.add("scayt",{requires:["menubutton"],beforeInit:function(a){var b=a.config.scayt_contextMenuItemsOrder||"suggest|moresuggest|control",c="";b=b.split("|");if(b&&b.length)for(var d=0;d<b.length;d++)c+="scayt_"+b[d]+(b.length!=parseInt(d,10)+1?",":"");a.config.menu_groups=c+","+a.config.menu_groups},init:function(c){var e={},h={},i=c.addCommand(d,m);a.dialog.add(d,a.getUrl(this.path+"dialogs/options.js"));var j=c.config.scayt_uiTabs||"1,1,1",p=[];j=j.split(",");for(var t=0,u=3;t<u;t++){var v=parseInt(j[t]||"1",10);p.push(v)}var w="scaytButton";c.addMenuGroup(w);var x={},y=c.lang.scayt;x.scaytToggle={label:y.enable,command:d,group:w},p[0]==1&&(x.scaytOptions={label:y.options,group:w,onClick:function(){f="options",c.openDialog(d)}}),p[1]==1&&(x.scaytLangs={label:y.langs,group:w,onClick:function(){f="langs",c.openDialog(d)}}),p[2]==1&&(x.scaytDict={label:y.dictionariesTab,group:w,onClick:function(){f="dictionaries",c.openDialog(d)}}),x.scaytAbout={label:c.lang.scayt.about,group:w,onClick:function(){f="about",c.openDialog(d)}},p[3]=1,k.uiTabs=p,c.addMenuItems(x),c.ui.add("Scayt",5,{label:y.title,title:b.opera?y.opera_title:y.title,className:"cke_button_scayt",modes:{wysiwyg:1},onRender:function(){i.on("state",function(){this.setState(i.state)},this)},onMenu:function(){var a=k.isScaytEnabled(c);return c.getMenuItem("scaytToggle").label=y[a?"disable":"enable"],{scaytToggle:2,scaytOptions:a&&k.uiTabs[0]?2:0,scaytLangs:a&&k.uiTabs[1]?2:0,scaytDict:a&&k.uiTabs[2]?2:0,scaytAbout:a&&k.uiTabs[3]?2:0}}}),c.contextMenu&&c.addMenuItems&&c.contextMenu.addListener(function(a,b){if(!k.isScaytEnabled(c)||b.getRanges()[0].checkReadOnly())return null;var d=k.getScayt(c),f=d.getScaytNode();if(!f)return null;var i=d.getWord(f);if(!i)return null;var j=d.getLang(),m={},n=window.scayt.getSuggestion(i,j);if(!n||!n.length)return null;for(t in e)delete c._.menuItems[t],delete c._.commands[t];for(t in h)delete c._.menuItems[t],delete c._.commands[t];e={},h={};var p=c.config.scayt_moreSuggestions||"on",s=!1,u=c.config.scayt_maxSuggestions;typeof u!="number"&&(u=5),!u&&(u=n.length);var v=c.config.scayt_contextCommands||"all";v=v.split("|");for(var w=0,x=n.length;w<x;w+=1){var z="scayt_suggestion_"+n[w].replace(" ","_"),A=function(a,b){return{exec:function(){d.replace(a,b)}}}(f,n[w]);w<u?(l(c,"button_"+z,n[w],z,A,"scayt_suggest",w+1),m[z]=2,h[z]=2):p=="on"&&(l(c,"button_"+z,n[w],z,A,"scayt_moresuggest",w+1),e[z]=2,s=!0)}s&&(c.addMenuItem("scayt_moresuggest",{label:y.moreSuggestions,group:"scayt_moresuggest",order:10,getItems:function(){return e}}),h.scayt_moresuggest=2);if(g("all",v)||g("ignore",v)){var B={exec:function(){d.ignore(f)}};l(c,"ignore",y.ignore,"scayt_ignore",B,"scayt_control",1),h.scayt_ignore=2}if(g("all",v)||g("ignoreall",v)){var C={exec:function(){d.ignoreAll(f)}};l(c,"ignore_all",y.ignoreAll,"scayt_ignore_all",C,"scayt_control",2),h.scayt_ignore_all=2}if(g("all",v)||g("add",v)){var D={exec:function(){window.scayt.addWordToUserDictionary(f)}};l(c,"add_word",y.addWord,"scayt_add_word",D,"scayt_control",3),h.scayt_add_word=2}return d.fireOnContextMenu&&d.fireOnContextMenu(c),h});var z=function(){c.removeListener("showScaytState",z),!b.opera&&!b.air?i.setState(k.isScaytEnabled(c)?1:2):i.setState(0)};c.on("showScaytState",z),(b.opera||b.air)&&c.on("instanceReady",function(){z()}),c.config.scayt_autoStartup&&c.on("instanceReady",function(){k.loadEngine(c)})},afterInit:function(a){var b,c=function(a){if(a.hasAttribute("data-scaytid"))return!1};a._.elementsPath&&(b=a._.elementsPath.filters)&&b.push(c),a.addRemoveFormatFilter&&a.addRemoveFormatFilter(c)}})}(),j.add("smiley",{requires:["dialog"],init:function(b){b.config.smiley_path=b.config.smiley_path||this.path+"images/",b.addCommand("smiley",new a.dialogCommand("smiley")),b.ui.addButton("Smiley",{label:b.lang.smiley.toolbar,command:"smiley"}),a.dialog.add("smiley",this.path+"dialogs/smiley.js")}}),i.smiley_images=["regular_smile.gif","sad_smile.gif","wink_smile.gif","teeth_smile.gif","confused_smile.gif","tounge_smile.gif","embaressed_smile.gif","omg_smile.gif","whatchutalkingabout_smile.gif","angry_smile.gif","angel_smile.gif","shades_smile.gif","devil_smile.gif","cry_smile.gif","lightbulb.gif","thumbs_down.gif","thumbs_up.gif","heart.gif","broken_heart.gif","kiss.gif","envelope.gif"],i.smiley_descriptions=["smiley","sad","wink","laugh","frown","cheeky","blush","surprise","indecision","angry","angel","cool","devil","crying","enlightened","no","yes","heart","broken heart","kiss","mail"],function(){var b=".%2 p,.%2 div,.%2 pre,.%2 address,.%2 blockquote,.%2 h1,.%2 h2,.%2 h3,.%2 h4,.%2 h5,.%2 h6{background-repeat: no-repeat;background-position: top %3;border: 1px dotted gray;padding-top: 8px;padding-%3: 8px;}.%2 p{%1p.png);}.%2 div{%1div.png);}.%2 pre{%1pre.png);}.%2 address{%1address.png);}.%2 blockquote{%1blockquote.png);}.%2 h1{%1h1.png);}.%2 h2{%1h2.png);}.%2 h3{%1h3.png);}.%2 h4{%1h4.png);}.%2 h5{%1h5.png);}.%2 h6{%1h6.png);}",c=/%1/g,d=/%2/g,e=/%3/g,f={preserveState:!0,editorFocus:!1,exec:function(a){this.toggleState(),this.refresh(a)},refresh:function(a){var b=this.state==1?"addClass":"removeClass";a.document.getBody()[b]("cke_show_blocks")}};j.add("showblocks",{requires:["wysiwygarea"],init:function(g){var h=g.addCommand("showblocks",f);h.canUndo=!1,g.config.startupOutlineBlocks&&h.setState(1),g.addCss(b.replace(c,"background-image: url("+a.getUrl(this.path)+"images/block_").replace(d,"cke_show_blocks ").replace(e,g.lang.dir=="rtl"?"right":"left")),g.ui.addButton("ShowBlocks",{label:g.lang.showBlocks,command:"showblocks"}),g.on("mode",function(){h.state!=0&&h.refresh(g)}),g.on("contentDom",function(){h.state!=0&&h.refresh(g)})}})}(),function(){var c="cke_show_border",d,f=(b.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th,","{","border : #d3d3d3 1px dotted","}"]:[".%1 table.%2,",".%1 table.%2 > tr > td, .%1 table.%2 > tr > th,",".%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,",".%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,",".%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th","{","border : #d3d3d3 1px dotted","}"]).join("");d=f.replace(/%2/g,c).replace(/%1/g,"cke_show_borders ");var g={preserveState:!0,editorFocus:!1,exec:function(a){this.toggleState(),this.refresh(a)},refresh:function(a){var b=this.state==1?"addClass":"removeClass";a.document.getBody()[b]("cke_show_borders")}};j.add("showborders",{requires:["wysiwygarea"],modes:{wysiwyg:1},init:function(a){var b=a.addCommand("showborders",g);b.canUndo=!1,a.config.startupShowBorders!==!1&&b.setState(1),a.addCss(d),a.on("mode",function(){b.state!=0&&b.refresh(a)},null,null,100),a.on("contentDom",function(){b.state!=0&&b.refresh(a)}),a.on("removeFormatCleanup",function(b){var d=b.data;a.getCommand("showborders").state==1&&d.is("table")&&(!d.hasAttribute("border")||parseInt(d.getAttribute("border"),10)<=0)&&d.addClass(c)})},afterInit:function(a){var b=a.dataProcessor,d=b&&b.dataFilter,e=b&&b.htmlFilter;d&&d.addRules({elements:{table:function(a){var b=a.attributes,d=b["class"],e=parseInt(b.border,10);if(!e||e<=0)b["class"]=(d||"")+" "+c}}}),e&&e.addRules({elements:{table:function(a){var b=a.attributes,d=b["class"];d&&(b["class"]=d.replace(c,"").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),a.on("dialogDefinition",function(a){var b=a.data.name;if(b=="table"||b=="tableProperties"){var d=a.data.definition,f=d.getContents("info"),g=f.get("txtBorder"),h=g.commit;g.commit=e.override(h,function(a){return function(b,d){a.apply(this,arguments);var e=parseInt(this.getValue(),10);d[!e||e<=0?"addClass":"removeClass"](c)}});var i=d.getContents("advanced"),j=i&&i.get("advCSSClasses");j&&(j.setup=e.override(j.setup,function(a){return function(){a.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}}),j.commit=e.override(j.commit,function(a){return function(b,c){a.apply(this,arguments),parseInt(c.getAttribute("border"),10)||c.addClass("cke_show_border")}}))}})}(),j.add("sourcearea",{requires:["editingblock"],init:function(d){var e=j.sourcearea,f=a.document.getWindow();d.on("editingBlockReady",function(){var a,e;d.addMode("source",{load:function(g,i){c&&b.version<8&&g.setStyle("position","relative"),d.textarea=a=new h("textarea"),a.setAttributes({dir:"ltr",tabIndex:b.webkit?-1:d.tabIndex,role:"textbox","aria-label":d.lang.editorTitle.replace("%1",d.name)}),a.addClass("cke_source"),a.addClass("cke_enable_context_menu");var j={width:b.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"};c&&(e=function(){a.hide(),a.setStyle("height",g.$.clientHeight+"px"),a.setStyle("width",g.$.clientWidth+"px"),a.show()},d.on("resize",e),f.on("resize",e),setTimeout(e,0)),g.setHtml(""),g.append(a),a.setStyles(j),d.fire("ariaWidget",a),a.on("blur",function(){d.focusManager.blur()}),a.on("focus",function(){d.focusManager.focus()}),d.mayBeDirty=!0,this.loadData(i);var k=d.keystrokeHandler;k&&k.attach(a),setTimeout(function(){d.mode="source",d.fire("mode")},b.gecko||b.webkit?100:0)},loadData:function(b){a.setValue(b),d.fire("dataReady")},getData:function(){return a.getValue()},getSnapshotData:function(){return a.getValue()},unload:function(g){a.clearCustomData(),d.textarea=a=null,e&&(d.removeListener("resize",e),f.removeListener("resize",e)),c&&b.version<8&&g.removeStyle("position")},focus:function(){a.focus()}})}),d.addCommand("source",e.commands.source),d.ui.addButton&&d.ui.addButton("Source",{label:d.lang.source,command:"source"}),d.on("mode",function(){d.getCommand("source").setState(d.mode=="source"?1:2)})}}),j.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,exec:function(a){a.mode=="wysiwyg"&&a.fire("saveSnapshot"),a.getCommand("source").setState(0),a.setMode(a.mode=="source"?"wysiwyg":"source")},canUndo:!1}}},function(){function e(a,b){var c=a.type,d=b.type;return c==d?0:c==3?-1:d==3?1:d==1?1:-1}j.add("stylescombo",{requires:["richcombo","styles"],init:function(f){function k(b){f.getStylesSet(function(c){if(!j.length){var d,f;for(var h=0,k=c.length;h<k;h++){var l=c[h];f=l.name,d=i[f]=new a.style(l),d._name=f,d._.enterMode=g.enterMode,j.push(d)}j.sort(e)}b&&b()})}var g=f.config,h=f.lang.stylesCombo,i={},j=[];f.ui.addRichCombo("Styles",{label:h.label,title:h.panelTitle,className:"cke_styles",panel:{css:f.skin.editor.css.concat(g.contentsCss),multiSelect:!0,attributes:{"aria-label":h.panelTitle}},init:function(){var a=this;k(function(){var b,c,d;for(var e=0,f=j.length;e<f;e++){b=j[e],c=b._name;var g=b.type;g!=d&&(a.startGroup(h["panelTitle"+String(g)]),d=g),a.add(c,b.type==3?c:b.buildPreview(),c)}a.commit(),a.onOpen()})},onClick:function(a){f.focus(),f.fire("saveSnapshot");var b=i[a],c=f.getSelection(),e=new d.elementPath(c.getStartElement());b[b.checkActive(e)?"remove":"apply"](f.document),f.fire("saveSnapshot")},onRender:function(){f.on("selectionChange",function(a){var b=this.getValue(),c=a.data.path,d=c.elements;for(var e=0,f=d.length,g;e<f;e++){g=d[e];for(var h in i)if(i[h].checkElementRemovable(g,!0)){h!=b&&this.setValue(h);return}}this.setValue("")},this)},onOpen:function(){var a=this;(c||b.webkit)&&f.focus();var e=f.getSelection(),g=e.getSelectedElement(),j=new d.elementPath(g||e.getStartElement()),k=[0,0,0,0];a.showAll(),a.unmarkAll();for(var l in i){var m=i[l],o=m.type;m.checkActive(j)?a.mark(l):o==3&&!m.checkApplicable(j)&&(a.hideItem(l),k[o]--),k[o]++}k[1]||a.hideGroup(h["panelTitle"+String(1)]),k[2]||a.hideGroup(h["panelTitle"+String(2)]),k[3]||a.hideGroup(h["panelTitle"+String(3)])}}),f.on("instanceReady",function(){k()})}})}(),j.add("table",{init:function(b){var c=j.table,d=b.lang.table;b.addCommand("table",new a.dialogCommand("table")),b.addCommand("tableProperties",new a.dialogCommand("tableProperties")),b.ui.addButton("Table",{label:d.toolbar,command:"table"}),a.dialog.add("table",this.path+"dialogs/table.js"),a.dialog.add("tableProperties",this.path+"dialogs/table.js"),b.addMenuItems&&b.addMenuItems({table:{label:d.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:d.deleteTable,command:"tableDelete",group:"table",order:1}}),b.on("doubleclick",function(a){var b=a.data.element;b.is("table")&&(a.data.dialog="tableProperties")}),b.contextMenu&&b.contextMenu.addListener(function(a,b){if(!a||a.isReadOnly())return null;var c=a.hasAscendant("table",1);return c?{tabledelete:2,table:2}:null})}}),function(){function f(a){function i(a){if(f.length>0)return;a.type==1&&b.test(a.getName())&&!a.getCustomData("selected_cell")&&(h.setMarker(g,a,"selected_cell",!0),f.push(a))}var c=a.createBookmarks(),e=a.getRanges(),f=[],g={};for(var j=0;j<e.length;j++){var k=e[j];if(k.collapsed){var l=k.getCommonAncestor(),m=l.getAscendant("td",!0)||l.getAscendant("th",!0);m&&f.push(m)}else{var n=new d.walker(k),o;n.guard=i;while(o=n.next()){var p=o.getParent();p&&b.test(p.getName())&&!p.getCustomData("selected_cell")&&(h.setMarker(g,p,"selected_cell",!0),f.push(p))}}}return h.clearAllMarkers(g),a.selectBookmarks(c),f}function g(a){var b=0,c=a.length-1,d={},e,f,g;while(e=a[b++])h.setMarker(d,e,"delete_cell",!0);b=0;while(e=a[b++])if((f=e.getPrevious())&&!f.getCustomData("delete_cell")||(f=e.getNext())&&!f.getCustomData("delete_cell"))return h.clearAllMarkers(d),f;return h.clearAllMarkers(d),g=a[0].getParent(),(g=g.getPrevious())?g.getLast():(g=a[c].getParent(),(g=g.getNext())?g.getChild(0):null)}function i(a,b){var d=f(a),g=d[0],i=g.getAscendant("table"),j=g.getDocument(),k=d[0].getParent(),l=k.$.rowIndex,m=d[d.length-1],n=m.getParent().$.rowIndex+m.$.rowSpan-1,o=new h(i.$.rows[n]),p=b?l:n,q=b?k:o,r=e.buildTableMap(i),s=r[p],t=b?r[p-1]:r[p+1],u=r[0].length,v=j.createElement("tr");for(var w=0;w<u;w++){var x;s[w].rowSpan>1&&t&&s[w]==t[w]?(x=s[w],x.rowSpan+=1):(x=(new h(s[w])).clone(),x.removeAttribute("rowSpan"),!c&&x.appendBogus(),v.append(x),x=x.$),w+=x.colSpan-1}b?v.insertBefore(q):v.insertAfter(q)}function k(a){if(a instanceof d.selection){var b=f(a),c=b[0],g=c.getAscendant("table"),i=e.buildTableMap(g),j=b[0].getParent(),l=j.$.rowIndex,m=b[b.length-1],n=m.getParent().$.rowIndex+m.$.rowSpan-1,o=[];for(var p=l;p<=n;p++){var q=i[p],r=new h(g.$.rows[p]);for(var s=0;s<q.length;s++){var t=new h(q[s]),u=t.getParent().$.rowIndex;if(t.$.rowSpan==1)t.remove();else{t.$.rowSpan-=1;if(u==p){var v=i[p+1];v[s-1]?t.insertAfter(new h(v[s-1])):(new h(g.$.rows[p+1])).append(t,1)}}s+=t.$.colSpan-1}o.push(r)}var w=g.$.rows,x=new h(w[l]||w[l-1]||g.$.parentNode);for(p=o.length;p>=0;p--)k(o[p]);return x}return a instanceof h&&(g=a.getAscendant("table"),g.$.rows.length==1?g.remove():a.remove()),null}function l(a,b){var c=a.getParent(),d=c.$.cells,e=0;for(var f=0;f<d.length;f++){var g=d[f];e+=b?1:g.colSpan;if(g==a.$)break}return e-1}function m(a,b){var c=b?Infinity:0;for(var d=0;d<a.length;d++){var e=l(a[d],b);if(b?e<c:e>c)c=e}return c}function n(a,b){var d=f(a),g=d[0],i=g.getAscendant("table"),j=m(d,1),k=m(d),l=b?j:k,n=e.buildTableMap(i),o=[],p=[],q=n.length;for(var r=0;r<q;r++){o.push(n[r][l]);var s=b?n[r][l-1]:n[r][l+1];s&&p.push(s)}for(r=0;r<q;r++){var t;o[r].colSpan>1&&p.length&&p[r]==o[r]?(t=o[r],t.colSpan+=1):(t=(new h(o[r])).clone(),t.removeAttribute("colSpan"),!c&&t.appendBogus(),t[b?"insertBefore":"insertAfter"].call(t,new h(o[r])),t=t.$),r+=t.rowSpan-1}}function o(a){var b=f(a),c=b[0],d=b[b.length-1],g=c.getAscendant("table"),i=e.buildTableMap(g),j,k,l=[];for(var m=0,n=i.length;m<n;m++)for(var o=0,p=i[m].length;o<p;o++)i[m][o]==c.$&&(j=o),i[m][o]==d.$&&(k=o);for(m=j;m<=k;m++)for(o=0;o<i.length;o++){var q=i[o],r=new h(g.$.rows[o]),s=new h(q[m]);s.$.colSpan==1?s.remove():s.$.colSpan-=1,o+=s.$.rowSpan-1,r.$.cells.length||l.push(r)}var t=g.$.rows[0]&&g.$.rows[0].cells,u=new h(t[j]||(j?t[j-1]:g.$.parentNode));return l.length==n&&g.remove(),u}function p(a){var b=[],c=a[0]&&a[0].getAscendant("table"),d,e,f,g;for(d=0,e=a.length;d<e;d++)b.push(a[d].$.cellIndex);b.sort();for(d=1,e=b.length;d<e;d++)if(b[d]-b[d-1]>1){f=b[d-1]+1;break}f||(f=b[0]>0?b[0]-1:b[b.length-1]+1);var i=c.$.rows;for(d=0,e=i.length;d<e;d++){g=i[d].cells[f];if(g)break}return g?new h(g):c.getPrevious()}function q(a,b){var d=a.getStartElement(),e=d.getAscendant("td",1)||d.getAscendant("th",1);if(!e)return;var f=e.clone();c||f.appendBogus(),b?f.insertBefore(e):f.insertAfter(e)}function r(a){if(a instanceof d.selection){var b=f(a),c=b[0]&&b[0].getAscendant("table"),e=g(b);for(var i=b.length-1;i>=0;i--)r(b[i]);e?t(e,!0):c&&c.remove()}else if(a instanceof h){var j=a.getParent();j.getChildCount()==1?j.remove():a.remove()}}function s(a){var b=a.getBogus();b&&b.remove(),a.trim()}function t(a,b){var c=new d.range(a.getDocument());c["moveToElementEdit"+(b?"End":"Start")](a)||(c.selectNodeContents(a),c.collapse(b?!1:!0)),c.select(!0)}function u(a,b,c){var d=a[b];if(typeof c=="undefined")return d;for(var e=0;d&&e<d.length;e++){if(c.is&&d[e]==c.$)return e;if(e==c)return new h(d[e])}return c.is?-1:null}function v(a,b,c){var d=[];for(var e=0;e<a.length;e++){var f=a[e];if(typeof c=="undefined")d.push(f[b]);else{if(c.is&&f[b]==c.$)return e;if(e==c)return new h(f[b])}}return typeof c=="undefined"?d:c.is?-1:null}function w(a,b,g){var i=f(a),j;if((b?i.length!=1:i.length<2)||(j=a.getCommonAncestor())&&j.type==1&&j.is("table"))return!1;var k,l=i[0],m=l.getAscendant("table"),n=e.buildTableMap(m),o=n.length,p=n[0].length,q=l.getParent().$.rowIndex,r=u(n,q,l);if(b){var t;try{var v=parseInt(l.getAttribute("rowspan"),10)||1,w=parseInt(l.getAttribute("colspan"),10)||1;t=n[b=="up"?q-v:b=="down"?q+v:q][b=="left"?r-w:b=="right"?r+w:r]}catch(x){return!1}if(!t||l.$==t)return!1;i[b=="up"||b=="left"?"unshift":"push"](new h(t))}var y=l.getDocument(),z=q,B=0,C=0,D=!g&&new d.documentFragment(y),E=0;for(var F=0;F<i.length;F++){k=i[F];var G=k.getParent(),H=k.getFirst(),I=k.$.colSpan,J=k.$.rowSpan,K=G.$.rowIndex,L=u(n,K,k);E+=I*J,C=Math.max(C,L-r+I),B=Math.max(B,K-q+J);if(!g){if(s(k),k.getChildren().count()){if(K!=z&&H&&(!H.isBlockBoundary||!H.isBlockBoundary({br:1}))){var M=D.getLast(d.walker.whitespaces(!0));M&&(!M.is||!M.is("br"))&&D.append("br")}k.moveChildren(D)}F?k.remove():k.setHtml("")}z=K}if(!g){D.moveChildren(l),c||l.appendBogus(),C>=p?l.removeAttribute("rowSpan"):l.$.rowSpan=B,B>=o?l.removeAttribute("colSpan"):l.$.colSpan=C;var N=new d.nodeList(m.$.rows),O=N.count();for(F=O-1;F>=0;F--){var P=N.getItem(F);if(!P.$.cells.length){P.remove(),O++;continue}}return l}return B*C==E}function x(a,b){var d=f(a);if(d.length>1)return!1;if(b)return!0;var g=d[0],i=g.getParent(),j=i.getAscendant("table"),k=e.buildTableMap(j),l=i.$.rowIndex,m=u(k,l,g),n=g.$.rowSpan,o,p,q,r;if(n>1){p=Math.ceil(n/2),q=Math.floor(n/2),r=l+p;var s=new h(j.$.rows[r]),t=u(k,r),v;o=g.clone();for(var w=0;w<t.length;w++){v=t[w];if(v.parentNode==s.$&&w>m){o.insertBefore(new h(v));break}v=null}v||s.append(o,!0)}else{q=p=1,s=i.clone(),s.insertAfter(i),s.append(o=g.clone());var x=u(k,l);for(var y=0;y<x.length;y++)x[y].rowSpan++}return c||o.appendBogus(),g.$.rowSpan=p,o.$.rowSpan=q,p==1&&g.removeAttribute("rowSpan"),q==1&&o.removeAttribute("rowSpan"),o}function y(a,b){var d=f(a);if(d.length>1)return!1;if(b)return!0;var g=d[0],h=g.getParent(),i=h.getAscendant("table"),j=e.buildTableMap(i),k=h.$.rowIndex,l=u(j,k,g),m=g.$.colSpan,n,o,p;if(m>1)o=Math.ceil(m/2),p=Math.floor(m/2);else{p=o=1;var q=v(j,l);for(var r=0;r<q.length;r++)q[r].colSpan++}return n=g.clone(),n.insertAfter(g),c||n.appendBogus(),g.$.colSpan=o,n.$.colSpan=p,o==1&&g.removeAttribute("colSpan"),p==1&&n.removeAttribute("colSpan"),n}var b=/^(?:td|th)$/,z={thead:1,tbody:1,tfoot:1,td:1,tr:1,th:1};j.tabletools={init:function(b){var c=b.lang.table;b.addCommand("cellProperties",new a.dialogCommand("cellProperties")),a.dialog.add("cellProperties"
,this.path+"dialogs/tableCell.js"),b.addCommand("tableDelete",{exec:function(a){var b=a.getSelection(),c=b&&b.getStartElement(),d=c&&c.getAscendant("table",1);if(!d)return;b.selectElement(d);var e=b.getRanges()[0];e.collapse(),b.selectRanges([e]);var f=d.getParent();f.getChildCount()==1&&!f.is("body","td","th")?f.remove():d.remove()}}),b.addCommand("rowDelete",{exec:function(a){var b=a.getSelection();t(k(b))}}),b.addCommand("rowInsertBefore",{exec:function(a){var b=a.getSelection();i(b,!0)}}),b.addCommand("rowInsertAfter",{exec:function(a){var b=a.getSelection();i(b)}}),b.addCommand("columnDelete",{exec:function(a){var b=a.getSelection(),c=o(b);c&&t(c,!0)}}),b.addCommand("columnInsertBefore",{exec:function(a){var b=a.getSelection();n(b,!0)}}),b.addCommand("columnInsertAfter",{exec:function(a){var b=a.getSelection();n(b)}}),b.addCommand("cellDelete",{exec:function(a){var b=a.getSelection();r(b)}}),b.addCommand("cellMerge",{exec:function(a){t(w(a.getSelection()),!0)}}),b.addCommand("cellMergeRight",{exec:function(a){t(w(a.getSelection(),"right"),!0)}}),b.addCommand("cellMergeDown",{exec:function(a){t(w(a.getSelection(),"down"),!0)}}),b.addCommand("cellVerticalSplit",{exec:function(a){t(x(a.getSelection()))}}),b.addCommand("cellHorizontalSplit",{exec:function(a){t(y(a.getSelection()))}}),b.addCommand("cellInsertBefore",{exec:function(a){var b=a.getSelection();q(b,!0)}}),b.addCommand("cellInsertAfter",{exec:function(a){var b=a.getSelection();q(b)}}),b.addMenuItems&&b.addMenuItems({tablecell:{label:c.cell.menu,group:"tablecell",order:1,getItems:function(){var a=b.getSelection(),c=f(a);return{tablecell_insertBefore:2,tablecell_insertAfter:2,tablecell_delete:2,tablecell_merge:w(a,null,!0)?2:0,tablecell_merge_right:w(a,"right",!0)?2:0,tablecell_merge_down:w(a,"down",!0)?2:0,tablecell_split_vertical:x(a,!0)?2:0,tablecell_split_horizontal:y(a,!0)?2:0,tablecell_properties:c.length>0?2:0}}},tablecell_insertBefore:{label:c.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:c.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:c.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:c.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:c.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:c.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:c.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:c.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:c.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:c.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:2,tablerow_insertAfter:2,tablerow_delete:2}}},tablerow_insertBefore:{label:c.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:c.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:c.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:c.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:2,tablecolumn_insertAfter:2,tablecolumn_delete:2}}},tablecolumn_insertBefore:{label:c.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:c.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:c.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),b.contextMenu&&b.contextMenu.addListener(function(a,b){if(!a||a.isReadOnly())return null;while(a){if(a.getName()in z)return{tablecell:2,tablerow:2,tablecolumn:2};a=a.getParent()}return null})},getSelectedCells:f},j.add("tabletools",j.tabletools)}(),e.buildTableMap=function(a){var b=a.$.rows,c=-1,d=[];for(var e=0;e<b.length;e++){c++,!d[c]&&(d[c]=[]);var f=-1;for(var g=0;g<b[e].cells.length;g++){var h=b[e].cells[g];f++;while(d[c][f])f++;var i=isNaN(h.colSpan)?1:h.colSpan,j=isNaN(h.rowSpan)?1:h.rowSpan;for(var k=0;k<j;k++){d[c+k]||(d[c+k]=[]);for(var l=0;l<i;l++)d[c+k][f+l]=b[e].cells[g]}f+=i-1}}return d},j.add("specialchar",{availableLangs:{en:1},init:function(b){var c="specialchar",d=this;a.dialog.add(c,this.path+"dialogs/specialchar.js"),b.addCommand(c,{exec:function(){var f=b.langCode;f=d.availableLangs[f]?f:"en",a.scriptLoader.load(a.getUrl(d.path+"lang/"+f+".js"),function(){e.extend(b.lang.specialChar,d.lang[f]),b.openDialog(c)})},modes:{wysiwyg:1},canUndo:!1}),b.ui.addButton("SpecialChar",{label:b.lang.specialChar.toolbar,command:c})}}),i.specialChars=["!","&quot;","#","$","%","&amp;","'","(",")","*","+","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&lt;","=","&gt;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","&euro;","&lsquo;","&rsquo;","&ldquo;","&rdquo;","&ndash;","&mdash;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&reg;","&macr;","&deg;","&","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&","&frac14;","&frac12;","&frac34;","&iquest;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&times;","&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&uuml;","&yacute;","&thorn;","&yuml;","&OElig;","&oelig;","&#372;","&#374","&#373","&#375;","&sbquo;","&#8219;","&bdquo;","&hellip;","&trade;","&#9658;","&bull;","&rarr;","&rArr;","&hArr;","&diams;","&asymp;"],function(){function i(a){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(b){if(b.focusManager.hasFocus){var f=b.getSelection(),g=f.getCommonAncestor(),i;if(i=g.getAscendant("td",!0)||g.getAscendant("th",!0)){var j=new d.range(b.document),k=e.tryThese(function(){var b=i.getParent(),c=b.$.cells[i.$.cellIndex+(a?-1:1)];return c.parentNode.parentNode,c},function(){var b=i.getParent(),c=b.getAscendant("table"),d=c.$.rows[b.$.rowIndex+(a?-1:1)];return d.cells[a?d.cells.length-1:0]});if(!k&&!a){var l=i.getAscendant("table").$,m=i.getParent().$.cells,n=new h(l.insertRow(-1),b.document);for(var o=0,p=m.length;o<p;o++){var r=n.append((new h(m[o],b.document)).clone(!1,!1));!c&&r.appendBogus()}j.moveToElementEditStart(n)}else{if(!k)return!0;k=new h(k),j.moveToElementEditStart(k),(!j.checkStartOfBlock()||!j.checkEndOfBlock())&&j.selectNodeContents(k)}return j.select(!0),!0}}return!1}}}var a={editorFocus:!1,modes:{wysiwyg:1,source:1}},f={exec:function(a){a.container.focusNext(!0,a.tabIndex)}},g={exec:function(a){a.container.focusPrevious(!0,a.tabIndex)}};j.add("tab",{requires:["keystrokes"],init:function(c){var d=c.config.enableTabKeyTools!==!1,h=c.config.tabSpaces||0,j="";while(h--)j+="";j&&c.on("key",function(a){a.data.keyCode==9&&(c.insertHtml(j),a.cancel())}),d&&c.on("key",function(a){(a.data.keyCode==9&&c.execCommand("selectNextCell")||a.data.keyCode==2e3+9&&c.execCommand("selectPreviousCell"))&&a.cancel()}),(b.webkit||b.gecko)&&c.on("key",function(a){var b=a.data.keyCode;b==9&&!j&&(a.cancel(),c.execCommand("blur")),b==2e3+9&&(c.execCommand("blurBack"),a.cancel())}),c.addCommand("blur",e.extend(f,a)),c.addCommand("blurBack",e.extend(g,a)),c.addCommand("selectNextCell",i()),c.addCommand("selectPreviousCell",i(!0))}})}(),h.prototype.focusNext=function(a,b){var c=this,d=c.$,e=b===undefined?c.getTabIndex():b,f,g,h,i,j,k;if(e<=0){j=c.getNextSourceNode(a,1);while(j){if(j.isVisible()&&j.getTabIndex()===0){h=j;break}j=j.getNextSourceNode(!1,1)}}else{j=c.getDocument().getBody().getFirst();while(j=j.getNextSourceNode(!1,1)){if(!f)if(!g&&j.equals(c)){g=!0;if(a){if(!(j=j.getNextSourceNode(!0,1)))break;f=1}}else g&&!c.contains(j)&&(f=1);if(!j.isVisible()||(k=j.getTabIndex())<0)continue;if(f&&k==e){h=j;break}k>e&&(!h||!i||k<i)?(h=j,i=k):!h&&k===0&&(h=j,i=k)}}h&&h.focus()},h.prototype.focusPrevious=function(a,b){var c=this,d=c.$,e=b===undefined?c.getTabIndex():b,f,g,h,i=0,j,k=c.getDocument().getBody().getLast();while(k=k.getPreviousSourceNode(!1,1)){if(!f)if(!g&&k.equals(c)){g=!0;if(a){if(!(k=k.getPreviousSourceNode(!0,1)))break;f=1}}else g&&!c.contains(k)&&(f=1);if(!k.isVisible()||(j=k.getTabIndex())<0)continue;if(e<=0){if(f&&j===0){h=k;break}j>i&&(h=k,i=j)}else{if(f&&j==e){h=k;break}j<e&&(!h||j>i)&&(h=k,i=j)}}h&&h.focus()},function(){j.add("templates",{requires:["dialog"],init:function(b){a.dialog.add("templates",a.getUrl(this.path+"dialogs/templates.js")),b.addCommand("templates",new a.dialogCommand("templates")),b.ui.addButton("Templates",{label:b.lang.templates.button,command:"templates"})}});var b={},c={};a.addTemplates=function(a,c){b[a]=c},a.getTemplates=function(a){return b[a]},a.loadTemplates=function(b,d){var e=[];for(var f=0,g=b.length;f<g;f++)c[b[f]]||(e.push(b[f]),c[b[f]]=1);e.length?a.scriptLoader.load(e,d):setTimeout(d,0)}}(),i.templates_files=[a.getUrl("plugins/templates/templates/default.js")],i.templates_replaceContent=!0,function(){var d=function(){this.toolbars=[],this.focusCommandExecuted=!1};d.prototype.focus=function(){for(var a=0,b;b=this.toolbars[a++];)for(var c=0,d;d=b.items[c++];)if(d.focus){d.focus();return}};var f={toolbarFocus:{modes:{wysiwyg:1,source:1},exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,c||b.air?setTimeout(function(){a.toolbox.focus()},100):a.toolbox.focus())}}};j.add("toolbar",{init:function(b){var c=function(a,c){var d,e,f,g=b.lang.dir=="rtl";switch(c){case g?37:39:case 9:do{d=a.next;if(!d){e=a.toolbar.next,f=e&&e.items.length;while(f===0)e=e.next,f=e&&e.items.length;e&&(d=e.items[0])}a=d}while(a&&!a.focus);return a?a.focus():b.toolbox.focus(),!1;case g?39:37:case 2009:do{d=a.previous;if(!d){e=a.toolbar.previous,f=e&&e.items.length;while(f===0)e=e.previous,f=e&&e.items.length;e&&(d=e.items[f-1])}a=d}while(a&&!a.focus);if(a)a.focus();else{var h=b.toolbox.toolbars[b.toolbox.toolbars.length-1].items;h[h.length-1].focus()}return!1;case 27:return b.focus(),!1;case 13:case 32:return a.execute(),!1}return!0};b.on("themeSpace",function(f){if(f.data.space==b.config.toolbarLocation){b.toolbox=new d;var g=e.getNextId(),h=['<div class="cke_toolbox" role="toolbar" aria-labelledby="',g,'" onmousedown="return false;"'],i=b.config.toolbarStartupExpanded!==!1,j;h.push(i?">":' style="display:none">'),h.push('<span id="',g,'" class="cke_voice_label">',b.lang.toolbar,"</span>");var l=b.toolbox.toolbars,n=b.config.toolbar instanceof Array?b.config.toolbar:b.config["toolbar_"+b.config.toolbar];for(var q=0;q<n.length;q++){var r=n[q];if(!r)continue;var s=e.getNextId(),t={id:s,items:[]};j&&(h.push("</div>"),j=0);if(r==="/"){h.push('<div class="cke_break"></div>');continue}h.push('<span id="',s,'" class="cke_toolbar" role="presentation"><span class="cke_toolbar_start"></span>');var u=l.push(t)-1;u>0&&(t.previous=l[u-1],t.previous.next=t);for(var v=0;v<r.length;v++){var w,x=r[v];x=="-"?w=k.separator:w=b.ui.create(x);if(w){w.canGroup?j||(h.push('<span class="cke_toolgroup" role="presentation">'),j=1):j&&(h.push("</span>"),j=0);var y=w.render(b,h);u=t.items.push(y)-1,u>0&&(y.previous=t.items[u-1],y.previous.next=y),y.toolbar=t,y.onkey=c,y.onfocus=function(){b.toolbox.focusCommandExecuted||b.focus()}}}j&&(h.push("</span>"),j=0),h.push('<span class="cke_toolbar_end"></span></span>')}h.push("</div>");if(b.config.toolbarCanCollapse){var z=e.addFunction(function(){b.execCommand("toolbarCollapse")});b.on("destroy",function(){e.removeFunction(z)});var A=e.getNextId();b.addCommand("toolbarCollapse",{exec:function(b){var c=a.document.getById(A),d=c.getPrevious(),e=b.getThemeSpace("contents"),f=d.getParent(),g=parseInt(e.$.style.height,10),h=f.$.offsetHeight,i=!d.isVisible();i?(d.show(),c.removeClass("cke_toolbox_collapser_min"),c.setAttribute("title",b.lang.toolbarCollapse)):(d.hide(),c.addClass("cke_toolbox_collapser_min"),c.setAttribute("title",b.lang.toolbarExpand)),c.getFirst().setText(i?"":"");var j=f.$.offsetHeight-h;e.setStyle("height",g-j+"px"),b.fire("resize")},modes:{wysiwyg:1,source:1}}),h.push('<a title="'+(i?b.lang.toolbarCollapse:b.lang.toolbarExpand)+'" id="'+A+'" tabIndex="-1" class="cke_toolbox_collapser'),i||h.push(" cke_toolbox_collapser_min"),h.push('" onclick="CKEDITOR.tools.callFunction('+z+')">',"<span>&#9650;</span>","</a>")}f.data.html+=h.join("")}}),b.on("destroy",function(){var a,b=0,c,d,f;a=this.toolbox.toolbars;for(;b<a.length;b++){d=a[b].items;for(c=0;c<d.length;c++)f=d[c],f.clickFn&&e.removeFunction(f.clickFn),f.keyDownFn&&e.removeFunction(f.keyDownFn),f.index&&(k.button._.instances[f.index]=null)}}),b.addCommand("toolbarFocus",f.toolbarFocus)}})}(),k.separator={render:function(a,b){return b.push('<span class="cke_separator" role="separator"></span>'),{}}},i.toolbarLocation="top",i.toolbar_Basic=[["Bold","Italic","-","NumberedList","BulletedList","-","Link","Unlink","-","About"]],i.toolbar_Full=[["Source","-","Save","NewPage","Preview","-","Templates"],["Cut","Copy","Paste","PasteText","PasteFromWord","-","Print","SpellChecker","Scayt"],["Undo","Redo","-","Find","Replace","-","SelectAll","RemoveFormat"],["Form","Checkbox","Radio","TextField","Textarea","Select","Button","ImageButton","HiddenField"],"/",["Bold","Italic","Underline","Strike","-","Subscript","Superscript"],["NumberedList","BulletedList","-","Outdent","Indent","Blockquote","CreateDiv"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["BidiLtr","BidiRtl"],["Link","Unlink","Anchor"],["Image","Flash","Table","HorizontalRule","Smiley","SpecialChar","PageBreak","Iframe"],"/",["Styles","Format","Font","FontSize"],["TextColor","BGColor"],["Maximize","ShowBlocks","-","About"]],i.toolbar="Full",i.toolbarCanCollapse=!0,function(){function f(a){this.editor=a,this.reset()}j.add("undo",{requires:["selection","wysiwygarea"],init:function(b){function g(a){c.enabled&&a.data.command.canUndo!==!1&&c.save()}var c=new f(b),d=b.addCommand("undo",{exec:function(){c.undo()&&(b.selectionChange(),this.fire("afterUndo"))},state:0,canUndo:!1}),e=b.addCommand("redo",{exec:function(){c.redo()&&(b.selectionChange(),this.fire("afterRedo"))},state:0,canUndo:!1});c.onChange=function(){d.setState(c.undoable()?2:0),e.setState(c.redoable()?2:0)},b.on("beforeCommandExec",g),b.on("afterCommandExec",g),b.on("saveSnapshot",function(){c.save()}),b.on("contentDom",function(){b.document.on("keydown",function(a){!a.data.$.ctrlKey&&!a.data.$.metaKey&&c.type(a)})}),b.on("beforeModeUnload",function(){b.mode=="wysiwyg"&&c.save(!0)}),b.on("mode",function(){c.enabled=b.mode=="wysiwyg",c.onChange()}),b.ui.addButton("Undo",{label:b.lang.undo,command:"undo"}),b.ui.addButton("Redo",{label:b.lang.redo,command:"redo"}),b.resetUndo=function(){c.reset(),b.fire("saveSnapshot")},b.on("updateSnapshot",function(){c.currentImage&&(new a(b)).equals(c.currentImage)&&setTimeout(function(){c.update()},0)})}}),j.undo={};var a=j.undo.Image=function(a){this.editor=a;var b=a.getSnapshot(),d=b&&a.getSelection();c&&b&&(b=b.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=b,this.bookmarks=d&&d.createBookmarks2(!0)},d=/\b(?:href|src|name)="[^"]*?"/gi;a.prototype={equals:function(a,f){var g=this.contents,h=a.contents;c&&(b.ie7Compat||b.ie6Compat)&&(g=g.replace(d,""),h=h.replace(d,""));if(g!=h)return!1;if(f)return!0;var i=this.bookmarks,j=a.bookmarks;if(i||j){if(!i||!j||i.length!=j.length)return!1;for(var k=0;k<i.length;k++){var l=i[k],m=j[k];if(l.startOffset!=m.startOffset||l.endOffset!=m.endOffset||!e.arrayCompare(l.start,m.start)||!e.arrayCompare(l.end,m.end))return!1}}return!0}};var g={8:1,46:1},h={16:1,17:1,18:1},i={37:1,38:1,39:1,40:1};f.prototype={type:function(b){var d=b&&b.data.getKey(),f=d in h,j=d in g,k=this.lastKeystroke in g,l=j&&d==this.lastKeystroke,n=d in i,o=this.lastKeystroke in i,s=!j&&!n,t=j&&!l,u=!f&&!this.typing||s&&(k||o);if(u||t){var v=new a(this.editor);e.setTimeout(function(){var a=this,b=a.editor.getSnapshot();c&&(b=b.replace(/\s+data-cke-expando=".*?"/g,"")),v.contents!=b&&(a.typing=!0,a.save(!1,v,!1)||a.snapshots.splice(a.index+1,a.snapshots.length-a.index-1),a.hasUndo=!0,a.hasRedo=!1,a.typesCount=1,a.modifiersCount=1,a.onChange())},0,this)}this.lastKeystroke=d,j?(this.typesCount=0,this.modifiersCount++,this.modifiersCount>25&&(this.save(!1,null,!1),this.modifiersCount=1)):n||(this.modifiersCount=0,this.typesCount++,this.typesCount>25&&(this.save(!1,null,!1),this.typesCount=1))},reset:function(){var a=this;a.lastKeystroke=0,a.snapshots=[],a.index=-1,a.limit=a.editor.config.undoStackSize||20,a.currentImage=null,a.hasUndo=!1,a.hasRedo=!1,a.resetType()},resetType:function(){var a=this;a.typing=!1,delete a.lastKeystroke,a.typesCount=0,a.modifiersCount=0},fireChange:function(){var a=this;a.hasUndo=!!a.getNextImage(!0),a.hasRedo=!!a.getNextImage(!1),a.resetType(),a.onChange()},save:function(b,c,d){var e=this,f=e.snapshots;return c||(c=new a(e.editor)),c.contents===!1?!1:e.currentImage&&c.equals(e.currentImage,b)?!1:(f.splice(e.index+1,f.length-e.index-1),f.length==e.limit&&f.shift(),e.index=f.push(c)-1,e.currentImage=c,d!==!1&&e.fireChange(),!0)},restoreImage:function(a){var b=this;b.editor.loadSnapshot(a.contents);if(a.bookmarks)b.editor.getSelection().selectBookmarks(a.bookmarks);else if(c){var d=b.editor.document.getBody().$.createTextRange();d.collapse(!0),d.select()}b.index=a.index,b.update(),b.fireChange()},getNextImage:function(a){var b=this,c=b.snapshots,d=b.currentImage,e,f;if(d)if(a)for(f=b.index-1;f>=0;f--){e=c[f];if(!d.equals(e,!0))return e.index=f,e}else for(f=b.index+1;f<c.length;f++){e=c[f];if(!d.equals(e,!0))return e.index=f,e}return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){var a=this;if(a.undoable()){a.save(!0);var b=a.getNextImage(!0);if(b)return a.restoreImage(b),!0}return!1},redo:function(){var a=this;if(a.redoable()){a.save(!0);if(a.redoable()){var b=a.getNextImage(!1);if(b)return a.restoreImage(b),!0}}return!1},update:function(){var b=this;b.snapshots.splice(b.index,1,b.currentImage=new a(b.editor))}}}(),function(){function m(a){return a.getName()in i||a.isBlockBoundary()&&f.$empty[a.getName()]}function n(a){return function(b){this.mode=="wysiwyg"&&(this.focus(),this.fire("saveSnapshot"),a.call(this,b.data),e.setTimeout(function(){this.fire("saveSnapshot")},0,this))}}function o(a){var d=this;d.dataProcessor&&(a=d.dataProcessor.toHtml(a));var e=d.getSelection(),f=e.getRanges()[0];if(f.checkReadOnly())return;if(c){var g=e.isLocked;g&&e.unlock();var h=e.getNative();if(h.type=="Control")h.clear();else if(e.getType()==2){f=e.getRanges()[0];var i=f&&f.endContainer;i&&i.type==1&&i.getAttribute("contenteditable")=="false"&&f.checkBoundaryOfElement(i,2)&&(f.setEndAfter(f.endContainer),f.deleteContents())}try{h.createRange().pasteHTML(a)}catch(j){}g&&d.getSelection().lock()}else d.document.$.execCommand("inserthtml",!1,a);b.webkit&&(e=d.getSelection(),e.scrollIntoView())}function p(a){var g=this.getSelection(),h=g.getStartElement().hasAscendant("pre",!0)?2:this.config.enterMode,i=h==2,j=e.htmlEncode(a.replace(/\r\n|\r/g,"\n"));j=j.replace(/^[ \t]+|[ \t]+$/g,function(a,b,c){return a.length==1?"&nbsp;":b?" "+e.repeat("&nbsp;",a.length-1):e.repeat("&nbsp;",a.length-1)+" "}),j=j.replace(/[ \t]{2,}/g,function(a){return e.repeat("&nbsp;",a.length-1)+" "});var k=h==1?"p":"div";i||(j=j.replace(/(\n{2})([\s\S]*?)(?:$|\1)/g,function(a,b,c){return"<"+k+">"+c+"</"+k+">"})),j=j.replace(/\n/g,"<br>"),!i&&!c&&(j=j.replace(new RegExp("<br>(?=</"+k+">)"),function(a){return e.repeat(a,2)}));if(b.gecko||b.webkit){var l=new d.elementPath(g.getStartElement()),m=[];for(var n=0;n<l.elements.length;n++){var p=l.elements[n].getName();if(p in f.$inline)m.unshift(l.elements[n].getOuterHtml().match(/^<.*?>/));else if(p in f.$block)break}j=m.join("")+j}o.call(this,j)}function q(a){var b=this.getSelection(),c=b.getRanges(),d=a.getName(),e=f.$block[d],g=b.isLocked;g&&b.unlock();var h,i,j,k;for(var m=c.length-1;m>=0;m--){h=c[m];if(!h.checkReadOnly()){h.deleteContents(1),i=!m&&a||a.clone(1);var n,o;if(e)while((n=h.getCommonAncestor(0,1))&&(o=f[n.getName()])&&(!o||!o[d]))n.getName()in f.span?h.splitElement(n):h.checkStartOfBlock()&&h.checkEndOfBlock()?(h.setStartBefore(n),h.collapse(!0),n.remove()):h.splitBlock();h.insertNode(i),j||(j=i)}}if(j){h.moveToPosition(j,4);if(e){var p=j.getNext(l),q=p&&p.type==1&&p.getName();q&&f.$block[q]&&f[q]["#"]&&h.moveToElementEditStart(p)}}b.selectRanges([h]),g&&this.getSelection().lock()}function r(a){a.checkDirty()||setTimeout(function(){a.resetDirty()},0)}function u(a){return s(a)&&t(a)}function v(a){return a.type==3&&e.trim(a.getText()).match(/^(?:&nbsp;|\xa0)$/)}function w(a){a.isLocked&&(a.unlock(),setTimeout(function(){a.lock()},0))}function x(a){return a.getOuterHtml().match(k)}function y(a){var b=a.window,c=a.document,e=a.document.getBody(),f=e.getChildren().count();if(!f||f==1&&e.getFirst().hasAttribute("_moz_editor_bogus_node")){r(a);var g=a.element.getDocument(),h=g.getDocumentElement(),i=h.$.scrollTop,j=h.$.scrollLeft,k=c.$.createEvent("KeyEvents");k.initKeyEvent("keypress",!0,!0,b.$,!1,!1,!1,!1,0,32),c.$.dispatchEvent(k),(i!=h.$.scrollTop||j!=h.$.scrollLeft)&&g.getWindow().$.scrollTo(j,i),f&&e.getFirst().remove(),c.getBody().appendBogus();var l=new d.range(c);l.setStartAt(e,1),l.select()}}function z(a){var e=a.editor,f=a.data.path,g=f.blockLimit,j=a.data.selection,k=j.getRanges()[0],l=e.document.getBody(),n=e.config.enterMode;if(b.gecko){y(e);var o=f.block||f.blockLimit;o&&!o.getBogus()&&(e.fire("updateSnapshot"),r(e),o.appendBogus())}if(n!=2&&k.collapsed&&g.getName()=="body"&&!f.block){e.fire("updateSnapshot"),r(e),c&&w(j);var p=k.fixBlock(!0,e.config.enterMode==3?"div":"p");if(c){var q=p.getFirst(u);q&&v(q)&&q.remove()}if(x(p)){var t=p.getNext(s);t&&t.type==1&&!m(t)?(k.moveToElementEditStart(t),p.remove()):(t=p.getPrevious(s),t&&t.type==1&&!m(t)&&(k.moveToElementEditEnd(t),p.remove()))}k.select(),c||(e.forceNextSelectionCheck(),e.selectionChange())}var z=new d.range(e.document),C=new d.walker(z);z.selectNodeContents(l),C.evaluator=function(a){return a.type==1&&a.getName()in i},C.guard=function(a,b){return!(a.type==3&&s(a)||b)};if(C.previous()){e.fire("updateSnapshot"),r(e),c&&w(j);var D;n!=2?D=l.append(new h(n==1?"p":"div")):D=l,c||D.appendBogus()}}var i={table:1,pre:1},k=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,l=d.walker.whitespaces(!0),s=d.walker.whitespaces(!0),t=d.walker.bookmark(!1,!0);s=d.walker.whitespaces(!0),j.add("wysiwygarea",{requires:["editingblock"],init:function(i){function u(b){e.tryThese(function(){i.document.$.designMode="on",setTimeout(function(){i.document.$.designMode="off",a.currentInstance==i&&i.document.getBody().focus()},50)},function(){i.document.$.designMode="off";var a=i.document.getBody();a.setAttribute("contentEditable",!1),a.setAttribute("contentEditable",!0),!b&&u(1)})}var j=i.config.enterMode!=2?i.config.enterMode==3?"div":"p":!1,l=i.lang.editorTitle.replace("%1",i.name),m;i.on("editingBlockReady",function(){function J(a){if(!w)return;w=0,i.fire("ariaWidget",r);var f=a.document,h=f.body,j=f.getElementById("cke_actscrpt");j&&j.parentNode.removeChild(j),h.spellcheck=!i.config.disableNativeSpellChecker,c?(h.hideFocus=!0,h.disabled=!0,h.contentEditable=!0,h.removeAttribute("disabled")):setTimeout(function(){b.gecko&&b.version>=10900||b.opera?f.$.body.contentEditable=!0:b.webkit?f.$.body.parentNode.contentEditable=!0:f.$.designMode="on"},0),b.gecko&&e.setTimeout(y,0,null,i),a=i.window=new d.window(a),f=i.document=new g(f),f.on("dblclick",function(a){var b=a.data.getTarget(),c={element:b,dialog:""};i.fire("doubleclick",c),c.dialog&&i.openDialog(c.dialog)}),c&&f.on("click",function(a){var b=a.data.getTarget();if(b.is("input")){var c=b.getAttribute("type");(c=="submit"||c=="reset")&&a.data.preventDefault()}}),!c&&!b.opera&&f.on("mousedown",function(a){var b=a.data.getTarget();b.is("img","hr","input","textarea","select")&&i.getSelection().selectElement(b)}),b.gecko&&f.on("mouseup",function(a){if(a.data.$.button==2){var b=a.data.getTarget();if(!b.getOuterHtml().replace(k,"")){var c=new d.range(f);c.moveToElementEditStart(b),c.select(!0)}}}),f.on("click",function(a){a=a.data,a.getTarget().is("a")&&a.$.button!=2&&a.preventDefault()}),b.webkit&&(f.on("click",function(a){a.data.getTarget().is("input","select")&&a.data.preventDefault()}),f.on("mouseup",function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault()}));if(c&&f.$.compatMode=="CSS1Compat"||b.gecko||b.opera){var l=f.getDocumentElement();l.on("mousedown",function(a){a.data.getTarget().equals(l)&&(b.gecko&&b.version>=10900&&u(),v.focus())})}var m=c?r:a;m.on("blur",function(){i.focusManager.blur()});var n;m.on("focus",function(){var a=i.document;b.gecko&&b.version>=10900?u():b.opera?a.getBody().focus():b.webkit&&(n||(i.document.getDocumentElement().focus(),n=1)),i.focusManager.focus()});var o=i.keystrokeHandler;o&&o.attach(f);if(c){f.getDocumentElement().addClass(f.$.compatMode),f.on("keydown",function(a){var b=a.data.getKeystroke();if(b in{8:1,46:1}){var c=i.getSelection(),d=c.getSelectedElement();if(d){i.fire("saveSnapshot");var e=c.getRanges()[0].createBookmark();d.remove(),c.selectBookmarks([e]),i.fire("saveSnapshot"),a.data.preventDefault()}}});if(f.$.compatMode=="CSS1Compat"){var p={33:1,34:1};f.on("keydown",function(a){a.data.getKeystroke()in p&&setTimeout(function(){i.getSelection().scrollIntoView()},0)})}}i.contextMenu&&i.contextMenu.addTarget(f,i.config.browserContextMenuOnCtrl!==!1),setTimeout(function(){i.fire("contentDom"),x&&(i.mode="wysiwyg",i.fire("mode"),x=!1),s=!1,t&&(i.focus(),t=!1),setTimeout(function(){i.fire("dataReady")},0);try{i.document.$.execCommand("enableInlineTableEditing",!1,!i.config.disableNativeTableHandles)}catch(a){}if(i.config.disableObjectResizing)try{i.document.$.execCommand("enableObjectResizing",!1,!1)}catch(b){i.document.getBody().on(c?"resizestart":"resize",function(a){a.data.preventDefault()})}c&&setTimeout(function(){if(i.document){var a=i.document.$.body;a.runtimeStyle.marginBottom="0px",a.runtimeStyle.marginBottom=""}},1e3)},0)}var f,r,s,t,w,x,A=b.isCustomDomain(),H=function(d){r&&r.remove();var e="document.open();"+(A?'document.domain="'+document.domain+'";':"")+"document.close();";e=b.air?"javascript:void(0)":c?"javascript:void(function(){"+encodeURIComponent(e)+"}())":"",r=h.createFromHtml('<iframe style="width:100%;height:100%" frameBorder="0" title="'+l+'"'+' src="'+e+'"'+' tabIndex="'+(b.webkit?-1:i.tabIndex)+'"'+' allowTransparency="true"'+"></iframe>"),document.location.protocol=="chrome:"&&(a.event.useCapture=!0),r.on("load",function(a){w=1,a.removeListener();var c=r.getFrameDocument();c.write(d),b.air&&J(c.getWindow().$)}),document.location.protocol=="chrome:"&&(a.event.useCapture=!1);var g=i.element,j=b.gecko&&!g.isVisible(),k={};j&&(g.show(),k={position:g.getStyle("position"),top:g.getStyle("top")},g.setStyles({position:"absolute",top:"-3000px"})),f.append(r),j&&setTimeout(function(){g.hide(),g.setStyles(k)},1e3)};m=e.addFunction(J);var I='<script id="cke_actscrpt" type="text/javascript" data-cke-temp="1">'+(A?'document.domain="'+document.domain+'";':"")+"window.parent.CKEDITOR.tools.callFunction( "+m+", window );"+"</script>";i.addMode("wysiwyg",{load:function(a,d,e){f=a,c&&b.quirks&&a.setStyle("position","relative"),i.mayBeDirty=!0,x=!0,e?this.loadSnapshotData(d):this.loadData(d)},loadData:function(a){s=!0;var b=i.config,c=b.fullPage,d=b.docType,f='<style type="text/css" data-cke-temp="1">'+i._.styles.join("\n")+"</style>";!c&&(f=e.buildStyleHtml(i.config.contentsCss)+f);var g=b.baseHref?'<base href="'+b.baseHref+'" data-cke-temp="1" />':"";c&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(a){return i.docType=d=a,""})),i.dataProcessor&&(a=i.dataProcessor.toHtml(a,j)),c?(/<body[\s|>]/.test(a)||(a="<body>"+a),/<html[\s|>]/.test(a)||(a="<html>"+a+"</html>"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$&<title></title>")):a=a.replace(/<html[^>]*>/,"$&<head><title></title></head>"),g&&(a=a.replace(/<head>/,"$&"+g)),a=a.replace(/<\/head\s*>/,f+"$&"),a=d+a):a=b.docType+'<html dir="'+b.contentsLangDirection+'"'+' lang="'+(b.contentsLanguage||i.langCode)+'">'+"<head>"+"<title>"+l+"</title>"+g+f+"</head>"+"<body"+(b.bodyId?' id="'+b.bodyId+'"':"")+(b.bodyClass?' class="'+b.bodyClass+'"':"")+">"+a+"</html>",a+=I,this.onDispose(),H(a)},getData:function(){var a=i.config,b=a.fullPage,c=b&&i.docType,d=r.getFrameDocument(),e=b?d.getDocumentElement().getOuterHtml():d.getBody().getHtml();return i.dataProcessor&&(e=i.dataProcessor.toDataFormat(e,j)),a.ignoreEmptyParagraph&&(e=e.replace(k,function(a,b){return b})),c&&(e=c+"\n"+e),e},getSnapshotData:function(){return r.getFrameDocument().getBody().getHtml()},loadSnapshotData:function(a){r.getFrameDocument().getBody().setHtml(a)},onDispose:function(){if(!i.document)return;i.document.getDocumentElement().clearCustomData(),i.document.getBody().clearCustomData(),i.window.clearCustomData(),i.document.clearCustomData(),r.clearCustomData(),r.remove()},unload:function(a){this.onDispose(),i.window=i.document=r=f=t=null,i.fire("contentDomUnload")},focus:function(){var a=i.window;if(s)t=!0;else if(b.opera&&i.document){var c=i.window.$.frameElement;c.blur(),c.focus(),i.document.getBody().focus(),i.selectionChange()}else!b.opera&&a&&(b.air?setTimeout(function(){a.focus()},0):a.focus(),i.selectionChange())}}),i.on("insertHtml",n(o),null,null,20),i.on("insertElement",n(q),null,null,20),i.on("insertText",n(p),null,null,20),i.on("selectionChange",z,null,null,1)});var r;i.on("contentDom",function(){var a=i.document.getElementsByTag("title").getItem(0);a.data("cke-title",i.document.$.title),i.document.$.title=l});if(a.document.$.documentMode>=8){i.addCss("html.CSS1Compat [contenteditable=false]{ min-height:0 !important;}");var s=[];for(var t in f.$removeEmpty)s.push("html.CSS1Compat "+t+"[contenteditable=false]");i.addCss(s.join(",")+"{ display:inline-block;}")}else b.gecko&&i.addCss("html { height: 100% !important; }");if(b.gecko||c||b.opera){var v;i.on("uiReady",function(){v=i.container.append(h.createFromHtml('<span tabindex="-1" style="position:absolute;" role="presentation"></span>')),v.on("focus",function(){i.focus()}),i.focusGrabber=v}),i.on("destroy",function(){e.removeFunction(m),v.clearCustomData(),delete i.focusGrabber})}i.on("insertElement",function(a){var b=a.data;b.type==1&&(b.is("input")||b.is("textarea"))&&(b.isReadOnly()||b.data("cke-editable",b.hasAttribute("contenteditable")?"true":"1"),b.setAttribute("contentEditable",!1))})}}),b.gecko&&function(){var a=document.body;if(!a)window.addEventListener("load",arguments.callee,!1);else{var b=a.getAttribute("onpageshow");a.setAttribute("onpageshow",(b?b+";":"")+"event.persisted && (function(){"+"var allInstances = CKEDITOR.instances, editor, doc;"+"for ( var i in allInstances )"+"{"+"\teditor = allInstances[ i ];"+"\tdoc = editor.document;"+"\tif ( doc )"+"\t{"+'\t\tdoc.$.designMode = "off";'+'\t\tdoc.$.designMode = "on";'+"\t}"+"}"+"})();")}}()}(),i.disableObjectResizing=!1,i.disableNativeTableHandles=!0,i.disableNativeSpellChecker=!0,i.ignoreEmptyParagraph=!0,j.add("wsc",{requires:["dialog"],init:function(c){var d="checkspell",e=c.addCommand(d,new a.dialogCommand(d));e.modes={wysiwyg:!b.opera&&!b.air&&document.domain==window.location.hostname},c.ui.addButton("SpellChecker",{label:c.lang.spellCheck.toolbar,command:d}),a.dialog.add(d,this.path+"dialogs/wsc.js")}}),i.wsc_customerId=i.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",i.wsc_customLoaderScript=i.wsc_customLoaderScript||null,a.DIALOG_RESIZE_NONE=0,a.DIALOG_RESIZE_WIDTH=1,a.DIALOG_RESIZE_HEIGHT=2,a.DIALOG_RESIZE_BOTH=3,function(){function j(a){return!!this._.tabs[a][0].$.offsetHeight}function l(){var a=this,b=a._.currentTabId,c=a._.tabIdList.length,d=e.indexOf(a._.tabIdList,b)+c;for(var f=d-1;f>d-c;f--)if(j.call(a,a._.tabIdList[f%c]))return a._.tabIdList
[f%c];return null}function m(){var a=this,b=a._.currentTabId,c=a._.tabIdList.length,d=e.indexOf(a._.tabIdList,b);for(var f=d+1;f<d+c;f++)if(j.call(a,a._.tabIdList[f%c]))return a._.tabIdList[f%c];return null}function n(a,b){var c=a.$.getElementsByTagName("input");for(var d=0,e=c.length;d<e;d++){var f=new h(c[d]);f.getAttribute("type").toLowerCase()=="text"&&(b?(f.setAttribute("value",f.getCustomData("fake_value")||""),f.removeCustomData("fake_value")):(f.setCustomData("fake_value",f.getAttribute("value")),f.setAttribute("value","")))}}function o(a,b,c){this.element=b,this.focusIndex=c,this.tabIndex=0,this.isFocusable=function(){return!b.getAttribute("disabled")&&b.isVisible()},this.focus=function(){a._.currentFocusIndex=this.focusIndex,this.element.focus()},b.on("keydown",function(a){a.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),b.on("focus",function(){this.fire("mouseover")}),b.on("blur",function(){this.fire("mouseout")})}function u(a,b){this._={dialog:a},e.extend(this,b)}function v(c){function j(b){var f=c.getSize(),j=a.document.getWindow().getViewPaneSize(),k=b.data.$.screenX,l=b.data.$.screenY,m=k-d.x,n=l-d.y,o,p;d={x:k,y:l},e.x+=m,e.y+=n,e.x+i[3]<h?o=-i[3]:e.x-i[1]>j.width-f.width-h?o=j.width-f.width+(g.lang.dir=="rtl"?0:i[1]):o=e.x,e.y+i[0]<h?p=-i[0]:e.y-i[2]>j.height-f.height-h?p=j.height-f.height+i[2]:p=e.y,c.move(o,p,1),b.data.preventDefault()}function k(c){a.document.removeListener("mousemove",j),a.document.removeListener("mouseup",k);if(b.ie6Compat){var d=z.getChild(0).getFrameDocument();d.removeListener("mousemove",j),d.removeListener("mouseup",k)}}var d=null,e=null,f=c.getElement().getFirst(),g=c.getParentEditor(),h=g.config.dialog_magnetDistance,i=g.skin.margins||[0,0,0,0];typeof h=="undefined"&&(h=20),c.parts.title.on("mousedown",function(f){d={x:f.data.$.screenX,y:f.data.$.screenY},a.document.on("mousemove",j),a.document.on("mouseup",k),e=c.getPosition();if(b.ie6Compat){var g=z.getChild(0).getFrameDocument();g.on("mousemove",j),g.on("mouseup",k)}f.data.preventDefault()},c)}function w(d){function p(a){if(d._.moved&&i.lang.dir=="rtl"){var b=d._.element.getFirst();b.setStyle("right",a+"px"),b.removeStyle("left")}else d._.moved||d.layout()}function r(a){var b=i.lang.dir=="rtl",c=(a.data.$.screenX-m.x)*(b?-1:1),e=a.data.$.screenY-m.y,h=n.width,o=n.height,q=h+c*(d._.moved?1:2),r=o+e*(d._.moved?1:2),s=d._.element.getFirst(),t=b&&s.getComputedStyle("right"),u=d.getPosition();t&&(t=t=="auto"?l.width-(u.x||0)-s.getSize("width"):parseInt(t,10)),u.y+r>l.height&&(r=l.height-u.y),(b?t:u.x)+q>l.width&&(q=l.width-(b?t:u.x)),(g==1||g==3)&&!(b&&c>0&&!u.x)&&(h=Math.max(f.minWidth||0,q-j));if(g==2||g==3)o=Math.max(f.minHeight||0,r-k);d.resize(h,o),p(t),a.data.preventDefault()}function s(){a.document.removeListener("mouseup",s),a.document.removeListener("mousemove",r),o&&(o.remove(),o=null);if(b.ie6Compat){var c=z.getChild(0).getFrameDocument();c.removeListener("mouseup",s),c.removeListener("mousemove",r)}if(i.lang.dir=="rtl"){var e=d._.element.getFirst(),f=e.getComputedStyle("left");f=="auto"?f=l.width-parseInt(e.getStyle("right"),10)-d.getSize().width:f=parseInt(f,10),e.removeStyle("right"),d._.position.x+=1,d.move(f,d._.position.y)}}var f=d.definition,g=f.resizable;if(g==0)return;var i=d.getParentEditor(),j,k,l,m,n,o,q=e.addFunction(function(e){n=d.getSize();var f=d.parts.contents,g=f.$.getElementsByTagName("iframe").length;g&&(o=h.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),f.append(o)),k=n.height-d.parts.contents.getSize("height",!(b.gecko||b.opera||c&&b.quirks)),j=n.width-d.parts.contents.getSize("width",1),m={x:e.screenX,y:e.screenY},l=a.document.getWindow().getViewPaneSize(),a.document.on("mousemove",r),a.document.on("mouseup",s);if(b.ie6Compat){var i=z.getChild(0).getFrameDocument();i.on("mousemove",r),i.on("mouseup",s)}e.preventDefault&&e.preventDefault()});d.on("load",function(){var a="";g==1?a=" cke_resizer_horizontal":g==2&&(a=" cke_resizer_vertical");var b=h.createFromHtml('<div class="cke_resizer'+a+'"'+' title="'+e.htmlEncode(i.lang.resize)+'"'+' onmousedown="CKEDITOR.tools.callFunction('+q+', event )"></div>');d.parts.footer.append(b,1)}),i.on("destroy",function(){e.removeFunction(q)})}function A(c){var d=a.document.getWindow(),f=c.config,g=f.dialog_backgroundCoverColor||"white",i=f.dialog_backgroundCoverOpacity,j=f.baseFloatZIndex,k=e.genKey(g,i,j),l=y[k];if(!l){var m=['<div tabIndex="-1" style="position: ',b.ie6Compat?"absolute":"fixed","; z-index: ",j,"; top: 0px; left: 0px; ",b.ie6Compat?"":"background-color: "+g,'" class="cke_dialog_background_cover">'];if(b.ie6Compat){var n=b.isCustomDomain(),o="<html><body style=\\'background-color:"+g+";\\'></body></html>";m.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),m.push("void((function(){document.open();"+(n?"document.domain='"+document.domain+"';":"")+"document.write( '"+o+"' );"+"document.close();"+"})())"),m.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')}m.push("</div>"),l=h.createFromHtml(m.join("")),l.setOpacity(i!=undefined?i:.5),l.appendTo(a.document.getBody()),y[k]=l}else l.show();z=l;var p=function(){var a=d.getViewPaneSize();l.setStyles({width:a.width+"px",height:a.height+"px"})},q=function(){var b=d.getScrollPosition(),c=a.dialog._.currentTop;l.setStyles({left:b.x+"px",top:b.y+"px"});if(c)do{var e=c.getPosition();c.move(e.x,e.y)}while(c=c._.parentDialog)};x=p,d.on("resize",p),p(),(!b.mac||!b.webkit)&&l.focus();if(b.ie6Compat){var r=function(){q(),arguments.callee.prevScrollHandler.apply(this,arguments)};d.$.setTimeout(function(){r.prevScrollHandler=window.onscroll||function(){},window.onscroll=r},0),q()}}function B(){if(!z)return;var c=a.document.getWindow();z.hide(),c.removeListener("resize",x),b.ie6Compat&&c.$.setTimeout(function(){var a=window.onscroll&&window.onscroll.prevScrollHandler;window.onscroll=a||null},0),x=null}function C(){for(var a in y)y[a].remove();y={}}var f=e.cssLength;a.dialog=function(f,h){function B(){var a=z._.focusList;a.sort(function(a,b){return a.tabIndex!=b.tabIndex?b.tabIndex-a.tabIndex:a.focusIndex-b.focusIndex});var b=a.length;for(var c=0;c<b;c++)a[c].focusIndex=c}function C(a){var b=z._.focusList,c=a?1:-1;if(b.length<1)return;var d=z._.currentFocusIndex;try{b[d].getInputElement().$.blur()}catch(e){}var f=(d+c+b.length)%b.length,g=f;while(!b[g].isFocusable()){g=(g+c+b.length)%b.length;if(g==f)break}b[g].focus(),b[g].type=="text"&&b[g].select()}function E(b){var c=this;if(z!=a.dialog._.currentTop)return;var d=b.data.getKeystroke(),e=f.lang.dir=="rtl";D=0;if(d==9||d==2e3+9){var g=d==2e3+9;if(z._.tabBarMode){var h=g?l.call(z):m.call(z);z.selectPage(h),z._.tabs[h][0].focus()}else C(!g);D=1}else d==4e3+121&&!z._.tabBarMode&&z.getPageCount()>1?(z._.tabBarMode=!0,z._.tabs[z._.currentTabId][0].focus(),D=1):d!=37&&d!=39||!z._.tabBarMode?(d==13||d==32)&&z._.tabBarMode&&(c.selectPage(c._.currentTabId),c._.tabBarMode=!1,c._.currentFocusIndex=-1,C(!0),D=1):(h=d==(e?39:37)?l.call(z):m.call(z),z.selectPage(h),z._.tabs[h][0].focus(),D=1);D&&(b.stop(),b.data.preventDefault())}function F(a){D&&a.data.preventDefault()}var j=a.dialog._.dialogDefinitions[h],k=e.clone(p),n=f.config.dialog_buttonsOrder||"OS",o=f.lang.dir;(n=="OS"&&b.mac||n=="rtl"&&o=="ltr"||n=="ltr"&&o=="rtl")&&k.buttons.reverse(),j=e.extend(j(f),k),j=e.clone(j),j=new t(this,j);var q=a.document,r=f.theme.buildDialog(f);this._={editor:f,element:r.element,name:h,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=r.parts,e.setTimeout(function(){f.fire("ariaWidget",this.parts.contents)},0,this),this.parts.dialog.setStyles({position:b.ie6Compat?"absolute":"fixed",top:0,left:0,visibility:"hidden"}),a.event.call(this),this.definition=j=a.fire("dialogDefinition",{name:h,definition:j},f).definition;var s={};if(!("removeDialogTabs"in f._)&&f.config.removeDialogTabs){var u=f.config.removeDialogTabs.split(";");for(i=0;i<u.length;i++){var x=u[i].split(":");if(x.length==2){var y=x[0];s[y]||(s[y]=[]),s[y].push(x[1])}}f._.removeDialogTabs=s}if(f._.removeDialogTabs&&(s=f._.removeDialogTabs[h]))for(i=0;i<s.length;i++)j.removeContents(s[i]);j.onLoad&&this.on("load",j.onLoad),j.onShow&&this.on("show",j.onShow),j.onHide&&this.on("hide",j.onHide),j.onOk&&this.on("ok",function(a){f.fire("saveSnapshot"),setTimeout(function(){f.fire("saveSnapshot")},0),j.onOk.call(this,a)===!1&&(a.data.hide=!1)}),j.onCancel&&this.on("cancel",function(a){j.onCancel.call(this,a)===!1&&(a.data.hide=!1)});var z=this,A=function(a){var b=z._.contents,c=!1;for(var d in b)for(var e in b[d]){c=a.call(this,b[d][e]);if(c)return}};this.on("ok",function(a){A(function(b){if(b.validate){var c=b.validate(this);typeof c=="string"&&(alert(c),c=!1);if(c===!1)return b.select?b.select():b.focus(),a.data.hide=!1,a.stop(),!0}})},this,null,0),this.on("cancel",function(a){A(function(b){if(b.isChanged())return confirm(f.lang.common.confirmCancel)||(a.data.hide=!1),!0})},this,null,0),this.parts.close.on("click",function(a){this.fire("cancel",{hide:!0}).hide!==!1&&this.hide(),a.data.preventDefault()},this),this.changeFocus=C;var D,G=this._.element;this.on("show",function(){G.on("keydown",E,this,null,0),(b.opera||b.gecko&&b.mac)&&G.on("keypress",F,this)}),this.on("hide",function(){G.removeListener("keydown",E),(b.opera||b.gecko&&b.mac)&&G.removeListener("keypress",F)}),this.on("iframeAdded",function(a){var b=new g(a.data.iframe.$.contentWindow.document);b.on("keydown",E,this,null,0)}),this.on("show",function(){var a=this;B();if(f.config.dialog_startupFocusTab&&z._.pageCount>1)z._.tabBarMode=!0,z._.tabs[z._.currentTabId][0].focus();else if(!a._.hasFocus){a._.currentFocusIndex=-1;if(j.onFocus){var b=j.onFocus.call(a);b&&b.focus()}else C(!0);if(a._.editor.mode=="wysiwyg"&&c){var d=f.document.$.selection,e=d.createRange();if(e)if(e.parentElement&&e.parentElement().ownerDocument==f.document.$||e.item&&e.item(0).ownerDocument==f.document.$){var g=document.body.createTextRange();g.moveToElementText(a.getElement().getFirst().$),g.collapse(!0),g.select()}}}},this,null,4294967295),b.ie6Compat&&this.on("load",function(a){var b=this.getElement(),c=b.getFirst();c.remove(),c.appendTo(b)},this),v(this),w(this),(new d.text(j.title,a.document)).appendTo(this.parts.title);for(var H=0;H<j.contents.length;H++){var I=j.contents[H];I&&this.addPage(I)}this.parts.tabs.on("click",function(a){var b=this,c=a.data.getTarget();if(c.hasClass("cke_dialog_tab")){var d=c.$.id;b.selectPage(d.substring(4,d.lastIndexOf("_"))),b._.tabBarMode&&(b._.tabBarMode=!1,b._.currentFocusIndex=-1,C(!0)),a.data.preventDefault()}},this);var J=[],K=a.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:j.buttons},J).getChild();this.parts.footer.setHtml(J.join(""));for(H=0;H<K.length;H++)this._.buttons[K[H].id]=K[H]},a.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(){return function(b,c){var d=this;if(d._.contentSize&&d._.contentSize.width==b&&d._.contentSize.height==c)return;a.dialog.fire("resize",{dialog:d,skin:d._.editor.skinName,width:b,height:c},d._.editor),d._.contentSize={width:b,height:c}}}(),getSize:function(){var a=this._.element.getFirst();return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},move:function(){var b;return function(c,d,e){var f=this,g=f._.element.getFirst();b===undefined&&(b=g.getComputedStyle("position")=="fixed");if(b&&f._.position&&f._.position.x==c&&f._.position.y==d)return;f._.position={x:c,y:d};if(!b){var h=a.document.getWindow().getScrollPosition();c+=h.x,d+=h.y}g.setStyles({left:(c>0?c:0)+"px",top:(d>0?d:0)+"px"}),e&&(f._.moved=1)}}(),getPosition:function(){return e.extend({},this._.position)},show:function(){var c=this._.element,d=this.definition;!c.getParent()||!c.getParent().equals(a.document.getBody())?c.appendTo(a.document.getBody()):c.setStyle("display","block");if(b.gecko&&b.version<10900){var f=this.parts.dialog;f.setStyle("position","absolute"),setTimeout(function(){f.setStyle("position","fixed")},0)}this.resize(this._.contentSize&&this._.contentSize.width||d.minWidth,this._.contentSize&&this._.contentSize.height||d.minHeight),this.reset(),this.selectPage(this.definition.contents[0].id),a.dialog._.currentZIndex===null&&(a.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",a.dialog._.currentZIndex+=10);if(a.dialog._.currentTop===null){a.dialog._.currentTop=this,this._.parentDialog=null,A(this._.editor),c.on("keydown",E),c.on(b.opera?"keypress":"keyup",F);for(var g in{keyup:1,keydown:1,keypress:1})c.on(g,L)}else{this._.parentDialog=a.dialog._.currentTop;var h=this._.parentDialog.getElement().getFirst();h.$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),a.dialog._.currentTop=this}G(this,this,"",null,function(){this.getButton("cancel")&&this.getButton("cancel").click()}),this._.hasFocus=!1,e.setTimeout(function(){this.layout(),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),k.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this.foreach(function(a){a.setInitValue&&a.setInitValue()})},100,this)},layout:function(){var b=this,c=a.document.getWindow().getViewPaneSize(),d=b.getSize();b.move(b._.moved?b._.position.x:(c.width-d.width)/2,b._.moved?b._.position.y:(c.height-d.height)/2)},foreach:function(a){var b=this;for(var c in b._.contents)for(var d in b._.contents[c])a(b._.contents[c][d]);return b},reset:function(){var a=function(a){a.reset&&a.reset(1)};return function(){return this.foreach(a),this}}(),setupContent:function(){var a=arguments;this.foreach(function(b){b.setup&&b.setup.apply(b,a)})},commitContent:function(){var a=arguments;this.foreach(function(b){b.commit&&b.commit.apply(b,a)})},hide:function(){if(!this.parts.dialog.isVisible())return;this.fire("hide",{}),this._.editor.fire("dialogHide",this);var d=this._.element;d.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),H(this);while(a.dialog._.currentTop!=this)a.dialog._.currentTop.hide();if(!this._.parentDialog)B();else{var e=this._.parentDialog.getElement().getFirst();e.setStyle("z-index",parseInt(e.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}a.dialog._.currentTop=this._.parentDialog;if(!this._.parentDialog){a.dialog._.currentZIndex=null,d.removeListener("keydown",E),d.removeListener(b.opera?"keypress":"keyup",F);for(var f in{keyup:1,keydown:1,keypress:1})d.removeListener(f,L);var g=this._.editor;g.focus();if(g.mode=="wysiwyg"&&c){var h=g.getSelection();h&&h.unlock(!0)}}else a.dialog._.currentZIndex-=10;delete this._.parentDialog,this.foreach(function(a){a.resetInitValue&&a.resetInitValue()})},addPage:function(c){var d=this,f=[],g=c.label?' title="'+e.htmlEncode(c.label)+'"':"",i=c.elements,j=a.dialog._.uiElementBuilders.vbox.build(d,{type:"vbox",className:"cke_dialog_page_contents",children:c.elements,expand:!!c.expand,padding:c.padding,style:c.style||"width: 100%;"},f),k=h.createFromHtml(f.join(""));k.setAttribute("role","tabpanel");var l=b,m="cke_"+c.id+"_"+e.getNextNumber(),n=h.createFromHtml(['<a class="cke_dialog_tab"',d._.pageCount>0?" cke_last":"cke_first",g,c.hidden?' style="display:none"':"",' id="',m,'"',l.gecko&&l.version>=10900&&!l.hc?"":' href="javascript:void(0)"',' tabIndex="-1"',' hidefocus="true"',' role="tab">',c.label,"</a>"].join(""));k.setAttribute("aria-labelledby",m),d._.tabs[c.id]=[n,k],d._.tabIdList.push(c.id),!c.hidden&&d._.pageCount++,d._.lastTab=n,d.updateStyle();var o=d._.contents[c.id]={},p,q=j.getChild();while(p=q.shift())o[p.id]=p,typeof p.getChild=="function"&&q.push.apply(q,p.getChild());k.setAttribute("name",c.id),k.appendTo(d.parts.contents),n.unselectable(),d.parts.tabs.append(n),c.accessKey&&(G(d,d,"CTRL+"+c.accessKey,J,I),d._.accessKeyMap["CTRL+"+c.accessKey]=c.id)},selectPage:function(a){if(this._.currentTabId==a)return;if(this.fire("selectPage",{page:a,currentPage:this._.currentTabId})===!0)return;for(var c in this._.tabs){var d=this._.tabs[c][0],f=this._.tabs[c][1];c!=a&&(d.removeClass("cke_dialog_tab_selected"),f.hide()),f.setAttribute("aria-hidden",c!=a)}var g=this._.tabs[a];g[0].addClass("cke_dialog_tab_selected"),b.ie6Compat||b.ie7Compat?(n(g[1]),g[1].show(),setTimeout(function(){n(g[1],1)},0)):g[1].show(),this._.currentTabId=a,this._.currentTabIndex=e.indexOf(this._.tabIdList,a)},updateStyle:function(){this.parts.dialog[(this._.pageCount===1?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(a){var b=this,c=b._.tabs[a]&&b._.tabs[a][0];if(!c||b._.pageCount==1||!c.isVisible())return;a==b._.currentTabId&&b.selectPage(l.call(b)),c.hide(),b._.pageCount--,b.updateStyle()},showPage:function(a){var b=this,c=b._.tabs[a]&&b._.tabs[a][0];if(!c)return;c.show(),b._.pageCount++,b.updateStyle()},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(a,b){var c=this._.contents[a];return c&&c[b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(a,b){var c=this;if(typeof b=="undefined")b=c._.focusList.length,c._.focusList.push(new o(c,a,b));else{c._.focusList.splice(b,0,new o(c,a,b));for(var d=b+1;d<c._.focusList.length;d++)c._.focusList[d].focusIndex++}}},e.extend(a.dialog,{add:function(a,b){if(!this._.dialogDefinitions[a]||typeof b=="function")this._.dialogDefinitions[a]=b},exists:function(a){return!!this._.dialogDefinitions[a]},getCurrent:function(){return a.dialog._.currentTop},okButton:function(){var a=function(a,b){return b=b||{},e.extend({id:"ok",type:"button",label:a.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(a){var b=a.data.dialog;b.fire("ok",{hide:!0}).hide!==!1&&b.hide()}},b,!0)};return a.type="button",a.override=function(b){return e.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),cancelButton:function(){var a=function(a,b){return b=b||{},e.extend({id:"cancel",type:"button",label:a.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(a){var b=a.data.dialog;b.fire("cancel",{hide:!0}).hide!==!1&&b.hide()}},b,!0)};return a.type="button",a.override=function(b){return e.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),addUIElement:function(a,b){this._.uiElementBuilders[a]=b}}),a.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},a.event.implementOn(a.dialog),a.event.implementOn(a.dialog.prototype,!0);var p={resizable:3,minWidth:600,minHeight:400,buttons:[a.dialog.okButton,a.dialog.cancelButton]},q=function(a,b,c){for(var d=0,e;e=a[d];d++){if(e.id==b)return e;if(c&&e[c]){var f=q(e[c],b,c);if(f)return f}}return null},r=function(a,b,c,d,e){if(c){for(var f=0,g;g=a[f];f++){if(g.id==c)return a.splice(f,0,b),b;if(d&&g[d]){var h=r(g[d],b,c,d,!0);if(h)return h}}if(e)return null}return a.push(b),b},s=function(a,b,c){for(var d=0,e;e=a[d];d++){if(e.id==b)return a.splice(d,1);if(c&&e[c]){var f=s(e[c],b,c);if(f)return f}}return null},t=function(a,b){this.dialog=a;var c=b.contents;for(var d=0,f;f=c[d];d++)c[d]=f&&new u(a,f);e.extend(this,b)};t.prototype={getContents:function(a){return q(this.contents,a)},getButton:function(a){return q(this.buttons,a)},addContents:function(a,b){return r(this.contents,a,b)},addButton:function(a,b){return r(this.buttons,a,b)},removeContents:function(a){s(this.contents,a)},removeButton:function(a){s(this.buttons,a)}},u.prototype={get:function(a){return q(this.elements,a,"children")},add:function(a,b){return r(this.elements,a,b,"children")},remove:function(a){s(this.elements,a,"children")}};var x,y={},z,D={},E=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode),f=D[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e];if(!f||!f.length)return;f=f[f.length-1],f.keydown&&f.keydown.call(f.uiElement,f.dialog,f.key),a.data.preventDefault()},F=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode),f=D[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e];if(!f||!f.length)return;f=f[f.length-1],f.keyup&&(f.keyup.call(f.uiElement,f.dialog,f.key),a.data.preventDefault())},G=function(a,b,c,d,e){var f=D[c]||(D[c]=[]);f.push({uiElement:a,dialog:b,key:c,keyup:e||a.accessKeyUp,keydown:d||a.accessKeyDown})},H=function(a){for(var b in D){var c=D[b];for(var d=c.length-1;d>=0;d--)(c[d].dialog==a||c[d].uiElement==a)&&c.splice(d,1);c.length===0&&delete D[b]}},I=function(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b])},J=function(a,b){},K={27:1,13:1},L=function(a){a.data.getKeystroke()in K&&a.data.stopPropagation()};(function(){k.dialog={uiElement:function(b,c,d,f,g,h,i){if(arguments.length<4)return;var j=(f.call?f(c):f)||"div",k=["<",j," "],l=(g&&g.call?g(c):g)||{},m=(h&&h.call?h(c):h)||{},n=(i&&i.call?i.call(this,b,c):i)||"",o=this.domId=m.id||e.getNextId()+"_uiElement",p=this.id=c.id,q;m.id=o;var r={};c.type&&(r["cke_dialog_ui_"+c.type]=1),c.className&&(r[c.className]=1);var s=m["class"]&&m["class"].split?m["class"].split(" "):[];for(q=0;q<s.length;q++)s[q]&&(r[s[q]]=1);var t=[];for(q in r)t.push(q);m["class"]=t.join(" "),c.title&&(m.title=c.title);var u=(c.style||"").split(";");for(q in l)u.push(q+":"+l[q]);c.hidden&&u.push("display:none");for(q=u.length-1;q>=0;q--)u[q]===""&&u.splice(q,1);u.length>0&&(m.style=(m.style?m.style+"; ":"")+u.join("; "));for(q in m)k.push(q+'="'+e.htmlEncode(m[q])+'" ');k.push(">",n,"</",j,">"),d.push(k.join("")),(this._||(this._={})).dialog=b,typeof c.isChanged=="boolean"&&(this.isChanged=function(){return c.isChanged}),typeof c.isChanged=="function"&&(this.isChanged=c.isChanged),a.event.implementOn(this),this.registerEvents(c),this.accessKeyUp&&this.accessKeyDown&&c.accessKey&&G(this,b,"CTRL+"+c.accessKey);var v=this;b.on("load",function(){v.getInputElement()&&v.getInputElement().on("focus",function(){b._.tabBarMode=!1,b._.hasFocus=!0,v.fire("focus")},v)}),this.keyboardFocusable&&(this.tabIndex=c.tabIndex||0,this.focusIndex=b._.focusList.push(this)-1,this.on("focus",function(){b._.currentFocusIndex=v.focusIndex})),e.extend(this,c)},hbox:function(a,b,c,d,e){if(arguments.length<4)return;this._||(this._={});var g=this._.children=b,h=e&&e.widths||null,i=e&&e.height||null,j={},l,m=function(){var a=['<tbody><tr class="cke_dialog_ui_hbox">'];for(l=0;l<c.length;l++){var b="cke_dialog_ui_hbox_child",d=[];l===0&&(b="cke_dialog_ui_hbox_first"),l==c.length-1&&(b="cke_dialog_ui_hbox_last"),a.push('<td class="',b,'" role="presentation" '),h?h[l]&&d.push("width:"+f(h[l])):d.push("width:"+Math.floor(100/c.length)+"%"),i&&d.push("height:"+f(i)),e&&e.padding!=undefined&&d.push("padding:"+f(e.padding)),d.length>0&&a.push('style="'+d.join("; ")+'" '),a.push(">",c[l],"</td>")}return a.push("</tr></tbody>"),a.join("")},n={role:"presentation"};e&&e.align&&(n.align=e.align),k.dialog.uiElement.call(this,a,e||{type:"hbox"},d,"table",j,n,m)},vbox:function(a,b,c,d,g){if(arguments.length<3)return;this._||(this._={});var h=this._.children=b,i=g&&g.width||null,j=g&&g.heights||null,l=function(){var b=['<table role="presentation" cellspacing="0" border="0" '];b.push('style="'),g&&g.expand&&b.push("height:100%;"),b.push("width:"+f(i||"100%"),";"),b.push('"'),b.push('align="',e.htmlEncode(g&&g.align||(a.getParentEditor().lang.dir=="ltr"?"left":"right")),'" '),b.push("><tbody>");for(var d=0;d<c.length;d++){var h=[];b.push('<tr><td role="presentation" '),i&&h.push("width:"+f(i||"100%")),j?h.push("height:"+f(j[d])):g&&g.expand&&h.push("height:"+Math.floor(100/c.length)+"%"),g&&g.padding!=undefined&&h.push("padding:"+f(g.padding)),h.length>0&&b.push('style="',h.join("; "),'" '),b.push(' class="cke_dialog_ui_vbox_child">',c[d],"</td></tr>")}return b.push("</tbody></table>"),b.join("")};k.dialog.uiElement.call(this,a,g||{type:"vbox"},d,"div",null,{role:"presentation"},l)}}})(),k.dialog.uiElement.prototype={getElement:function(){return a.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a,b){return this.getInputElement().setValue(a),!b&&this.fire("change",{value:a}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){var a=this,b=a.getInputElement(),c=b,d;while((c=c.getParent())&&c.$.className.search("cke_dialog_page_contents")==-1);return c?(d=c.getAttribute("name"),a._.dialog._.currentTabId!=d&&a._.dialog.selectPage(d),a):a},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(a){var b=/^on([A-Z]\w+)/,c,d=function(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})};for(var e in a){if(!(c=e.match(b)))continue;this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,c[1].toLowerCase(),a[e])}return this},eventProcessors:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},accessKeyDown:function(a,b){this.focus()},accessKeyUp:function(a,b){},disable:function(){var a=this.getInputElement();a.setAttribute("disabled","true"),a.addClass("cke_disabled")},enable:function(){var a=this.getInputElement();a.removeAttribute("disabled"),a.removeClass("cke_disabled")},isEnabled:function(){return!this.getInputElement().getAttribute("disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!this.isEnabled()||!this.isVisible()?!1:!0}},k.dialog.hbox.prototype=e.extend(new k.dialog.uiElement,{getChild:function(a){var b=this;return arguments.length<1?b._.children.concat():(a.splice||(a=[a]),a.length<2?b._.children[a[0]]:b._.children[a[0]]&&b._.children[a[0]].getChild?b._.children[a[0]].getChild(a.slice(1,a.length)):null)}},!0),k.dialog.vbox.prototype=new k.dialog.hbox,function(){var b={build:function(b,c,d){var e=c.children,f,g=[],h=[];for(var i=0;i<e.length&&(f=e[i]);i++){var j=[];g.push(j),h.push(a.dialog._.uiElementBuilders[f.type].build(b,f,j))}return new k.dialog[c.type](b,h,g,d,c)}};a.dialog.addUIElement("hbox",b),a.dialog.addUIElement("vbox",b)}(),a.dialogCommand=function(a){this.dialogName=a},a.dialogCommand.prototype={exec:function(a){a.openDialog(this.dialogName)},canUndo:!1,editorFocus:c||b.webkit},function(){var b=/^([a]|[^a])+$/,c=/^\d*$/,d=/^\d*(?:\.\d+)?$/;a.VALIDATE_OR=1,a.VALIDATE_AND=2,a.dialog.validate={functions:function(){return function(){var a=this,b=a&&a.getValue?a.getValue():arguments[0],c=undefined,d=2,e=[],f;for(f=0;f<arguments.length;f++){if(typeof arguments[f]!="function")break;e.push(arguments[f])}f<arguments.length&&typeof arguments[f]=="string"&&(c=arguments[f],f++),f<arguments.length&&typeof arguments[f]=="number"&&(d=arguments[f]);var g=d==2?!0:!1;for(f=0;f<e.length;f++)d==2?g=g&&e[f](b):g=g||e[f](b);return g?!0:(c!==undefined&&alert(c),a&&(a.select||a.focus)&&(a.select||a.focus()),!1)}},regex:function(a,b){return function(){var c=this,d=c&&c.getValue?c.getValue():arguments[0];return a.test(d)?!0:(b!==undefined&&alert(b),c&&(c.select||c.focus)&&(c.select?c.select():c.focus()),!1)}},notEmpty:function(a){return this.regex(b,a)},integer:function(a){return this.regex(c,a)},number:function(a){return this.regex(d,a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}},a.on("instanceDestroyed",function(b){if(e.isEmpty(a.instances)){var c;while(c=a.dialog._.currentTop)c.hide();C()}var d=b.editor._.storedDialogs;for(var f in d)d[f].destroy()})}(),e.extend(a.editor.prototype,{openDialog:function(b,d){function k(c){var e=a.dialog._.dialogDefinitions[b],f=j.skin.dialog;if(!f._isLoaded||l&&typeof c=="undefined")return;typeof e!="function"&&(a.dialog._.dialogDefinitions[b]="failed"),j.openDialog(b,d)}if(this.mode=="wysiwyg"&&c){var e=this.getSelection();e&&e.lock()}var f=a.dialog._.dialogDefinitions[b],g=this.skin.dialog;a.dialog._.currentTop===null&&A(this);if(typeof f=="function"&&g._isLoaded){var h=this._.storedDialogs||(this._.storedDialogs={}),i=h[b]||(h[b]=new a.dialog(this,b));return d&&d.call(i,i),i.show(),i}if(f=="failed")throw new Error('[CKEDITOR.dialog.openDialog] Dialog "'+b+'" failed when loading definition.');var j=this;if(typeof f=="string"){var l=1;a.scriptLoader.load(a.getUrl(f),k,null,0,1)}return a.skins.load(this,"dialog",k),null}})}(),j.add("dialog",{requires:["dialogui"]}),j.add("styles",{requires:["selection"],init:function(a){a.on("contentDom",function(){a.document.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling)})}}),a.editor.prototype.attachStyleStateChange=function(a,b){var c=this._.styleStateChangeCallbacks;c||(c=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(a){for(var b=0;b<c.length;b++){var d=c[b],e=d.style.checkActive(a.data.path)?1:2;d.state!==e&&(d.fn.call(this,e),d.state=e)}})),c.push({style:a,fn:b})},a.STYLE_BLOCK=1,a.STYLE_INLINE=2,a.STYLE_OBJECT=3,function(){function k(a){var b,c;while(a=a.getParent()){if(a.getName()=="body")break;if(a.getAttribute("data-nostyle"))b=a;else if(!c){var d=a.getAttribute("contentEditable");d=="false"?b=a:d=="true"&&(c=1)}}return b}function l(a){var b=this,e=a.document;if(a.collapsed){var g=C(b,e);a.insertNode(g),a.moveToPosition(g,2);return}var i=b.element,l=b._.definition,m,n=l.includeReadonly;n==undefined&&(n=e.getCustomData("cke_includeReadonly"));var o=f[i]||(m=!0,f.span);a.enlarge(1,1),a.trim();var p=a.createBookmark(),q=p.startNode,r=p.endNode,s=q,t,u=k(q),v=k(r);u&&(s=u.getNextSourceNode(!0)),v&&(r=v),s.getPosition(r)==2&&(s=0);while(s){var w=!1;if(s.equals(r))s=null,w=!0;else{var x=s.type,y=x==1?s.getName():null,A=y&&s.getAttribute("contentEditable")=="false",B=y&&s.getAttribute("data-nostyle");if(y&&s.data("cke-bookmark")){s=s.getNextSourceNode(!0);continue}if(!y||o[y]&&!B&&(!A||n)&&(s.getPosition(r)|4|0|8)==4+0+8&&(!l.childRule||l.childRule(s))){var D=s.getParent();if(D&&((D.getDtd()||f.span)[i]||m)&&(!l.parentRule||l.parentRule(D))){!t&&(!y||!f.$removeEmpty[y]||(s.getPosition(r)|4|0|8)==4+0+8)&&(t=new d.range(e),t.setStartBefore(s));if(x==3||A||x==1&&!s.getChildCount()){var E=s,F;while((w=!E.getNext(j))&&(F=E.getParent(),o[F.getName()])&&(F.getPosition(q)|2|0|8)==2+0+8&&(!l.childRule||l.childRule(F)))E=F;t.setEndAfter(E)}}else w=!0}else w=!0;s=s.getNextSourceNode(B||A)}if(w&&t&&!t.collapsed){var G=C(b,e),H=G.hasAttributes(),I=t.getCommonAncestor(),J={styles:{},attrs:{},blockedStyles:{},blockedAttrs:{}},K,L,M;while(G&&I){if(I.getName()==i){for(K in l.attributes){if(J.blockedAttrs[K]||!(M=I.getAttribute(L)))continue;G.getAttribute(K)==M?J.attrs[K]=1:J.blockedAttrs[K]=1}for(L in l.styles){if(J.blockedStyles[L]||!(M=I.getStyle(L)))continue;G.getStyle(L)==M?J.styles[L]=1:J.blockedStyles[L]=1}}I=I.getParent()}for(K in J.attrs)G.removeAttribute(K);for(L in J.styles)G.removeStyle(L);H&&!G.hasAttributes()&&(G=null),G?(t.extractContents().appendTo(G),z(b,G),t.insertNode(G),G.mergeSiblings(),c||G.$.normalize()):(G=new h("span"),t.extractContents().appendTo(G),t.insertNode(G),z(b,G),G.remove(!0)),t=null}}a.moveToBookmark(p),a.shrink(2)}function m(a){a.enlarge(1,1);var b=a.createBookmark(),c=b.startNode;if(a.collapsed){var e=new d.elementPath(c.getParent()),f;for(var g=0,h;g<e.elements.length&&(h=e.elements[g]);g++){if(h==e.block||h==e.blockLimit)break;if(this.checkElementRemovable(h)){var i;a.collapsed&&(a.checkBoundaryOfElement(h,2)||(i=a.checkBoundaryOfElement(h,1)))?(f=h,f.match=i?"start":"end"):(h.mergeSiblings(),y(this,h))}}if(f){var j=c;for(g=0;!0;g++){var k=e.elements[g];if(k.equals(f))break;if(k.match)continue;k=k.clone(),k.append(j),j=k}j[f.match=="start"?"insertBefore":"insertAfter"](f)}}else{var l=b.endNode,m=this;function n(){var a=new d.elementPath(c.getParent()),b=new d.elementPath(l.getParent()),e=null,f=null;for(var g=0;g<a.elements.length;g++){var h=a.elements[g];if(h==a.block||h==a.blockLimit)break;m.checkElementRemovable(h)&&(e=h)}for(g=0;
g<b.elements.length;g++){h=b.elements[g];if(h==b.block||h==b.blockLimit)break;m.checkElementRemovable(h)&&(f=h)}f&&l.breakParent(f),e&&c.breakParent(e)}n();var o=c.getNext();while(!o.equals(l)){var p=o.getNextSourceNode();o.type==1&&this.checkElementRemovable(o)&&(o.getName()==this.element?y(this,o):A(o,H(this)[o.getName()]),p.type==1&&p.contains(c)&&(n(),p=c.getNext())),o=p}}a.moveToBookmark(b)}function n(a){var b=a.getCommonAncestor(!0,!0),c=b.getAscendant(this.element,!0);c&&D(c,this)}function o(b){var c=b.getCommonAncestor(!0,!0),d=c.getAscendant(this.element,!0);if(!d)return;var e=this,f=e._.definition,g=f.attributes,h=a.style.getStyleText(f);if(g)for(var i in g)d.removeAttribute(i,g[i]);if(f.styles)for(var j in f.styles){if(!f.styles.hasOwnProperty(j))continue;d.removeStyle(j)}}function p(a){var b=a.createBookmark(!0),c=a.createIterator();c.enforceRealBlocks=!0,this._.enterMode&&(c.enlargeBr=this._.enterMode!=2);var d,e=a.document,f;while(d=c.getNextParagraph()){var g=C(this,e,d);r(d,g)}a.moveToBookmark(b)}function q(a){var b=this,c=a.createBookmark(1),d=a.createIterator();d.enforceRealBlocks=!0,d.enlargeBr=b._.enterMode!=2;var e;while(e=d.getNextParagraph())if(b.checkElementRemovable(e))if(e.is("pre")){var f=b._.enterMode==2?null:a.document.createElement(b._.enterMode==1?"p":"div");f&&e.copyAttributes(f),r(e,f)}else y(b,e,1);a.moveToBookmark(c)}function r(a,b){var c=!b;c&&(b=a.getDocument().createElement("div"),a.copyAttributes(b));var d=b&&b.is("pre"),e=a.is("pre"),f=d&&!e,g=!d&&e;f?b=x(a,b):g?b=w(c?[a.getHtml()]:u(a),b):a.moveChildren(b),b.replace(a),d?t(b):c&&B(b)}function t(a){var b;if(!((b=a.getPrevious(s))&&b.is&&b.is("pre")))return;var d=v(b.getHtml(),/\n$/,"")+"\n\n"+v(a.getHtml(),/^\n/,"");c?a.$.outerHTML="<pre>"+d+"</pre>":a.setHtml(d),b.remove()}function u(a){var b=/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,c=a.getName(),d=v(a.getOuterHtml(),b,function(a,b,c){return b+"</pre>"+c+"<pre>"}),e=[];return d.replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(a,b){e.push(b)}),e}function v(a,b,c){var d="",e="";return a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(a,b,c){return b&&(d=b),c&&(e=c),""}),d+a.replace(b,c)+e}function w(a,b){var c;a.length>1&&(c=new d.documentFragment(b.getDocument()));for(var f=0;f<a.length;f++){var g=a[f];g=g.replace(/(\r\n|\r)/g,"\n"),g=v(g,/^[ \t]*\n/,""),g=v(g,/\n$/,""),g=v(g,/^[ \t]+|[ \t]+$/g,function(a,b,c){return a.length==1?"&nbsp;":b?" "+e.repeat("&nbsp;",a.length-1):e.repeat("&nbsp;",a.length-1)+" "}),g=g.replace(/\n/g,"<br>"),g=g.replace(/[ \t]{2,}/g,function(a){return e.repeat("&nbsp;",a.length-1)+" "});if(c){var h=b.clone();h.setHtml(g),c.append(h)}else b.setHtml(g)}return c||b}function x(a,b){var d=a.getBogus();d&&d.remove();var e=a.getHtml();e=v(e,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),e=e.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),e=e.replace(/([ \t\n\r]+|&nbsp;)/g," "),e=e.replace(/<br\b[^>]*>/gi,"\n");if(c){var f=a.getDocument().createElement("div");f.append(b),b.$.outerHTML="<pre>"+e+"</pre>",b.copyAttributes(f.getFirst()),b=f.getFirst().remove()}else b.setHtml(e);return b}function y(a,b){var c=a._.definition,d=e.extend({},c.attributes,H(a)[b.getName()]),g=c.styles,h=e.isEmpty(d)&&e.isEmpty(g);for(var i in d){if(!(i!="class"&&!a._.definition.fullMatch||b.getAttribute(i)==I(i,d[i])))continue;h=b.hasAttribute(i),b.removeAttribute(i)}for(var j in g){if(a._.definition.fullMatch&&b.getStyle(j)!=I(j,g[j],true))continue;h=h||!!b.getStyle(j),b.removeStyle(j)}h&&(!f.$block[b.getName()]||a._.enterMode==2&&!b.hasAttributes()?B(b):b.renameNode(a._.enterMode==1?"p":"div"))}function z(a,b){var c=a._.definition,d=c.attributes,e=c.styles,f=H(a),g=b.getElementsByTag(a.element);for(var h=g.count();--h>=0;)y(a,g.getItem(h));for(var i in f)if(i!=a.element){g=b.getElementsByTag(i);for(h=g.count()-1;h>=0;h--){var j=g.getItem(h);A(j,f[i])}}}function A(a,b){var c=b&&b.attributes;if(c)for(var d=0;d<c.length;d++){var e=c[d][0],f;if(f=a.getAttribute(e)){var g=c[d][1];(g===null||g.test&&g.test(f)||typeof g=="string"&&f==g)&&a.removeAttribute(e)}}B(a)}function B(a){if(!a.hasAttributes())if(f.$block[a.getName()]){var b=a.getPrevious(s),c=a.getNext(s);b&&(b.type==3||!b.isBlockBoundary({br:1}))&&a.append("br",1),c&&(c.type==3||!c.isBlockBoundary({br:1}))&&a.append("br"),a.remove(!0)}else{var d=a.getFirst(),e=a.getLast();a.remove(!0),d&&(d.type==1&&d.mergeSiblings(),e&&!d.equals(e)&&e.type==1&&e.mergeSiblings())}}function C(a,b,c){var d,e=a._.definition,f=a.element;return f=="*"&&(f="span"),d=new h(f,b),c&&c.copyAttributes(d),d=D(d,a),b.getCustomData("doc_processing_style")&&d.hasAttribute("id")?d.removeAttribute("id"):b.setCustomData("doc_processing_style",1),d}function D(b,c){var d=c._.definition,e=d.attributes,f=a.style.getStyleText(d);if(e)for(var g in e)b.setAttribute(g,e[g]);return f&&b.setAttribute("style",f),b}function F(a,b){for(var c in a)a[c]=a[c].replace(E,function(a,c){return b[c]})}function G(b){var c=b._AC;if(c)return c;c={};var d=0,e=b.attributes;if(e)for(var f in e)d++,c[f]=e[f];var g=a.style.getStyleText(b);return g&&(c.style||d++,c.style=g),c._length=d,b._AC=c}function H(a){if(a._.overrides)return a._.overrides;var b=a._.overrides={},c=a._.definition.overrides;if(c){e.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var f=c[d],g,h,i;typeof f=="string"?g=f.toLowerCase():(g=f.element?f.element.toLowerCase():a.element,i=f.attributes),h=b[g]||(b[g]={});if(i){var j=h.attributes=h.attributes||[];for(var k in i)j.push([k.toLowerCase(),i[k]])}}}return b}function I(a,b,c){var d=new h("span");return d[c?"setStyle":"setAttribute"](a,b),d[c?"getStyle":"getAttribute"](a)}function J(a,b){var c;if(b!==!1){var d=new h("span");d.setAttribute("style",a),c=d.getAttribute("style")||""}else c=a;return c.replace(/\s*([;:])\s*/,"$1").replace(/([^\s;])$/,"$1;").replace(/,\s+/g,",").replace(/\"/g,"").toLowerCase()}function K(a){var b={};return a.replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(a,c,d){b[c]=d}),b}function L(a,b){typeof a=="string"&&(a=K(a)),typeof b=="string"&&(b=K(b));for(var c in a)if(!(c in b)||b[c]!=a[c]&&a[c]!="inherit"&&b[c]!="inherit")return!1;return!0}function M(a,b){var c=a.getSelection(),d=c.getRanges(),e=b?this.removeFromRange:this.applyToRange,f,g=d.createIterator();while(f=g.getNextRange())e.call(this,f);c.selectRanges(d),a.removeCustomData("doc_processing_style")}var b={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1},g={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1},i=/\s*(?:;\s*|$)/,j=d.walker.bookmark(0,1);a.style=function(a,c){c&&(a=e.clone(a),F(a.attributes,c),F(a.styles,c));var d=this.element=(a.element||"*").toLowerCase();this.type=d=="#"||b[d]?1:g[d]?3:2,this._={definition:a}},a.style.prototype={apply:function(a){M.call(this,a,!1)},remove:function(a){M.call(this,a,!0)},applyToRange:function(a){var b=this;return(b.applyToRange=b.type==2?l:b.type==1?p:b.type==3?n:null).call(b,a)},removeFromRange:function(a){var b=this;return(b.removeFromRange=b.type==2?m:b.type==1?q:b.type==3?o:null).call(b,a)},applyToObject:function(a){D(a,this)},checkActive:function(a){var b=this;switch(b.type){case 1:return b.checkElementRemovable(a.block||a.blockLimit,!0);case 3:case 2:var c=a.elements;for(var d=0,e;d<c.length;d++){e=c[d];if(b.type==2&&(e==a.block||e==a.blockLimit))continue;if(!(b.type!=3||e.getName()in g))continue;if(b.checkElementRemovable(e,!0))return!0}}return!1},checkApplicable:function(a){switch(this.type){case 2:case 1:break;case 3:return a.lastElement.getAscendant(this.element,!0)}return!0},checkElementRemovable:function(a,b){if(!a)return!1;var c=this._.definition,d;if(a.getName()==this.element){if(!b&&!a.hasAttributes())return!0;d=G(c);if(!d._length)return!0;for(var e in d){if(e=="_length")continue;var f=a.getAttribute(e)||"";if(e=="style"?L(d[e],J(f,!1)):d[e]==f){if(!b)return!0}else if(b)return!1}if(b)return!0}var g=H(this)[a.getName()];if(g){if(!(d=g.attributes))return!0;for(var h=0;h<d.length;h++){e=d[h][0];var i=a.getAttribute(e);if(i){var j=d[h][1];if(j===null||typeof j=="string"&&i==j||j.test(i))return!0}}}return!1},buildPreview:function(){var b=this._.definition,c=[],d=b.element;d=="bdo"&&(d="span"),c=["<",d];var e=b.attributes;if(e)for(var f in e)c.push(" ",f,'="',e[f],'"');var g=a.style.getStyleText(b);return g&&c.push(' style="',g,'"'),c.push(">",b.name,"</",d,">"),c.join("")}},a.style.getStyleText=function(a){var b=a._ST;if(b)return b;b=a.styles;var c=a.attributes&&a.attributes.style||"",d="";c.length&&(c=c.replace(i,";"));for(var e in b){var f=b[e],g=(e+":"+f).replace(i,";");f=="inherit"?d+=g:c+=g}return c.length&&(c=J(c)),c+=d,a._ST=c};var s=d.walker.whitespaces(1),E=/#\((.+?)\)/g}(),a.styleCommand=function(a){this.style=a},a.styleCommand.prototype.exec=function(a){var b=this;a.focus();var c=a.document;return c&&(b.state==2?b.style.apply(c):b.state==1&&b.style.remove(c)),!!c},a.stylesSet=new a.resourceManager("","stylesSet"),a.addStylesSet=e.bind(a.stylesSet.add,a.stylesSet),a.loadStylesSet=function(b,c,d){a.stylesSet.addExternal(b,c,""),a.stylesSet.load(b,d)},a.editor.prototype.getStylesSet=function(b){if(!this._.stylesDefinitions){var c=this,d=c.config.stylesCombo_stylesSet||c.config.stylesSet||"default";if(d instanceof Array){c._.stylesDefinitions=d,b(d);return}var e=d.split(":"),f=e[0],g=e[1],h=j.registered.styles.path;a.stylesSet.addExternal(f,g?e.slice(1).join(":"):h+"styles/"+f+".js",""),a.stylesSet.load(f,function(a){c._.stylesDefinitions=a[f],b(c._.stylesDefinitions)})}else b(this._.stylesDefinitions)},j.add("domiterator"),function(){function a(a){var b=this;if(arguments.length<1)return;b.range=a,b.forceBrBreak=0,b.enlargeBr=1,b.enforceRealBlocks=0,b._||(b._={})}function g(a,b,c){var d=a.getNextSourceNode(b,null,c);while(!f(d))d=d.getNextSourceNode(b,null,c);return d}var b=/^[\r\n\t ]+$/,f=d.walker.bookmark(!1,!0);a.prototype={getNextParagraph:function(a){var h=this,i,j,k,l,m,q;if(!h._.lastNode){j=h.range.clone(),j.shrink(1,!0),l=j.endContainer.hasAscendant("pre",!0)||j.startContainer.hasAscendant("pre",!0),j.enlarge(h.forceBrBreak&&!l||!h.enlargeBr?3:2);var r=new d.walker(j),s=d.walker.bookmark(!0,!0);r.evaluator=s,h._.nextNode=r.next(),r=new d.walker(j),r.evaluator=s;var t=r.previous();h._.lastNode=t.getNextSourceNode(!0);if(h._.lastNode&&h._.lastNode.type==3&&!e.trim(h._.lastNode.getText())&&h._.lastNode.getParent().isBlockBoundary()){var u=new d.range(j.document);u.moveToPosition(h._.lastNode,4);if(u.checkEndOfBlock()){var v=new d.elementPath(u.endContainer),w=v.block||v.blockLimit;h._.lastNode=w.getNextSourceNode(!0)}}h._.lastNode||(h._.lastNode=h._.docEndMarker=j.document.createText(""),h._.lastNode.insertAfter(t)),j=null}var x=h._.nextNode;t=h._.lastNode,h._.nextNode=null;while(x){var y=0,z=x.hasAscendant("pre"),A=x.type!=1,B=0;if(!A){var C=x.getName();if(x.isBlockBoundary(h.forceBrBreak&&!z&&{br:1})){if(C=="br")A=1;else if(!j&&!x.getChildCount()&&C!="hr"){i=x,k=x.equals(t);break}j&&(j.setEndAt(x,3),C!="br"&&(h._.nextNode=x)),y=1}else{if(x.getFirst()){j||(j=new d.range(h.range.document),j.setStartAt(x,3)),x=x.getFirst();continue}A=1}}else x.type==3&&b.test(x.getText())&&(A=0);A&&!j&&(j=new d.range(h.range.document),j.setStartAt(x,3)),k=(!y||A)&&x.equals(t);if(j&&!y)while(!x.getNext(f)&&!k){var D=x.getParent();if(D.isBlockBoundary(h.forceBrBreak&&!z&&{br:1})){y=1,k=k||D.equals(t);break}x=D,A=1,k=x.equals(t),B=1}A&&j.setEndAt(x,4),x=g(x,B,t),k=!x;if(k||y&&j)break}if(!i){if(!j)return h._.docEndMarker&&h._.docEndMarker.remove(),h._.nextNode=null,null;var E=new d.elementPath(j.startContainer),F=E.blockLimit,G={div:1,th:1,td:1};i=E.block;if(!i&&!h.enforceRealBlocks&&G[F.getName()]&&j.checkStartOfBlock()&&j.checkEndOfBlock())i=F;else if(!i||h.enforceRealBlocks&&i.getName()=="li")i=h.range.document.createElement(a||"p"),j.extractContents().appendTo(i),i.trim(),j.insertNode(i),m=q=!0;else if(i.getName()!="li"){if(!j.checkStartOfBlock()||!j.checkEndOfBlock()){i=i.clone(!1),j.extractContents().appendTo(i),i.trim();var H=j.splitBlock();m=!H.wasStartOfBlock,q=!H.wasEndOfBlock,j.insertNode(i)}}else k||(h._.nextNode=i.equals(t)?null:g(j.getBoundaryNodes().endNode,1,t))}if(m){var I=i.getPrevious();I&&I.type==1&&(I.getName()=="br"?I.remove():I.getLast()&&I.getLast().$.nodeName.toLowerCase()=="br"&&I.getLast().remove())}if(q){var J=i.getLast();J&&J.type==1&&J.getName()=="br"&&(c||J.getPrevious(f)||J.getNext(f))&&J.remove()}return h._.nextNode||(h._.nextNode=k||i.equals(t)?null:g(i,1,t)),i}},d.range.prototype.createIterator=function(){return new a(this)}}(),j.add("panelbutton",{requires:["button"],beforeInit:function(a){a.ui.addHandler(4,k.panelButton.handler)}}),a.UI_PANELBUTTON=4,function(){var b=function(a){var b=this,c=b._;if(c.state==0)return;b.createPanel(a);if(c.on){c.panel.hide();return}c.panel.showBlock(b._.id,b.document.getById(b._.id),4)};k.panelButton=e.createClass({base:k.button,$:function(c){var d=this,e=c.panel;delete c.panel,d.base(c),d.document=e&&e.parent&&e.parent.getDocument()||a.document,e.block={attributes:e.attributes},d.hasArrow=!0,d.click=b,d._={panelDefinition:e}},statics:{handler:{create:function(a){return new k.panelButton(a)}}},proto:{createPanel:function(b){var c=this._;if(c.panel)return;var d=this._.panelDefinition||{},e=this._.panelDefinition.block,f=d.parent||a.document.getBody(),g=this._.panel=new k.floatPanel(b,f,d),h=g.addBlock(c.id,e),i=this;g.onShow=function(){i.className&&this.element.getFirst().addClass(i.className+"_panel"),i.setState(1),c.on=1,i.onOpen&&i.onOpen()},g.onHide=function(a){i.className&&this.element.getFirst().removeClass(i.className+"_panel"),i.setState(i.modes&&i.modes[b.mode]?2:0),c.on=0,!a&&i.onClose&&i.onClose()},g.onEscape=function(){g.hide(),i.document.getById(c.id).focus()},this.onBlock&&this.onBlock(g,h),h.onHide=function(){c.on=0,i.setState(2)}}}})}(),j.add("floatpanel",{requires:["panel"]}),function(){function i(a,b,c,d,g){var i=e.genKey(b.getUniqueId(),c.getUniqueId(),a.skinName,a.lang.dir,a.uiColor||"",d.css||"",g||""),j=f[i];return j||(j=f[i]=new k.panel(b,d),j.element=c.append(h.createFromHtml(j.renderHtml(a),b)),j.element.setStyles({display:"none",position:"absolute"})),j}var f={},g=!1;k.floatPanel=e.createClass({$:function(a,b,c,d){c.forceIFrame=1;var e=b.getDocument(),f=i(a,e,b,c,d||0),g=f.element,h=g.getFirst().getFirst();this.element=g,this._={panel:f,parentElement:b,definition:c,document:e,iframe:h,children:[],dir:a.lang.dir},a.on("mode",function(){this.hide()},this)},proto:{addBlock:function(a,b){return this._.panel.addBlock(a,b)},addListBlock:function(a,b){return this._.panel.addListBlock(a,b)},getBlock:function(a){return this._.panel.getBlock(a)},showBlock:function(f,i,j,k,l){var m=this._.panel,o=m.showBlock(f);this.allowBlur(!1),g=1;var p=this.element,q=this._.iframe,r=this._.definition,s=i.getDocumentPosition(p.getDocument()),t=this._.dir=="rtl",u=s.x+(k||0),v=s.y+(l||0);!t||j!=1&&j!=4?!t&&(j==2||j==3)&&(u+=i.$.offsetWidth-1):u+=i.$.offsetWidth;if(j==3||j==4)v+=i.$.offsetHeight-1;this._.panel._.offsetParentId=i.getId(),p.setStyles({top:v+"px",left:0,display:""}),p.setOpacity(0),p.getFirst().removeStyle("width");if(!this._.blurSet){var w=c?q:new d.window(q.$.contentWindow);a.event.useCapture=!0,w.on("blur",function(a){var b=this;if(!b.allowBlur())return;var d;if(c&&!b.allowBlur()||(d=a.data.getTarget())&&d.getName&&d.getName()!="iframe")return;b.visible&&!b._.activeChild&&!g&&b.hide()},this),w.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),a.event.useCapture=!1,this._.blurSet=1}m.onEscape=e.bind(function(a){if(this.onEscape&&this.onEscape(a)===!1)return!1},this),e.setTimeout(function(){t&&(u-=p.$.offsetWidth);var a=e.bind(function(){var a=p.getFirst();if(o.autoSize){var d=o.element.$;if(b.gecko||b.opera)d=d.parentNode;c&&(d=d.document.body);var e=d.scrollWidth;c&&b.quirks&&e>0&&(e+=(a.$.offsetWidth||0)-(a.$.clientWidth||0)),e+=4,a.setStyle("width",e+"px"),o.element.addClass("cke_frameLoaded");var f=o.element.$.scrollHeight;c&&b.quirks&&f>0&&(f+=(a.$.offsetHeight||0)-(a.$.clientHeight||0)),a.setStyle("height",f+"px"),m._.currentBlock.element.setStyle("display","none").removeStyle("display")}else a.removeStyle("height");var g=m.element,i=g.getWindow(),j=i.getScrollPosition(),k=i.getViewPaneSize(),l={height:g.$.offsetHeight,width:g.$.offsetWidth};if(t?u<0:u+l.width>k.width+j.x)u+=l.width*(t?1:-1);v+l.height>k.height+j.y&&(v-=l.height);if(c){var n=new h(p.$.offsetParent),q=n;q.getName()=="html"&&(q=q.getDocument().getBody()),q.getComputedStyle("direction")=="rtl"&&(b.ie8Compat?u-=p.getDocument().getDocumentElement().$.scrollLeft*2:u-=n.$.scrollWidth-n.$.clientWidth)}var r=p.getFirst(),s;(s=r.getCustomData("activePanel"))&&s.onHide&&s.onHide.call(this,1),r.setCustomData("activePanel",this),p.setStyles({top:v+"px",left:u+"px"}),p.setOpacity(1)},this);m.isLoaded?a():m.onLoad=a,e.setTimeout(function(){q.$.contentWindow.focus(),this.allowBlur(!0)},0,this)},b.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this),g=0},hide:function(){var a=this;a.visible&&(!a.onHide||a.onHide.call(a)!==!0)&&(a.hideChild(),a.element.setStyle("display","none"),a.visible=0,a.element.getFirst().removeCustomData("activePanel"))},allowBlur:function(a){var b=this._.panel;return a!=undefined&&(b.allowBlur=a),b.allowBlur},showAsChild:function(a,c,d,f,g,h){if(this._.activeChild==a&&a._.panel._.offsetParentId==d.getId())return;this.hideChild(),a.onHide=e.bind(function(){e.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=a,this._.focused=!1,a.showBlock(c,d,f,g,h),(b.ie7Compat||b.ie8&&b.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+=""},100)},hideChild:function(){var a=this._.activeChild;a&&(delete a.onHide,delete this._.activeChild,a.hide())}}}),a.on("instanceDestroyed",function(){var b=e.isEmpty(a.instances);for(var c in f){var d=f[c];b?d.destroy():d.element.hide()}b&&(f={})})}(),j.add("menu",{beforeInit:function(b){var c=b.config.menu_groups.split(","),d=b._.menuGroups={},e=b._.menuItems={};for(var f=0;f<c.length;f++)d[c[f]]=f+1;b.addMenuGroup=function(a,b){d[a]=b||100},b.addMenuItem=function(b,c){d[c.group]&&(e[b]=new a.menuItem(this,b,c))},b.addMenuItems=function(a){for(var b in a)this.addMenuItem(b,a[b])},b.getMenuItem=function(a){return e[a]}},requires:["floatpanel"]}),function(){function d(a){a.sort(function(a,b){return a.group<b.group?-1:a.group>b.group?1:a.order<b.order?-1:a.order>b.order?1:0})}a.menu=e.createClass({$:function(a,b){var c=this;b=c._.definition=b||{},c.id=e.getNextId(),c.editor=a,c.items=[],c._.listeners=[],c._.level=b.level||1;var d=e.extend({},b.panel,{css:a.skin.editor.css,level:c._.level-1,block:{}}),f=d.block.attributes=d.attributes||{};!f.role&&(f.role="menu"),c._.panelDefinition=d},_:{onShow:function(){var a=this,b=a.editor.getSelection();c&&b&&b.lock();var d=b&&b.getStartElement(),e=a._.listeners,f=[];a.removeAll();for(var g=0;g<e.length;g++){var h=e[g](d,b);if(h)for(var i in h){var j=a.editor.getMenuItem(i);j&&(j.state=h[i],a.add(j))}}},onClick:function(a){this.hide(),a.onClick?a.onClick():a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var b=this.parent;if(b){b._.panel.hideChild();var c=b._.panel._.panel._.currentBlock,d=c._.focusIndex;c._.markItem(d)}else a==27&&(this.hide(),this.editor.focus());return!1},onHide:function(){if(c){var a=this.editor.getSelection();a&&a.unlock()}this.onHide&&this.onHide()},showSubMenu:function(b){var c=this,d=c._.subMenu,f=c.items[b],g=f.getItems&&f.getItems();if(!g){c._.panel.hideChild();return}var h=c._.panel.getBlock(c.id);h._.focusIndex=b,d?d.removeAll():(d=c._.subMenu=new a.menu(c.editor,e.extend({},c._.definition,{level:c._.level+1},!0)),d.parent=c,d._.onClick=e.bind(c._.onClick,c));for(var i in g){var j=c.editor.getMenuItem(i);j&&(j.state=g[i],d.add(j))}var k=c._.panel.getBlock(c.id).element.getDocument().getById(c.id+String(b));d.show(k,2)}},proto:{add:function(a){a.order||(a.order=this.items.length),this.items.push(a)},removeAll:function(){this.items=[]},show:function(b,c,f,g){if(!this.parent){this._.onShow();if(!this.items.length)return}c=c||(this.editor.lang.dir=="rtl"?2:1);var h=this.items,i=this.editor,j=this._.panel,l=this._.element;if(!j){j=this._.panel=new k.floatPanel(this.editor,a.document.getBody(),this._.panelDefinition,this._.level),j.onEscape=e.bind(function(a){if(this._.onEscape(a)===!1)return!1},this),j.onHide=e.bind(function(){this._.onHide&&this._.onHide()},this);var n=j.addBlock(this.id,this._.panelDefinition.block);n.autoSize=!0;var o=n.keys;o[40]="next",o[9]="next",o[38]="prev",o[2009]="prev",o[32]="click",o[i.lang.dir=="rtl"?37:39]="click",l=this._.element=n.element,l.addClass(i.skinClass);var p=l.getDocument();p.getBody().setStyle("overflow","hidden"),p.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=e.addFunction(function(a){var b=this;clearTimeout(b._.showSubTimeout),b._.showSubTimeout=e.setTimeout(b._.showSubMenu,i.config.menu_subMenuDelay||400,b,[a])},this),this._.itemOutFn=e.addFunction(function(a){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=e.addFunction(function(a){var b=this,c=b.items[a];if(c.state==0){b.hide();return}c.getItems?b._.showSubMenu(a):b._.onClick(c)},this)}d(h);var q=i.container.getChild(1),r=q.hasClass("cke_mixed_dir_content")?" cke_mixed_dir_content":"",s=['<div class="cke_menu'+r+'" role="presentation">'],t=h.length,u=t&&h[0].group;for(var v=0;v<t;v++){var w=h[v];u!=w.group&&(s.push('<div class="cke_menuseparator" role="separator"></div>'),u=w.group),w.render(this,v,s)}s.push("</div>"),l.setHtml(s.join("")),k.fire("ready",this),this.parent?this.parent._.panel.showAsChild(j,this.id,b,c,f,g):j.showBlock(this.id,b,c,f,g),i.fire("menuShow",[j])},addListener:function(a){this._.listeners.push(a)},hide:function(){var a=this;a._.onHide&&a._.onHide(),a._.panel&&a._.panel.hide()}}}),a.menuItem=e.createClass({$:function(a,b,c){var d=this;e.extend(d,c,{order:0,className:"cke_button_"+b}),d.group=a._.menuGroups[d.group],d.editor=a,d.name=b},proto:{render:function(c,d,e){var f=this,g=c.id+String(d),h=typeof f.state=="undefined"?2:f.state,i=" cke_"+(h==1?"on":h==0?"disabled":"off"),j=f.label;f.className&&(i+=" "+f.className);var k=f.getItems;e.push('<span class="cke_menuitem'+(f.icon&&f.icon.indexOf(".png")==-1?" cke_noalphafix":"")+'">'+'<a id="',g,'" class="',i,'" href="javascript:void(\'',(f.label||"").replace("'",""),'\')" title="',f.label,'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(k?'aria-haspopup="true"':"")+(h==0?'aria-disabled="true"':"")+(h==1?'aria-pressed="true"':"")),(b.opera||b.gecko&&b.mac)&&e.push(' onkeypress="return false;"'),b.gecko&&e.push(' onblur="this.style.cssText = this.style.cssText;"');var l=(f.iconOffset||0)*-16;e.push(' onmouseover="CKEDITOR.tools.callFunction(',c._.itemOverFn,",",d,');" onmouseout="CKEDITOR.tools.callFunction(',c._.itemOutFn,",",d,');" onclick="CKEDITOR.tools.callFunction(',c._.itemClickFn,",",d,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(f.icon?' style="background-image:url('+a.getUrl(f.icon)+");background-position:0 "+l+'px;"':"")+"></span></span>"+'<span class="cke_label">'),k&&e.push('<span class="cke_menuarrow">',"<span>&#",f.editor.lang.dir=="rtl"?"9668":"9658",";</span>","</span>"),e.push(j,"</span></a></span>")}}})}(),i.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",function(){var c=function(a,b){return a._.modes&&a._.modes[b||a.mode]},d;j.add("editingblock",{init:function(e){if(!e.config.editingBlock)return;e.on("themeSpace",function(a){a.data.space=="contents"&&(a.data.html+="<br>")}),e.on("themeLoaded",function(){e.fireOnce("editingBlockReady")}),e.on("uiReady",function(){e.setMode(e.config.startupMode)}),e.on("afterSetData",function(){if(!d){function a(){d=!0,c(e).loadData(e.getData()),d=!1}e.mode?a():e.on("mode",function(){a(),e.removeListener("mode",arguments.callee)})}}),e.on("beforeGetData",function(){!d&&e.mode&&(d=!0,e.setData(c(e).getData(),null,1),d=!1)}),e.on("getSnapshot",function(a){e.mode&&(a.data=c(e).getSnapshotData())}),e.on("loadSnapshot",function(a){e.mode&&c(e).loadSnapshotData(a.data)}),e.on("mode",function(c){c.removeListener(),b.webkit&&e.container.on("focus",function(){e.focus()}),e.config.startupFocus&&e.focus(),setTimeout(function(){e.fireOnce("instanceReady"),a.fire("instanceReady",null,e)},0)}),e.on("destroy",function(){var a=this;a.mode&&a._.modes[a.mode].unload(a.getThemeSpace("contents"))})}}),a.editor.prototype.mode="",a.editor.prototype.addMode=function(a,b){b.name=a,(this._.modes||(this._.modes={}))[a]=b},a.editor.prototype.setMode=function(a){var b,d=this.getThemeSpace("contents"),e=this.checkDirty();if(this.mode){if(a==this.mode)return;this.fire("beforeModeUnload");var f=c(this);b=f.getData(),f.unload(d),this.mode=""}d.setHtml("");var g=c(this,a);if(!g)throw'[CKEDITOR.editor.setMode] Unknown mode "'+a+'".';e||this.on("mode",function(){this.resetDirty(),this.removeListener("mode",arguments.callee)}),g.load(d,typeof b!="string"?this.getData():b)},a.editor.prototype.focus=function(){var a=c(this);a&&a.focus()}}(),i.startupMode="wysiwyg",i.editingBlock=!0,function(){function f(){var a=this;try{var b=a.getSelection();if(!b||!b.document.getWindow().$)return;var c=b.getStartElement(),e=new d.elementPath(c);e.compare(a._.selectionPreviousPath)||(a._.selectionPreviousPath=e,a.fire("selectionChange",{selection:b,path:e,element:c}))}catch(f){}}function l(){k=!0;if(i)return;m.call(this),i=e.setTimeout(m,200,this)}function m(){i=null,k&&(e.setTimeout(f,0,this),k=!1)}var i,k,n={modes:{wysiwyg:1,source:1},exec:function(a){switch(a.mode){case"wysiwyg":a.document.$.execCommand("SelectAll",!1,null),a.forceNextSelectionCheck(),a.selectionChange();break;case"source":var b=a.textarea.$;c?b.createTextRange().execCommand("SelectAll"):(b.selectionStart=0,b.selectionEnd=b.value.length),b.focus()}},canUndo:!1};j.add("selection",{init:function(a){a.on("contentDom",function(){var d=a.document,f=d.getBody(),g=d.getDocumentElement();if(c){var h,i,j=1;f.on("focusin",function(a){if(a.data.$.srcElement.nodeName!="BODY")return;if(h){var b=d.getCustomData("cke_locked_selection");if(j&&!b)try{h.select()}catch(c){}h=null}}),f.on("focus",function(){i=1,n()}),f.on("beforedeactivate",function(a){if(a.data.$.toElement)return;i=0,j=1}),c&&b.version<8&&a.on("blur",function(b){try{a.document&&a.document.$.selection.empty()}catch(c){}}),g.on("mousedown",function(){j=0}),g.on("mouseup",function(){j=1}),c&&(b.ie7Compat||b.version<8||b.quirks)&&g.on("click",function(b){b.data.getTarget().getName()=="html"&&a.getSelection().getRanges()[0].select()});var k;f.on("mousedown",function(b){if(b.data.$.button==2){var c=a.document.$.selection;c.type=="None"&&(k=a.window.getScrollPosition())}m()}),f.on("mouseup",function(b){b.data.$.button==2&&k&&(a.document.$.documentElement.scrollLeft=k.x,a.document.$.documentElement.scrollTop=k.y),k=null,i=1,setTimeout(function(){n(!0)},0)}),f.on("keydown",m),f.on("keyup",function(){i=1,n()}),d.on("selectionchange",n);function m(){i=0}function n(b){if(i){var c=a.document,d=a.getSelection(),f=d&&d.getNative();if(b&&f&&f.type=="None"&&!c.$.queryCommandEnabled("InsertImage")){e.setTimeout(n,50,this,!0);return}var g;if(f&&f.type&&f.type!="Control"&&(g=f.createRange())&&(g=g.parentElement())&&(g=g.nodeName)&&g.toLowerCase()in{input:1,textarea:1})return;h=f&&d.getRanges()[0],l.call(a)}}}else d.on("mouseup",l,a),d.on("keyup",l,a)}),a.on("contentDomUnload",a.forceNextSelectionCheck,a),a.addCommand("selectAll",n),a.ui.addButton("SelectAll",{label:a.lang.selectAll,command:"selectAll"}),a.selectionChange=l}}),a.editor.prototype.getSelection=function(){return this.document&&this.document.getSelection()},a.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},g.prototype.getSelection=function(){var a=new d.selection(this);return!a||a.isInvalid?null:a},a.SELECTION_NONE=1,a.SELECTION_TEXT=2,a.SELECTION_ELEMENT=3,d.selection=function(a){var b=this,d=a.getCustomData("cke_locked_selection");if(d)return d;b.document=a,b.isLocked=0,b._={cache:{}};if(c){var e=b.getNative().createRange();if(!e||e.item&&e.item(0).ownerDocument!=b.document.$||e.parentElement&&e.parentElement().ownerDocument!=b.document.$)b.isInvalid=!0}return b};var o={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,th:1,thead:1,tfoot:1};d.selection.prototype={getNative:c?function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.$.selection)}:function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.getWindow().$.getSelection())},getType:c?function(){var a=this._.cache;if(a.type)return a.type;var b=1;try{var c=this.getNative(),d=c.type;d=="Text"&&(b=2),d=="Control"&&(b=3),c.createRange().parentElement&&(b=2)}catch(e){}return a.type=b}:function(){var a=this._.cache;if(a.type)return a.type;var b=2,c=this.getNative();if(!c)b=1;else if(c.rangeCount==1){var d=c.getRangeAt(0),e=d.startContainer;e==d.endContainer&&e.nodeType==1&&d.endOffset-d.startOffset==1&&o[e.childNodes[d.startOffset].nodeName.toLowerCase()]&&(b=3)}return a.type=b},getRanges:function(){var a=c?function(){function a(a){return(new d.node(a)).getIndex()}var b=function(b,c){b=b.duplicate(),b.collapse(c);var d=b.parentElement();if(!d.hasChildNodes())return{container:d,offset:0};var e=d.children,f,g=b.duplicate(),h=0,i=e.length-1,j=-1,k,l;while(h<=i){j=Math.floor((h+i)/2),f=e[j],g.moveToElementText(f),k=g.compareEndPoints("StartToStart",b);if(k>0)i=j-1;else{if(!(k<0))return{container:d,offset:a(f)};h=j+1}}if(j==-1||j==e.length-1&&k<0){g.moveToElementText(d),g.setEndPoint("StartToStart",b),l=g.text.replace(/(\r\n|\r)/g,"\n").length,e=d.childNodes;if(!l)return f=e[e.length-1],f.nodeType==1?{container:d,offset:e.length}:{container:f,offset:f.nodeValue.length};var m=e.length;while(l>0)l-=e[--m].nodeValue.length;return{container:e[m],offset:-l}}g.collapse(k>0?!0:!1),g.setEndPoint(k>0?"StartToStart":"EndToStart",b),l=g.text.replace(/(\r\n|\r)/g,"\n").length;if(!l)return{container:d,offset:a(f)+(k>0?0:1)};while(l>0){f=f[k>0?"previousSibling":"nextSibling"];try{l-=f.nodeValue.length}catch(n){return{container:d,offset:a(f)}}}return{container:f,offset:k>0?-l:f.nodeValue.length+l}};return function(){var a=this,c=a.getNative(),e=c&&c.createRange(),f=a.getType(),g;if(!c)return[];if(f==2){g=new d.range(a.document);var h=b(e,!0);return g.setStart(new d.node(h.container),h.offset),h=b(e),g.setEnd(new d.node(h.container),h.offset),g.endContainer.getPosition(g.startContainer)&4&&g.endOffset<=g.startContainer.getIndex()&&g.collapse(),[g]}if(f==3){var i=[];for(var j=0;j<e.length;j++){var k=e.item(j),l=k.parentNode,m=0;g=new d.range(a.document);for(;m<l.childNodes.length&&l.childNodes[m]!=k;m++);g.setStart(new d.node(l),m),g.setEnd(new d.node(l),m+1),i.push(g)}return i}return[]}}():function(){var a=[],b,c=this.document,e=this.getNative();if(!e)return a;e.rangeCount||(b=new d.range(c),b.moveToElementEditStart(c.getBody()),a.push(b));for(var f=0;f<e.rangeCount;f++){var g=e.getRangeAt(f);b=new d.range(c),b.setStart(new d.node(g.startContainer),g.startOffset),b.setEnd(new d.node(g.endContainer),g.endOffset),a.push(b)}return a};return function(b){var c=this._.cache;if(c.ranges&&!b)return c.ranges;c.ranges||(c.ranges=new d.rangeList(a.call(this)));if(b){var e=c.ranges;for(var f=0;f<e.length;f++){var g=e[f],h=g.getCommonAncestor();h.isReadOnly()&&e.splice(f,1);if(g.collapsed)continue;var i=g.startContainer,j=g.endContainer,k=g.startOffset,l=g.endOffset,m=g.clone(),n;(n=i.isReadOnly())&&g.setStartAfter(n),i&&i.type==3&&(k>=i.getLength()?m.setStartAfter(i):m.setStartBefore(i)),j&&j.type==3&&(l?m.setEndAfter(j):m.setEndBefore(j));var o=new d.walker(m);o.evaluator=function(a){if(a.type==1&&a.isReadOnly()){var b=g.clone();return g.setEndBefore(a),g.collapsed&&e.splice(f--,1),a.getPosition(m.endContainer)&16||(b.setStartAfter(a),b.collapsed||e.splice(f+1,0,b)),!0}return!1},o.next()}}return c.ranges}}(),getStartElement:function(){var a=this,b=a._.cache;if(b.startElement!==undefined)return b.startElement;var c,d=a.getNative();switch(a.getType()){case 3:return a.getSelectedElement();case 2:var e=a.getRanges()[0];if(e){if(!e.collapsed){e.optimize();for(;;){var f=e.startContainer,g=e.startOffset;if(g!=(f.getChildCount?f.getChildCount():f.getLength())||!!f.isBlockBoundary())break;e.setStartAfter(f)}c=e.startContainer;if(c.type!=1)return c.getParent();c=c.getChild(e.startOffset);if(!c||c.type!=1)c=e.startContainer
;else{var i=c.getFirst();while(i&&i.type==1)c=i,i=i.getFirst()}}else c=e.startContainer,c.type!=1&&(c=c.getParent());c=c.$}}return b.startElement=c?new h(c):null},getSelectedElement:function(){var a=this._.cache;if(a.selectedElement!==undefined)return a.selectedElement;var b=this,c=e.tryThese(function(){return b.getNative().createRange().item(0)},function(){var a=b.getRanges()[0],c,d;for(var e=2;e&&!((c=a.getEnclosedNode())&&c.type==1&&o[c.getName()]&&(d=c));e--)a.shrink(1);return d.$});return a.selectedElement=c?new h(c):null},lock:function(){var a=this;a.getRanges(),a.getStartElement(),a.getSelectedElement(),a._.cache.nativeSel={},a.isLocked=1,a.document.setCustomData("cke_locked_selection",a)},unlock:function(a){var b=this,c=b.document,d=c.getCustomData("cke_locked_selection");if(d){c.setCustomData("cke_locked_selection",null);if(a){var e=d.getSelectedElement(),f=!e&&d.getRanges();b.isLocked=0,b.reset(),c.getBody().focus(),e?b.selectElement(e):b.selectRanges(f)}}if(!d||!a)b.isLocked=0,b.reset()},reset:function(){this._.cache={}},selectElement:function(a){var b=this;if(b.isLocked){var e=new d.range(b.document);e.setStartBefore(a),e.setEndAfter(a),b._.cache.selectedElement=a,b._.cache.startElement=a,b._.cache.ranges=new d.rangeList(e),b._.cache.type=3;return}if(c){b.getNative().empty();try{e=b.document.$.body.createControlRange(),e.addElement(a.$),e.select()}catch(f){e=b.document.$.body.createTextRange(),e.moveToElementText(a.$),e.select()}finally{b.document.fire("selectionchange")}b.reset()}else{e=b.document.$.createRange(),e.selectNode(a.$);var g=b.getNative();g.removeAllRanges(),g.addRange(e),b.reset()}},selectRanges:function(a){var e=this;if(e.isLocked){e._.cache.selectedElement=null,e._.cache.startElement=a[0]&&a[0].getTouchedStartNode(),e._.cache.ranges=new d.rangeList(a),e._.cache.type=2;return}if(c){if(a.length>1){var f=a[a.length-1];a[0].setEnd(f.endContainer,f.endOffset),a.length=1}a[0]&&a[0].select(),e.reset()}else{var g=e.getNative();a.length&&g.removeAllRanges();for(var h=0;h<a.length;h++){if(h<a.length-1){var i=a[h],j=a[h+1],k=i.clone();k.setStart(i.endContainer,i.endOffset),k.setEnd(j.startContainer,j.startOffset);if(!k.collapsed){k.shrink(1,!0);var l=k.getCommonAncestor(),m=k.getEnclosedNode();if(l.isReadOnly()||m&&m.isReadOnly()){j.setStart(i.startContainer,i.startOffset),a.splice(h--,1);continue}}}var n=a[h],o=e.document.$.createRange(),p=n.startContainer;n.collapsed&&(b.opera||b.gecko&&b.version<10900)&&p.type==1&&!p.getChildCount()&&p.appendText(""),o.setStart(p.$,n.startOffset),o.setEnd(n.endContainer.$,n.endOffset),g.addRange(o)}e.reset()}},createBookmarks:function(a){return this.getRanges().createBookmarks(a)},createBookmarks2:function(a){return this.getRanges().createBookmarks2(a)},selectBookmarks:function(a){var b=[];for(var c=0;c<a.length;c++){var e=new d.range(this.document);e.moveToBookmark(a[c]),b.push(e)}return this.selectRanges(b),this},getCommonAncestor:function(){var a=this.getRanges(),b=a[0].startContainer,c=a[a.length-1].endContainer;return b.getCommonAncestor(c)},scrollIntoView:function(){var a=this.getStartElement();a.scrollIntoView()}}}(),function(){var a=d.walker.whitespaces(!0),b=/\ufeff|\u00a0/,e={table:1,tbody:1,tr:1};d.range.prototype.select=c?function(c){var d=this,f=d.collapsed,g,h;(d.startContainer.type==1&&d.startContainer.getName()in e||d.endContainer.type==1&&d.endContainer.getName()in e)&&d.shrink(1,!0);var i=d.createBookmark(),j=i.startNode,k;f||(k=i.endNode);var l=d.document.$.body.createTextRange();l.moveToElementText(j.$),l.moveStart("character",1);if(k){var p=d.document.$.body.createTextRange();p.moveToElementText(k.$),l.setEndPoint("EndToEnd",p),l.moveEnd("character",-1)}else{var q=j.getNext(a);g=!(q&&q.getText&&q.getText().match(b))&&(c||!j.hasPrevious()||j.getPrevious().is&&j.getPrevious().is("br")),h=d.document.createElement("span"),h.setHtml("&#65279;"),h.insertBefore(j),g&&d.document.createText("").insertBefore(j)}d.setStartBefore(j),j.remove(),f?(g?(l.moveStart("character",-1),l.select(),d.document.$.selection.clear()):l.select(),d.moveToPosition(h,3),h.remove()):(d.setEndBefore(k),k.remove(),l.select()),d.document.fire("selectionchange")}:function(){var a=this,b=a.startContainer;a.collapsed&&b.type==1&&!b.getChildCount()&&b.append(new d.text(""));var c=a.document.$.createRange();c.setStart(b.$,a.startOffset);try{c.setEnd(a.endContainer.$,a.endOffset)}catch(e){if(!(e.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")>=0))throw e;a.collapse(!0),c.setEnd(a.endContainer.$,a.endOffset)}var f=a.document.getSelection().getNative();f&&(f.removeAllRanges(),f.addRange(c))}}(),function(){var b={elements:{$:function(b){var c=b.attributes,d=c&&c["data-cke-realelement"],e=d&&new a.htmlParser.fragment.fromHtml(decodeURIComponent(d)),f=e&&e.children[0];if(f&&b.attributes["data-cke-resizable"]){var g=b.attributes.style;if(g){var h=/(?:^|\s)width\s*:\s*(\d+)/i.exec(g),i=h&&h[1];h=/(?:^|\s)height\s*:\s*(\d+)/i.exec(g);var j=h&&h[1];i&&(f.attributes.width=i),j&&(f.attributes.height=j)}}return f}}};j.add("fakeobjects",{requires:["htmlwriter"],afterInit:function(a){var c=a.dataProcessor,d=c&&c.htmlFilter;d&&d.addRules(b)}})}(),a.editor.prototype.createFakeElement=function(b,c,d,e){var f=this.lang.fakeobjects,g=f[d]||f.unknown,h={"class":c,src:a.getUrl("images/spacer.gif"),"data-cke-realelement":encodeURIComponent(b.getOuterHtml()),"data-cke-real-node-type":b.type,alt:g,title:g,align:b.getAttribute("align")||""};return d&&(h["data-cke-real-element-type"]=d),e&&(h["data-cke-resizable"]=e),this.document.createElement("img",{attributes:h})},a.editor.prototype.createFakeParserElement=function(b,c,d,e){var f=this.lang.fakeobjects,g=f[d]||f.unknown,h,i=new a.htmlParser.basicWriter;b.writeHtml(i),h=i.getHtml();var j={"class":c,src:a.getUrl("images/spacer.gif"),"data-cke-realelement":encodeURIComponent(h),"data-cke-real-node-type":b.type,alt:g,title:g,align:b.attributes.align||""};return d&&(j["data-cke-real-element-type"]=d),e&&(j["data-cke-resizable"]=e),new a.htmlParser.element("img",j)},a.editor.prototype.restoreRealElement=function(a){return a.data("cke-real-node-type")!=1?null:h.createFromHtml(decodeURIComponent(a.data("cke-realelement")),this.document)},j.add("richcombo",{requires:["floatpanel","listblock","button"],beforeInit:function(a){a.ui.addHandler(3,k.richCombo.handler)}}),a.UI_RICHCOMBO=3,k.richCombo=e.createClass({$:function(b){var c=this;e.extend(c,b,{title:b.label,modes:{wysiwyg:1}});var d=c.panel||{};delete c.panel,c.id=e.getNextNumber(),c.document=d&&d.parent&&d.parent.getDocument()||a.document,d.className=(d.className||"")+" cke_rcombopanel",d.block={multiSelect:d.multiSelect,attributes:d.attributes},c._={panelDefinition:d,items:{},state:2}},statics:{handler:{create:function(a){return new k.richCombo(a)}}},proto:{renderHtml:function(a){var b=[];return this.render(a,b),b.join("")},render:function(c,f){var g=b,i="cke_"+this.id,j=e.addFunction(function(a){var b=this,d=b._;if(d.state==0)return;b.createPanel(c);if(d.on){d.panel.hide();return}b.commit();var e=b.getValue();e?d.list.mark(e):d.list.unmarkAll(),d.panel.showBlock(b.id,new h(a),4)},this),k={id:i,combo:this,focus:function(){var b=a.document.getById(i).getChild(1);b.focus()},clickFn:j};c.on("mode",function(){this.setState(this.modes[c.mode]?2:0),this.setValue("")},this);var l=e.addFunction(function(a,b){a=new d.event(a);var c=a.getKeystroke();switch(c){case 13:case 32:case 40:e.callFunction(j,b);break;default:k.onkey(k,c)}a.preventDefault()});return k.keyDownFn=l,f.push('<span class="cke_rcombo">',"<span id=",i),this.className&&f.push(' class="',this.className,' cke_off"'),f.push(">",'<span id="'+i+'_label" class=cke_label>',this.label,"</span>",'<a hidefocus=true title="',this.title,'" tabindex="-1"',g.gecko&&g.version>=10900&&!g.hc?"":" href=\"javascript:void('"+this.label+"')\"",' role="button" aria-labelledby="',i,'_label" aria-describedby="',i,'_text" aria-haspopup="true"'),(b.opera||b.gecko&&b.mac)&&f.push(' onkeypress="return false;"'),b.gecko&&f.push(' onblur="this.style.cssText = this.style.cssText;"'),f.push(' onkeydown="CKEDITOR.tools.callFunction( ',l,', event, this );" onclick="CKEDITOR.tools.callFunction(',j,', this); return false;"><span><span id="'+i+'_text" class="cke_text cke_inline_label">'+this.label+"</span>"+"</span>"+"<span class=cke_openbutton>"+(b.hc?"<span>&#9660;</span>":b.air?"&nbsp;":"")+"</span>"+"</a>"+"</span>"+"</span>"),this.onRender&&this.onRender(),k},createPanel:function(b){if(this._.panel)return;var c=this._.panelDefinition,d=this._.panelDefinition.block,e=c.parent||a.document.getBody(),f=new k.floatPanel(b,e,c),g=f.addListBlock(this.id,d),h=this;f.onShow=function(){h.className&&this.element.getFirst().addClass(h.className+"_panel"),h.setState(1),g.focus(!h.multiSelect&&h.getValue()),h._.on=1,h.onOpen&&h.onOpen()},f.onHide=function(a){h.className&&this.element.getFirst().removeClass(h.className+"_panel"),h.setState(h.modes&&h.modes[b.mode]?2:0),h._.on=0,!a&&h.onClose&&h.onClose()},f.onEscape=function(){f.hide(),h.document.getById("cke_"+h.id).getFirst().getNext().focus()},g.onClick=function(a,b){h.document.getWindow().focus(),h.onClick&&h.onClick.call(h,a,b),b?h.setValue(a,h._.items[a]):h.setValue(""),f.hide()},this._.panel=f,this._.list=g,f.getBlock(this.id).onHide=function(){h._.on=0,h.setState(2)},this.init&&this.init()},setValue:function(a,b){var c=this;c._.value=a;var d=c.document.getById("cke_"+c.id+"_text");d&&(!a&&!b?(b=c.label,d.addClass("cke_inline_label")):d.removeClass("cke_inline_label"),d.setHtml(typeof b!="undefined"?b:a))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},showAll:function(){this._.list.showAll()},add:function(a,b,c){this._.items[a]=c||a,this._.list.add(a,b,c)},startGroup:function(a){this._.list.startGroup(a)},commit:function(){var a=this;a._.committed||(a._.list.commit(),a._.committed=1,k.fire("ready",a)),a._.committed=1},setState:function(a){var b=this;if(b._.state==a)return;b.document.getById("cke_"+b.id).setState(a),b._.state=a}}}),k.prototype.addRichCombo=function(a,b){this.add(a,3,b)},j.add("htmlwriter"),a.htmlWriter=e.createClass({base:a.htmlParser.basicWriter,$:function(){var a=this;a.base(),a.indentationChars="\t",a.selfClosingEnd=" />",a.lineBreakChars="\n",a.forceSimpleAmpersand=0,a.sortAttributes=1,a._.indent=0,a._.indentation="",a._.inPre=0,a._.rules={};var b=f;for(var c in e.extend({},b.$nonBodyContent,b.$block,b.$listItem,b.$tableContent))a.setRules(c,{indent:1,breakBeforeOpen:1,breakAfterOpen:1,breakBeforeClose:!b[c]["#"],breakAfterClose:1});a.setRules("br",{breakAfterOpen:1}),a.setRules("title",{indent:0,breakAfterOpen:0}),a.setRules("style",{indent:0,breakBeforeClose:1}),a.setRules("pre",{indent:0})},proto:{openTag:function(a,b){var c=this,d=c._.rules[a];c._.indent?c.indentation():d&&d.breakBeforeOpen&&(c.lineBreak(),c.indentation()),c._.output.push("<",a)},openTagClose:function(a,b){var c=this,d=c._.rules[a];b?c._.output.push(c.selfClosingEnd):(c._.output.push(">"),d&&d.indent&&(c._.indentation+=c.indentationChars)),d&&d.breakAfterOpen&&c.lineBreak(),a=="pre"&&(c._.inPre=1)},attribute:function(a,b){typeof b=="string"&&(this.forceSimpleAmpersand&&(b=b.replace(/&amp;/g,"&")),b=e.htmlEncodeAttr(b)),this._.output.push(" ",a,'="',b,'"')},closeTag:function(a){var b=this,c=b._.rules[a];c&&c.indent&&(b._.indentation=b._.indentation.substr(b.indentationChars.length)),b._.indent?b.indentation():c&&c.breakBeforeClose&&(b.lineBreak(),b.indentation()),b._.output.push("</",a,">"),a=="pre"&&(b._.inPre=0),c&&c.breakAfterClose&&b.lineBreak()},text:function(a){var b=this;b._.indent&&(b.indentation(),!b._.inPre&&(a=e.ltrim(a))),b._.output.push(a)},comment:function(a){this._.indent&&this.indentation(),this._.output.push("<!--",a,"-->")},lineBreak:function(){var a=this;!a._.inPre&&a._.output.length>0&&a._.output.push(a.lineBreakChars),a._.indent=1},indentation:function(){var a=this;a._.inPre||a._.output.push(a._.indentation),a._.indent=0},setRules:function(a,b){var c=this._.rules[a];c?e.extend(c,b,!0):this._.rules[a]=b}}}),j.add("menubutton",{requires:["button","menu"],beforeInit:function(a){a.ui.addHandler(5,k.menuButton.handler)}}),a.UI_MENUBUTTON=5,function(){var b=function(b){var c=this._;if(c.state===0)return;c.previousState=c.state;var d=c.menu;d||(d=c.menu=new a.menu(b,{panel:{className:b.skinClass+" cke_contextmenu",attributes:{"aria-label":b.lang.common.options}}}),d.onHide=e.bind(function(){this.setState(this.modes&&this.modes[b.mode]?c.previousState:0)},this),this.onMenu&&d.addListener(this.onMenu));if(c.on){d.hide();return}this.setState(1),d.show(a.document.getById(this._.id),4)};k.menuButton=e.createClass({base:k.button,$:function(a){var c=a.panel;delete a.panel,this.base(a),this.hasArrow=!0,this.click=b},statics:{handler:{create:function(a){return new k.menuButton(a)}}}})}(),j.add("dialogui"),function(){var f=function(a){var b=this;b._||(b._={}),b._["default"]=b._.initValue=a["default"]||"",b._.required=a.required||!1;var c=[b._];for(var d=1;d<arguments.length;d++)c.push(arguments[d]);return c.push(!0),e.extend.apply(e,c),b._},g={build:function(a,b,c){return new k.dialog.textInput(a,b,c)}},i={build:function(a,b,c){return new k.dialog[b.type](a,b,c)}},j={build:function(b,c,d){var e=c.children,f,g=[],h=[];for(var i=0;i<e.length&&(f=e[i]);i++){var j=[];g.push(j),h.push(a.dialog._.uiElementBuilders[f.type].build(b,f,j))}return new k.dialog[c.type](b,h,g,d,c)}},l={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(a){this.setValue(this.getInitValue(),a)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},m=e.extend({},k.dialog.uiElement.prototype.eventProcessors,{onChange:function(a,b){this._.domOnChangeRegistered||(a.on("load",function(){this.getInputElement().on("change",function(){if(!a.parts.dialog.isVisible())return;this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",b)}},!0),n=/^on([A-Z]\w+)/,o=function(a){for(var b in a)(n.test(b)||b=="title"||b=="type")&&delete a[b];return a};e.extend(k.dialog,{labeledElement:function(b,c,d,g){if(arguments.length<4)return;var h=f.call(this,c);h.labelId=e.getNextId()+"_label";var i=this._.children=[],j=function(){var d=[],f=c.required?" cke_required":"";if(c.labelLayout!="horizontal")d.push('<label class="cke_dialog_ui_labeled_label'+f+'" ',' id="'+h.labelId+'"',' for="'+h.inputId+'"',' style="'+c.labelStyle+'">',c.label,"</label>",'<div class="cke_dialog_ui_labeled_content" role="presentation">',g.call(this,b,c),"</div>");else{var i={type:"hbox",widths:c.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+f+'"'+' id="'+h.labelId+'"'+' for="'+h.inputId+'"'+' style="'+c.labelStyle+'">'+e.htmlEncode(c.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content">'+g.call(this,b,c)+"</span>"}]};a.dialog._.uiElementBuilders.hbox.build(b,i,d)}return d.join("")};k.dialog.uiElement.call(this,b,c,d,"div",null,{role:"presentation"},j)},textInput:function(a,b,c){if(arguments.length<3)return;f.call(this,b);var d=this._.inputId=e.getNextId()+"_textInput",g={"class":"cke_dialog_ui_input_"+b.type,id:d,type:"text"},h;b.validate&&(this.validate=b.validate),b.maxLength&&(g.maxlength=b.maxLength),b.size&&(g.size=b.size),b.controlStyle&&(g.style=b.controlStyle);var i=this,j=!1;a.on("load",function(){i.getInputElement().on("keydown",function(a){a.data.getKeystroke()==13&&(j=!0)}),i.getInputElement().on("keyup",function(b){b.data.getKeystroke()==13&&j&&(a.getButton("ok")&&setTimeout(function(){a.getButton("ok").click()},0),j=!1)},null,null,1e3)});var l=function(){var a=['<div class="cke_dialog_ui_input_',b.type,'" role="presentation"'];b.width&&a.push('style="width:'+b.width+'" '),a.push("><input "),g["aria-labelledby"]=this._.labelId,this._.required&&(g["aria-required"]=this._.required);for(var c in g)a.push(c+'="'+g[c]+'" ');return a.push(" /></div>"),a.join("")};k.dialog.labeledElement.call(this,a,b,c,l)},textarea:function(a,b,c){if(arguments.length<3)return;f.call(this,b);var d=this,g=this._.inputId=e.getNextId()+"_textarea",h={};b.validate&&(this.validate=b.validate),h.rows=b.rows||5,h.cols=b.cols||20;var i=function(){h["aria-labelledby"]=this._.labelId,this._.required&&(h["aria-required"]=this._.required);var a=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea class="cke_dialog_ui_input_textarea" id="',g,'" '];for(var b in h)a.push(b+'="'+e.htmlEncode(h[b])+'" ');return a.push(">",e.htmlEncode(d._["default"]),"</textarea></div>"),a.join("")};k.dialog.labeledElement.call(this,a,b,c,i)},checkbox:function(a,b,c){if(arguments.length<3)return;var d=f.call(this,b,{"default":!!b["default"]});b.validate&&(this.validate=b.validate);var g=function(){var c=e.extend({},b,{id:b.id?b.id+"_checkbox":e.getNextId()+"_checkbox"},!0),f=[],g=e.getNextId()+"_label",h={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":g};return o(c),b["default"]&&(h.checked="checked"),typeof c.controlStyle!="undefined"&&(c.style=c.controlStyle),d.checkbox=new k.dialog.uiElement(a,c,f,"input",null,h),f.push(' <label id="',g,'" for="',h.id,'">',e.htmlEncode(b.label),"</label>"),f.join("")};k.dialog.uiElement.call(this,a,b,c,"span",null,null,g)},radio:function(a,b,c){if(arguments.length<3)return;f.call(this,b),this._["default"]||(this._["default"]=this._.initValue=b.items[0][1]),b.validate&&(this.validate=b.valdiate);var d=[],g=this,h=function(){var c=[],f=[],h={"class":"cke_dialog_ui_radio_item","aria-labelledby":this._.labelId},i=b.id?b.id+"_radio":e.getNextId()+"_radio";for(var j=0;j<b.items.length;j++){var l=b.items[j],m=l[2]!==undefined?l[2]:l[0],n=l[1]!==undefined?l[1]:l[0],p=e.getNextId()+"_radio_input",q=p+"_label",r=e.extend({},b,{id:p,title:null,type:null},!0),s=e.extend({},r,{title:m},!0),w={type:"radio","class":"cke_dialog_ui_radio_input",name:i,value:n,"aria-labelledby":q},z=[];g._["default"]==n&&(w.checked="checked"),o(r),o(s),typeof r.controlStyle!="undefined"&&(r.style=r.controlStyle),d.push(new k.dialog.uiElement(a,r,z,"input",null,w)),z.push(" "),new k.dialog.uiElement(a,s,z,"label",null,{id:q,"for":w.id},l[0]),c.push(z.join(""))}return new k.dialog.hbox(a,[],c,f),f.join("")};k.dialog.labeledElement.call(this,a,b,c,h),this._.children=d},button:function(b,c,d){if(!arguments.length)return;typeof c=="function"&&(c=c(b.getParentEditor())),f.call(this,c,{disabled:c.disabled||!1}),a.event.implementOn(this);var g=this;b.on("load",function(a){var b=this.getElement();(function(){b.on("click",function(a){g.fire("click",{dialog:g.getDialog()}),a.data.preventDefault()}),b.on("keydown",function(a){a.data.getKeystroke()in{32:1}&&(g.click(),a.data.preventDefault())})})(),b.unselectable()},this);var h=e.extend({},c);delete h.style;var i=e.getNextId()+"_label";k.dialog.uiElement.call(this,b,h,d,"a",null,{style:c.style,href:"javascript:void(0)",title:c.label,hidefocus:"true","class":c["class"],role:"button","aria-labelledby":i},'<span id="'+i+'" class="cke_dialog_ui_button">'+e.htmlEncode(c.label)+"</span>")},select:function(a,b,c){if(arguments.length<3)return;var d=f.call(this,b);b.validate&&(this.validate=b.validate),d.inputId=e.getNextId()+"_select";var g=function(){var c=e.extend({},b,{id:b.id?b.id+"_select":e.getNextId()+"_select"},!0),f=[],g=[],h={id:d.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};b.size!=undefined&&(h.size=b.size),b.multiple!=undefined&&(h.multiple=b.multiple),o(c);for(var i=0,j;i<b.items.length&&(j=b.items[i]);i++)g.push('<option value="',e.htmlEncode(j[1]!==undefined?j[1]:j[0]),'" /> ',e.htmlEncode(j[0]));return typeof c.controlStyle!="undefined"&&(c.style=c.controlStyle),d.select=new k.dialog.uiElement(a,c,f,"select",null,h,g.join("")),f.join("")};k.dialog.labeledElement.call(this,a,b,c,g)},file:function(c,d,g){if(arguments.length<3)return;d["default"]===undefined&&(d["default"]="");var h=e.extend(f.call(this,d),{definition:d,buttons:[]});d.validate&&(this.validate=d.validate);var i=function(){h.frameId=e.getNextId()+"_fileInput";var a=b.isCustomDomain(),c=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',h.frameId,'" title="',d.label,'" src="javascript:void('];return c.push(a?"(function(){document.open();document.domain='"+document.domain+"';"+"document.close();"+"})()":"0"),c.push(')"></iframe>'),c.join("")};c.on("load",function(){var b=a.document.getById(h.frameId),c=b.getParent();c.addClass("cke_dialog_ui_input_file")}),k.dialog.labeledElement.call(this,c,d,g,i)},fileButton:function(a,b,c){if(arguments.length<3)return;var d=f.call(this,b),g=this;b.validate&&(this.validate=b.validate);var h=e.extend({},b),i=h.onClick;h.className=(h.className?h.className+" ":"")+"cke_dialog_ui_button",h.onClick=function(c){var d=b["for"];if(!i||i.call(this,c)!==!1)a.getContentElement(d[0],d[1]).submit(),this.disable()},a.on("load",function(){a.getContentElement(b["for"][0],b["for"][1])._.buttons.push(g)}),k.dialog.button.call(this,a,h,c)},html:function(){var a=/^\s*<[\w:]+\s+([^>]*)?>/,b=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,c=/\/$/;return function(d,e,f){if(arguments.length<3)return;var g=[],h,i=e.html,j,l;i.charAt(0)!="<"&&(i="<span>"+i+"</span>");var m=e.focus;if(m){var n=this.focus;this.focus=function(){n.call(this),typeof m=="function"&&m.call(this),this.fire("focus")};if(e.isFocusable){var o=this.isFocusable;this.isFocusable=o}this.keyboardFocusable=!0}k.dialog.uiElement.call(this,d,e,g,"span",null,null,""),h=g.join(""),j=h.match(a),l=i.match(b)||["","",""],c.test(l[1])&&(l[1]=l[1].slice(0,-1),l[2]="/"+l[2]),f.push([l[1]," ",j[1]||"",l[2]].join(""))}}(),fieldset:function(a,b,c,d,e){var f=e.label,g=function(){var a=[];f&&a.push("<legend>"+f+"</legend>");for(var b=0;b<c.length;b++)a.push(c[b]);return a.join("")};this._={children:b},k.dialog.uiElement.call(this,a,e,d,"fieldset",null,null,g)}},!0),k.dialog.html.prototype=new k.dialog.uiElement,k.dialog.labeledElement.prototype=e.extend(new k.dialog.uiElement,{setLabel:function(b){var c=a.document.getById(this._.labelId);return c.getChildCount()<1?(new d.text(b,a.document)).appendTo(c):c.getChild(0).$.nodeValue=b,this},getLabel:function(){var b=a.document.getById(this._.labelId);return!b||b.getChildCount()<1?"":b.getChild(0).getText()},eventProcessors:m},!0),k.dialog.button.prototype=e.extend(new k.dialog.uiElement,{click:function(){var a=this;return a._.disabled?(a.getElement().$.blur(),!1):a.fire("click",{dialog:a._.dialog})},enable:function(){this._.disabled=!1;var a=this.getElement();a&&a.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:e.extend({},k.dialog.uiElement.prototype.eventProcessors,{onClick:function(a,b){this.on("click",b)}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),k.dialog.textInput.prototype=e.extend(new k.dialog.labeledElement,{getInputElement:function(){return a.document.getById(this._.inputId)},focus:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&b.$.focus()},0)},select:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&(b.$.focus(),b.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(a){return!a&&(a=""),k.dialog.uiElement.prototype.setValue.apply(this,arguments)},keyboardFocusable:!0},l,!0),k.dialog.textarea.prototype=new k.dialog.textInput,k.dialog.select.prototype=e.extend(new k.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(a,b,d){var e=new h("option",this.getDialog().getParentEditor().document),f=this.getInputElement().$;return e.$.text=a,e.$.value=b===undefined||b===null?a:b,d===undefined||d===null?c?f.add(e.$):f.add(e.$,null):f.add(e.$,d),this},remove:function(a){var b=this.getInputElement().$;return b.remove(a),this},clear:function(){var a=this.getInputElement().$;while(a.length>0)a.remove(0);return this},keyboardFocusable:!0},l,!0),k.dialog.checkbox.prototype=e.extend(new k.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(a,b){this.getInputElement().$.checked=a,!b&&this.fire("change",{value:a})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(a,b){return c?(a.on("load",function(){var a=this._.checkbox.getElement();a.on("propertychange",function(b){b=b.data.$,b.propertyName=="checked"&&this.fire("change",{value:a.$.checked})},this)},this),this.on("change",b),null):m.onChange.apply(this,arguments)}},keyboardFocusable:!0},l,!0),k.dialog.radio.prototype=e.extend(new k.dialog.uiElement,{setValue:function(a,b){var c=this._.children,d;for(var e=0;e<c.length&&(d=c[e]);e++)d.getElement().$.checked=d.getValue()==a;!b&&this.fire("change",{value:a})},getValue:function(){var a=this._.children;for(var b=0;b<a.length;b++)if(a[b].getElement().$.checked)return a[b].getValue();return null},accessKeyUp:function(){var a=this._.children,b;for(b=0;b<a.length;b++)if(a[b].getElement().$.checked){a[b].getElement().focus();return}a[0].getElement().focus()},eventProcessors:{onChange:function(a,b){return c?(a.on("load",function(){var a=this._.children,b=this;for(var c=0;c<a.length;c++){var d=a[c].getElement();d.on("propertychange",function(a){a=a.data.$,a.propertyName=="checked"&&this.$.checked&&b.fire("change",{value:this.getAttribute("value")})})}},this),this.on("change",b),null):m.onChange.apply(this,arguments)}},keyboardFocusable:!0},l,!0),k.dialog.file.prototype=e.extend(new k.dialog.labeledElement,l,{getInputElement:function(){var b=a.document.getById(this._.frameId).getFrameDocument();return b.$.forms.length>0?new h(b.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(a){var b=/^on([A-Z]\w+)/,c,d=function(a,b,c,d){a.on("formLoaded",function(){a.getInputElement().on(c,d,a)})};for(var e in a){if(!(c=e.match(b)))continue;this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,c[1].toLowerCase(),a[e])}return this},reset:function(){function n(){g.$.open(),b.isCustomDomain()&&(g.$.domain=document.domain);var a="";h.size&&(a=h.size-(c?7:0)),g.$.write(['<html dir="'+l+'" lang="'+m+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+l+'" lang="'+m+'" action="',e.htmlEncode(h.action),'">','<input type="file" name="',e.htmlEncode(h.id||"cke_upload"),'" size="',e.htmlEncode(a>0?a:""),'" />',"</form>","</body></html>","<script>window.parent.CKEDITOR.tools.callFunction("+j+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+k+")}</script>"].join("")),g.$.close();for(var d=0;d<i.length;d++)i[d].enable()}var d=this._,f=a.document.getById(d.frameId),g=f.getFrameDocument(),h=d.definition,i=d.buttons,j=this.formLoadedNumber,k=this.formUnloadNumber,l=d.dialog._.editor.lang.dir,m=d.dialog._.editor.langCode;j||(j=this.formLoadedNumber=e.addFunction(function(){this.fire("formLoaded")},this),k=this.formUnloadNumber=e.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){e.removeFunction(j),e.removeFunction(k)})),b.gecko?setTimeout(n,500):n()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(a,b){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",b)}},keyboardFocusable:!0},!0),k.dialog.fileButton.prototype=new k.dialog.button,k.dialog.fieldset.prototype=e.clone(k.dialog.hbox.prototype),a.dialog.addUIElement("text",g),a.dialog.addUIElement("password",g),a.dialog.addUIElement("textarea",i),a.dialog.addUIElement("checkbox",i),a.dialog.addUIElement("radio",i),a.dialog.addUIElement("button",i),a.dialog.addUIElement("select",i),a.dialog.addUIElement("file",i),a.dialog.addUIElement("fileButton",i),a.dialog.addUIElement("html",i),a.dialog.addUIElement("fieldset",j)}(),j.add("panel",{beforeInit:function(a){a.ui.addHandler(2,k.panel.handler)}}),a.UI_PANEL=2,k.panel=function(a,b){var c=this;b&&e.extend(c,b),e.extend(c,{className:"",css:[]}),c.id=e.getNextId(),c.document=a,c._={blocks:{}}},k.panel.handler={create:function(a){return new k.panel(a)}},k.panel.prototype={renderHtml:function(a){var b=[];return this.render(a,b),b.join("")},render:function(a,c){var d=this,e=d.id;c.push('<div class="',a.skinClass,'" lang="',a.langCode,'" role="presentation" style="display:none;z-index:'+(a.config.baseFloatZIndex+1)+'">'+"<div"+" id=",e," dir=",a.lang.dir,' role="presentation" class="cke_panel cke_',a.lang.dir),d.className&&c.push(" ",d.className),c.push('">');if(d.forceIFrame||d.css.length)c.push('<iframe id="',e,'_frame" frameborder="0" role="application" src="javascript:void('),c.push(b.isCustomDomain()?"(function(){document.open();document.domain='"+document.domain+"';"+"document.close();"+"})()":"0"),c.push(')"></iframe>');return c.push("</div></div>"),e},getHolderElement:function(){var c=this._.holder;if(!c){if(this.forceIFrame||this.css.length){var d=this.document.getById(this.id+"_frame"),f=d.getParent(),g=f.getAttribute("dir"),h=f.getParent().getAttribute("class"),i=f.getParent().getAttribute("lang"),j=d.getFrameDocument(),k=e.addFunction(e.bind(function(a){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),l='<!DOCTYPE html><html dir="'+g+'" class="'+h+'_container" lang="'+i+'">'+"<head>"+"<style>."+h+"_container{visibility:hidden}</style>"+"</head>"+'<body class="cke_'+g+" cke_panel_frame "+b.cssClass+'" style="margin:0;padding:0"'+' onload="( window.CKEDITOR || window.parent.CKEDITOR ).tools.callFunction('+k+');"></body>'+e.buildStyleHtml(this.css)+"</html>";j.write(l);var m=j.getWindow();m.$.CKEDITOR=a,j.on("key"+(b.opera?"press":"down"),function(a){var b=this,c=a.data.getKeystroke(),d=b.document.getById(b.id).getAttribute("dir");if(b._.onKeyDown&&b._.onKeyDown(c)===!1){a.data.preventDefault();return}(c==27||c==(d=="rtl"?39:37))&&b.onEscape&&b.onEscape(c)===!1&&a.data.preventDefault()},this),c=j.getBody(),c.unselectable(),b.air&&e.callFunction(k)}else c=this.document.getById(this.id);this._.holder=c}return c},addBlock:function(a,b){var c=this;return b=c._.blocks[a]=b instanceof k.panel.block?b:new k.panel.block(c.getHolderElement(),b),c._.currentBlock||c.showBlock(a),b},getBlock:function(a){return this._.blocks[a]},showBlock:function(b){var c=this._.blocks,d=c[b],f=this._.currentBlock,g=this.forceIFrame?this.document.getById(this.id+"_frame"):this._.holder;return g.getParent().getParent().disableContextMenu(),f&&(g.removeAttributes(f.attributes),f.hide()),this._.currentBlock=d,g.setAttributes(d.attributes),a.fire("ariaWidget",g),d._.focusIndex=-1,this._.onKeyDown=d.onKeyDown&&e.bind(d.onKeyDown,d),d.onMark=function(a){g.setAttribute("aria-activedescendant",a.getId()+"_option")},d.onUnmark=function(){g.removeAttribute("aria-activedescendant")},d.show(),d},destroy:function(){this.element&&this.element.remove()}},k.panel.block=e.createClass({$:function(a,b){var c=this;c.element=a.append(a.getDocument().createElement("div",{attributes:{tabIndex:-1,"class":"cke_panel_block",role:"presentation"},styles:{display:"none"}})),b&&e.extend(c,b),c.attributes.title||(c.attributes.title=c.attributes["aria-label"]),c.keys={},c._.focusIndex=-1,c.element.disableContextMenu()},_:{markItem:function(a){var c=this;if(a==-1)return;var d=c.element.getElementsByTag("a"),e=d.getItem(c._.focusIndex=a);(b.webkit||b.opera)&&e.getDocument().getWindow().focus(),e.focus(),c.onMark&&c.onMark(e)}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){var a=this;(!a.onHide||a.onHide.call(a)!==!0)&&a.element.setStyle("display","none")},onKeyDown:function(a){var b=this,c=b.keys[a];switch(c){case"next":var d=b._.focusIndex,e=b.element.getElementsByTag("a"),f;while(f=e.getItem(++d))if(f.getAttribute("_cke_focus")&&f.$.offsetWidth){b._.focusIndex=d,f.focus();break}return!1;case"prev"
:d=b._.focusIndex,e=b.element.getElementsByTag("a");while(d>0&&(f=e.getItem(--d)))if(f.getAttribute("_cke_focus")&&f.$.offsetWidth){b._.focusIndex=d,f.focus();break}return!1;case"click":return d=b._.focusIndex,f=d>=0&&b.element.getElementsByTag("a").getItem(d),f&&(f.$.click?f.$.click():f.$.onclick()),!1}return!0}}}),j.add("listblock",{requires:["panel"],onLoad:function(){k.panel.prototype.addListBlock=function(a,b){return this.addBlock(a,new k.listBlock(this.getHolderElement(),b))},k.listBlock=e.createClass({base:k.panel.block,$:function(a,b){var c=this;b=b||{};var d=b.attributes||(b.attributes={});(c.multiSelect=!!b.multiSelect)&&(d["aria-multiselectable"]=!0),!d.role&&(d.role="listbox"),c.base.apply(c,arguments);var e=c.keys;e[40]="next",e[9]="next",e[38]="prev",e[2009]="prev",e[32]="click",c._.pendingHtml=[],c._.items={},c._.groups={}},_:{close:function(){this._.started&&(this._.pendingHtml.push("</ul>"),delete this._.started)},getClick:function(){return this._.click||(this._.click=e.addFunction(function(a){var b=this,c=!0;b.multiSelect?c=b.toggle(a):b.mark(a),b.onClick&&b.onClick(a,c)},this)),this._.click}},proto:{add:function(a,b,c){var d=this,f=d._.pendingHtml,g=e.getNextId();d._.started||(f.push('<ul role="presentation" class=cke_panel_list>'),d._.started=1,d._.size=d._.size||0),d._.items[a]=g,f.push("<li id=",g,' class=cke_panel_listItem role=presentation><a id="',g,'_option" _cke_focus=1 hidefocus=true title="',c||a,'" href="javascript:void(\'',a,'\')" onclick="CKEDITOR.tools.callFunction(',d._.getClick(),",'",a,"'); return false;\"",' role="option" aria-posinset="'+ ++d._.size+'">',b||a,"</a></li>")},startGroup:function(a){this._.close();var b=e.getNextId();this._.groups[a]=b,this._.pendingHtml.push('<h1 role="presentation" id=',b," class=cke_panel_grouptitle>",a,"</h1>")},commit:function(){var a=this;a._.close(),a.element.appendHtml(a._.pendingHtml.join(""));var b=a._.items,c=a.element.getDocument();for(var d in b)c.getById(b[d]+"_option").setAttribute("aria-setsize",a._.size);delete a._.size,a._.pendingHtml=[]},toggle:function(a){var b=this.isMarked(a);return b?this.unmark(a):this.mark(a),!b},hideGroup:function(a){var b=this.element.getDocument().getById(this._.groups[a]),c=b&&b.getNext();b&&(b.setStyle("display","none"),c&&c.getName()=="ul"&&c.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var a=this._.items,b=this._.groups,c=this.element.getDocument();for(var d in a)c.getById(a[d]).setStyle("display","");for(var e in b){var f=c.getById(b[e]),g=f.getNext();f.setStyle("display",""),g&&g.getName()=="ul"&&g.setStyle("display","")}},mark:function(a){var b=this;b.multiSelect||b.unmarkAll();var c=b._.items[a],d=b.element.getDocument().getById(c);d.addClass("cke_selected"),b.element.getDocument().getById(c+"_option").setAttribute("aria-selected",!0),b.element.setAttribute("aria-activedescendant",c+"_option"),b.onMark&&b.onMark(d)},unmark:function(a){var b=this;b.element.getDocument().getById(b._.items[a]).removeClass("cke_selected"),b.onUnmark&&b.onUnmark(b._.items[a])},unmarkAll:function(){var a=this,b=a._.items,c=a.element.getDocument();for(var d in b)c.getById(b[d]).removeClass("cke_selected");a.onUnmark&&a.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;if(a){var b=this.element.getDocument().getById(this._.items[a]).getFirst(),c=this.element.getElementsByTag("a"),d,e=-1;while(d=c.getItem(++e))if(d.equals(b)){this._.focusIndex=e;break}setTimeout(function(){b.focus()},0)}}}})}}),a.themes.add("default",function(){function d(c,d){var e,f;f=c.config.sharedSpaces,f=f&&f[d],f=f&&a.document.getById(f);if(f){var g='<span class="cke_shared " dir="'+c.lang.dir+'"'+">"+'<span class="'+c.skinClass+" "+c.id+" cke_editor_"+c.name+'">'+'<span class="'+b.cssClass+'">'+'<span class="cke_wrapper cke_'+c.lang.dir+'">'+'<span class="cke_editor">'+'<div class="cke_'+d+'">'+"</div></span></span></span></span></span>",i=f.append(h.createFromHtml(g,f.getDocument()));f.getCustomData("cke_hasshared")?i.hide():f.setCustomData("cke_hasshared",1),e=i.getChild([0,0,0,0]),!c.sharedSpaces&&(c.sharedSpaces={}),c.sharedSpaces[d]=e,c.on("focus",function(){for(var a=0,b,c=f.getChildren();b=c.getItem(a);a++)b.type==1&&!b.equals(i)&&b.hasClass("cke_shared")&&b.hide();i.show()}),c.on("destroy",function(){i.remove()})}return e}return{build:function(a,c){var e=a.name,f=a.element,g=a.elementMode;if(!f||g==0)return;g==1&&f.hide();var i=a.fire("themeSpace",{space:"top",html:""}).html,j=a.fire("themeSpace",{space:"contents",html:""}).html,k=a.fireOnce("themeSpace",{space:"bottom",html:""}).html,l=j&&a.config.height,n=a.config.tabIndex||a.element.getAttribute("tabindex")||0;j?isNaN(l)||(l+="px"):l="auto";var o="",p=a.config.width;p&&(isNaN(p)||(p+="px"),o+="width: "+p+";");var q=i&&d(a,"top"),r=d(a,"bottom");q&&(q.setHtml(i),i=""),r&&(r.setHtml(k),k="");var s=h.createFromHtml(['<span id="cke_',e,'" class="',a.skinClass," ",a.id," cke_editor_",e,'" dir="',a.lang.dir,'" title="',b.gecko?" ":"",'" lang="',a.langCode,'"'+(b.webkit?' tabindex="'+n+'"':"")+' role="application"'+' aria-labelledby="cke_',e,'_arialbl"'+(o?' style="'+o+'"':"")+">"+'<span id="cke_',e,'_arialbl" class="cke_voice_label">'+a.lang.editor+"</span>"+'<span class="',b.cssClass,'" role="presentation"><span class="cke_wrapper cke_',a.lang.dir,'" role="presentation"><table class="cke_editor" border="0" cellspacing="0" cellpadding="0" role="presentation"><tbody><tr',i?"":' style="display:none"',' role="presentation"><td id="cke_top_',e,'" class="cke_top" role="presentation">',i,"</td></tr><tr",j?"":' style="display:none"',' role="presentation"><td id="cke_contents_',e,'" class="cke_contents" style="height:',l,'" role="presentation">',j,"</td></tr><tr",k?"":' style="display:none"',' role="presentation"><td id="cke_bottom_',e,'" class="cke_bottom" role="presentation">',k,"</td></tr></tbody></table><style>.",a.skinClass,"{visibility:hidden;}</style></span></span></span>"].join(""));s.getChild([1,0,0,0,0]).unselectable(),s.getChild([1,0,0,0,2]).unselectable(),g==1?s.insertAfter(f):f.append(s),a.container=s,s.disableContextMenu(),a.fireOnce("themeLoaded"),a.fireOnce("uiReady")},buildDialog:function(a){var d=e.getNextNumber(),f=h.createFromHtml(['<div class="',a.id,"_dialog cke_editor_",a.name.replace(".","\\."),"_dialog cke_skin_",a.skinName,'" dir="',a.lang.dir,'" lang="',a.langCode,'" role="dialog" aria-labelledby="%title#"><table class="cke_dialog'," "+b.cssClass," cke_",a.lang.dir,'" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="%body" role="presentation"><div id="%title#" class="%title" role="presentation"></div><a id="%close_button#" class="%close_button" href="javascript:void(0)" title="'+a.lang.common.close+'" role="button"><span class="cke_label">X</span></a>'+'<div id="%tabs#" class="%tabs" role="tablist"></div>'+'<table class="%contents" role="presentation">'+"<tr>"+'<td id="%contents#" class="%contents" role="presentation"></td>'+"</tr>"+"<tr>"+'<td id="%footer#" class="%footer" role="presentation"></td>'+"</tr>"+"</table>"+"</div>"+'<div id="%tl#" class="%tl"></div>'+'<div id="%tc#" class="%tc"></div>'+'<div id="%tr#" class="%tr"></div>'+'<div id="%ml#" class="%ml"></div>'+'<div id="%mr#" class="%mr"></div>'+'<div id="%bl#" class="%bl"></div>'+'<div id="%bc#" class="%bc"></div>'+'<div id="%br#" class="%br"></div>'+"</td></tr>"+"</table>",c?"":"<style>.cke_dialog{visibility:hidden;}</style>","</div>"].join("").replace(/#/g,"_"+d).replace(/%/g,"cke_dialog_")),g=f.getChild([0,0,0,0,0]),i=g.getChild(0),j=g.getChild(1);return i.unselectable(),j.unselectable(),{element:f,parts:{dialog:f.getChild(0),title:i,close:j,tabs:g.getChild(2),contents:g.getChild([3,0,0,0]),footer:g.getChild([3,0,1,0])}}},destroy:function(a){var b=a.container,c=a.element;b&&(b.clearCustomData(),b.remove()),c&&(c.clearCustomData(),a.elementMode==1&&c.show(),delete a.element)}}}()),a.editor.prototype.getThemeSpace=function(b){var c="cke_"+b,d=this._[c]||(this._[c]=a.document.getById(c+"_"+this.name));return d},a.editor.prototype.resize=function(c,d,e,f){var g=this.container,h=a.document.getById("cke_contents_"+this.name),i=f?g.getChild(1):g;b.webkit&&i.setStyle("display","none"),i.setSize("width",c,!0),b.webkit&&(i.$.offsetWidth,i.setStyle("display",""));var j=e?0:(i.$.offsetHeight||0)-(h.$.clientHeight||0);h.setStyle("height",Math.max(d-j,0)+"px"),this.fire("resize")},a.editor.prototype.getResizable=function(){return this.container}})()