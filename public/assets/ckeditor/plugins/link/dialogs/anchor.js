/*
Copyright (c) 2003-2011, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
CKEDITOR.dialog.add("anchor",function(a){var b=function(a,b,c){var d=this;d.editMode=!0,d.editObj=c;var e=d.editObj.getAttribute("name");e?d.setValueOf("info","txtName",e):d.setValueOf("info","txtName","")};return{title:a.lang.anchor.title,minWidth:300,minHeight:60,onOk:function(){var b=this,c=b.getValueOf("info","txtName"),d=CKEDITOR.env.ie?a.document.createElement('<a name="'+CKEDITOR.tools.htmlEncode(c)+'">'):a.document.createElement("a");b.editMode&&(b.editObj.copyAttributes(d,{name:1}),b.editObj.moveChildren(d)),d.data("cke-saved-name",!1),d.setAttribute("name",c);var e=a.createFakeElement(d,"cke_anchor","anchor");return b.editMode?(e.replace(b.fakeObj),a.getSelection().selectElement(e)):a.insertElement(e),!0},onShow:function(){var c=this;c.editObj=!1,c.fakeObj=!1,c.editMode=!1;var d=a.getSelection(),e=d.getSelectedElement();e&&e.data("cke-real-element-type")&&e.data("cke-real-element-type")=="anchor"&&(c.fakeObj=e,e=a.restoreRealElement(c.fakeObj),b.apply(c,[a,d,e]),d.selectElement(c.fakeObj)),c.getContentElement("info","txtName").focus()},contents:[{id:"info",label:a.lang.anchor.title,accessKey:"I",elements:[{type:"text",id:"txtName",label:a.lang.anchor.name,required:!0,validate:function(){return this.getValue()?!0:(alert(a.lang.anchor.errorName),!1)}}]}]}})