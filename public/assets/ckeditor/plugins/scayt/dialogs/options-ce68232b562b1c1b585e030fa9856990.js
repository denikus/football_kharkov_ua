/*
Copyright (c) 2003-2011, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
CKEDITOR.dialog.add("scaytcheck",function(a){function k(){return document.forms.optionsbar.options}function l(){return document.forms.languagesbar.scayt_lang}function m(a,b){if(!a)return;var c=a.length;if(c==undefined){a.checked=a.value==b.toString();return}for(var d=0;d<c;d++)a[d].checked=!1,a[d].value==b.toString()&&(a[d].checked=!0)}function t(a){d.getById("dic_message").setHtml('<span style="color:red;">'+a+"</span>")}function u(a){d.getById("dic_message").setHtml('<span style="color:blue;">'+a+"</span>")}function v(a){a=String(a);var b=a.split(",");for(var c=0,e=b.length;c<e;c+=1)d.getById(b[c]).$.style.display="inline"}function w(a){a=String(a);var b=a.split(",");for(var c=0,e=b.length;c<e;c+=1)d.getById(b[c]).$.style.display="none"}function x(a){d.getById("dic_name").$.value=a}var b=!0,c,d=CKEDITOR.document,e=[],f,g=[],h=0,i=["dic_create,dic_restore","dic_rename,dic_delete"],j=["mixedCase","mixedWithDigits","allCaps","ignoreDomainNames"],n=a.lang.scayt,o=[{id:"options",label:n.optionsTab,elements:[{type:"html",id:"options",html:'<form name="optionsbar"><div class="inner_options">\t<div class="messagebox"></div>\t<div style="display:none;">\t\t<input type="checkbox" name="options"  id="allCaps" />\t\t<label for="allCaps" id="label_allCaps"></label>\t</div>\t<div style="display:none;">\t\t<input name="options" type="checkbox"  id="ignoreDomainNames" />\t\t<label for="ignoreDomainNames" id="label_ignoreDomainNames"></label>\t</div>\t<div style="display:none;">\t<input name="options" type="checkbox"  id="mixedCase" />\t\t<label for="mixedCase" id="label_mixedCase"></label>\t</div>\t<div style="display:none;">\t\t<input name="options" type="checkbox"  id="mixedWithDigits" />\t\t<label for="mixedWithDigits" id="label_mixedWithDigits"></label>\t</div></div></form>'}]},{id:"langs",label:n.languagesTab,elements:[{type:"html",id:"langs",html:'<form name="languagesbar"><div class="inner_langs">\t<div class="messagebox"></div>\t   <div style="float:left;width:45%;margin-left:5px;" id="scayt_lcol" ></div>   <div style="float:left;width:45%;margin-left:15px;" id="scayt_rcol"></div></div></form>'}]},{id:"dictionaries",label:n.dictionariesTab,elements:[{type:"html",style:"",id:"dictionaries",html:'<form name="dictionarybar"><div class="inner_dictionary" style="text-align:left; white-space:normal; width:320px; overflow: hidden;">\t<div style="margin:5px auto; width:80%;white-space:normal; overflow:hidden;" id="dic_message"> </div>\t<div style="margin:5px auto; width:80%;white-space:normal;">        <span class="cke_dialog_ui_labeled_label" >Dictionary name</span><br>\t\t<span class="cke_dialog_ui_labeled_content" >\t\t\t<div class="cke_dialog_ui_input_text">\t\t\t\t<input id="dic_name" type="text" class="cke_dialog_ui_input_text"/>\t\t</div></span></div>\t\t<div style="margin:5px auto; width:80%;white-space:normal;">\t\t\t<a style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_create">\t\t\t\t</a>\t\t\t<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_delete">\t\t\t\t</a>\t\t\t<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_rename">\t\t\t\t</a>\t\t\t<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_restore">\t\t\t\t</a>\t\t</div>\t<div style="margin:5px auto; width:95%;white-space:normal;" id="dic_info"></div></div></form>'}]},{id:"about",label:n.aboutTab,elements:[{type:"html",id:"about",style:"margin: 5px 5px;",html:'<div id="scayt_about"></div>'}]}],p={title:n.title,minWidth:360,minHeight:220,onShow:function(){var d=this;d.data=a.fire("scaytDialog",{}),d.options=d.data.scayt_control.option(),d.sLang=d.data.scayt_control.sLang;if(!d.data||!d.data.scayt||!d.data.scayt_control){alert("Error loading application service"),d.hide();return}var e=0;b?d.data.scayt.getCaption(a.langCode||"en",function(a){if(e++>0)return;c=a,r.apply(d),s.apply(d),b=!1}):s.apply(d),d.selectPage(d.data.tab)},onOk:function(){var a=this.data.scayt_control;a.option(this.options);var b=this.chosed_lang;a.setLang(b),a.refresh()},onCancel:function(){var a=k();for(var b in a)a[b].checked=!1;m(l(),"")},contents:g},q=CKEDITOR.plugins.scayt.getScayt(a);e=CKEDITOR.plugins.scayt.uiTabs;for(f in e)e[f]==1&&(g[g.length]=o[f]);e[2]==1&&(h=1);var r=function(){function B(a){var b=d.getById("dic_name").getValue();if(!b)return t(" Dictionary name should not be empty. "),!1;try{var c=id=a.data.getTarget().getParent(),e=c.getId();A[e].apply(null,[c,b,i])}catch(f){t(" Dictionary error. ")}return!0}var a=this,b=a.data.scayt.getLangList(),f=["dic_create","dic_delete","dic_rename","dic_restore"],g=j,k;if(h){for(k=0;k<f.length;k++){var l=f[k];d.getById(l).setHtml('<span class="cke_dialog_ui_button">'+c["button_"+l]+"</span>")}d.getById("dic_info").setHtml(c.dic_info)}if(e[0]==1)for(k in g){var m="label_"+g[k],n=d.getById(m);if("undefined"!=typeof n&&"undefined"!=typeof c[m]&&"undefined"!=typeof a.options[g[k]]){n.setHtml(c[m]);var o=n.getParent();o.$.style.display="block"}}var p='<p><img src="'+window.scayt.getAboutInfo().logoURL+'" /></p>'+"<p>"+c.version+window.scayt.getAboutInfo().version.toString()+"</p>"+"<p>"+c.about_throwt_copy+"</p>";d.getById("scayt_about").setHtml(p);var q=function(b,c){var e=d.createElement("label");e.setAttribute("for","cke_option"+b),e.setHtml(c[b]),a.sLang==b&&(a.chosed_lang=b);var f=d.createElement("div"),g=CKEDITOR.dom.element.createFromHtml('<input id="cke_option'+b+'" type="radio" '+(a.sLang==b?'checked="checked"':"")+' value="'+b+'" name="scayt_lang" />');return g.on("click",function(){this.$.checked=!0,a.chosed_lang=b}),f.append(g),f.append(e),{lang:c[b],code:b,radio:f}},r=[];if(e[1]==1){for(k in b.rtl)r[r.length]=q(k,b.ltr);for(k in b.ltr)r[r.length]=q(k,b.ltr);r.sort(function(a,b){return b.lang>a.lang?-1:1});var s=d.getById("scayt_lcol"),y=d.getById("scayt_rcol");for(k=0;k<r.length;k++){var z=k<r.length/2?s:y;z.append(r[k].radio)}}var A={};A.dic_create=function(a,b,d){var e=d[0]+","+d[1],f=c.err_dic_create,g=c.succ_dic_create;window.scayt.createUserDictionary(b,function(a){w(e),v(d[1]),g=g.replace("%s",a.dname),u(g)},function(a){f=f.replace("%s",a.dname),t(f+"( "+(a.message||"")+")")})},A.dic_rename=function(a,b){var d=c.err_dic_rename||"",e=c.succ_dic_rename||"";window.scayt.renameUserDictionary(b,function(a){e=e.replace("%s",a.dname),x(b),u(e)},function(a){d=d.replace("%s",a.dname),x(b),t(d+"( "+(a.message||"")+" )")})},A.dic_delete=function(a,b,d){var e=d[0]+","+d[1],f=c.err_dic_delete,g=c.succ_dic_delete;window.scayt.deleteUserDictionary(function(a){g=g.replace("%s",a.dname),w(e),v(d[0]),x(""),u(g)},function(a){f=f.replace("%s",a.dname),t(f)})},A.dic_restore=a.dic_restore||function(a,b,d){var e=d[0]+","+d[1],f=c.err_dic_restore,g=c.succ_dic_restore;window.scayt.restoreUserDictionary(b,function(a){g=g.replace("%s",a.dname),w(e),v(d[1]),u(g)},function(a){f=f.replace("%s",a.dname),t(f)})};var C=(i[0]+","+i[1]).split(","),D;for(k=0,D=C.length;k<D;k+=1){var E=d.getById(C[k]);E&&E.on("click",B,this)}},s=function(){var a=this;if(e[0]==1){var c=k();for(var f=0,g=c.length;f<g;f++){var j=c[f].id,l=d.getById(j);l&&(c[f].checked=!1,a.options[j]==1&&(c[f].checked=!0),b&&l.on("click",function(){a.options[this.getId()]=this.$.checked?1:0}))}}if(e[1]==1){var n=d.getById("cke_option"+a.sLang);m(n.$,a.sLang)}h&&(window.scayt.getNameUserDictionary(function(a){var b=a.dname;w(i[0]+","+i[1]),b?(d.getById("dic_name").setValue(b),v(i[1])):v(i[0])},function(){d.getById("dic_name").setValue("")}),u(""))};return p})